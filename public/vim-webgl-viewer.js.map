{"version":3,"file":"vim-webgl-viewer.js","mappings":"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BmKxBC,c+BnKwB,krB/BoKxBC,WgCpKwB,+DhCqKxBC,gBiCrKwB,4DjCsKxBC,akCtKwB,0SlCuKxBC,kBmCvKwB,4NnCwKxBC,0BoCxKwB,gcpCyKxBC,kBqCzKwB,6QrC0KxBC,uBsC1KwB,yGtC2KxBC,sBuC3KwB,mgGvC4KxBC,kBwC5KwB,6iKxC6KxBC,qByC7KwB,wEzC8KxBC,0B0C9KwB,mhC1C+KxBC,sB2C/KwB,0M3CgLxBC,2B4ChLwB,m1C5CiLxBC,yB6CjLwB,y8C7CkLxBC,8B8ClLwB,wqM9CmLxBC,sB+CnLwB,ikJ/CoLxBC,qBgDpLwB,4iChDqLxBC,oBiDrLwB,yRjDsLxBC,qBkDtLwB,4SlDuLxBC,0BmDvLwB,iLnDwLxBC,wBoDxLwB,sMpDyLxBC,mBqDzLwB,qZrD0LxBC,asD1LwB,8JtD2LxBC,kBuD3LwB,2DvD4LxBC,sBwD5LwB,sWxD6LxBC,2ByD7LwB,2NzD8LxBC,sB0D9LwB,8Q1D+LxBC,2B2D/LwB,6E3DgMxBC,mB4DhMwB,wrB5DiMxBC,wB6DjMwB,4O7DkMxBC,mB8DlMwB,69B9DmMxBC,sB+DnMwB,8iC/DoMxBC,qBgEpMwB,2vBhEqMxBC,wBiErMwB,qrCjEsMxBC,gCkEtMwB,6ElEuMxBC,+BmEvMwB,sXnEwMxBC,wBoExMwB,ySpEyMxBC,QqEzMwB,wvDrE0MxBC,6BsE1MwB,8MtE2MxBC,euE3MwB,kOvE4MxBC,mBwE5MwB,wFxE6MxBC,wByE7MwB,2mBzE8MxBC,sB0E9MwB,8Q1E+MxBC,2B2E/MwB,6E3EgNxBC,wB4EhNwB,yqV5EiNxBC,sB6EjNwB,86C7EkNxBC,iB8ElNwB,slD9EmNxBC,yB+EnNwB,wjD/EoNxBC,gBgFpNwB,0OhFqNxBC,qBiFrNwB,wjCjFsNxBC,gBkFtNwB,2YlFuNxBC,kBmFvNwB,qenFwNxBC,qBoFxNwB,wMpFyNxBC,0BqFzNwB,2ErF0NxBC,qBsF1NwB,qGtF2NxBC,0BuF3NwB,4hEvF4NxBC,yBwF5NwB,0GxF6NxBC,8ByF7NwB,mFzF8NxBC,iB0F9NwB,iG1F+NxBC,e2F/NwB,0J3FgOxBC,U4FhOwB,6E5FiOxBC,k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,CAI7D,GAFA0nC,EAAY5W,EAAWprC,IAAK,iCAET,OAAdgiD,EASJ,OAAO,KAPP,G3MuCgC,Q2MvC3B1nC,EAA6B,OAAO0nC,EAAUq3B,6BACnD,G3MuCiC,Q2MvC5B/+D,EAA8B,OAAO0nC,EAAUs3B,8BACpD,G3MuCiC,Q2MvC5Bh/D,EAA8B,OAAO0nC,EAAUu3B,8BACpD,G3MuCiC,Q2MvC5Bj/D,EAA8B,OAAO0nC,EAAUw3B,8BAUtD,G3M8BqC,Q2M9BhCl/D,G3M+BgC,Q2M/BCA,G3MgCA,Q2M/BrCA,G3MgCqC,Q2MhCHA,EAAiC,CAInE,GAFA0nC,EAAY5W,EAAWprC,IAAK,kCAET,OAAdgiD,EASJ,OAAO,KAPP,G3MuBmC,Q2MvB9B1nC,EAAgC,OAAO0nC,EAAUy3B,gCACtD,G3MuBmC,Q2MvB9Bn/D,EAAgC,OAAO0nC,EAAU03B,gCACtD,G3MuBoC,Q2MvB/Bp/D,EAAiC,OAAO0nC,EAAU23B,iCACvD,G3MuBoC,Q2MvB/Br/D,EAAiC,OAAO0nC,EAAU43B,iCAUzD,G3Mc6B,Q2MdxBt/D,EAIJ,OAFA0nC,EAAY5W,EAAWprC,IAAK,iCAET,OAAdgiD,EAEGA,EAAU63B,0BAIV,KAMT,I3MD6B,Q2MCxBv/D,G3MA6B,Q2MAJA,KAE7B0nC,EAAY5W,EAAWprC,IAAK,gCAET,OAAdgiD,GAAqB,CAEzB,G3MP2B,Q2MOtB1nC,EAAwB,OAAO0nC,EAAU83B,qBAC9C,G3MPgC,Q2MO3Bx/D,EAA6B,OAAO0nC,EAAU+3B,0BAMrD,O3MZkC,Q2MY7Bz/D,G3MX6B,Q2MWCA,G3MVD,Q2MU+BA,G3MT/B,Q2MUjCA,G3MTiC,Q2MSHA,G3MRG,Q2MQ2BA,G3MP3B,Q2MQjCA,G3MPiC,Q2MOHA,G3MNI,Q2MM0BA,G3ML1B,Q2MMlCA,G3MLkC,Q2MKHA,G3MJI,Q2MI2BA,G3MH3B,Q2MInCA,G3MHmC,Q2MGHA,G3MDS,Q2MEzCA,G3MDyC,Q2MCHA,G3MAG,Q2MAmCA,G3MCnC,Q2MAzCA,G3MCyC,Q2MDHA,G3MEG,Q2MFmCA,G3MGnC,Q2MFzCA,G3MGyC,Q2MHHA,G3MII,Q2MJkCA,G3MKlC,Q2MJ1CA,G3MK0C,Q2MLHA,G3MMI,Q2MNmCA,G3MOnC,Q2MN3CA,G3MO2C,Q2MPHA,GAExC0nC,EAAY5W,EAAWprC,IAAK,iCAET,OAAdgiD,EAIG1nC,EAIA,M3MnBqB,Q2MyBzBA,GAEJ0nC,EAAY5W,EAAWprC,IAAK,gCAET,OAAdgiD,EAIG1nC,EAIA,MAMJA,IAAMnZ,EAEL0wC,EAAkBF,EAAGqoC,mBAE1Bh4B,EAAY5W,EAAWprC,IAAK,uBAET,OAAdgiD,EAEGA,EAAUi4B,wBAIV,WAZT,ICzKF,SAASC,GAAa92E,EAAQ,IAE7B,QAAwBb,MAExBA,KAAK29D,QAAU98D,ECJhB,SAAS,KAER,QAAeb,MAEfA,KAAKH,KAAO,QCJb,SAAS+3E,KAER53E,KAAK63E,WAAa,KAClB73E,KAAK83E,MAAQ,KACb93E,KAAK+3E,MAAQ,KCEd,SAASC,GAAcrsC,EAAUyD,GAEhC,MAAMzI,EAAQ3mC,KAEd,IAAI6+C,EAAU,KAEVo5B,EAAyB,EAEzBC,EAAiB,KACjBC,EAAqB,cAErBC,EAAO,KAEX,MAAMC,EAAc,GACdC,EAAkB,IAAIC,IAItBC,EAAU,IAAI,GACpBA,EAAQpuD,OAAOL,OAAQ,GACvByuD,EAAQpkE,SAAW,IAAI/B,EAEvB,MAAMomE,EAAU,IAAI,GACpBA,EAAQruD,OAAOL,OAAQ,GACvB0uD,EAAQrkE,SAAW,IAAI/B,EAEvB,MAAMsrD,EAAU,CAAE6a,EAASC,GAErBC,EAAW,IAAIf,GACrBe,EAAStuD,OAAOL,OAAQ,GACxB2uD,EAAStuD,OAAOL,OAAQ,GAExB,IAAI4uD,EAAoB,KACpBC,EAAmB,KAuDvB,SAASC,EAAgBl4E,GAExB,MAAMm4E,EAAaR,EAAgB76E,IAAKkD,EAAMo4E,aAEzCD,GAEJA,EAAWp4E,cAAe,CAAEb,KAAMc,EAAMd,KAAMmR,KAAMrQ,EAAMo4E,cAM5D,SAASC,IAERV,EAAgBW,SAAS,SAAWH,EAAYC,GAE/CD,EAAWI,WAAYH,MAIxBT,EAAgBlrD,QAEhBurD,EAAoB,KACpBC,EAAmB,KAInBjtC,EAASwtC,eAAgB,MACzBxtC,EAASM,gBAAiBN,EAASK,mBACnCpc,EAAUmf,OAEVpI,EAAMyyC,cAAe,EAErBzyC,EAAMjmC,cAAe,CAAEb,KAAM,eAyF9B,SAASw5E,EAAsB14E,GAE9B,MAAM24E,EAAez6B,EAAQy6B,aAI7B,IAAM,IAAIv4E,EAAI,EAAGA,EAAIs3E,EAAYp3E,OAAQF,IAExCu3E,EAAgB3yE,IAAK2zE,EAAcv4E,GAAKs3E,EAAat3E,IAMtD,IAAM,IAAIA,EAAI,EAAGA,EAAIJ,EAAM44E,QAAQt4E,OAAQF,IAAO,CAEjD,MAAMg4E,EAAcp4E,EAAM44E,QAASx4E,GAC7B+3E,EAAaR,EAAgB76E,IAAKs7E,GAEnCD,IAEJA,EAAWp4E,cAAe,CAAEb,KAAM,eAAgBmR,KAAM+nE,IACxDT,EAAgB3oC,OAAQopC,IAQ1B,IAAM,IAAIh4E,EAAI,EAAGA,EAAIJ,EAAM64E,MAAMv4E,OAAQF,IAAO,CAE/C,MAAMg4E,EAAcp4E,EAAM64E,MAAOz4E,GAC3B+3E,EAAaR,EAAgB76E,IAAKs7E,GAEnCD,GAEJA,EAAWp4E,cAAe,CAAEb,KAAM,YAAamR,KAAM+nE,KAlNxD/4E,KAAK6qC,SAAU,EAEf7qC,KAAKo5E,cAAe,EAEpBp5E,KAAKy5E,cAAgB,SAAWj5E,GAE/B,IAAIs4E,EAAaT,EAAa73E,GAS9B,YAPoBT,IAAf+4E,IAEJA,EAAa,IAAIlB,GACjBS,EAAa73E,GAAUs4E,GAIjBA,EAAWY,qBAInB15E,KAAK25E,kBAAoB,SAAWn5E,GAEnC,IAAIs4E,EAAaT,EAAa73E,GAS9B,YAPoBT,IAAf+4E,IAEJA,EAAa,IAAIlB,GACjBS,EAAa73E,GAAUs4E,GAIjBA,EAAWc,gBAInB55E,KAAK65E,QAAU,SAAWr5E,GAEzB,IAAIs4E,EAAaT,EAAa73E,GAS9B,YAPoBT,IAAf+4E,IAEJA,EAAa,IAAIlB,GACjBS,EAAa73E,GAAUs4E,GAIjBA,EAAWgB,gBA2CnB95E,KAAK+5E,0BAA4B,SAAW97E,GAE3Cg6E,EAAyBh6E,GAEG,IAAvB0oC,EAAMyyC,cAEVxzE,QAAQC,KAAM,0EAMhB7F,KAAKg6E,sBAAwB,SAAW/7E,GAEvCk6E,EAAqBl6E,GAEO,IAAvB0oC,EAAMyyC,cAEVxzE,QAAQC,KAAM,6EAMhB7F,KAAKi6E,kBAAoB,WAExB,OAAO/B,GAIRl4E,KAAK8+C,WAAa,WAEjB,OAAOD,GAIR7+C,KAAKk6E,WAAaC,eAAiBl8E,GAIlC,GAFA4gD,EAAU5gD,EAEO,OAAZ4gD,EAAmB,CAEvBA,EAAQj/C,iBAAkB,SAAUi5E,GACpCh6B,EAAQj/C,iBAAkB,cAAei5E,GACzCh6B,EAAQj/C,iBAAkB,YAAai5E,GACvCh6B,EAAQj/C,iBAAkB,UAAWi5E,GACrCh6B,EAAQj/C,iBAAkB,eAAgBi5E,GAC1Ch6B,EAAQj/C,iBAAkB,aAAci5E,GACxCh6B,EAAQj/C,iBAAkB,MAAOo5E,GACjCn6B,EAAQj/C,iBAAkB,qBAAsBy5E,GAEhD,MAAM/5C,EAAa8P,EAAGgrC,wBAEW,IAA5B96C,EAAW+6C,oBAETjrC,EAAGkrC,mBAIV,MAAMC,EAAY,CACjBC,UAAWl7C,EAAWk7C,UACtBzxE,MAAOu2B,EAAWv2B,MAClBw9B,MAAOjH,EAAWiH,MAClBqG,QAAStN,EAAWsN,QACpBqrC,uBAAwBA,GAInBwC,EAAY,IAAIC,aAAc77B,EAASzP,EAAImrC,GAEjD17B,EAAQ87B,kBAAmB,CAAEF,UAAWA,IAExCvC,QAAuBr5B,EAAQ+7B,sBAAuBzC,GAEtDvoD,EAAUsf,WAAY2P,GACtBjvB,EAAUoB,QAEV2V,EAAMyyC,cAAe,EAErBzyC,EAAMjmC,cAAe,CAAEb,KAAM,mBAqD/B,MAAMg7E,EAAa,IAAI,EACjBC,EAAa,IAAI,EAyDvB,SAASC,EAAc/gE,EAAQ+Q,GAEd,OAAXA,EAEJ/Q,EAAOK,YAAY5T,KAAMuT,EAAO3L,QAIhC2L,EAAOK,YAAYnP,iBAAkB6f,EAAO1Q,YAAaL,EAAO3L,QAIjE2L,EAAOC,mBAAmBxT,KAAMuT,EAAOK,aAAcxN,SAItD7M,KAAKg7E,UAAY,SAAWhhE,GAE3B0+D,EAAS5vD,KAAO2vD,EAAQ3vD,KAAO0vD,EAAQ1vD,KAAO9O,EAAO8O,KACrD4vD,EAAS3vD,IAAM0vD,EAAQ1vD,IAAMyvD,EAAQzvD,IAAM/O,EAAO+O,IAE7C4vD,IAAsBD,EAAS5vD,MAAQ8vD,IAAqBF,EAAS3vD,MAIzE81B,EAAQ87B,kBAAmB,CAC1BM,UAAWvC,EAAS5vD,KACpBoyD,SAAUxC,EAAS3vD,MAGpB4vD,EAAoBD,EAAS5vD,KAC7B8vD,EAAmBF,EAAS3vD,KAI7B,MAAMgC,EAAS/Q,EAAO+Q,OAChB4yC,EAAU+a,EAAS/a,QAEzBod,EAAcrC,EAAU3tD,GAExB,IAAM,IAAIhqB,EAAI,EAAGA,EAAI48D,EAAQ18D,OAAQF,IAEpCg6E,EAAcpd,EAAS58D,GAAKgqB,GAM7B/Q,EAAOK,YAAY5T,KAAMiyE,EAASr+D,aAClCL,EAAO3L,OAAO5H,KAAMiyE,EAASrqE,QAC7B2L,EAAO3L,OAAO+Z,UAAWpO,EAAO6N,SAAU7N,EAAOvD,WAAYuD,EAAO/L,OAEpE,MAAMmQ,EAAWpE,EAAOoE,SAExB,IAAM,IAAIrd,EAAI,EAAGC,EAAIod,EAASnd,OAAQF,EAAIC,EAAGD,IAE5Cqd,EAAUrd,GAAImtB,mBAAmB,GAkBlC,OAZwB,IAAnByvC,EAAQ18D,OA/Gd,SAAiC+Y,EAAQw+D,EAASC,GAEjDoC,EAAWh/D,sBAAuB28D,EAAQn+D,aAC1CygE,EAAWj/D,sBAAuB48D,EAAQp+D,aAE1C,MAAM8gE,EAAMN,EAAWpyE,WAAYqyE,GAE7BM,EAAQ5C,EAAQt+D,iBAAiBzS,SACjC4zE,EAAQ5C,EAAQv+D,iBAAiBzS,SAKjCqhB,EAAOsyD,EAAO,KAASA,EAAO,IAAO,GACrCryD,EAAMqyD,EAAO,KAASA,EAAO,IAAO,GACpCE,GAAWF,EAAO,GAAM,GAAMA,EAAO,GACrCG,GAAcH,EAAO,GAAM,GAAMA,EAAO,GAExCI,GAAYJ,EAAO,GAAM,GAAMA,EAAO,GACtCK,GAAaJ,EAAO,GAAM,GAAMA,EAAO,GACvC3yD,EAAOI,EAAO0yD,EACd7yD,EAAQG,EAAO2yD,EAIfC,EAAUP,IAAUK,EAAUC,GAC9BE,EAAUD,GAAYF,EAG5BhD,EAAQn+D,YAAY+N,UAAWpO,EAAO6N,SAAU7N,EAAOvD,WAAYuD,EAAO/L,OAC1E+L,EAAO4S,WAAY+uD,GACnB3hE,EAAO8S,WAAY4uD,GACnB1hE,EAAOK,YAAYwL,QAAS7L,EAAO6N,SAAU7N,EAAOvD,WAAYuD,EAAO/L,OACvE+L,EAAOC,mBAAmBxT,KAAMuT,EAAOK,aAAcxN,SAKrD,MAAM+uE,EAAQ9yD,EAAO4yD,EACfG,EAAO9yD,EAAM2yD,EACbI,EAAQpzD,EAAOizD,EACfI,EAASpzD,GAAUwyD,EAAMQ,GACzBK,EAAOV,EAASvyD,EAAM8yD,EAAOD,EAC7BK,EAAUV,EAAYxyD,EAAM8yD,EAAOD,EAEzC5hE,EAAOE,iBAAiBuO,gBAAiBqzD,EAAOC,EAAQC,EAAMC,EAASL,EAAOC,GAoE7EK,CAAwBxD,EAAUF,EAASC,GAM3CC,EAASx+D,iBAAiBzT,KAAM+xE,EAAQt+D,kBAIlCw+D,GAMR,IAAIyD,EAA2B,KAmE/B,MAAMvsD,EAAY,IAAI2e,GACtB3e,EAAUqf,kBAlEV,SAA2BL,EAAMC,GAIhC,GAFAupC,EAAOvpC,EAAMutC,cAAelE,GAEd,OAATE,EAAgB,CAEpB,MAAMiE,EAAQjE,EAAKiE,MACb5B,EAAY57B,EAAQ4iB,YAAYgZ,UAEtC9uC,EAASwtC,eAAgBsB,EAAU/G,aAEnC,IAAI4I,GAAsB,EAIrBD,EAAMp7E,SAAWy3E,EAAS/a,QAAQ18D,SAEtCy3E,EAAS/a,QAAQ18D,OAAS,EAC1Bq7E,GAAsB,GAIvB,IAAM,IAAIv7E,EAAI,EAAGA,EAAIs7E,EAAMp7E,OAAQF,IAAO,CAEzC,MAAM4oC,EAAO0yC,EAAOt7E,GACdqT,EAAWqmE,EAAUpV,YAAa17B,GAElC3vB,EAAS2jD,EAAS58D,GACxBiZ,EAAO3L,OAAOjF,UAAWugC,EAAK4yC,UAAUluE,QACxC2L,EAAOE,iBAAiB9Q,UAAWugC,EAAKzvB,kBACxCF,EAAO5F,SAASzO,IAAKyO,EAAS7R,EAAG6R,EAASvR,EAAGuR,EAASrO,MAAOqO,EAASpO,QAE3D,IAANjF,GAEJ23E,EAASrqE,OAAO5H,KAAMuT,EAAO3L,SAID,IAAxBiuE,GAEJ5D,EAAS/a,QAAQv9D,KAAM4Z,IAU1B,MAAMs/D,EAAez6B,EAAQy6B,aAE7B,IAAM,IAAIv4E,EAAI,EAAGA,EAAIs3E,EAAYp3E,OAAQF,IAAO,CAE/C,MAAM+3E,EAAaT,EAAat3E,GAC1Bg4E,EAAcO,EAAcv4E,GAElC+3E,EAAWliE,OAAQmiE,EAAalqC,EAAOqpC,GAInCiE,GAA2BA,EAA0BvtC,EAAMC,MAOjE7uC,KAAKivC,iBAAmB,SAAWj2B,GAElCmjE,EAA2BnjE,GAI5BhZ,KAAKkS,QAAU,aC7dhB,SAASsqE,GAAgB1hC,GAyGxB,SAAS2hC,EAAuBr0C,EAAU1Y,GAEzC0Y,EAAS/T,QAAQp2B,MAAQyxB,EAAS2E,QAE7B3E,EAASmH,OAEbuR,EAASmR,QAAQt7C,MAAMwI,KAAMipB,EAASmH,OAIlCnH,EAASwH,UAEbkR,EAASlR,SAASj5B,MAAMwI,KAAMipB,EAASwH,UAAW9vB,eAAgBsoB,EAASyH,mBAIvEzH,EAASkI,MAEbwQ,EAASxQ,IAAI35B,MAAQyxB,EAASkI,KAI1BlI,EAASoI,WAEbsQ,EAAStQ,SAAS75B,MAAQyxB,EAASoI,UAI/BpI,EAASmJ,cAEbuP,EAASvP,YAAY56B,MAAQyxB,EAASmJ,aAIvC,MAAMC,EAASgiB,EAAWr9C,IAAKiyB,GAAWoJ,OAE1C,GAAKA,EAAS,CAEbsP,EAAStP,OAAO76B,MAAQ66B,EAExBsP,EAASwR,WAAW37C,MAAU66B,EAAOsT,eAAiBtT,EAAOqT,kBAAuB,EAAI,EAExF/D,EAASrP,aAAa96B,MAAQyxB,EAASqJ,aACvCqP,EAASpP,gBAAgB/6B,MAAQyxB,EAASsJ,gBAE1C,MAAM6gB,EAAciB,EAAWr9C,IAAKq7B,GAASw1C,mBAExBvuE,IAAhB85C,IAEJzR,EAASyR,YAAY57C,MAAQ47C,GAkC/B,IAAI6iC,EA2EAC,EAvGCjtD,EAASqI,WAEbqQ,EAASrQ,SAAS95B,MAAQyxB,EAASqI,SACnCqQ,EAASxL,kBAAkB3+B,MAAQyxB,EAASkN,mBAIxClN,EAASsI,QAEboQ,EAASpQ,MAAM/5B,MAAQyxB,EAASsI,MAChCoQ,EAASnQ,eAAeh6B,MAAQyxB,EAASuI,gBAoBrCvI,EAASkI,IAEb8kD,EAAahtD,EAASkI,IAEXlI,EAASmJ,YAEpB6jD,EAAahtD,EAASmJ,YAEXnJ,EAAS6I,gBAEpBmkD,EAAahtD,EAAS6I,gBAEX7I,EAAS0I,UAEpBskD,EAAahtD,EAAS0I,UAEX1I,EAASwI,QAEpBwkD,EAAahtD,EAASwI,QAEXxI,EAASgJ,aAEpBgkD,EAAahtD,EAASgJ,aAEXhJ,EAASiJ,aAEpB+jD,EAAahtD,EAASiJ,aAEXjJ,EAASoI,SAEpB4kD,EAAahtD,EAASoI,SAEXpI,EAASkJ,YAEpB8jD,EAAahtD,EAASkJ,YAEXlJ,EAAS8H,aAEpBklD,EAAahtD,EAAS8H,aAEX9H,EAASgI,mBAEpBglD,EAAahtD,EAASgI,mBAEXhI,EAAS+H,wBAEpBilD,EAAahtD,EAAS+H,4BAIH13B,IAAf28E,IAGCA,EAAWthB,sBAEfshB,EAAaA,EAAWroE,UAIY,IAAhCqoE,EAAWpsE,kBAEfosE,EAAWtrE,eAIZg3B,EAASoR,YAAYv7C,MAAMwI,KAAMi2E,EAAWruE,SAUxCqhB,EAASsI,MAEb2kD,EAAcjtD,EAASsI,MAEZtI,EAASqI,WAEpB4kD,EAAcjtD,EAASqI,eAIHh4B,IAAhB48E,IAGCA,EAAYvhB,sBAEhBuhB,EAAcA,EAAYtoE,UAIW,IAAjCsoE,EAAYrsE,kBAEhBqsE,EAAYvrE,eAIbg3B,EAASqR,aAAax7C,MAAMwI,KAAMk2E,EAAYtuE,SA6MhD,SAASuuE,EAAyBx0C,EAAU1Y,GAE3C0Y,EAASrR,UAAU94B,MAAQyxB,EAASqH,UACpCqR,EAASpR,UAAU/4B,MAAQyxB,EAASsH,UAE/BtH,EAASgJ,eAEb0P,EAAS1P,aAAaz6B,MAAQyxB,EAASgJ,cAInChJ,EAASiJ,eAEbyP,EAASzP,aAAa16B,MAAQyxB,EAASiJ,cAInCjJ,EAASkJ,cAEbwP,EAASxP,YAAY36B,MAAQyxB,EAASkJ,aAIlClJ,EAASwI,UAEbkQ,EAASlQ,QAAQj6B,MAAQyxB,EAASwI,QAClCkQ,EAASjQ,UAAUl6B,MAAQyxB,EAASyI,UhN/ff,IgNggBhBzI,EAASwE,OAAoBkU,EAASjQ,UAAUl6B,QAAW,IAI5DyxB,EAAS0I,YAEbgQ,EAAShQ,UAAUn6B,MAAQyxB,EAAS0I,UACpCgQ,EAAS9P,YAAYr6B,MAAMwI,KAAMipB,EAAS4I,ahNvgBrB,IgNwgBhB5I,EAASwE,MAAoBkU,EAAS9P,YAAYr6B,MAAM+J,UAIzD0nB,EAAS6I,kBAEb6P,EAAS7P,gBAAgBt6B,MAAQyxB,EAAS6I,gBAC1C6P,EAAS5P,kBAAkBv6B,MAAQyxB,EAAS8I,kBAC5C4P,EAAS3P,iBAAiBx6B,MAAQyxB,EAAS+I,kBAI7BqiB,EAAWr9C,IAAKiyB,GAAWoJ,SAKzCsP,EAASlP,gBAAgBj7B,MAAQyxB,EAASwJ,iBA6I5C,MAAO,CACN2jD,mBA/qBD,SAA6Bz0C,EAAUpU,GAEtCoU,EAASsS,SAASz8C,MAAMwI,KAAMutB,EAAI6C,OAE7B7C,EAAI8oD,OAER10C,EAASoS,QAAQv8C,MAAQ+1B,EAAIlL,KAC7Bsf,EAASqS,OAAOx8C,MAAQ+1B,EAAIjL,KAEjBiL,EAAI6nC,YAEfzzB,EAASmS,WAAWt8C,MAAQ+1B,EAAI+oD,UAqqBjCC,wBA/pBD,SAAkC50C,EAAU1Y,EAAUutD,EAAYj3E,GAE5D0pB,EAASoN,oBAEb2/C,EAAuBr0C,EAAU1Y,GAEtBA,EAASwtD,uBAEpBT,EAAuBr0C,EAAU1Y,GA6XnC,SAAiC0Y,EAAU1Y,GAErCA,EAASkJ,cAEbwP,EAASxP,YAAY36B,MAAQyxB,EAASkJ,aAhYtCukD,CAAwB/0C,EAAU1Y,IAEvBA,EAAS0tD,oBAEpBX,EAAuBr0C,EAAU1Y,GAuanC,SAA8B0Y,EAAU1Y,GAElCA,EAASyJ,cAEbiP,EAASjP,YAAYl7B,MAAQyxB,EAASyJ,aAIlCzJ,EAASkJ,cAEbwP,EAASxP,YAAY36B,MAAQyxB,EAASkJ,aAIlClJ,EAASwI,UAEbkQ,EAASlQ,QAAQj6B,MAAQyxB,EAASwI,QAClCkQ,EAASjQ,UAAUl6B,MAAQyxB,EAASyI,UhN9cf,IgN+chBzI,EAASwE,OAAoBkU,EAASjQ,UAAUl6B,QAAW,IAI5DyxB,EAAS0I,YAEbgQ,EAAShQ,UAAUn6B,MAAQyxB,EAAS0I,UACpCgQ,EAAS9P,YAAYr6B,MAAMwI,KAAMipB,EAAS4I,ahNtdrB,IgNudhB5I,EAASwE,MAAoBkU,EAAS9P,YAAYr6B,MAAM+J,UAIzD0nB,EAAS6I,kBAEb6P,EAAS7P,gBAAgBt6B,MAAQyxB,EAAS6I,gBAC1C6P,EAAS5P,kBAAkBv6B,MAAQyxB,EAAS8I,kBAC5C4P,EAAS3P,iBAAiBx6B,MAAQyxB,EAAS+I,kBAxc3C4kD,CAAqBj1C,EAAU1Y,IAEpBA,EAAS4tD,qBAEpBb,EAAuBr0C,EAAU1Y,GA6XnC,SAA+B0Y,EAAU1Y,GAExC0Y,EAAShR,SAASn5B,MAAMwI,KAAMipB,EAAS0H,UACvCgR,EAAS/Q,UAAUp5B,MAAQqD,KAAKY,IAAKwtB,EAAS2H,UAAW,MAEpD3H,EAASkJ,cAEbwP,EAASxP,YAAY36B,MAAQyxB,EAASkJ,aAIlClJ,EAASwI,UAEbkQ,EAASlQ,QAAQj6B,MAAQyxB,EAASwI,QAClCkQ,EAASjQ,UAAUl6B,MAAQyxB,EAASyI,UhNtaf,IgNuahBzI,EAASwE,OAAoBkU,EAASjQ,UAAUl6B,QAAW,IAI5DyxB,EAAS0I,YAEbgQ,EAAShQ,UAAUn6B,MAAQyxB,EAAS0I,UACpCgQ,EAAS9P,YAAYr6B,MAAMwI,KAAMipB,EAAS4I,ahN9arB,IgN+ahB5I,EAASwE,MAAoBkU,EAAS9P,YAAYr6B,MAAM+J,UAIzD0nB,EAAS6I,kBAEb6P,EAAS7P,gBAAgBt6B,MAAQyxB,EAAS6I,gBAC1C6P,EAAS5P,kBAAkBv6B,MAAQyxB,EAAS8I,kBAC5C4P,EAAS3P,iBAAiBx6B,MAAQyxB,EAAS+I,kBA3Z3C8kD,CAAsBn1C,EAAU1Y,IAErBA,EAAS8rC,wBAEpBihB,EAAuBr0C,EAAU1Y,GAE5BA,EAAS8tD,uBA6fhB,SAAkCp1C,EAAU1Y,GAE3CktD,EAAyBx0C,EAAU1Y,GAEnC0Y,EAASrP,aAAa96B,MAAQyxB,EAASqJ,aAEvCqP,EAAS9Q,UAAUr5B,MAAQyxB,EAAS4H,UACpC8Q,EAAS7Q,mBAAmBt5B,MAAQyxB,EAAS6H,mBACxC7H,EAASuH,OAAQmR,EAASnR,MAAMh5B,MAAMwI,KAAMipB,EAASuH,OAErDvH,EAAS8H,eAEb4Q,EAAS5Q,aAAav5B,MAAQyxB,EAAS8H,cAInC9H,EAAS+H,wBAEb2Q,EAAS3Q,sBAAsBx5B,MAAQyxB,EAAS+H,uBAI5C/H,EAASgI,qBAEb0Q,EAASzQ,qBAAqB15B,MAAMwI,KAAMipB,EAASiI,sBACnDyQ,EAAS1Q,mBAAmBz5B,MAAQyxB,EAASgI,mBhNxjBxB,IgN0jBhBhI,EAASwE,MAEbkU,EAASzQ,qBAAqB15B,MAAM+J,UAMtCogC,EAASgjB,aAAantD,MAAQyxB,EAAS07B,aAElC17B,EAAS27B,kBAEbjjB,EAASijB,gBAAgBptD,MAAQyxB,EAAS27B,iBAliBzCoyB,CAAyBr1C,EAAU1Y,GAInCktD,EAAyBx0C,EAAU1Y,IAIzBA,EAASguD,sBAEpBjB,EAAuBr0C,EAAU1Y,GA8hBnC,SAAgC0Y,EAAU1Y,GAEpCA,EAASmI,SAEbuQ,EAASvQ,OAAO55B,MAAQyxB,EAASmI,QAI7BnI,EAASwI,UAEbkQ,EAASlQ,QAAQj6B,MAAQyxB,EAASwI,QAClCkQ,EAASjQ,UAAUl6B,MAAQyxB,EAASyI,UhNvlBf,IgNwlBhBzI,EAASwE,OAAoBkU,EAASjQ,UAAUl6B,QAAW,IAI5DyxB,EAAS0I,YAEbgQ,EAAShQ,UAAUn6B,MAAQyxB,EAAS0I,UACpCgQ,EAAS9P,YAAYr6B,MAAMwI,KAAMipB,EAAS4I,ahN/lBrB,IgNgmBhB5I,EAASwE,MAAoBkU,EAAS9P,YAAYr6B,MAAM+J,UAIzD0nB,EAAS6I,kBAEb6P,EAAS7P,gBAAgBt6B,MAAQyxB,EAAS6I,gBAC1C6P,EAAS5P,kBAAkBv6B,MAAQyxB,EAAS8I,kBAC5C4P,EAAS3P,iBAAiBx6B,MAAQyxB,EAAS+I,kBAzjB3CklD,CAAuBv1C,EAAU1Y,IAEtBA,EAASkuD,qBAEpBnB,EAAuBr0C,EAAU1Y,GA2jBnC,SAA+B0Y,EAAU1Y,GAEnCA,EAAS6I,kBAEb6P,EAAS7P,gBAAgBt6B,MAAQyxB,EAAS6I,gBAC1C6P,EAAS5P,kBAAkBv6B,MAAQyxB,EAAS8I,kBAC5C4P,EAAS3P,iBAAiBx6B,MAAQyxB,EAAS+I,kBAhkB3ColD,CAAsBz1C,EAAU1Y,IAErBA,EAASq0C,wBAEpB0Y,EAAuBr0C,EAAU1Y,GAkkBnC,SAAkC0Y,EAAU1Y,GAEtCA,EAAS6I,kBAEb6P,EAAS7P,gBAAgBt6B,MAAQyxB,EAAS6I,gBAC1C6P,EAAS5P,kBAAkBv6B,MAAQyxB,EAAS8I,kBAC5C4P,EAAS3P,iBAAiBx6B,MAAQyxB,EAAS+I,kBAI5C2P,EAASkV,kBAAkBr/C,MAAMwI,KAAMipB,EAAS4tB,mBAChDlV,EAASmV,aAAat/C,MAAQyxB,EAAS6tB,aACvCnV,EAASoV,YAAYv/C,MAAQyxB,EAAS8tB,YA7kBrCsgC,CAAyB11C,EAAU1Y,IAExBA,EAASquD,sBAEpBtB,EAAuBr0C,EAAU1Y,GA6kBnC,SAAgC0Y,EAAU1Y,GAEpCA,EAASwI,UAEbkQ,EAASlQ,QAAQj6B,MAAQyxB,EAASwI,QAClCkQ,EAASjQ,UAAUl6B,MAAQyxB,EAASyI,UhN/oBf,IgNgpBhBzI,EAASwE,OAAoBkU,EAASjQ,UAAUl6B,QAAW,IAI5DyxB,EAAS0I,YAEbgQ,EAAShQ,UAAUn6B,MAAQyxB,EAAS0I,UACpCgQ,EAAS9P,YAAYr6B,MAAMwI,KAAMipB,EAAS4I,ahNvpBrB,IgNwpBhB5I,EAASwE,MAAoBkU,EAAS9P,YAAYr6B,MAAM+J,UAIzD0nB,EAAS6I,kBAEb6P,EAAS7P,gBAAgBt6B,MAAQyxB,EAAS6I,gBAC1C6P,EAAS5P,kBAAkBv6B,MAAQyxB,EAAS8I,kBAC5C4P,EAAS3P,iBAAiBx6B,MAAQyxB,EAAS+I,kBAlmB3CulD,CAAuB51C,EAAU1Y,IAEtBA,EAASuuD,qBA8NtB,SAA8B71C,EAAU1Y,GAEvC0Y,EAASmR,QAAQt7C,MAAMwI,KAAMipB,EAASmH,OACtCuR,EAAS/T,QAAQp2B,MAAQyxB,EAAS2E,QA/NjC6pD,CAAqB91C,EAAU1Y,GAE1BA,EAASyuD,sBAiOhB,SAA8B/1C,EAAU1Y,GAEvC0Y,EAAS9O,SAASr7B,MAAQyxB,EAAS4J,SACnC8O,EAAS4U,UAAU/+C,MAAQyxB,EAAS4J,SAAW5J,EAAS6J,QACxD6O,EAASn6B,MAAMhQ,MAAQyxB,EAASzhB,MAnO9BmwE,CAAqBh2C,EAAU1Y,IAIrBA,EAAS2uD,iBAmOtB,SAAgCj2C,EAAU1Y,EAAUutD,EAAYj3E,GAuB/D,IAAI02E,EArBJt0C,EAASmR,QAAQt7C,MAAMwI,KAAMipB,EAASmH,OACtCuR,EAAS/T,QAAQp2B,MAAQyxB,EAAS2E,QAClC+T,EAASnrB,KAAKhf,MAAQyxB,EAASzS,KAAOggE,EACtC70C,EAASn6B,MAAMhQ,MAAiB,GAAT+H,EAElB0pB,EAASkI,MAEbwQ,EAASxQ,IAAI35B,MAAQyxB,EAASkI,KAI1BlI,EAASoI,WAEbsQ,EAAStQ,SAAS75B,MAAQyxB,EAASoI,UAU/BpI,EAASkI,IAEb8kD,EAAahtD,EAASkI,IAEXlI,EAASoI,WAEpB4kD,EAAahtD,EAASoI,eAIH/3B,IAAf28E,KAEiC,IAAhCA,EAAWpsE,kBAEfosE,EAAWtrE,eAIZg3B,EAASoR,YAAYv7C,MAAMwI,KAAMi2E,EAAWruE,SA5Q5CiwE,CAAuBl2C,EAAU1Y,EAAUutD,EAAYj3E,GAE5C0pB,EAAS6uD,iBAgRtB,SAAiCn2C,EAAU1Y,GAsB1C,IAAIgtD,EApBJt0C,EAASmR,QAAQt7C,MAAMwI,KAAMipB,EAASmH,OACtCuR,EAAS/T,QAAQp2B,MAAQyxB,EAAS2E,QAClC+T,EAASt6B,SAAS7P,MAAQyxB,EAAS5hB,SAE9B4hB,EAASkI,MAEbwQ,EAASxQ,IAAI35B,MAAQyxB,EAASkI,KAI1BlI,EAASoI,WAEbsQ,EAAStQ,SAAS75B,MAAQyxB,EAASoI,UAU/BpI,EAASkI,IAEb8kD,EAAahtD,EAASkI,IAEXlI,EAASoI,WAEpB4kD,EAAahtD,EAASoI,eAIH/3B,IAAf28E,KAEiC,IAAhCA,EAAWpsE,kBAEfosE,EAAWtrE,eAIZg3B,EAASoR,YAAYv7C,MAAMwI,KAAMi2E,EAAWruE,SAxT5CmwE,CAAwBp2C,EAAU1Y,GAEvBA,EAAS+uD,kBAEpBr2C,EAASvR,MAAM54B,MAAMwI,KAAMipB,EAASmH,OACpCuR,EAAS/T,QAAQp2B,MAAQyxB,EAAS2E,SAEvB3E,EAASqa,mBAEpBra,EAAS0Z,oBAAqB,KCnDjC,SAASs1C,GAAetvD,GAIvB,MAAM9gB,OAAgCvO,KAFtCqvB,EAAaA,GAAc,IAEAvgB,OAAuBugB,EAAWvgB,OAZ9D,WAEC,MAAMA,EAASC,SAASC,gBAAiB,+BAAgC,UAEzE,OADAF,EAAO+rB,MAAM+jD,QAAU,QAChB9vE,EAQ+D+vE,GACrEC,OAAkC9+E,IAAvBqvB,EAAWpgB,QAAwBogB,EAAWpgB,QAAU,KAEnE8vE,OAA8B/+E,IAArBqvB,EAAWrmB,OAAsBqmB,EAAWrmB,MACrDg2E,OAA8Bh/E,IAArBqvB,EAAWmX,OAAsBnX,EAAWmX,MACrDy4C,OAAkCj/E,IAAvBqvB,EAAWwd,SAAwBxd,EAAWwd,QACzDqyC,OAAsCl/E,IAAzBqvB,EAAWorD,WAA0BprD,EAAWorD,UAC7D0E,OAAwDn/E,IAAlCqvB,EAAW+G,oBAAmC/G,EAAW+G,mBAC/EgpD,OAA8Dp/E,IAArCqvB,EAAWgwD,uBAAsChwD,EAAWgwD,sBACrFC,OAAkDt/E,IAA/BqvB,EAAWkwD,gBAAgClwD,EAAWkwD,gBAAkB,UAC3FC,OAA4Ex/E,IAA5CqvB,EAAWowD,8BAA6CpwD,EAAWowD,6BAEpG,IAAIv3B,EAAoB,KACpBw3B,EAAqB,KAKzB,MAAMC,EAAmB,GAIzB1/E,KAAK2/E,WAAarxE,EAGlBtO,KAAKy4D,MAAQ,CAMZC,mBAAmB,GAKpB14D,KAAKg/C,WAAY,EACjBh/C,KAAKi/C,gBAAiB,EACtBj/C,KAAKk/C,gBAAiB,EACtBl/C,KAAKm/C,kBAAmB,EAIxBn/C,KAAK4/E,aAAc,EAInB5/E,KAAKw1B,eAAiB,GACtBx1B,KAAKomD,sBAAuB,EAI5BpmD,KAAKs7B,YAAc,EACnBt7B,KAAKg4D,eAAiB,EAItBh4D,KAAK03D,yBAA0B,EAI/B13D,KAAKo/C,YjNlEuB,EiNmE5Bp/C,KAAK6/E,oBAAsB,EAI3B7/E,KAAK87D,gBAAkB,EACvB97D,KAAK+7D,gBAAkB,EAIvB,MAAM+jB,EAAQ9/E,KAEd,IAAI+/E,GAAiB,EAIjBC,EAAe,KAEfC,EAAyB,EACzBC,EAA4B,EAC5BC,EAAuB,KACvBC,EAAsB,KACtBC,GAAuB,EAEvBC,EAAiB,KAErB,MAAMC,EAAmB,IAAIluE,EACvBmuE,EAAkB,IAAInuE,EAC5B,IAAIouE,EAAsB,KAItBC,EAASpyE,EAAQvI,MACjB46E,EAAUryE,EAAQtI,OAElB46E,EAAc,EACdC,EAAc,KACdC,EAAmB,KAEvB,MAAM9e,EAAY,IAAI3vD,EAAS,EAAG,EAAGquE,EAAQC,GACvCI,EAAW,IAAI1uE,EAAS,EAAG,EAAGquE,EAAQC,GAC5C,IAAIK,GAAe,EAInB,MAAMnf,EAAW,IAAIh1B,GAIrB,IAAIo0C,GAAmB,EACnBC,GAAwB,EAI5B,MAAMC,EAAoB,IAAIj9D,GAExBk9D,EAAW,IAAI,EAEfC,EAAc,CAAEpkC,WAAY,KAAMjpB,IAAK,KAAMunC,YAAa,KAAM+lB,iBAAkB,KAAM1iC,SAAS,GAEvG,SAAS2iC,IAER,OAAgC,OAAzBpB,EAAgCS,EAAc,EAMtD,IAiFI/3C,EAAYwG,EAAcuO,EAAO4F,EACjC1I,EAAYrpC,GAAUksC,GAAUre,GAAYhR,GAAYuvB,GACxD2jC,GAAcjzD,GAAWkzD,GAAalgB,GAAc34B,GAEpDqU,GAAYykC,GAAcC,GAAgBC,GAE1CnU,GAAO9tB,GAvFP6tB,GAAMqR,EAEV,SAAS5vE,GAAY4yE,EAAcC,GAElC,IAAM,IAAI/gF,EAAI,EAAGA,EAAI8gF,EAAa5gF,OAAQF,IAAO,CAEhD,MAAMghF,EAAcF,EAAc9gF,GAC5BiO,EAAUV,EAAQW,WAAY8yE,EAAaD,GACjD,GAAiB,OAAZ9yE,EAAmB,OAAOA,EAIhC,OAAO,KAIR,IAEC,MAAM8yE,EAAoB,CACzB/4E,MAAO+1E,EACPv4C,MAAOw4C,EACPnyC,QAASoyC,EACTxE,UAAWyE,EACX9oD,mBAAoB+oD,EACpBE,sBAAuBD,EACvBG,gBAAiBD,EACjBG,6BAA8BD,GAQ/B,GAHAjxE,EAAQ1O,iBAAkB,mBAAoBoiF,IAAe,GAC7D1zE,EAAQ1O,iBAAkB,uBAAwBqiF,IAAkB,GAEvD,OAARzU,GAAe,CAEnB,MAAMqU,EAAe,CAAE,SAAU,QAAS,sBAU1C,IARgC,IAA3B/B,EAAMoC,kBAEVL,EAAaM,QAId3U,GAAMv+D,GAAY4yE,EAAcC,GAEnB,OAARtU,GAEJ,MAAKv+D,GAAY4yE,GAEV,IAAIv7E,MAAO,+DAIX,IAAIA,MAAO,sCAUkBvG,IAAjCytE,GAAItpB,2BAERspB,GAAItpB,yBAA2B,WAE9B,MAAO,CAAE,SAAY,EAAG,SAAY,EAAG,UAAa,KAMrD,MAAQn6C,GAGT,MADAnE,QAAQmE,MAAO,wBAA0BA,EAAMq4E,SACzCr4E,EAYP,SAASs4E,KAERx5C,EAAa,IAAIuf,GAAiBolB,IAElCn+B,EAAe,IAAI0U,GAAmBypB,GAAK3kC,EAAYzZ,GAEvDyZ,EAAWqe,KAAM7X,GAEjBo+B,GAAQ,IAAIwI,GAAYzI,GAAK3kC,EAAYwG,GAEzCuO,EAAQ,IAAI4nB,GAAYgI,GAAK3kC,EAAYwG,GACzCuO,EAAM1pC,QAASssE,EAAgB/5E,KAAMs6E,GAAW35E,eAAgBw5E,GAAcl9E,SAC9Ek6C,EAAMxpC,SAAUmsE,EAAiB95E,KAAMu7D,GAAY56D,eAAgBw5E,GAAcl9E,SAEjF8/C,EAAO,IAAI0F,GAAWskB,IACtB1yB,EAAa,IAAI6hB,GACjBlrD,GAAW,IAAI87D,GAAeC,GAAK3kC,EAAY+U,EAAO9C,EAAYzL,EAAco+B,GAAOjqB,GACvF7F,GAAW,IAAIiK,GAAek4B,GAC9BxgD,GAAa,IAAI6P,GAAiBq+B,GAAKn+B,GACvCsQ,GAAgB,IAAIL,GAAoBkuB,GAAK3kC,EAAYvJ,GAAY+P,GACrE/gB,GAAa,IAAIg6B,GAAiBklB,GAAKluC,GAAYkkB,EAAM7D,IACzD9B,GAAU,IAAI8M,GAAc6iB,GAAKl/C,GAAYgR,GAAYkkB,GACzDk+B,GAAe,IAAI13B,GAAmBwjB,IACtC5kC,GAAW,IAAIqd,GAAenL,GAC9B0mC,GAAe,IAAIvnB,GAAe6lB,EAAOniC,GAAU9U,EAAYwG,EAAcsQ,GAAe/W,IAC5Fra,GAAY,IAAIiuD,GAAgB1hC,GAChC2mC,GAAc,IAAIhkB,GAAkB3iB,GACpCymB,GAAe,IAAID,GAAmBz4B,EAAYwG,GAClD4N,GAAa,IAAIS,GAAiBoiC,EAAOniC,GAAUC,EAAOC,GAASqhC,GAEnEyC,GAAiB,IAAIp+B,GAAqBiqB,GAAK3kC,EAAY2a,EAAMnU,GACjEuyC,GAAwB,IAAI54B,GAA4BwkB,GAAK3kC,EAAY2a,EAAMnU,GAE/EmU,EAAK8F,SAAWk4B,GAAal4B,SAE7Bw2B,EAAMzwC,aAAeA,EACrBywC,EAAMj3C,WAAaA,EACnBi3C,EAAMhlC,WAAaA,EACnBglC,EAAM2B,YAAcA,GACpB3B,EAAMliC,MAAQA,EACdkiC,EAAMt8B,KAAOA,EAId6+B,KAIA,MAAMv2C,GAAK,IAAIksC,GAAc8H,EAAOtS,IAEpCxtE,KAAK8rC,GAAKA,GAIV,MAAMswB,GAAY,IAAIsF,GAAgBoe,EAAOjiC,GAASxO,EAAa0V,gBA4RnE,SAASi9B,GAAerhF,GAEvBA,EAAM2hF,iBAEN18E,QAAQpB,IAAK,sCAEbu7E,GAAiB,EAIlB,SAASkC,KAERr8E,QAAQpB,IAAK,0CAEbu7E,GAAiB,EAEjBsC,KAID,SAASE,GAAmB5hF,GAE3B,MAAM+uB,EAAW/uB,EAAMC,OAEvB8uB,EAASpvB,oBAAqB,UAAWiiF,IAQ1C,SAA6B7yD,GAE5B8yD,GAAiC9yD,GAEjCorB,EAAW3tB,OAAQuC,GAVnB+yD,CAAoB/yD,GAerB,SAAS8yD,GAAiC9yD,GAEzC,MAAMgzD,EAAc5nC,EAAWr9C,IAAKiyB,GAAW+wB,aAE1B1gD,IAAhB2iF,GAEJlB,GAAa/kB,eAAgBimB,GAzU/B1iF,KAAKo8D,UAAYA,GAIjBp8D,KAAKiP,WAAa,WAEjB,OAAOu+D,IAIRxtE,KAAKo6E,qBAAuB,WAE3B,OAAO5M,GAAI4M,wBAIZp6E,KAAK2iF,iBAAmB,WAEvB,MAAMljC,EAAY5W,EAAWprC,IAAK,sBAC7BgiD,GAAYA,EAAUmjC,eAI5B5iF,KAAK6iF,oBAAsB,WAE1B,MAAMpjC,EAAY5W,EAAWprC,IAAK,sBAC7BgiD,GAAYA,EAAUqjC,kBAI5B9iF,KAAK+iF,cAAgB,WAEpB,OAAOnC,GAIR5gF,KAAKgjF,cAAgB,SAAW/kF,QAEhB8B,IAAV9B,IAEL2iF,EAAc3iF,EAEd+B,KAAKyU,QAASisE,EAAQC,GAAS,KAIhC3gF,KAAKyd,QAAU,SAAW7c,GAUzB,YARgBb,IAAXa,IAEJgF,QAAQC,KAAM,mEAEdjF,EAAS,IAAI,GAIPA,EAAO+E,IAAK+6E,EAAQC,IAI5B3gF,KAAKyU,QAAU,SAAW1O,EAAOC,EAAQi9E,GAEnCn3C,GAAGstC,aAEPxzE,QAAQC,KAAM,0EAKf66E,EAAS36E,EACT46E,EAAU36E,EAEVsI,EAAQvI,MAAQzE,KAAKoC,MAAOqC,EAAQ66E,GACpCtyE,EAAQtI,OAAS1E,KAAKoC,MAAOsC,EAAS46E,IAEjB,IAAhBqC,IAEJ30E,EAAQssB,MAAM70B,MAAQA,EAAQ,KAC9BuI,EAAQssB,MAAM50B,OAASA,EAAS,MAIjChG,KAAKkjF,YAAa,EAAG,EAAGn9E,EAAOC,KAIhChG,KAAKmjF,qBAAuB,SAAWviF,GAUtC,YARgBb,IAAXa,IAEJgF,QAAQC,KAAM,gFAEdjF,EAAS,IAAI,GAIPA,EAAO+E,IAAK+6E,EAASE,EAAaD,EAAUC,GAAcl9E,SAIlE1D,KAAKojF,qBAAuB,SAAWr9E,EAAOC,EAAQi3E,GAErDyD,EAAS36E,EACT46E,EAAU36E,EAEV46E,EAAc3D,EAEd3uE,EAAQvI,MAAQzE,KAAKoC,MAAOqC,EAAQk3E,GACpC3uE,EAAQtI,OAAS1E,KAAKoC,MAAOsC,EAASi3E,GAEtCj9E,KAAKkjF,YAAa,EAAG,EAAGn9E,EAAOC,IAIhChG,KAAKqjF,mBAAqB,SAAWziF,GAUpC,YARgBb,IAAXa,IAEJgF,QAAQC,KAAM,8EAEdjF,EAAS,IAAIyR,GAIPzR,EAAO6F,KAAM85E,IAIrBvgF,KAAKqlE,YAAc,SAAWzkE,GAE7B,OAAOA,EAAO6F,KAAMu7D,IAIrBhiE,KAAKkjF,YAAc,SAAW3gF,EAAGM,EAAGkD,EAAOC,GAErCzD,EAAE2lC,UAEN85B,EAAUr8D,IAAKpD,EAAEA,EAAGA,EAAEM,EAAGN,EAAE+P,EAAG/P,EAAEqE,GAIhCo7D,EAAUr8D,IAAKpD,EAAGM,EAAGkD,EAAOC,GAI7B43C,EAAMxpC,SAAUmsE,EAAiB95E,KAAMu7D,GAAY56D,eAAgBw5E,GAAcl9E,UAIlF1D,KAAKsjF,WAAa,SAAW1iF,GAE5B,OAAOA,EAAO6F,KAAMs6E,IAIrB/gF,KAAKujF,WAAa,SAAWhhF,EAAGM,EAAGkD,EAAOC,GAEpCzD,EAAE2lC,UAEN64C,EAASp7E,IAAKpD,EAAEA,EAAGA,EAAEM,EAAGN,EAAE+P,EAAG/P,EAAEqE,GAI/Bm6E,EAASp7E,IAAKpD,EAAGM,EAAGkD,EAAOC,GAI5B43C,EAAM1pC,QAASssE,EAAgB/5E,KAAMs6E,GAAW35E,eAAgBw5E,GAAcl9E,UAI/E1D,KAAKwjF,eAAiB,WAErB,OAAOxC,GAIRhhF,KAAK6kE,eAAiB,SAAW4e,GAEhC7lC,EAAMinB,eAAgBmc,EAAeyC,IAItCzjF,KAAK0jF,cAAgB,SAAWC,GAE/B9C,EAAc8C,GAIf3jF,KAAK4jF,mBAAqB,SAAWD,GAEpC7C,EAAmB6C,GAMpB3jF,KAAKs+C,cAAgB,SAAW19C,GAU/B,YARgBb,IAAXa,IAEJgF,QAAQC,KAAM,uEAEdjF,EAAS,IAAI,IAIPA,EAAO6F,KAAMw2C,GAAWqB,kBAIhCt+C,KAAKu+C,cAAgB,WAEpBtB,GAAWsB,cAAc8uB,MAAOpwB,GAAYnzC,YAI7C9J,KAAKw+C,cAAgB,WAEpB,OAAOvB,GAAWuB,iBAInBx+C,KAAKy+C,cAAgB,WAEpBxB,GAAWwB,cAAc4uB,MAAOpwB,GAAYnzC,YAI7C9J,KAAKotB,MAAQ,SAAWyJ,EAAO0P,EAAOqG,GAErC,IAAIi3C,EAAO,QAEI9jF,IAAV82B,GAAuBA,KAAQgtD,GAAQrW,GAAIqI,wBACjC91E,IAAVwmC,GAAuBA,KAAQs9C,GAAQrW,GAAIsI,wBAC/B/1E,IAAZ6sC,GAAyBA,KAAUi3C,GAAQrW,GAAIuI,oBAEpDvI,GAAIpgD,MAAOy2D,IAIZ7jF,KAAK89C,WAAa,WAEjB99C,KAAKotB,OAAO,GAAM,GAAO,IAI1BptB,KAAK+mE,WAAa,WAEjB/mE,KAAKotB,OAAO,GAAO,GAAM,IAI1BptB,KAAK6nE,aAAe,WAEnB7nE,KAAKotB,OAAO,GAAO,GAAO,IAM3BptB,KAAKkS,QAAU,WAEd5D,EAAQhO,oBAAqB,mBAAoB0hF,IAAe,GAChE1zE,EAAQhO,oBAAqB,uBAAwB2hF,IAAkB,GAEvER,GAAYvvE,UACZqvD,GAAarvD,UACb4oC,EAAW5oC,UACXyrC,GAASzrC,UACT2rC,GAAQ3rC,UACRytC,GAAcztC,UAEd45B,GAAG55B,UAEH0d,GAAUmf,QAuEX/uC,KAAK8jF,sBAAwB,SAAW1mE,EAAQqjC,GAE/Cd,GAAce,iBAEd,MAAMnR,EAAUuL,EAAWr9C,IAAK2f,GAE3BA,EAAO2mE,eAAkBx0C,EAAQ1nB,WAAW0nB,EAAQ1nB,SAAW2lD,GAAIx9B,gBACnE5yB,EAAO4mE,aAAgBz0C,EAAQn0B,SAASm0B,EAAQn0B,OAASoyD,GAAIx9B,gBAC7D5yB,EAAO6mE,SAAY10C,EAAQn9B,KAAKm9B,EAAQn9B,GAAKo7D,GAAIx9B,gBACjD5yB,EAAO8mE,YAAe30C,EAAQ1Y,QAAQ0Y,EAAQ1Y,MAAQ22C,GAAIx9B,gBAE/D,MAAMqS,EAAoB5B,EAAQ6B,gBAE7BllC,EAAO2mE,eAEXvW,GAAIv9B,WAAYu9B,GAAI7qB,aAAcpT,EAAQ1nB,UAC1C2lD,GAAIt9B,WAAYs9B,GAAI7qB,aAAcvlC,EAAO+mE,cAAe3W,GAAI4W,cAE5DzkC,GAAcgB,gBAAiB0B,EAAkBx6B,UACjD2lD,GAAIvsB,oBAAqBoB,EAAkBx6B,SAAU,EAAG2lD,GAAIr9B,OAAO,EAAO,EAAG,IAIzE/yB,EAAO4mE,aAEXxW,GAAIv9B,WAAYu9B,GAAI7qB,aAAcpT,EAAQn0B,QAC1CoyD,GAAIt9B,WAAYs9B,GAAI7qB,aAAcvlC,EAAOinE,YAAa7W,GAAI4W,cAE1DzkC,GAAcgB,gBAAiB0B,EAAkBjnC,QACjDoyD,GAAIvsB,oBAAqBoB,EAAkBjnC,OAAQ,EAAGoyD,GAAIr9B,OAAO,EAAO,EAAG,IAIvE/yB,EAAO6mE,SAEXzW,GAAIv9B,WAAYu9B,GAAI7qB,aAAcpT,EAAQn9B,IAC1Co7D,GAAIt9B,WAAYs9B,GAAI7qB,aAAcvlC,EAAOknE,QAAS9W,GAAI4W,cAEtDzkC,GAAcgB,gBAAiB0B,EAAkBjwC,IACjDo7D,GAAIvsB,oBAAqBoB,EAAkBjwC,GAAI,EAAGo7D,GAAIr9B,OAAO,EAAO,EAAG,IAInE/yB,EAAO8mE,YAEX1W,GAAIv9B,WAAYu9B,GAAI7qB,aAAcpT,EAAQ1Y,OAC1C22C,GAAIt9B,WAAYs9B,GAAI7qB,aAAcvlC,EAAOmnE,WAAY/W,GAAI4W,cAEzDzkC,GAAcgB,gBAAiB0B,EAAkBxrB,OACjD22C,GAAIvsB,oBAAqBoB,EAAkBxrB,MAAO,EAAG22C,GAAIr9B,OAAO,EAAO,EAAG,IAI3EwP,GAAcoB,0BAEdysB,GAAI7pB,WAAY6pB,GAAI/jB,UAAW,EAAGrsC,EAAOV,OAEzCU,EAAOV,MAAQ,GAIhB1c,KAAK+iE,mBAAqB,SAAW/oD,EAAQ4xB,EAAO7tB,EAAU2R,EAAUtS,EAAQglB,GAEhE,OAAVwJ,IAAiBA,EAAQy1C,GAE9B,MAAMzU,EAAgBxvD,EAAO6R,QAAU7R,EAAO/C,YAAY7N,cAAgB,EAEpEi0C,EAAU+jC,GAAYxqE,EAAQ4xB,EAAOlc,EAAUtS,GAErDwgC,EAAM+uB,YAAaj9C,EAAUk9C,GAI7B,IAAIpsE,EAAQud,EAASvd,MACrB,MAAMqnB,EAAW9J,EAASuhB,WAAWzX,SAIrC,GAAe,OAAVrnB,GAEJ,QAAkBT,IAAb8nB,GAA6C,IAAnBA,EAASnL,MAAc,YAEhD,GAAqB,IAAhBlc,EAAMkc,MAEjB,OAMD,IAiBIlT,EAjBAi7E,EAAc,GAEU,IAAvB/0D,EAAS8J,YAEbh5B,EAAQ8tB,GAAWw6B,sBAAuB/qC,GAC1C0mE,EAAc,IAIV/0D,EAASkK,cAAgBlK,EAASmK,eAEtC6nD,GAAa9qE,OAAQwG,EAAQW,EAAU2R,EAAU+wB,GAIlDd,GAAc2B,MAAOlkC,EAAQsS,EAAU+wB,EAAS1iC,EAAUvd,GAG1D,IAAImrC,EAAWg2C,GAEA,OAAVnhF,IAEJgJ,EAAY81B,GAAW7hC,IAAK+C,GAE5BmrC,EAAWi2C,GACXj2C,EAAS5L,SAAUv2B,IAMpB,MAAMk7E,EAAwB,OAAVlkF,EAAmBA,EAAMkc,MAAQmL,EAASnL,MAExDioE,EAAa5mE,EAAS4hB,UAAU3O,MAAQyzD,EACxCG,EAAa7mE,EAAS4hB,UAAUjjB,MAAQ+nE,EAExC39C,EAAuB,OAAV1E,EAAiBA,EAAMpR,MAAQyzD,EAAc,EAC1D78C,EAAuB,OAAVxF,EAAiBA,EAAM1lB,MAAQ+nE,EAAc7kD,EAAAA,EAE1DilD,EAAYvjF,KAAKY,IAAKyiF,EAAY79C,GAClCg+C,EAAUxjF,KAAKW,IAAKyiF,EAAWC,EAAaC,EAAY99C,EAAac,GAAe,EAEpFm9C,EAAYzjF,KAAKY,IAAK,EAAG4iF,EAAUD,EAAY,GAErD,GAAmB,IAAdE,EAAL,CAIA,GAAK3nE,EAAO6R,QAEiB,IAAvBS,EAAS8J,WAEbokB,EAAMivB,aAAcn9C,EAAS+J,mBAAqB8nD,KAClD51C,EAAS+X,QAAS8pB,GAAI9jB,QAItB/d,EAAS+X,QAAS8pB,GAAI/jB,gBAIjB,GAAKrsC,EAAO8R,OAAS,CAE3B,IAAI49C,EAAYp9C,EAAS2J,eAENt5B,IAAd+sE,IAA0BA,EAAY,GAE3ClvB,EAAMivB,aAAcC,EAAYyU,KAE3BnkE,EAAO4nE,eAEXr5C,EAAS+X,QAAS8pB,GAAI9jB,OAEXtsC,EAAO6nE,WAElBt5C,EAAS+X,QAAS8pB,GAAI5jB,WAItBje,EAAS+X,QAAS8pB,GAAI7jB,iBAIZvsC,EAAO+R,SAElBwc,EAAS+X,QAAS8pB,GAAI3jB,QAEXzsC,EAAO8nE,UAElBv5C,EAAS+X,QAAS8pB,GAAI/jB,WAIvB,GAAKrsC,EAAO2R,gBAEX4c,EAASiY,gBAAiBihC,EAAWE,EAAW3nE,EAAOV,YAEjD,GAAKqB,EAASqkC,0BAA4B,CAEhD,MAAMoH,EAAgBloD,KAAKW,IAAK8b,EAASyrC,cAAezrC,EAAS2kC,mBAEjE/W,EAASiY,gBAAiBihC,EAAWE,EAAWv7B,QAIhD7d,EAASO,OAAQ24C,EAAWE,KAQ9B/kF,KAAKmlF,QAAU,SAAWv5C,EAAO5xB,GAEhCylE,EAAqBle,GAAa9jE,IAAKmuC,GACvC6zC,EAAmBv4B,OAEnBtb,EAAM5d,iBAAiB,SAAW5Q,GAE5BA,EAAO8P,SAAW9P,EAAOgN,OAAO1b,KAAMsL,EAAOoQ,UAEjDq1D,EAAmBte,UAAW/jD,GAEzBA,EAAOoO,YAEXi0D,EAAmBre,WAAYhkD,OAQlCqiE,EAAmBxe,cAEnB,MAAMmkB,EAAW,IAAI51C,QAErB5D,EAAM7d,UAAU,SAAW3Q,GAE1B,MAAMsS,EAAWtS,EAAOsS,SAExB,GAAKA,EAEJ,GAAKze,MAAMe,QAAS0d,GAEnB,IAAM,IAAI3uB,EAAI,EAAGA,EAAI2uB,EAASzuB,OAAQF,IAAO,CAE5C,MAAMskF,EAAY31D,EAAU3uB,IAEO,IAA9BqkF,EAASp9B,IAAKq9B,KAElBC,GAAcD,EAAWz5C,EAAOxuB,GAChCgoE,EAASz/E,IAAK0/E,SAMwB,IAA7BD,EAASp9B,IAAKt4B,KAEzB41D,GAAc51D,EAAUkc,EAAOxuB,GAC/BgoE,EAASz/E,IAAK+pB,QAYlB,IAAIysD,GAA2B,KAS/B,MAAMvsD,GAAY,IAAI2e,GAwKtB,SAASg3C,GAAenoE,EAAQpD,EAAQ6iD,EAAY+iB,GAEnD,IAAwB,IAAnBxiE,EAAOmO,QAAoB,OAIhC,GAFgBnO,EAAOgN,OAAO1b,KAAMsL,EAAOoQ,QAI1C,GAAKhN,EAAOooE,QAEX3oB,EAAaz/C,EAAOuO,iBAEd,GAAKvO,EAAOqoE,OAES,IAAtBroE,EAAOinD,YAAsBjnD,EAAOxG,OAAQoD,QAE3C,GAAKoD,EAAO8P,QAElBuyD,EAAmBte,UAAW/jD,GAEzBA,EAAOoO,YAEXi0D,EAAmBre,WAAYhkD,QAI1B,GAAKA,EAAO8nE,UAElB,IAAO9nE,EAAOsO,eAAiBm2C,EAASzzB,iBAAkBhxB,GAAW,CAE/DwiE,GAEJwB,EAASvlE,sBAAuBuB,EAAO/C,aACrC5H,aAAc0uE,GAIjB,MAAMpjE,EAAW8/B,GAAQjnC,OAAQwG,GAC3BsS,EAAWtS,EAAOsS,SAEnBA,EAASnE,SAEb08B,EAAkB7nD,KAAMgd,EAAQW,EAAU2R,EAAUmtC,EAAYukB,EAAS9uE,EAAG,YAMxE,GAAK8K,EAAOsoE,wBAEb9F,GAEJwB,EAASvlE,sBAAuBuB,EAAO/C,aACrC5H,aAAc0uE,GAIjBl5B,EAAkB7nD,KAAMgd,EAAQ,KAAMA,EAAOsS,SAAUmtC,EAAYukB,EAAS9uE,EAAG,WAEzE,IAAK8K,EAAO6R,QAAU7R,EAAO8R,QAAU9R,EAAO+R,YAE/C/R,EAAOkS,eAINlS,EAAOqS,SAASof,QAAU2U,EAAKtX,OAAO2C,QAE1CzxB,EAAOqS,SAAS7Y,SAChBwG,EAAOqS,SAASof,MAAQ2U,EAAKtX,OAAO2C,QAM/BzxB,EAAOsO,eAAiBm2C,EAAS1zB,iBAAkB/wB,IAAW,CAE/DwiE,GAEJwB,EAASvlE,sBAAuBuB,EAAO/C,aACrC5H,aAAc0uE,GAIjB,MAAMpjE,EAAW8/B,GAAQjnC,OAAQwG,GAC3BsS,EAAWtS,EAAOsS,SAExB,GAAKze,MAAMe,QAAS0d,GAAa,CAEhC,MAAM+P,EAAS1hB,EAAS0hB,OAExB,IAAM,IAAI1+B,EAAI,EAAGC,EAAIy+B,EAAOx+B,OAAQF,EAAIC,EAAGD,IAAO,CAEjD,MAAMqhC,EAAQ3C,EAAQ1+B,GAChBolC,EAAgBzW,EAAU0S,EAAM/B,eAEjC8F,GAAiBA,EAAc5a,SAEnC08B,EAAkB7nD,KAAMgd,EAAQW,EAAUooB,EAAe02B,EAAYukB,EAAS9uE,EAAG8vB,SAMxE1S,EAASnE,SAEpB08B,EAAkB7nD,KAAMgd,EAAQW,EAAU2R,EAAUmtC,EAAYukB,EAAS9uE,EAAG,MAUhF,MAAM8L,EAAWhB,EAAOgB,SAExB,IAAM,IAAIrd,EAAI,EAAGC,EAAIod,EAASnd,OAAQF,EAAIC,EAAGD,IAE5CwkF,GAAennE,EAAUrd,GAAKiZ,EAAQ6iD,EAAY+iB,GAMpD,SAAS+F,GAAejnC,EAAY9S,EAAO5xB,GAE1C,MAAMsnE,GAAqC,IAAlB11C,EAAMgT,QAAmBhT,EAAM01C,iBAAmB,KAE3E,IAAM,IAAIvgF,EAAI,EAAGC,EAAI09C,EAAWz9C,OAAQF,EAAIC,EAAGD,IAAO,CAErD,MAAMs8D,EAAa3e,EAAY39C,GAEzBqc,EAASigD,EAAWjgD,OACpBW,EAAWs/C,EAAWt/C,SACtB2R,EAAgC,OAArB4xD,EAA4BjkB,EAAW3tC,SAAW4xD,EAC7Dl/C,EAAQi7B,EAAWj7B,MAEzB,GAAKpoB,EAAO4rE,cAAgB,CAE3B,MAAMjoB,EAAU3jD,EAAO2jD,QAEvB,IAAM,IAAIz9C,EAAI,EAAG6gB,EAAK48B,EAAQ18D,OAAQif,EAAI6gB,EAAI7gB,IAAO,CAEpD,MAAM2lE,EAAUloB,EAASz9C,GAEpB9C,EAAOgN,OAAO1b,KAAMm3E,EAAQz7D,UAEhCwzB,EAAMxpC,SAAUmsE,EAAiB95E,KAAMo/E,EAAQzxE,WAE/CqrE,EAAmBve,gBAAiB2kB,GAEpC7hB,GAAc5mD,EAAQwuB,EAAOi6C,EAAS9nE,EAAU2R,EAAU0S,UAQ5D4hC,GAAc5mD,EAAQwuB,EAAO5xB,EAAQ+D,EAAU2R,EAAU0S,IAQ5D,SAAS4hC,GAAc5mD,EAAQwuB,EAAO5xB,EAAQ+D,EAAU2R,EAAU0S,GAOjE,GALAhlB,EAAO2O,eAAgB+zD,EAAOl0C,EAAO5xB,EAAQ+D,EAAU2R,EAAU0S,GAEjEhlB,EAAO+N,gBAAgBjgB,iBAAkB8O,EAAOC,mBAAoBmD,EAAO/C,aAC3E+C,EAAOgO,aAAa/d,gBAAiB+P,EAAO+N,iBAEvC/N,EAAOsoE,wBAA0B,CAErC,MAAMjlC,EAAU+jC,GAAYxqE,EAAQ4xB,EAAOlc,EAAUtS,GAErDwgC,EAAM+uB,YAAaj9C,GAEnBiwB,GAAcyB,QAxnBhB,SAAgChkC,EAAQqjC,GAEvCrjC,EAAO8uB,QAAQ,SAAW9uB,GAEzB0iE,EAAMgE,sBAAuB1mE,EAAQqjC,MAsnBrCqlC,CAAuB1oE,EAAQqjC,QAI/Bq/B,EAAM/c,mBAAoB/oD,EAAQ4xB,EAAO7tB,EAAU2R,EAAUtS,EAAQglB,GAItEhlB,EAAO4O,cAAe8zD,EAAOl0C,EAAO5xB,EAAQ+D,EAAU2R,EAAU0S,GAIjE,SAASkjD,GAAc51D,EAAUkc,EAAOxuB,IAEhB,IAAlBwuB,EAAMgT,UAAmBhT,EAAQy1C,GAEtC,MAAM75B,EAAqB1M,EAAWr9C,IAAKiyB,GAErCiZ,EAAS82C,EAAmB7hC,MAAMjV,OAClCq4B,EAAeye,EAAmB7hC,MAAMojB,aAExC+kB,EAAqBp9C,EAAOiV,MAAMjtC,QAElCye,EAAaoyD,GAAanmB,cAAe3rC,EAAUiZ,EAAOiV,MAAOojB,EAAcp1B,EAAOxuB,GACtF4oE,EAAkBxE,GAAanlB,mBAAoBjtC,GAEzD,IAAIqxB,EAAU+G,EAAmB/G,QAC7BwlC,GAAgB,EAQpB,GAJAz+B,EAAmB+T,YAAc7rC,EAAS8rC,uBAAyB5vB,EAAM2vB,YAAc,KACvF/T,EAAmBxzB,IAAM4X,EAAM5X,IAC/BwzB,EAAmB1uB,OAAS6kB,GAASlgD,IAAKiyB,EAASoJ,QAAU0uB,EAAmB+T,kBAE/Dx7D,IAAZ0gD,EAGJ/wB,EAAS9vB,iBAAkB,UAAW2iF,SAEhC,GAAK9hC,EAAQiU,WAAasxB,EAGhCxD,GAAiC9yD,QAE3B,GAAK83B,EAAmBu+B,qBAAuBA,EAErDE,GAAgB,MAEV,SAA6BlmF,IAAxBqvB,EAAWsmC,SAGtB,OAKAuwB,GAAgB,EAIZA,IAEJ72D,EAAWgZ,SAAWo5C,GAAa/2B,YAAa/6B,GAEhDA,EAAS4G,gBAAiBlH,EAAY0wD,GAEtCr/B,EAAU+gC,GAAallB,eAAgBltC,EAAY42D,GAEnDx+B,EAAmB/G,QAAUA,EAC7B+G,EAAmBpf,SAAWhZ,EAAWgZ,SACzCof,EAAmBwQ,eAAiB5oC,EAAW4oC,gBAIhD,MAAM5vB,EAAWof,EAAmBpf,UAE7B1Y,EAASqa,kBACbra,EAASgnC,uBACW,IAAtBhnC,EAASkZ,WAET4e,EAAmBmM,kBAAoB/qB,GAAS6d,UAChDe,EAAmBd,gBAAkB9d,GAAS8d,gBAC9Cte,EAAS5S,eAAiBoT,GAAS2d,SAMpCiB,EAAmB0+B,YA+UpB,SAA8Bx2D,GAE7B,OAAOA,EAASwtD,uBAAyBxtD,EAAS0tD,oBAAsB1tD,EAAS4tD,qBAChF5tD,EAAS8rC,wBAA0B9rC,EAAS+uD,kBAC1C/uD,EAASqa,mBAAwC,IAApBra,EAASiZ,OAnVRw9C,CAAqBz2D,GACtD83B,EAAmBu+B,mBAAqBA,EAEnCv+B,EAAmB0+B,cAIvB99C,EAASuS,kBAAkB18C,MAAQ0qC,EAAOiV,MAAMqhB,QAChD72B,EAASwS,WAAW38C,MAAQ0qC,EAAOiV,MAAMshB,MACzC92B,EAASyS,kBAAkB58C,MAAQ0qC,EAAOiV,MAAMoe,YAChD5zB,EAAS2S,wBAAwB98C,MAAQ0qC,EAAOiV,MAAMuhB,kBACtD/2B,EAASkT,WAAWr9C,MAAQ0qC,EAAOiV,MAAMqe,KACzC7zB,EAASsT,iBAAiBz9C,MAAQ0qC,EAAOiV,MAAMwhB,WAC/Ch3B,EAASkU,eAAer+C,MAAQ0qC,EAAOiV,MAAMse,SAC7C9zB,EAASmU,MAAMt+C,MAAQ0qC,EAAOiV,MAAMyhB,aACpCj3B,EAASoU,MAAMv+C,MAAQ0qC,EAAOiV,MAAM0hB,aACpCl3B,EAASyT,YAAY59C,MAAQ0qC,EAAOiV,MAAMlgC,MAC1C0qB,EAAS0T,kBAAkB79C,MAAQ0qC,EAAOiV,MAAM2hB,YAChDn3B,EAAS+T,iBAAiBl+C,MAAQ0qC,EAAOiV,MAAMue,KAE/C/zB,EAASgT,qBAAqBn9C,MAAQ0qC,EAAOiV,MAAMxC,qBACnDhT,EAASiT,wBAAwBp9C,MAAQ0qC,EAAOiV,MAAMvC,wBACtDjT,EAASuT,cAAc19C,MAAQ0qC,EAAOiV,MAAMjC,cAC5CvT,EAASwT,iBAAiB39C,MAAQ0qC,EAAOiV,MAAMhC,iBAC/CxT,EAAS6T,eAAeh+C,MAAQ0qC,EAAOiV,MAAM3B,eAC7C7T,EAAS8T,kBAAkBj+C,MAAQ0qC,EAAOiV,MAAM1B,mBAKjD,MAAMkqC,EAAe5+B,EAAmB/G,QAAQgK,cAC1C47B,EAAen1B,GAAcW,aAAcu0B,EAAaj2B,IAAK/nB,GAEnEof,EAAmB6+B,aAAeA,EAInC,SAAS7B,GAAYxqE,EAAQ4xB,EAAOlc,EAAUtS,IAEtB,IAAlBwuB,EAAMgT,UAAmBhT,EAAQy1C,GAEtC5vE,GAASujE,oBAET,MAAMhhD,EAAM4X,EAAM5X,IACZunC,EAAc7rC,EAAS8rC,uBAAyB5vB,EAAM2vB,YAAc,KACpEvrD,EAAsC,OAAzBmwE,EAAkCL,EAAM9nB,eAAiBmoB,EAAqB9rE,QAAQrE,SACnG8oB,EAAS6kB,GAASlgD,IAAKiyB,EAASoJ,QAAUyiC,GAE1C/T,EAAqB1M,EAAWr9C,IAAKiyB,GACrCiZ,EAAS82C,EAAmB7hC,MAAMjV,OAExC,IAA0B,IAArBs4C,KAE2B,IAA1BC,GAAkClnE,IAAWsmE,GAAiB,CAElE,MAAM/4B,EACLvtC,IAAWsmE,GACX5wD,EAASnC,KAAO8yD,EAKjBz3C,GAAS0e,SAAU53B,EAAU1V,EAAQutC,GAMlC73B,EAAS/e,UAAY62C,EAAmBqpB,UAEvCnhD,EAASsE,KAAOwzB,EAAmBxzB,MAAQA,GAIpCwzB,EAAmB+T,cAAgBA,GAInC/T,EAAmB0+B,aAAiB1+B,EAAmBu+B,qBAAuBp9C,EAAOiV,MAAMjtC,QANtG20E,GAAc51D,EAAUkc,EAAOxuB,QAUqBrd,IAAzCynD,EAAmBmM,mBAC5BnM,EAAmBmM,oBAAsB/qB,GAAS6d,WACpDe,EAAmBd,kBAAoB9d,GAAS8d,iBAIrCc,EAAmBwQ,iBAAmBhoD,GAItCw3C,EAAmB1uB,SAAWA,IAFzCwsD,GAAc51D,EAAUkc,EAAOxuB,GAJ/BkoE,GAAc51D,EAAUkc,EAAOxuB,IAchCkoE,GAAc51D,EAAUkc,EAAOxuB,GAC/BoqC,EAAmBqpB,UAAYnhD,EAAS/e,SAIzC,IAAI21E,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,EAEpB,MAAM/lC,EAAU+G,EAAmB/G,QAClCgmC,EAAahmC,EAAQgK,cACrBi8B,EAAal/B,EAAmBpf,SAkBjC,GAhBKwV,EAAM8uB,WAAYjsB,EAAQA,WAE9B6lC,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,GAIZ92D,EAASnC,KAAO8yD,IAEpBA,EAAqB3wD,EAASnC,GAE9Bg5D,GAAkB,GAIdD,GAAkBhG,IAAmBtmE,EAAS,CA2BlD,GAzBAysE,EAAW/7B,SAAU8iB,GAAK,mBAAoBxzD,EAAOE,kBAEhDm1B,EAAaqV,wBAEjB+hC,EAAW/7B,SAAU8iB,GAAK,gBACzB,GAAQlsE,KAAKkD,IAAKwV,EAAO+O,IAAM,GAAQznB,KAAKmD,MAIzC67E,IAAmBtmE,IAEvBsmE,EAAiBtmE,EAMjBusE,GAAkB,EAClBC,GAAgB,GAOZ92D,EAASqa,kBACbra,EAAS4tD,qBACT5tD,EAAS0tD,oBACT1tD,EAAS8rC,wBACT9rC,EAASoJ,OAAS,CAElB,MAAM6tD,EAAUF,EAAW7uD,IAAIgvD,oBAEd7mF,IAAZ4mF,GAEJA,EAAQj8B,SAAU8iB,GACjB4T,EAASvlE,sBAAuB7B,EAAOK,eAMrCqV,EAAS4tD,qBACb5tD,EAAS0tD,oBACT1tD,EAASwtD,uBACTxtD,EAASoN,qBACTpN,EAAS8rC,wBACT9rC,EAASqa,mBAET08C,EAAW/7B,SAAU8iB,GAAK,kBAAkD,IAAhCxzD,EAAO6sE,uBAI/Cn3D,EAAS4tD,qBACb5tD,EAAS0tD,oBACT1tD,EAASwtD,uBACTxtD,EAASoN,qBACTpN,EAAS8rC,wBACT9rC,EAASqa,kBACTra,EAAS+uD,kBACT/uD,EAASoK,WAET2sD,EAAW/7B,SAAU8iB,GAAK,aAAcxzD,EAAOC,oBAUjD,GAAKyV,EAASoK,SAAW,CAExB2sD,EAAW90B,YAAa6b,GAAKpwD,EAAQ,cACrCqpE,EAAW90B,YAAa6b,GAAKpwD,EAAQ,qBAErC,MAAMqS,EAAWrS,EAAOqS,SAExB,GAAKA,EAAW,CAEf,MAAMgsC,EAAQhsC,EAASgsC,MAEvB,GAAKpsB,EAAayW,oBAAsB,CAEvC,GAA8B,OAAzBr2B,EAASq3D,YAAuB,CAUpC,IAAI7pE,EAAO3b,KAAK8G,KAAqB,EAAfqzD,EAAMx6D,QAC5Bgc,EAAO,iBAA0BA,GACjCA,EAAO3b,KAAKY,IAAK+a,EAAM,GAEvB,MAAM8pE,EAAe,IAAIppD,aAAc1gB,EAAOA,EAAO,GACrD8pE,EAAaphF,IAAK8pB,EAASs3D,cAE3B,MAAMD,EAAc,IAAI,GAAaC,EAAc9pE,EAAMA,EAAMne,EAAYJ,GAE3E+wB,EAASs3D,aAAeA,EACxBt3D,EAASq3D,YAAcA,EACvBr3D,EAASu3D,gBAAkB/pE,EAI5BwpE,EAAW/7B,SAAU8iB,GAAK,cAAe/9C,EAASq3D,YAAar1E,IAC/Dg1E,EAAW/7B,SAAU8iB,GAAK,kBAAmB/9C,EAASu3D,sBAItDP,EAAW90B,YAAa6b,GAAK/9C,EAAU,iBAyE3C,IAAwC2Y,EAAUnqC,EANjD,OA3DKsoF,GAAmB/+B,EAAmB/7B,gBAAkBrO,EAAOqO,iBAEnE+7B,EAAmB/7B,cAAgBrO,EAAOqO,cAC1Cg7D,EAAW/7B,SAAU8iB,GAAK,gBAAiBpwD,EAAOqO,gBAI9C86D,IAEJE,EAAW/7B,SAAU8iB,GAAK,sBAAuBsS,EAAMD,qBAElDr4B,EAAmB0+B,cAsDwBjoF,EA3CJuoF,GA2CNp+C,EA3CNs+C,GA6CxB/rC,kBAAkBna,YAAcviC,EACzCmqC,EAASwS,WAAWpa,YAAcviC,EAElCmqC,EAASyS,kBAAkBra,YAAcviC,EACzCmqC,EAAS2S,wBAAwBva,YAAcviC,EAC/CmqC,EAASyT,YAAYrb,YAAcviC,EACnCmqC,EAAS0T,kBAAkBtb,YAAcviC,EACzCmqC,EAASkT,WAAW9a,YAAcviC,EAClCmqC,EAASsT,iBAAiBlb,YAAcviC,EACxCmqC,EAASkU,eAAe9b,YAAcviC,EACtCmqC,EAAS+T,iBAAiB3b,YAAcviC,GAjDlC+1B,GAAOtE,EAASsE,KAEpBzF,GAAUsuD,mBAAoB6J,EAAY1yD,GAI3CzF,GAAUyuD,wBAAyB0J,EAAYh3D,EAAUkxD,EAAaD,GAEtEzvB,GAAcU,OAAQ4b,GAAKhmB,EAAmB6+B,aAAcK,EAAYj1E,KAIpEie,EAASqa,mBAAoD,IAAhCra,EAAS0Z,qBAE1C8nB,GAAcU,OAAQ4b,GAAKhmB,EAAmB6+B,aAAcK,EAAYj1E,IACxEie,EAAS0Z,oBAAqB,GAI1B1Z,EAAS6uD,kBAEbkI,EAAW/7B,SAAU8iB,GAAK,SAAUpwD,EAAOxT,QAM5C68E,EAAW/7B,SAAU8iB,GAAK,kBAAmBpwD,EAAO+N,iBACpDs7D,EAAW/7B,SAAU8iB,GAAK,eAAgBpwD,EAAOgO,cACjDq7D,EAAW/7B,SAAU8iB,GAAK,cAAepwD,EAAO/C,aAEzComC,EAhvBR7wB,GAAUqf,kBARV,SAA2BL,GAErB9C,GAAGstC,cACH+C,IAA2BA,GAA0BvtC,MAOpC,oBAAXq4C,QAAyBr3D,GAAUsf,WAAY+3C,QAE3DjnF,KAAKivC,iBAAmB,SAAWj2B,GAElCmjE,GAA2BnjE,EAC3B8yB,GAAGmD,iBAAkBj2B,GAEN,OAAbA,EAAsB4W,GAAUmf,OAASnf,GAAUoB,SAMtDhxB,KAAKksC,OAAS,SAAWN,EAAO5xB,GAE/B,IAAImxB,EAAcwT,EAgBlB,QAdwB5+C,IAAnB+J,UAAW,KAEflE,QAAQC,KAAM,6GACdslC,EAAerhC,UAAW,SAIH/J,IAAnB+J,UAAW,KAEflE,QAAQC,KAAM,iGACd84C,EAAa70C,UAAW,SAIT/J,IAAXia,IAA4C,IAApBA,EAAOiT,SAGnC,YADArnB,QAAQmE,MAAO,0EAKhB,IAAwB,IAAnBg2E,EAA0B,OAI/BpgC,GAAc0B,oBACdg/B,GAAuB,EACvBC,EAAiB,MAIS,IAArB10C,EAAMy4B,YAAsBz4B,EAAM1d,oBAIhB,OAAlBlU,EAAO+Q,QAAkB/Q,EAAOkU,qBAEjB,IAAf4d,GAAGjB,UAAwC,IAApBiB,GAAGstC,eAE9Bp/D,EAAS8xB,GAAGkvC,UAAWhhE,KAKD,IAAlB4xB,EAAMgT,SAAmBhT,EAAM7f,eAAgB+zD,EAAOl0C,EAAO5xB,EAAQmxB,GAAgBg1C,GAE1FV,EAAqBle,GAAa9jE,IAAKmuC,EAAO8zC,EAAiBz+E,QAC/Dw+E,EAAmBv4B,OAEnBw4B,EAAiBt/E,KAAMq/E,GAEvB0B,EAAkBj2E,iBAAkB8O,EAAOE,iBAAkBF,EAAOC,oBACpE4nD,EAAS30B,wBAAyBi0C,GAElCD,EAAwBlhF,KAAKomD,qBAC7B66B,EAAmBr4C,GAASse,KAAMlnD,KAAKw1B,eAAgB0rD,EAAuBlnE,GAE9EiuC,EAAoBw5B,GAAYhkF,IAAKmuC,EAAO5xB,GAC5CiuC,EAAkBf,OAElBq+B,GAAe35C,EAAO5xB,EAAQ,EAAG8lE,EAAMF,aAEvC33B,EAAkBqV,UAES,IAAtBwiB,EAAMF,aAEV33B,EAAkBoC,KAAMw2B,EAAaC,IAMZ,IAArBG,GAA4Br4C,GAASwe,eAE1C,MAAM4Z,EAAeye,EAAmB7hC,MAAMojB,aAE9C5E,GAAUlwB,OAAQ80B,EAAcp1B,EAAO5xB,GAEvCylE,EAAmBxe,cACnBwe,EAAmBve,gBAAiBlnD,IAEV,IAArBinE,GAA4Br4C,GAASye,cAIb,IAAxBrnD,KAAKwjD,KAAK+F,WAAqBvpD,KAAKwjD,KAAKpC,aAExBrhD,IAAjBorC,GAEJnrC,KAAKisC,gBAAiBd,GAMvB8R,GAAW/Q,OAAQ+b,EAAmBrc,EAAO5xB,EAAQ2kC,GAIrD,MAAMuoC,EAAgBj/B,EAAkBiV,OAClCiqB,EAAqBl/B,EAAkB3zB,YAExC4yD,EAAcjmF,OAAS,GAAI0kF,GAAeuB,EAAet7C,EAAO5xB,GAChEmtE,EAAmBlmF,OAAS,GAAI0kF,GAAewB,EAAoBv7C,EAAO5xB,IAIxD,IAAlB4xB,EAAMgT,SAAmBhT,EAAM5f,cAAe8zD,EAAOl0C,EAAO5xB,GAInC,OAAzBmmE,IAIJ1uE,GAASgkE,yBAA0B0K,GAInC1uE,GAASikE,8BAA+ByK,IAMzCviC,EAAMrO,QAAQhJ,MAAMq+B,SAAS,GAC7BhnB,EAAMrO,QAAQhJ,MAAMs/B,SAAS,GAC7BjoB,EAAMrO,QAAQ1Y,MAAMgvC,SAAS,GAE7BjoB,EAAMwuB,kBAAkB,GAIxBsT,EAAiBhjB,MAGhB+iB,EAFIC,EAAiBz+E,OAAS,EAETy+E,EAAkBA,EAAiBz+E,OAAS,GAI5C,KAItBgnD,EAAoB,MA4mBrBjoD,KAAKm5E,eAAiB,SAAWl7E,GAE3B+hF,IAAiB/hF,GAAkC,OAAzBkiF,GAAgC3S,GAAIqG,gBAAiBrG,GAAIsG,YAAa71E,GAErG+hF,EAAe/hF,GAIhB+B,KAAKukE,kBAAoB,WAExB,OAAO0b,GAIRjgF,KAAKykE,qBAAuB,WAE3B,OAAOyb,GAIRlgF,KAAKkoD,cAAgB,WAEpB,OAAOD,GAIRjoD,KAAKmoD,cAAgB,SAAWzJ,GAE/BuJ,EAAoBvJ,GAIrB1+C,KAAKgsC,gBAAkB,WAEtB,OAAOm0C,GAIRngF,KAAKisC,gBAAkB,SAAWd,EAAcm5B,EAAiB,EAAGE,EAAoB,GAEvF2b,EAAuBh1C,EACvB80C,EAAyB3b,EACzB4b,EAA4B1b,EAEvBr5B,QAAsEprC,IAAtD+6C,EAAWr9C,IAAK0tC,GAAe+kC,oBAEnDz+D,GAASwjE,kBAAmB9pC,GAI7B,IAAIuoC,EAAcsM,EACd9K,GAAS,EAEb,GAAK/pC,EAAe,CAEnB,MAAM+kC,EAAqBp1B,EAAWr9C,IAAK0tC,GAAe+kC,mBAErD/kC,EAAaC,yBAEjBsoC,EAAcxD,EAAoB5L,GAClC4Q,GAAS,GAITxB,EAFWvoC,EAAaypC,+BAEV95B,EAAWr9C,IAAK0tC,GAAeklC,+BAI/BH,EAIfqQ,EAAiB95E,KAAM0kC,EAAa/2B,UACpCosE,EAAgB/5E,KAAM0kC,EAAaj3B,SACnCusE,EAAsBt1C,EAAah3B,iBAInCosE,EAAiB95E,KAAMu7D,GAAY56D,eAAgBw5E,GAAcl9E,QACjE88E,EAAgB/5E,KAAMs6E,GAAW35E,eAAgBw5E,GAAcl9E,QAC/D+8E,EAAsBO,EAevB,GAXKZ,IAAwB1M,IAE5BlG,GAAIqG,gBAAiBrG,GAAIsG,YAAaJ,GACtC0M,EAAsB1M,GAIvB91B,EAAMxpC,SAAUmsE,GAChB3iC,EAAM1pC,QAASssE,GACf5iC,EAAMinB,eAAgB4b,GAEjBvL,EAAS,CAEb,MAAMzF,EAAoB30B,EAAWr9C,IAAK0tC,EAAa92B,SACvDm5D,GAAIuG,qBAAsBvG,GAAIsG,YAAatG,GAAI6H,kBAAmB7H,GAAIvD,4BAA8B3F,EAAgBmL,EAAkBG,eAAgBpL,KAMxJxkE,KAAKonF,uBAAyB,SAAWj8C,EAAc5oC,EAAGM,EAAGkD,EAAOC,EAAQi5B,EAAQooD,GAEnF,IAASl8C,IAAgBA,EAAaiwB,oBAGrC,YADAx1D,QAAQmE,MAAO,4FAKhB,IAAI2pE,EAAc54B,EAAWr9C,IAAK0tC,GAAe+kC,mBAQjD,GANK/kC,EAAaC,8BAAmDrrC,IAAxBsnF,IAE5C3T,EAAcA,EAAa2T,IAIvB3T,EAAc,CAElB,IAAI4T,GAAU,EAET5T,IAAgB0M,IAEpB5S,GAAIqG,gBAAiBrG,GAAIsG,YAAaJ,GAEtC4T,GAAU,GAIX,IAEC,MAAMjzE,EAAU82B,EAAa92B,QACvBkzE,EAAgBlzE,EAAQvE,OACxB0iE,EAAcn+D,EAAQxU,KAE5B,GAAK0nF,IAAkBzoF,GAAc2uE,GAAMgE,QAAS8V,KAAoB/Z,GAAIjvD,aAAcivD,GAAIga,kCAG7F,YADA5hF,QAAQmE,MAAO,6GAKhB,MAAM09E,EAA4BjV,IAAgB7zE,IAAqBkqC,EAAWmf,IAAK,gCAAqC3Y,EAAaC,UAAYzG,EAAWmf,IAAK,2BAErK,KjN5wD4B,OiN4wDvBwqB,GAAoC/E,GAAMgE,QAASe,KAAkBhF,GAAIjvD,aAAcivD,GAAIka,iCAC3FlV,IAAgB9zE,IAAe2wC,EAAaC,UAAYzG,EAAWmf,IAAK,sBAAyBnf,EAAWmf,IAAK,8BACnHy/B,GAGF,YADA7hF,QAAQmE,MAAO,uHAKXyjE,GAAIma,uBAAwBna,GAAIsG,eAAkBtG,GAAIoa,qBAInDrlF,GAAK,GAAKA,GAAO4oC,EAAaplC,MAAQA,GAAelD,GAAK,GAAKA,GAAOsoC,EAAanlC,OAASA,GAElGwnE,GAAIqa,WAAYtlF,EAAGM,EAAGkD,EAAOC,EAAQynE,GAAMgE,QAAS8V,GAAiB9Z,GAAMgE,QAASe,GAAevzC,GAMpGr5B,QAAQmE,MAAO,8GAIf,QAEIu9E,GAEJ9Z,GAAIqG,gBAAiBrG,GAAIsG,YAAasM,MAU1CpgF,KAAK8nF,yBAA2B,SAAWjgE,EAAUxT,EAAS0zE,EAAQ,GAErE,MAAMC,EAAa1mF,KAAKgD,IAAK,GAAKyjF,GAC5BhiF,EAAQzE,KAAKoC,MAAO2Q,EAAQ5F,MAAM1I,MAAQiiF,GAC1ChiF,EAAS1E,KAAKoC,MAAO2Q,EAAQ5F,MAAMzI,OAASgiF,GAC5CtZ,EAAWjB,GAAMgE,QAASp9D,EAAQvE,QAExC2B,GAASi/D,aAAcr8D,EAAS,GAEhCm5D,GAAIya,eAAgBza,GAAIzD,WAAYge,EAAOrZ,EAAU7mD,EAAStlB,EAAGslB,EAAShlB,EAAGkD,EAAOC,EAAQ,GAE5F43C,EAAMuvB,iBAIPntE,KAAKkoF,qBAAuB,SAAWrgE,EAAUsgE,EAAYC,EAAYL,EAAQ,GAEhF,MAAMhiF,EAAQoiF,EAAW15E,MAAM1I,MACzBC,EAASmiF,EAAW15E,MAAMzI,OAC1B0oE,EAAWjB,GAAMgE,QAAS2W,EAAWt4E,QACrC6+D,EAASlB,GAAMgE,QAAS2W,EAAWvoF,MAEzC4R,GAASi/D,aAAc0X,EAAY,GAInC5a,GAAI0D,YAAa1D,GAAI2D,oBAAqBiX,EAAW33E,OACrD+8D,GAAI0D,YAAa1D,GAAI4D,+BAAgCgX,EAAW53E,kBAChEg9D,GAAI0D,YAAa1D,GAAI6D,iBAAkB+W,EAAW13E,iBAE7Cy3E,EAAWl2E,cAEfu7D,GAAI6a,cAAe7a,GAAIzD,WAAYge,EAAOlgE,EAAStlB,EAAGslB,EAAShlB,EAAGkD,EAAOC,EAAQ0oE,EAAUC,EAAQwZ,EAAW15E,MAAMuC,MAI/Gm3E,EAAW5W,oBAEf/D,GAAI8a,wBAAyB9a,GAAIzD,WAAYge,EAAOlgE,EAAStlB,EAAGslB,EAAShlB,EAAGslF,EAAWh4E,QAAS,GAAIpK,MAAOoiF,EAAWh4E,QAAS,GAAInK,OAAQ0oE,EAAUyZ,EAAWh4E,QAAS,GAAIa,MAI7Kw8D,GAAI6a,cAAe7a,GAAIzD,WAAYge,EAAOlgE,EAAStlB,EAAGslB,EAAShlB,EAAG6rE,EAAUC,EAAQwZ,EAAW15E,OAOlF,IAAVs5E,GAAeK,EAAW73E,iBAAkBi9D,GAAIa,eAAgBb,GAAIzD,YAEzEnsB,EAAMuvB,iBAIPntE,KAAKixE,YAAc,SAAW58D,GAE7B5C,GAASi/D,aAAcr8D,EAAS,GAEhCupC,EAAMuvB,iBAIPntE,KAAKuoF,WAAa,WAEjB3qC,EAAMwD,QACNzB,GAAcyB,SAIoB,oBAAvBonC,oBAEXA,mBAAmB9nF,cAAe,IAAI+nF,YAAa,UAAW,CAAEC,OAAQ1oF,QCr8D1E,SAAS2oF,GAAgBv5D,GAExBsvD,GAAc5gF,KAAMkC,KAAMovB,Gd6C3B+qC,GAAkBv8D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACtDu8D,GAAkBv8D,UAAUkI,YAAcq0D,GAE1CA,GAAkBv8D,UAAUggF,qBAAsB,EAElDzjB,GAAkBv8D,UAAU6I,KAAO,SAAW4K,GAoB7C,OAlBA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAKi4D,aAAe5mD,EAAO4mD,aAE3Bj4D,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAE3B55B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAKu4B,gBAAkBlnB,EAAOknB,gBAC9Bv4B,KAAKw4B,kBAAoBnnB,EAAOmnB,kBAChCx4B,KAAKy4B,iBAAmBpnB,EAAOonB,iBAE/Bz4B,KAAKw5B,UAAYnoB,EAAOmoB,UACxBx5B,KAAKy5B,mBAAqBpoB,EAAOooB,mBAE1Bz5B,MCvBRo6D,GAAqBx8D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACzDw8D,GAAqBx8D,UAAUkI,YAAcs0D,GAE7CA,GAAqBx8D,UAAUmmE,wBAAyB,EAExD3J,GAAqBx8D,UAAU6I,KAAO,SAAW4K,GAmBhD,OAjBA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAKs9C,kBAAkB72C,KAAM4K,EAAOisC,mBACpCt9C,KAAKu9C,aAAelsC,EAAOksC,aAC3Bv9C,KAAKw9C,YAAcnsC,EAAOmsC,YAE1Bx9C,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAE3B55B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAKu4B,gBAAkBlnB,EAAOknB,gBAC9Bv4B,KAAKw4B,kBAAoBnnB,EAAOmnB,kBAChCx4B,KAAKy4B,iBAAmBpnB,EAAOonB,iBAExBz4B,MOjER23E,GAAY/5E,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAA+B,CAEpFpL,YAAa6xE,GAEbiO,eAAe,ICJhB,GAAMhoF,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAsB,CAErEpL,YAAa,GAEb0/E,SAAS,ICJVloF,OAAOqC,OAAQi4E,GAAgBh6E,UAAW,CAEzCkI,YAAa8xE,GAEbkC,aAAc,WAab,OAXoB,OAAf95E,KAAK+3E,QAET/3E,KAAK+3E,MAAQ,IAAI,GACjB/3E,KAAK+3E,MAAMznE,kBAAmB,EAC9BtQ,KAAK+3E,MAAMxsD,SAAU,EAErBvrB,KAAK+3E,MAAM6Q,OAAS,GACpB5oF,KAAK+3E,MAAM8Q,WAAa,CAAEC,UAAU,IAI9B9oF,KAAK+3E,OAIb2B,kBAAmB,WAUlB,OARyB,OAApB15E,KAAK63E,aAET73E,KAAK63E,WAAa,IAAI,GACtB73E,KAAK63E,WAAWvnE,kBAAmB,EACnCtQ,KAAK63E,WAAWtsD,SAAU,GAIpBvrB,KAAK63E,YAIb+B,aAAc,WAUb,OARoB,OAAf55E,KAAK83E,QAET93E,KAAK83E,MAAQ,IAAI,GACjB93E,KAAK83E,MAAMxnE,kBAAmB,EAC9BtQ,KAAK83E,MAAMvsD,SAAU,GAIfvrB,KAAK83E,OAIbp3E,cAAe,SAAWC,GAoBzB,OAlByB,OAApBX,KAAK63E,YAET73E,KAAK63E,WAAWn3E,cAAeC,GAIZ,OAAfX,KAAK83E,OAET93E,KAAK83E,MAAMp3E,cAAeC,GAIP,OAAfX,KAAK+3E,OAET/3E,KAAK+3E,MAAMr3E,cAAeC,GAIpBX,MAIRk5E,WAAY,SAAWH,GAsBtB,OApBA/4E,KAAKU,cAAe,CAAEb,KAAM,eAAgBmR,KAAM+nE,IAEzB,OAApB/4E,KAAK63E,aAET73E,KAAK63E,WAAWtsD,SAAU,GAIP,OAAfvrB,KAAK83E,QAET93E,KAAK83E,MAAMvsD,SAAU,GAIF,OAAfvrB,KAAK+3E,QAET/3E,KAAK+3E,MAAMxsD,SAAU,GAIfvrB,MAIR4W,OAAQ,SAAWmiE,EAAalqC,EAAOqpC,GAEtC,IAAI6Q,EAAY,KACZC,EAAW,KACXC,EAAW,KAEf,MAAMC,EAAYlpF,KAAK63E,WACjBsR,EAAOnpF,KAAK83E,MACZsR,EAAOppF,KAAK+3E,MAElB,GAAKgB,GAAiD,oBAAlClqC,EAAMgQ,QAAQwqC,gBAEjC,GAAKD,GAAQrQ,EAAYqQ,KAAO,CAE/BH,GAAW,EAEX,IAAM,MAAMK,KAAcvQ,EAAYqQ,KAAKr5D,SAAW,CAGrD,MAAMw5D,EAAY16C,EAAM26C,aAAcF,EAAYpR,GAElD,QAA6Cn4E,IAAxCqpF,EAAKR,OAAQU,EAAWG,WAA4B,CAGxD,MAAMC,EAAQ,IAAI,GAClBA,EAAMp5E,kBAAmB,EACzBo5E,EAAMn+D,SAAU,EAChB69D,EAAKR,OAAQU,EAAWG,WAAcC,EAEtCN,EAAKziF,IAAK+iF,GAIX,MAAMA,EAAQN,EAAKR,OAAQU,EAAWG,WAEnB,OAAdF,IAEJG,EAAMr7E,OAAOjF,UAAWmgF,EAAUhN,UAAUluE,QAC5Cq7E,EAAMr7E,OAAO+Z,UAAWshE,EAAM7hE,SAAU6hE,EAAM57E,SAAU47E,EAAMz7E,OAC9Dy7E,EAAMC,YAAcJ,EAAU/tE,QAI/BkuE,EAAMn+D,QAAwB,OAAdg+D,EAOjB,MAAMK,EAAWR,EAAKR,OAAQ,oBACxBiB,EAAWT,EAAKR,OAAQ,aACxBj8D,EAAWi9D,EAAS/hE,SAASpf,WAAYohF,EAAShiE,UAElDiiE,EAAkB,IAClBC,EAAY,KAEbX,EAAKP,WAAWC,UAAYn8D,EAAWm9D,EAAkBC,GAE7DX,EAAKP,WAAWC,UAAW,EAC3B9oF,KAAKU,cAAe,CACnBb,KAAM,WACNmqF,WAAYjR,EAAYiR,WACxBppF,OAAQZ,SAGIopF,EAAKP,WAAWC,UAAYn8D,GAAYm9D,EAAkBC,IAEvEX,EAAKP,WAAWC,UAAW,EAC3B9oF,KAAKU,cAAe,CACnBb,KAAM,aACNmqF,WAAYjR,EAAYiR,WACxBppF,OAAQZ,aAOS,OAAdkpF,IAEJH,EAAYl6C,EAAMo7C,QAASlR,EAAYmR,eAAgBhS,GAEpC,OAAd6Q,IAEJG,EAAU76E,OAAOjF,UAAW2/E,EAAUxM,UAAUluE,QAChD66E,EAAU76E,OAAO+Z,UAAW8gE,EAAUrhE,SAAUqhE,EAAUp7E,SAAUo7E,EAAUj7E,SAMlE,OAATk7E,GAAiBpQ,EAAYoR,YAEjCnB,EAAWn6C,EAAMo7C,QAASlR,EAAYoR,UAAWjS,GAE/B,OAAb8Q,IAEJG,EAAK96E,OAAOjF,UAAW4/E,EAASzM,UAAUluE,QAC1C86E,EAAK96E,OAAO+Z,UAAW+gE,EAAKthE,SAAUshE,EAAKr7E,SAAUq7E,EAAKl7E,SA4B9D,OAlBmB,OAAdi7E,IAEJA,EAAU39D,QAA0B,OAAdw9D,GAIT,OAATI,IAEJA,EAAK59D,QAAyB,OAAby9D,GAIJ,OAATI,IAEJA,EAAK79D,QAAyB,OAAb09D,GAIXjpF,QCuPT1C,OAAOqC,OAAQq4E,GAAap6E,UAAW8B,EAAgB9B,WG3dvD+qF,GAAe/qF,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQwtE,GAAc9gF,WAAa,CAEnFkI,YAAa6iF,GAEbzG,kBAAkB,ICVnB,MAAM,WAAc,GAEnBp8E,cAECmO,QAEA3W,OAAOC,eAAgByC,KAAM,UAAW,CAAE/B,OAAO,IAEjD+B,KAAKH,KAAO,QAEZG,KAAKi9C,WAAa,KAClBj9C,KAAKu7D,YAAc,KACnBv7D,KAAKg0B,IAAM,KAEXh0B,KAAKshF,iBAAmB,KAExBthF,KAAKqkE,YAAa,EAEiB,oBAAvBmkB,oBAEXA,mBAAmB9nF,cAAe,IAAI+nF,YAAa,UAAW,CAAEC,OAAQ1oF,QAM1EyG,KAAM4K,EAAQ2e,GAab,OAXA/b,MAAMxN,KAAM4K,EAAQ2e,GAEO,OAAtB3e,EAAO4rC,aAAsBj9C,KAAKi9C,WAAa5rC,EAAO4rC,WAAWz2C,SAC1C,OAAvB6K,EAAOkqD,cAAuBv7D,KAAKu7D,YAAclqD,EAAOkqD,YAAY/0D,SACrD,OAAf6K,EAAO2iB,MAAeh0B,KAAKg0B,IAAM3iB,EAAO2iB,IAAIxtB,SAEhB,OAA5B6K,EAAOiwE,mBAA4BthF,KAAKshF,iBAAmBjwE,EAAOiwE,iBAAiB96E,SAExFxG,KAAKqkE,WAAahzD,EAAOgzD,WACzBrkE,KAAKsQ,iBAAmBe,EAAOf,iBAExBtQ,KAIRsR,OAAQC,GAEP,MAAMP,EAAOiD,MAAM3C,OAAQC,GAM3B,OAJyB,OAApBvR,KAAKi9C,aAAsBjsC,EAAKoM,OAAO6/B,WAAaj9C,KAAKi9C,WAAW3rC,OAAQC,IACvD,OAArBvR,KAAKu7D,cAAuBvqD,EAAKoM,OAAOm+C,YAAcv7D,KAAKu7D,YAAYjqD,OAAQC,IAClE,OAAbvR,KAAKg0B,MAAehjB,EAAKoM,OAAO4W,IAAMh0B,KAAKg0B,IAAI1iB,UAE7CN,GClDT,SAASo5E,GAAmBvpF,EAAOqgD,GAElClhD,KAAKa,MAAQA,EACbb,KAAKkhD,OAASA,EACdlhD,KAAK0c,WAAkB3c,IAAVc,EAAsBA,EAAMI,OAASigD,EAAS,EAE3DlhD,KAAKi9B,MAAQz9B,EACbQ,KAAKk9B,YAAc,CAAE7zB,OAAQ,EAAGqT,OAAS,GAEzC1c,KAAK2Q,QAAU,EAEf3Q,KAAKiQ,KAAO,iBAIb3S,OAAOC,eAAgB6sF,GAAkBxsF,UAAW,cAAe,CAElE+H,IAAK,SAAW1H,IAEA,IAAVA,GAAiB+B,KAAK2Q,aAM7BrT,OAAOqC,OAAQyqF,GAAkBxsF,UAAW,CAE3CysF,qBAAqB,EAErBtsD,iBAAkB,aAElBC,SAAU,SAAW//B,GAIpB,OAFA+B,KAAKi9B,MAAQh/B,EAEN+B,MAIRyG,KAAM,SAAW4K,GAOhB,OALArR,KAAKa,MAAQ,IAAIwQ,EAAOxQ,MAAMiF,YAAauL,EAAOxQ,OAClDb,KAAK0c,MAAQrL,EAAOqL,MACpB1c,KAAKkhD,OAAS7vC,EAAO6vC,OACrBlhD,KAAKi9B,MAAQ5rB,EAAO4rB,MAEbj9B,MAIRi+B,OAAQ,SAAWC,EAAQ10B,EAAW20B,GAErCD,GAAUl+B,KAAKkhD,OACf/iB,GAAU30B,EAAU03C,OAEpB,IAAM,IAAIngD,EAAI,EAAGC,EAAIhB,KAAKkhD,OAAQngD,EAAIC,EAAGD,IAExCf,KAAKa,MAAOq9B,EAASn9B,GAAMyI,EAAU3I,MAAOs9B,EAASp9B,GAItD,OAAOf,MAIR2F,IAAK,SAAW1H,EAAOoL,EAAS,GAI/B,OAFArJ,KAAKa,MAAM8E,IAAK1H,EAAOoL,GAEhBrJ,MAIRwG,MAAO,SAAWwK,QAEUjR,IAAtBiR,EAAKs5E,eAETt5E,EAAKs5E,aAAe,SAIYvqF,IAA5BC,KAAKa,MAAMo+B,OAAOsrD,QAEtBvqF,KAAKa,MAAMo+B,OAAOsrD,MAAQ,uBAI2BxqF,IAAjDiR,EAAKs5E,aAActqF,KAAKa,MAAMo+B,OAAOsrD,SAEzCv5E,EAAKs5E,aAActqF,KAAKa,MAAMo+B,OAAOsrD,OAAUvqF,KAAKa,MAAMC,MAAO,GAAIm+B,QAItE,MAEMurD,EAAK,IAAIJ,GAFD,IAAIpqF,KAAKa,MAAMiF,YAAakL,EAAKs5E,aAActqF,KAAKa,MAAMo+B,OAAOsrD,QAEtCvqF,KAAKkhD,QAG9C,OAFAspC,EAAGxsD,SAAUh+B,KAAKi9B,OAEXutD,GAIR1rD,SAAU,SAAW9lB,GAIpB,OAFAhZ,KAAK+9B,iBAAmB/kB,EAEjBhZ,MAIRsR,OAAQ,SAAWN,GAwBlB,YAtB2BjR,IAAtBiR,EAAKs5E,eAETt5E,EAAKs5E,aAAe,SAMYvqF,IAA5BC,KAAKa,MAAMo+B,OAAOsrD,QAEtBvqF,KAAKa,MAAMo+B,OAAOsrD,MAAQ,uBAI2BxqF,IAAjDiR,EAAKs5E,aAActqF,KAAKa,MAAMo+B,OAAOsrD,SAEzCv5E,EAAKs5E,aAActqF,KAAKa,MAAMo+B,OAAOsrD,OAAUt5E,MAAMrT,UAAUkD,MAAMhD,KAAM,IAAI2/B,YAAaz9B,KAAKa,MAAMo+B,UAMjG,CACNhvB,KAAMjQ,KAAKiQ,KACXgvB,OAAQj/B,KAAKa,MAAMo+B,OAAOsrD,MAC1B1qF,KAAMG,KAAKa,MAAMiF,YAAYoK,KAC7BgxC,OAAQlhD,KAAKkhD,WC1IhB,MAAM,GAAU,IAAI,EAEpB,SAASupC,GAA4BC,EAAmB3tD,EAAU1zB,EAAQszB,GAEzE38B,KAAKkQ,KAAO,GAEZlQ,KAAKgR,KAAO05E,EACZ1qF,KAAK+8B,SAAWA,EAChB/8B,KAAKqJ,OAASA,EAEdrJ,KAAK28B,YAA4B,IAAfA,ECAnB,SAASs+B,GAAgB7rC,GAExB2E,GAASj2B,KAAMkC,MAEfA,KAAKH,KAAO,iBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UAExB72B,KAAK43B,IAAM,KAEX53B,KAAK83B,SAAW,KAEhB93B,KAAK8N,SAAW,EAEhB9N,KAAKo5B,iBAAkB,EAEvBp5B,KAAKs0B,aAAc,EAEnBt0B,KAAKw2B,UAAWpH,GCrBjB,IAAIu7D,GFOJrtF,OAAO2tB,iBAAkBw/D,GAA2B7sF,UAAW,CAE9D8e,MAAO,CAENjf,IAAK,WAEJ,OAAOuC,KAAKgR,KAAK0L,QAMnB7b,MAAO,CAENpD,IAAK,WAEJ,OAAOuC,KAAKgR,KAAKnQ,QAMnB2/B,YAAa,CAEZ76B,IAAK,SAAW1H,GAEf+B,KAAKgR,KAAKwvB,YAAcviC,MAQ3BX,OAAOqC,OAAQ8qF,GAA2B7sF,UAAW,CAEpD6xC,8BAA8B,EAE9Bh9B,aAAc,SAAWpQ,GAExB,IAAM,IAAItB,EAAI,EAAGC,EAAIhB,KAAKgR,KAAK0L,MAAO3b,EAAIC,EAAGD,IAE5C,GAAQwB,EAAIvC,KAAKyJ,KAAM1I,GACvB,GAAQ8B,EAAI7C,KAAK0J,KAAM3I,GACvB,GAAQuR,EAAItS,KAAK8T,KAAM/S,GAEvB,GAAQ0R,aAAcpQ,GAEtBrC,KAAK4+B,OAAQ79B,EAAG,GAAQwB,EAAG,GAAQM,EAAG,GAAQyP,GAI/C,OAAOtS,MAIRmG,KAAM,SAAW3F,EAAO+B,GAIvB,OAFAvC,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,QAAW9G,EAErDvC,MAIRoG,KAAM,SAAW5F,EAAOqC,GAIvB,OAFA7C,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAAS,GAAMxG,EAEzD7C,MAIRuS,KAAM,SAAW/R,EAAO8R,GAIvB,OAFAtS,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAAS,GAAMiJ,EAEzDtS,MAIRwS,KAAM,SAAWhS,EAAOoG,GAIvB,OAFA5G,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAAS,GAAMzC,EAEzD5G,MAIRyJ,KAAM,SAAWjJ,GAEhB,OAAOR,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,SAIzDK,KAAM,SAAWlJ,GAEhB,OAAOR,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAAS,IAIlEyK,KAAM,SAAWtT,GAEhB,OAAOR,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAAS,IAIlE0K,KAAM,SAAWvT,GAEhB,OAAOR,KAAKgR,KAAKnQ,MAAOL,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAAS,IAIlEs1B,MAAO,SAAWn+B,EAAO+B,EAAGM,GAO3B,OALArC,EAAQA,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAExCrJ,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAM+B,EAC/BvC,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAMqC,EAExB7C,MAIR4+B,OAAQ,SAAWp+B,EAAO+B,EAAGM,EAAGyP,GAQ/B,OANA9R,EAAQA,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAExCrJ,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAM+B,EAC/BvC,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAMqC,EAC/B7C,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAM8R,EAExBtS,MAIR6+B,QAAS,SAAWr+B,EAAO+B,EAAGM,EAAGyP,EAAG1L,GASnC,OAPApG,EAAQA,EAAQR,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAExCrJ,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAM+B,EAC/BvC,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAMqC,EAC/B7C,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAM8R,EAC/BtS,KAAKgR,KAAKnQ,MAAOL,EAAQ,GAAMoG,EAExB5G,MAIRwG,MAAO,SAAWwK,GAEjB,QAAcjR,IAATiR,EAAqB,CAEzBpL,QAAQpB,IAAK,mHAEb,MAAM3D,EAAQ,GAEd,IAAM,IAAIE,EAAI,EAAGA,EAAIf,KAAK0c,MAAO3b,IAAO,CAEvC,MAAMP,EAAQO,EAAIf,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAE1C,IAAM,IAAI6W,EAAI,EAAGA,EAAIlgB,KAAK+8B,SAAU7c,IAEnCrf,EAAMT,KAAMJ,KAAKgR,KAAKnQ,MAAOL,EAAQ0f,IAMvC,OAAO,IAAI,GAAiB,IAAIlgB,KAAKa,MAAMiF,YAAajF,GAASb,KAAK+8B,SAAU/8B,KAAK28B,YAgBrF,YAZiC58B,IAA5BiR,EAAK45E,qBAET55E,EAAK45E,mBAAqB,SAIwB7qF,IAA9CiR,EAAK45E,mBAAoB5qF,KAAKgR,KAAKf,QAEvCe,EAAK45E,mBAAoB5qF,KAAKgR,KAAKf,MAASjQ,KAAKgR,KAAKxK,MAAOwK,IAIvD,IAAIy5E,GAA4Bz5E,EAAK45E,mBAAoB5qF,KAAKgR,KAAKf,MAAQjQ,KAAK+8B,SAAU/8B,KAAKqJ,OAAQrJ,KAAK28B,aAMrHrrB,OAAQ,SAAWN,GAElB,QAAcjR,IAATiR,EAAqB,CAEzBpL,QAAQpB,IAAK,wHAEb,MAAM3D,EAAQ,GAEd,IAAM,IAAIE,EAAI,EAAGA,EAAIf,KAAK0c,MAAO3b,IAAO,CAEvC,MAAMP,EAAQO,EAAIf,KAAKgR,KAAKkwC,OAASlhD,KAAKqJ,OAE1C,IAAM,IAAI6W,EAAI,EAAGA,EAAIlgB,KAAK+8B,SAAU7c,IAEnCrf,EAAMT,KAAMJ,KAAKgR,KAAKnQ,MAAOL,EAAQ0f,IAQvC,MAAO,CACN6c,SAAU/8B,KAAK+8B,SACfl9B,KAAMG,KAAKa,MAAMiF,YAAYoK,KAC7BrP,MAAOA,EACP87B,WAAY38B,KAAK28B,YAmBlB,YAZiC58B,IAA5BiR,EAAK45E,qBAET55E,EAAK45E,mBAAqB,SAIwB7qF,IAA9CiR,EAAK45E,mBAAoB5qF,KAAKgR,KAAKf,QAEvCe,EAAK45E,mBAAoB5qF,KAAKgR,KAAKf,MAASjQ,KAAKgR,KAAKM,OAAQN,IAIxD,CACNy+B,8BAA8B,EAC9B1S,SAAU/8B,KAAK+8B,SACf/rB,KAAMhR,KAAKgR,KAAKf,KAChB5G,OAAQrJ,KAAKqJ,OACbszB,WAAY38B,KAAK28B,eC9NrBs+B,GAAer9D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACnDq9D,GAAer9D,UAAUkI,YAAcm1D,GACvCA,GAAer9D,UAAU2gF,kBAAmB,EAE5CtjB,GAAer9D,UAAU6I,KAAO,SAAW4K,GAc1C,OAZA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OAExB72B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAK8N,SAAWuD,EAAOvD,SAEvB9N,KAAKo5B,gBAAkB/nB,EAAO+nB,gBAEvBp5B,MCzCR,MAAM6qF,GAAkB,IAAI,EACtBC,GAAc,IAAI,EAClBC,GAAc,IAAI,EAElBC,GAAmB,IAAI,EACvBC,GAAmB,IAAI,EACvBC,GAAmB,IAAIhnE,GAEvB,GAAM,IAAI,EACV,GAAM,IAAI,EACV,GAAM,IAAI,EAEV,GAAO,IAAI,EACX,GAAO,IAAI,EACX,GAAO,IAAI,EAEjB,SAAS,GAAQwL,GAMhB,GAJA,QAAe1vB,MAEfA,KAAKH,KAAO,cAEOE,IAAd4qF,GAA0B,CAE9BA,GAAY,IAAI,GAEhB,MAOMD,EAAoB,IAAIN,GAPT,IAAIzsD,aAAc,EACpC,IAAO,GAAK,EAAG,EAAG,EACpB,IAAO,GAAK,EAAG,EAAG,EAClB,GAAK,GAAK,EAAG,EAAG,GACd,GAAK,GAAK,EAAG,EAAG,IAG4C,GAE/DgtD,GAAU5qD,SAAU,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,IACrC4qD,GAAU1qD,aAAc,WAAY,IAAIwqD,GAA4BC,EAAmB,EAAG,GAAG,IAC7FC,GAAU1qD,aAAc,KAAM,IAAIwqD,GAA4BC,EAAmB,EAAG,GAAG,IAIxF1qF,KAAK+d,SAAW4sE,GAChB3qF,KAAK0vB,cAA0B3vB,IAAb2vB,EAA2BA,EAAW,IAAIurC,GAE5Dj7D,KAAK4J,OAAS,IAAI,EAAS,GAAK,IAmGjC,SAASuhF,GAAiBC,EAAgBC,EAAYzhF,EAAQqE,EAAO/I,EAAKD,GAGzE+lF,GAAiB/jF,WAAYmkF,EAAgBxhF,GAAS9C,UAAW,IAAMK,SAAU8G,QAGpElO,IAARmF,GAEJ+lF,GAAiB1oF,EAAM0C,EAAM+lF,GAAiBzoF,EAAQ2C,EAAM8lF,GAAiBnoF,EAC7EooF,GAAiBpoF,EAAMqC,EAAM8lF,GAAiBzoF,EAAQ0C,EAAM+lF,GAAiBnoF,GAI7EooF,GAAiBxkF,KAAMukF,IAKxBI,EAAe3kF,KAAM4kF,GACrBD,EAAe7oF,GAAK0oF,GAAiB1oF,EACrC6oF,EAAevoF,GAAKooF,GAAiBpoF,EAGrCuoF,EAAe34E,aAAcy4E,IAtH9B,GAAOttF,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAsB,CAEtEpL,YAAa,GAEbo/E,UAAU,EAEVp3D,QAAS,SAAWwX,EAAWY,GAEJ,OAArBZ,EAAUtrB,QAEdpU,QAAQmE,MAAO,yFAIhB+gF,GAAYhvE,mBAAoB9b,KAAKqa,aAErC6wE,GAAiBzkF,KAAM6+B,EAAUtrB,OAAOK,aACxCra,KAAKmrB,gBAAgBjgB,iBAAkBo6B,EAAUtrB,OAAOC,mBAAoBja,KAAKqa,aAEjF0wE,GAAYlvE,sBAAuB7b,KAAKmrB,iBAEnCma,EAAUtrB,OAAOgwB,sBAAyD,IAAlChqC,KAAK0vB,SAAS0J,iBAE1D0xD,GAAY1jF,gBAAkB2jF,GAAYz4E,GAI3C,MAAMxE,EAAW9N,KAAK0vB,SAAS5hB,SAC/B,IAAI5I,EAAKD,EAES,IAAb6I,IAEJ7I,EAAM3D,KAAK2D,IAAK6I,GAChB5I,EAAM5D,KAAK4D,IAAK4I,IAIjB,MAAMlE,EAAS5J,KAAK4J,OAEpBuhF,GAAiB,GAAIxlF,KAAO,IAAO,GAAK,GAAKolF,GAAanhF,EAAQkhF,GAAa5lF,EAAKD,GACpFkmF,GAAiB,GAAIxlF,IAAK,IAAO,GAAK,GAAKolF,GAAanhF,EAAQkhF,GAAa5lF,EAAKD,GAClFkmF,GAAiB,GAAIxlF,IAAK,GAAK,GAAK,GAAKolF,GAAanhF,EAAQkhF,GAAa5lF,EAAKD,GAEhF,GAAKU,IAAK,EAAG,GACb,GAAKA,IAAK,EAAG,GACb,GAAKA,IAAK,EAAG,GAGb,IAAIma,EAAYwlB,EAAU/jB,IAAIoC,kBAAmB,GAAK,GAAK,IAAK,EAAOknE,IAEvE,GAAmB,OAAd/qE,IAGJqrE,GAAiB,GAAIxlF,KAAO,GAAK,GAAK,GAAKolF,GAAanhF,EAAQkhF,GAAa5lF,EAAKD,GAClF,GAAKU,IAAK,EAAG,GAEbma,EAAYwlB,EAAU/jB,IAAIoC,kBAAmB,GAAK,GAAK,IAAK,EAAOknE,IAChD,OAAd/qE,GAEJ,OAMF,MAAM6M,EAAW2Y,EAAU/jB,IAAIF,OAAO5Y,WAAYoiF,IAE7Cl+D,EAAW2Y,EAAUxc,MAAQ6D,EAAW2Y,EAAUvc,KAEvDmd,EAAW9lC,KAAM,CAEhBusB,SAAUA,EACVjP,MAAOmtE,GAAgBrkF,QACvB4L,GAAI2f,GAASuB,MAAOu3D,GAAiB,GAAK,GAAK,GAAK,GAAM,GAAM,GAAM,IAAI,GAC1E/kD,KAAM,KACN1oB,OAAQpd,QAMVyG,KAAM,SAAW4K,GAQhB,OANA,uBAA8BrR,KAAMqR,QAEbtR,IAAlBsR,EAAOzH,QAAuB5J,KAAK4J,OAAOnD,KAAM4K,EAAOzH,QAE5D5J,KAAK0vB,SAAWre,EAAOqe,SAEhB1vB,QClJT,MAAM,GAAM,IAAI,EACV,GAAM,IAAI,EAEhB,SAAS,KAER,QAAeA,MAEfA,KAAKsrF,cAAgB,EAErBtrF,KAAKH,KAAO,MAEZvC,OAAO2tB,iBAAkBjrB,KAAM,CAC9BurF,OAAQ,CACP/tF,YAAY,EACZS,MAAO,MAIT+B,KAAKqkE,YAAa,EAInB,GAAIzmE,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAsB,CAEnEpL,YAAa,GAEb2/E,OAAO,EAEPh/E,KAAM,SAAW4K,GAEhB,uBAA8BrR,KAAMqR,GAAQ,GAE5C,MAAMk6E,EAASl6E,EAAOk6E,OAEtB,IAAM,IAAIxqF,EAAI,EAAGC,EAAIuqF,EAAOtqF,OAAQF,EAAIC,EAAGD,IAAO,CAEjD,MAAMgnF,EAAQwD,EAAQxqF,GAEtBf,KAAKwrF,SAAUzD,EAAM3qE,OAAO5W,QAASuhF,EAAMp7D,UAM5C,OAFA3sB,KAAKqkE,WAAahzD,EAAOgzD,WAElBrkE,MAIRwrF,SAAU,SAAWpuE,EAAQuP,EAAW,GAEvCA,EAAWrrB,KAAK8B,IAAKupB,GAErB,MAAM4+D,EAASvrF,KAAKurF,OAEpB,IAAIvqF,EAEJ,IAAMA,EAAI,EAAGA,EAAIuqF,EAAOtqF,UAElB0rB,EAAW4+D,EAAQvqF,GAAI2rB,UAFG3rB,KAchC,OAJAuqF,EAAO9qF,OAAQO,EAAG,EAAG,CAAE2rB,SAAUA,EAAUvP,OAAQA,IAEnDpd,KAAK2G,IAAKyW,GAEHpd,MAIRyrF,gBAAiB,WAEhB,OAAOzrF,KAAKsrF,eAIbI,qBAAsB,SAAW/+D,GAEhC,MAAM4+D,EAASvrF,KAAKurF,OAEpB,GAAKA,EAAOtqF,OAAS,EAAI,CAExB,IAAIF,EAAGC,EAEP,IAAMD,EAAI,EAAGC,EAAIuqF,EAAOtqF,OAAQF,EAAIC,KAE9B2rB,EAAW4+D,EAAQxqF,GAAI4rB,UAFU5rB,KAUvC,OAAOwqF,EAAQxqF,EAAI,GAAIqc,OAIxB,OAAO,MAIR0Q,QAAS,SAAWwX,EAAWY,GAI9B,GAFelmC,KAAKurF,OAERtqF,OAAS,EAAI,CAExB,GAAI4a,sBAAuB7b,KAAKqa,aAEhC,MAAMsS,EAAW2Y,EAAU/jB,IAAIF,OAAO5Y,WAAY,IAElDzI,KAAK0rF,qBAAsB/+D,GAAWmB,QAASwX,EAAWY,KAM5DtvB,OAAQ,SAAWoD,GAElB,MAAMuxE,EAASvrF,KAAKurF,OAEpB,GAAKA,EAAOtqF,OAAS,EAAI,CAExB,GAAI4a,sBAAuB7B,EAAOK,aAClC,GAAIwB,sBAAuB7b,KAAKqa,aAEhC,MAAMsS,EAAW,GAAIlkB,WAAY,IAAQuR,EAAOyvB,KAIhD,IAAI1oC,EAAGC,EAEP,IAJAuqF,EAAQ,GAAInuE,OAAOmO,SAAU,EAIvBxqB,EAAI,EAAGC,EAAIuqF,EAAOtqF,OAAQF,EAAIC,GAE9B2rB,GAAY4+D,EAAQxqF,GAAI4rB,SAFS5rB,IAIrCwqF,EAAQxqF,EAAI,GAAIqc,OAAOmO,SAAU,EACjCggE,EAAQxqF,GAAIqc,OAAOmO,SAAU,EAY/B,IAFAvrB,KAAKsrF,cAAgBvqF,EAAI,EAEjBA,EAAIC,EAAGD,IAEdwqF,EAAQxqF,GAAIqc,OAAOmO,SAAU,IAQhCja,OAAQ,SAAWC,GAElB,MAAMP,EAAO,yBAAgChR,KAAMuR,IAE1B,IAApBvR,KAAKqkE,aAAuBrzD,EAAKoM,OAAOinD,YAAa,GAE1DrzD,EAAKoM,OAAOmuE,OAAS,GAErB,MAAMA,EAASvrF,KAAKurF,OAEpB,IAAM,IAAIxqF,EAAI,EAAGC,EAAIuqF,EAAOtqF,OAAQF,EAAIC,EAAGD,IAAO,CAEjD,MAAMgnF,EAAQwD,EAAQxqF,GAEtBiQ,EAAKoM,OAAOmuE,OAAOnrF,KAAM,CACxBgd,OAAQ2qE,EAAM3qE,OAAOnN,KACrB0c,SAAUo7D,EAAMp7D,WAKlB,OAAO3b,KCvLT,MAAM26E,GAAgB,IAAI,EAEpBC,GAAa,IAAIv5E,EACjBw5E,GAAc,IAAIx5E,EAElB,GAAU,IAAI,EACd,GAAU,IAAI6R,GAEpB,SAAS,GAAanG,EAAU2R,GAE1B3R,GAAYA,EAASsoB,YAEzBzgC,QAAQmE,MAAO,0FAIhB,QAAW/J,KAAM+d,EAAU2R,GAE3B1vB,KAAKH,KAAO,cAEZG,KAAKuvB,SAAW,WAChBvvB,KAAKwvB,WAAa,IAAItL,GACtBlkB,KAAK8rF,kBAAoB,IAAI5nE,GCzB9B,SAAS,KAER,QAAelkB,MAEfA,KAAKH,KAAO,ODyBb,GAAYjC,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAkB,CAEvEpL,YAAa,GAEbwpB,eAAe,EAEf7oB,KAAM,SAAW4K,GAUhB,OARA,uBAA0BrR,KAAMqR,GAEhCrR,KAAKuvB,SAAWle,EAAOke,SACvBvvB,KAAKwvB,WAAW/oB,KAAM4K,EAAOme,YAC7BxvB,KAAK8rF,kBAAkBrlF,KAAM4K,EAAOy6E,mBAEpC9rF,KAAKyvB,SAAWpe,EAAOoe,SAEhBzvB,MAIR+rF,KAAM,SAAWt8D,EAAUD,GAE1BxvB,KAAKyvB,SAAWA,OAEI1vB,IAAfyvB,IAEJxvB,KAAKkuB,mBAAmB,GAExBluB,KAAKyvB,SAASu8D,oBAEdx8D,EAAaxvB,KAAKqa,aAInBra,KAAKwvB,WAAW/oB,KAAM+oB,GACtBxvB,KAAK8rF,kBAAkBrlF,KAAM+oB,GAAa3iB,UAI3CurE,KAAM,WAELp4E,KAAKyvB,SAAS2oD,QAIf6T,qBAAsB,WAErB,MAAMruE,EAAS,IAAIvL,EAEb65E,EAAalsF,KAAK+d,SAASuhB,WAAW4sD,WAE5C,IAAM,IAAInrF,EAAI,EAAGC,EAAIkrF,EAAWxvE,MAAO3b,EAAIC,EAAGD,IAAO,CAEpD6c,EAAOrb,EAAI2pF,EAAWziF,KAAM1I,GAC5B6c,EAAO/a,EAAIqpF,EAAWxiF,KAAM3I,GAC5B6c,EAAOtL,EAAI45E,EAAWp4E,KAAM/S,GAC5B6c,EAAOhX,EAAIslF,EAAWn4E,KAAMhT,GAE5B,MAAMkN,EAAQ,EAAM2P,EAAOvV,kBAEtB4F,IAAU2xB,EAAAA,EAEdhiB,EAAOxW,eAAgB6G,GAIvB2P,EAAOjY,IAAK,EAAG,EAAG,EAAG,GAItBumF,EAAWrtD,QAAS99B,EAAG6c,EAAOrb,EAAGqb,EAAO/a,EAAG+a,EAAOtL,EAAGsL,EAAOhX,KAM9DsnB,kBAAmB,SAAWC,GAE7B,oCAAuCnuB,KAAMmuB,GAEtB,aAAlBnuB,KAAKuvB,SAETvvB,KAAK8rF,kBAAkBrlF,KAAMzG,KAAKqa,aAAcxN,SAEnB,aAAlB7M,KAAKuvB,SAEhBvvB,KAAK8rF,kBAAkBrlF,KAAMzG,KAAKwvB,YAAa3iB,SAI/CjH,QAAQC,KAAM,6CAA+C7F,KAAKuvB,WAMpEoW,cAAe,SAAWnlC,EAAOI,GAEhC,MAAM6uB,EAAWzvB,KAAKyvB,SAChB1R,EAAW/d,KAAK+d,SAEtB6tE,GAAWriF,oBAAqBwU,EAASuhB,WAAW6sD,UAAW3rF,GAC/DqrF,GAAYtiF,oBAAqBwU,EAASuhB,WAAW4sD,WAAY1rF,GAEjEmrF,GAAcpiF,oBAAqBwU,EAASuhB,WAAWzX,SAAUrnB,GAAQiS,aAAczS,KAAKwvB,YAE5F5uB,EAAO+E,IAAK,EAAG,EAAG,GAElB,IAAM,IAAI5E,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAMqrF,EAASP,GAAYtlF,aAAcxF,GAEzC,GAAgB,IAAXqrF,EAAe,CAEnB,MAAMC,EAAYT,GAAWrlF,aAAcxF,GAE3C,GAAQmK,iBAAkBukB,EAASgsC,MAAO4wB,GAAYhyE,YAAaoV,EAAS68D,aAAcD,IAE1FzrF,EAAOmG,gBAAiB,GAAQN,KAAMklF,IAAgBl5E,aAAc,IAAW25E,IAMjF,OAAOxrF,EAAO6R,aAAczS,KAAK8rF,sBCjJnC,GAAKluF,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAsB,CAEpEpL,YAAa,GAEbymF,QAAQ,ICVT,MAAMC,GAAgB,IAAItoE,GACpBuoE,GAAkB,IAAIvoE,GAE5B,SAAS,GAAUu3C,EAAQ,GAAI6wB,EAAe,IAE7CtsF,KAAKiQ,KAAO,iBAEZjQ,KAAKy7D,MAAQA,EAAM36D,MAAO,GAC1Bd,KAAKssF,aAAeA,EACpBtsF,KAAK+mF,aAAe,KAEpB/mF,KAAK8mF,YAAc,KACnB9mF,KAAKgnF,gBAAkB,EAEvBhnF,KAAK6uC,OAAU,EAEf7uC,KAAKknD,OAIN5pD,OAAOqC,OAAQ,GAAS/B,UAAW,CAElCspD,KAAM,WAEL,MAAMuU,EAAQz7D,KAAKy7D,MACb6wB,EAAetsF,KAAKssF,aAM1B,GAJAtsF,KAAK+mF,aAAe,IAAIppD,aAA6B,GAAf89B,EAAMx6D,QAIf,IAAxBqrF,EAAarrF,OAEjBjB,KAAKgsF,yBAML,GAAKvwB,EAAMx6D,SAAWqrF,EAAarrF,OAAS,CAE3C2E,QAAQC,KAAM,mFAEd7F,KAAKssF,aAAe,GAEpB,IAAM,IAAIvrF,EAAI,EAAG+b,EAAK9c,KAAKy7D,MAAMx6D,OAAQF,EAAI+b,EAAI/b,IAEhDf,KAAKssF,aAAalsF,KAAM,IAAI8jB,MAUhC8nE,kBAAmB,WAElBhsF,KAAKssF,aAAarrF,OAAS,EAE3B,IAAM,IAAIF,EAAI,EAAG+b,EAAK9c,KAAKy7D,MAAMx6D,OAAQF,EAAI+b,EAAI/b,IAAO,CAEvD,MAAM2rF,EAAU,IAAIxoE,GAEflkB,KAAKy7D,MAAO16D,IAEhB2rF,EAAQjmF,KAAMzG,KAAKy7D,MAAO16D,GAAIsZ,aAAcxN,SAI7C7M,KAAKssF,aAAalsF,KAAMssF,KAM1BtU,KAAM,WAIL,IAAM,IAAIr3E,EAAI,EAAG+b,EAAK9c,KAAKy7D,MAAMx6D,OAAQF,EAAI+b,EAAI/b,IAAO,CAEvD,MAAM4rF,EAAO3sF,KAAKy7D,MAAO16D,GAEpB4rF,GAEJA,EAAKtyE,YAAY5T,KAAMzG,KAAKssF,aAAcvrF,IAAM8L,SAQlD,IAAM,IAAI9L,EAAI,EAAG+b,EAAK9c,KAAKy7D,MAAMx6D,OAAQF,EAAI+b,EAAI/b,IAAO,CAEvD,MAAM4rF,EAAO3sF,KAAKy7D,MAAO16D,GAEpB4rF,IAECA,EAAK5hE,QAAU4hE,EAAK5hE,OAAOwhE,QAE/BI,EAAKt+E,OAAO5H,KAAMkmF,EAAK5hE,OAAO1Q,aAAcxN,SAC5C8/E,EAAKt+E,OAAOlH,SAAUwlF,EAAKtyE,cAI3BsyE,EAAKt+E,OAAO5H,KAAMkmF,EAAKtyE,aAIxBsyE,EAAKt+E,OAAO+Z,UAAWukE,EAAK9kE,SAAU8kE,EAAKl2E,WAAYk2E,EAAK1+E,UAQ/D2I,OAAQ,WAEP,MAAM6kD,EAAQz7D,KAAKy7D,MACb6wB,EAAetsF,KAAKssF,aACpBvF,EAAe/mF,KAAK+mF,aACpBD,EAAc9mF,KAAK8mF,YAIzB,IAAM,IAAI/lF,EAAI,EAAG+b,EAAK2+C,EAAMx6D,OAAQF,EAAI+b,EAAI/b,IAAO,CAIlD,MAAMsN,EAASotD,EAAO16D,GAAM06D,EAAO16D,GAAIsZ,YAAcoyE,GAErDD,GAActhF,iBAAkBmD,EAAQi+E,EAAcvrF,IACtDyrF,GAAcljF,QAASy9E,EAAkB,GAAJhmF,GAIjB,OAAhB+lF,IAEJA,EAAYtmD,aAAc,IAM5Bh6B,MAAO,WAEN,OAAO,IAAI,GAAUxG,KAAKy7D,MAAOz7D,KAAKssF,eAIvCM,cAAe,SAAW18E,GAEzB,IAAM,IAAInP,EAAI,EAAG+b,EAAK9c,KAAKy7D,MAAMx6D,OAAQF,EAAI+b,EAAI/b,IAAO,CAEvD,MAAM4rF,EAAO3sF,KAAKy7D,MAAO16D,GAEzB,GAAK4rF,EAAKz8E,OAASA,EAElB,OAAOy8E,IAUVz6E,QAAS,WAEkB,OAArBlS,KAAK8mF,cAET9mF,KAAK8mF,YAAY50E,UAEjBlS,KAAK8mF,YAAc,OAMrB+F,SAAU,SAAWC,EAAMrxB,GAE1Bz7D,KAAKiQ,KAAO68E,EAAK78E,KAEjB,IAAM,IAAIlP,EAAI,EAAGC,EAAI8rF,EAAKrxB,MAAMx6D,OAAQF,EAAIC,EAAGD,IAAO,CAErD,MAAMkP,EAAO68E,EAAKrxB,MAAO16D,GACzB,IAAI4rF,EAAOlxB,EAAOxrD,QAEJlQ,IAAT4sF,IAEJ/mF,QAAQC,KAAM,2CAA4CoK,GAC1D08E,EAAO,IAAI,IAIZ3sF,KAAKy7D,MAAMr7D,KAAMusF,GACjB3sF,KAAKssF,aAAalsF,MAAM,IAAI8jB,IAAU9a,UAAW0jF,EAAKR,aAAcvrF,KAMrE,OAFAf,KAAKknD,OAEElnD,MAIRsR,OAAQ,WAEP,MAAMN,EAAO,CACZW,SAAU,CACThB,QAAS,IACT9Q,KAAM,WACN+R,UAAW,mBAEZ6pD,MAAO,GACP6wB,aAAc,IAGft7E,EAAKf,KAAOjQ,KAAKiQ,KAEjB,MAAMwrD,EAAQz7D,KAAKy7D,MACb6wB,EAAetsF,KAAKssF,aAE1B,IAAM,IAAIvrF,EAAI,EAAGC,EAAIy6D,EAAMx6D,OAAQF,EAAIC,EAAGD,IAAO,CAEhD,MAAM4rF,EAAOlxB,EAAO16D,GACpBiQ,EAAKyqD,MAAMr7D,KAAMusF,EAAK18E,MAEtB,MAAM88E,EAAcT,EAAcvrF,GAClCiQ,EAAKs7E,aAAalsF,KAAM2sF,EAAYzjF,WAIrC,OAAO0H,KC9OT,MAAMg8E,GAAuB,IAAI9oE,GAC3B+oE,GAAuB,IAAI/oE,GAE3BgpE,GAAsB,GAEtBC,GAAQ,IAAI,GAElB,SAAS,GAAepvE,EAAU2R,EAAUhT,GAE3C,QAAW1c,KAAM+d,EAAU2R,GAE3B1vB,KAAKgvB,eAAiB,IAAI,GAAiB,IAAI2O,aAAsB,GAARjhB,GAAc,IAC3E1c,KAAK6iD,cAAgB,KAErB7iD,KAAK0c,MAAQA,EAEb1c,KAAK0rB,eAAgB,ECNtB,SAAS,GAAmB0D,GAE3B2E,GAASj2B,KAAMkC,MAEfA,KAAKH,KAAO,oBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UAExB72B,KAAKq5B,UAAY,EACjBr5B,KAAKotF,QAAU,QACfptF,KAAKqtF,SAAW,QAEhBrtF,KAAK45B,cAAe,EAEpB55B,KAAKw2B,UAAWpH,GDJjB,GAAcxxB,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAkB,CAEzEpL,YAAa,GAEbipB,iBAAiB,EAEjBtoB,KAAM,SAAW4K,GAUhB,OARA,uBAA0BrR,KAAMqR,GAEhCrR,KAAKgvB,eAAevoB,KAAM4K,EAAO2d,gBAEH,OAAzB3d,EAAOwxC,gBAAyB7iD,KAAK6iD,cAAgBxxC,EAAOwxC,cAAcr8C,SAE/ExG,KAAK0c,MAAQrL,EAAOqL,MAEb1c,MAIRstF,WAAY,SAAW9sF,EAAOq2B,GAE7BA,EAAMztB,UAAWpJ,KAAK6iD,cAAchiD,MAAe,EAARL,IAI5C+sF,YAAa,SAAW/sF,EAAO6N,GAE9BA,EAAOjF,UAAWpJ,KAAKgvB,eAAenuB,MAAe,GAARL,IAI9CstB,QAAS,SAAWwX,EAAWY,GAE9B,MAAM7rB,EAAcra,KAAKqa,YACnBmzE,EAAextF,KAAK0c,MAK1B,GAHAywE,GAAMpvE,SAAW/d,KAAK+d,SACtBovE,GAAMz9D,SAAW1vB,KAAK0vB,cAEE3vB,IAAnBotF,GAAMz9D,SAEX,IAAM,IAAI+9D,EAAa,EAAGA,EAAaD,EAAcC,IAAgB,CAIpEztF,KAAKutF,YAAaE,EAAYT,IAE9BC,GAAqB/hF,iBAAkBmP,EAAa2yE,IAIpDG,GAAM9yE,YAAc4yE,GAEpBE,GAAMr/D,QAASwX,EAAW4nD,IAI1B,IAAM,IAAInsF,EAAI,EAAGC,EAAIksF,GAAoBjsF,OAAQF,EAAIC,EAAGD,IAAO,CAE9D,MAAM+e,EAAYotE,GAAqBnsF,GACvC+e,EAAU2tE,WAAaA,EACvB3tE,EAAU1C,OAASpd,KACnBkmC,EAAW9lC,KAAM0f,GAIlBotE,GAAoBjsF,OAAS,IAM/BysF,WAAY,SAAWltF,EAAOq2B,GAED,OAAvB72B,KAAK6iD,gBAET7iD,KAAK6iD,cAAgB,IAAI,GAAiB,IAAIllB,aAA2B,EAAb39B,KAAK0c,OAAa,IAI/Ema,EAAMvtB,QAAStJ,KAAK6iD,cAAchiD,MAAe,EAARL,IAI1CmtF,YAAa,SAAWntF,EAAO6N,GAE9BA,EAAO/E,QAAStJ,KAAKgvB,eAAenuB,MAAe,GAARL,IAI5C4kC,mBAAoB,aAIpBlzB,QAAS,WAERlS,KAAKU,cAAe,CAAEb,KAAM,eCzF9B,GAAkBjC,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACtD,GAAkBA,UAAUkI,YAAc,GAE1C,GAAkBlI,UAAUqgF,qBAAsB,EAElD,GAAkBrgF,UAAU6I,KAAO,SAAW4K,GAY7C,OAVA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OAExB72B,KAAKq5B,UAAYhoB,EAAOgoB,UACxBr5B,KAAKotF,QAAU/7E,EAAO+7E,QACtBptF,KAAKqtF,SAAWh8E,EAAOg8E,SAEvBrtF,KAAK45B,aAAevoB,EAAOuoB,aAEpB55B,MCxCR,MAAM4tF,GAAS,IAAI,EACbC,GAAO,IAAI,EACX,GAAiB,IAAI3pE,GACrB,GAAO,IAAI9C,GACX,GAAU,IAAIb,GAEpB,SAAS,GAAMxC,EAAW,IAAI,GAAkB2R,EAAW,IAAI,IAE9D,QAAe1vB,MAEfA,KAAKH,KAAO,OAEZG,KAAK+d,SAAWA,EAChB/d,KAAK0vB,SAAWA,EAEhB1vB,KAAKolC,qBAIN,GAAKxnC,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAsB,CAEpEpL,YAAa,GAEbopB,QAAQ,EAERzoB,KAAM,SAAW4K,GAOhB,OALA,uBAA8BrR,KAAMqR,GAEpCrR,KAAK0vB,SAAWre,EAAOqe,SACvB1vB,KAAK+d,SAAW1M,EAAO0M,SAEhB/d,MAIR8tF,qBAAsB,WAErB,MAAM/vE,EAAW/d,KAAK+d,SAEtB,GAAKA,EAAS8hB,iBAIb,GAAwB,OAAnB9hB,EAASvd,MAAiB,CAE9B,MAAMiiC,EAAoB1kB,EAASuhB,WAAWzX,SACxCkmE,EAAgB,CAAE,GAExB,IAAM,IAAIhtF,EAAI,EAAGC,EAAIyhC,EAAkB/lB,MAAO3b,EAAIC,EAAGD,IAEpD6sF,GAAOrkF,oBAAqBk5B,EAAmB1hC,EAAI,GACnD8sF,GAAKtkF,oBAAqBk5B,EAAmB1hC,GAE7CgtF,EAAehtF,GAAMgtF,EAAehtF,EAAI,GACxCgtF,EAAehtF,IAAO6sF,GAAOnlF,WAAYolF,IAI1C9vE,EAASkiB,aAAc,eAAgB,IAAI,GAAwB8tD,EAAe,SAIlFnoF,QAAQC,KAAM,sGAIJkY,EAASsoB,YAEpBzgC,QAAQmE,MAAO,0GAIhB,OAAO/J,MAIR8tB,QAAS,SAAWwX,EAAWY,GAE9B,MAAMnoB,EAAW/d,KAAK+d,SAChB1D,EAAcra,KAAKqa,YACnB0vE,EAAYzkD,EAAU0oD,OAAOC,KAAKlE,UAUxC,GANiC,OAA5BhsE,EAAS2hB,gBAA0B3hB,EAAS2iB,wBAEjD,GAAQj6B,KAAMsX,EAAS2hB,gBACvB,GAAQjtB,aAAc4H,GACtB,GAAQmB,QAAUuuE,GAEiC,IAA9CzkD,EAAU/jB,IAAI9C,iBAAkB,IAAsB,OAI3D,GAAehY,KAAM4T,GAAcxN,SACnC,GAAKpG,KAAM6+B,EAAU/jB,KAAM9O,aAAc,IAEzC,MAAMy7E,EAAiBnE,IAAgB/pF,KAAKiO,MAAM1L,EAAIvC,KAAKiO,MAAMpL,EAAI7C,KAAKiO,MAAMqE,GAAM,GAChF67E,EAAmBD,EAAiBA,EAEpCE,EAAS,IAAI,EACbC,EAAO,IAAI,EACXC,EAAe,IAAI,EACnBC,EAAW,IAAI,EACf12E,EAAO7X,KAAKglF,eAAiB,EAAI,EAEvC,GAAKjnE,EAAS8hB,iBAAmB,CAEhC,MAAMr/B,EAAQud,EAASvd,MAEjBiiC,EADa1kB,EAASuhB,WACSzX,SAErC,GAAe,OAAVrnB,EAAiB,CAErB,MAAM0gC,EAAU1gC,EAAMK,MAEtB,IAAM,IAAIE,EAAI,EAAGC,EAAIkgC,EAAQjgC,OAAS,EAAGF,EAAIC,EAAGD,GAAK8W,EAAO,CAE3D,MAAMhT,EAAIq8B,EAASngC,GACb+D,EAAIo8B,EAASngC,EAAI,GAOvB,GALAqtF,EAAO7kF,oBAAqBk5B,EAAmB59B,GAC/CwpF,EAAK9kF,oBAAqBk5B,EAAmB39B,GAE9B,GAAKgd,oBAAqBssE,EAAQC,EAAME,EAAUD,GAEnDH,EAAmB,SAEjCI,EAAS97E,aAAczS,KAAKqa,aAE5B,MAAMsS,EAAW2Y,EAAU/jB,IAAIF,OAAO5Y,WAAY8lF,GAE7C5hE,EAAW2Y,EAAUxc,MAAQ6D,EAAW2Y,EAAUvc,KAEvDmd,EAAW9lC,KAAM,CAEhBusB,SAAUA,EAGVjP,MAAO4wE,EAAa9nF,QAAQiM,aAAczS,KAAKqa,aAC/C7Z,MAAOO,EACP+kC,KAAM,KACNM,UAAW,KACXhpB,OAAQpd,aAQV,IAAM,IAAIe,EAAI,EAAGC,EAAIyhC,EAAkB/lB,MAAQ,EAAG3b,EAAIC,EAAGD,GAAK8W,EAAO,CAOpE,GALAu2E,EAAO7kF,oBAAqBk5B,EAAmB1hC,GAC/CstF,EAAK9kF,oBAAqBk5B,EAAmB1hC,EAAI,GAElC,GAAK+gB,oBAAqBssE,EAAQC,EAAME,EAAUD,GAEnDH,EAAmB,SAEjCI,EAAS97E,aAAczS,KAAKqa,aAE5B,MAAMsS,EAAW2Y,EAAU/jB,IAAIF,OAAO5Y,WAAY8lF,GAE7C5hE,EAAW2Y,EAAUxc,MAAQ6D,EAAW2Y,EAAUvc,KAEvDmd,EAAW9lC,KAAM,CAEhBusB,SAAUA,EAGVjP,MAAO4wE,EAAa9nF,QAAQiM,aAAczS,KAAKqa,aAC/C7Z,MAAOO,EACP+kC,KAAM,KACNM,UAAW,KACXhpB,OAAQpd,aAQA+d,EAASsoB,YAEpBzgC,QAAQmE,MAAO,8FAMjBq7B,mBAAoB,WAEnB,MAAMrnB,EAAW/d,KAAK+d,SAEtB,GAAKA,EAAS8hB,iBAAmB,CAEhC,MAAMN,EAAkBxhB,EAASwhB,gBAC3BwE,EAAOzmC,OAAOymC,KAAMxE,GAE1B,GAAKwE,EAAK9iC,OAAS,EAAI,CAEtB,MAAM4/B,EAAiBtB,EAAiBwE,EAAM,IAE9C,QAAwBhkC,IAAnB8gC,EAA+B,CAEnC7gC,KAAKylC,sBAAwB,GAC7BzlC,KAAK+lC,sBAAwB,GAE7B,IAAM,IAAI1jC,EAAI,EAAG2jC,EAAKnF,EAAe5/B,OAAQoB,EAAI2jC,EAAI3jC,IAAO,CAE3D,MAAM6N,EAAO2wB,EAAgBx+B,GAAI6N,MAAQ+1B,OAAQ5jC,GAEjDrC,KAAKylC,sBAAsBrlC,KAAM,GACjCJ,KAAK+lC,sBAAuB71B,GAAS7N,SAQlC,CAEN,MAAMu3B,EAAe7b,EAAS6b,kBAER75B,IAAjB65B,GAA8BA,EAAa34B,OAAS,GAExD2E,QAAQmE,MAAO,0GC1OnB,MAAM,GAAS,IAAI,EACb,GAAO,IAAI,EAEjB,SAAS,GAAcgU,EAAU2R,GAEhC,QAAW1vB,KAAM+d,EAAU2R,GAE3B1vB,KAAKH,KAAO,eCTb,SAAS,GAAUke,EAAU2R,GAE5B,QAAW1vB,KAAM+d,EAAU2R,GAE3B1vB,KAAKH,KAAO,WCWb,SAAS,GAAgBuvB,GAExB2E,GAASj2B,KAAMkC,MAEfA,KAAKH,KAAO,iBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UAExB72B,KAAK43B,IAAM,KAEX53B,KAAK83B,SAAW,KAEhB93B,KAAKid,KAAO,EACZjd,KAAKo5B,iBAAkB,EAEvBp5B,KAAK45B,cAAe,EAEpB55B,KAAKw2B,UAAWpH,GFnBjB,GAAaxxB,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAkB,CAExEpL,YAAa,GAEbk/E,gBAAgB,EAEhB8I,qBAAsB,WAErB,MAAM/vE,EAAW/d,KAAK+d,SAEtB,GAAKA,EAAS8hB,iBAIb,GAAwB,OAAnB9hB,EAASvd,MAAiB,CAE9B,MAAMiiC,EAAoB1kB,EAASuhB,WAAWzX,SACxCkmE,EAAgB,GAEtB,IAAM,IAAIhtF,EAAI,EAAGC,EAAIyhC,EAAkB/lB,MAAO3b,EAAIC,EAAGD,GAAK,EAEzD,GAAOwI,oBAAqBk5B,EAAmB1hC,GAC/C,GAAKwI,oBAAqBk5B,EAAmB1hC,EAAI,GAEjDgtF,EAAehtF,GAAc,IAANA,EAAY,EAAIgtF,EAAehtF,EAAI,GAC1DgtF,EAAehtF,EAAI,GAAMgtF,EAAehtF,GAAM,GAAO0H,WAAY,IAIlEsV,EAASkiB,aAAc,eAAgB,IAAI,GAAwB8tD,EAAe,SAIlFnoF,QAAQC,KAAM,8GAIJkY,EAASsoB,YAEpBzgC,QAAQmE,MAAO,kHAIhB,OAAO/J,QChDT,GAASpC,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAkB,CAEpEpL,YAAa,GAEbm/E,YAAY,ICwBb,GAAernF,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACnD,GAAeA,UAAUkI,YAAc,GAEvC,GAAelI,UAAUygF,kBAAmB,EAE5C,GAAezgF,UAAU6I,KAAO,SAAW4K,GAe1C,OAbA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OAExB72B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAKid,KAAO5L,EAAO4L,KACnBjd,KAAKo5B,gBAAkB/nB,EAAO+nB,gBAE9Bp5B,KAAK45B,aAAevoB,EAAOuoB,aAEpB55B,MClDR,MAAM,GAAiB,IAAIkkB,GACrB,GAAO,IAAI9C,GACX,GAAU,IAAIb,GACd,GAAY,IAAI,EAEtB,SAAS,GAAQxC,EAAW,IAAI,GAAkB2R,EAAW,IAAI,IAEhE,QAAe1vB,MAEfA,KAAKH,KAAO,SAEZG,KAAK+d,SAAWA,EAChB/d,KAAK0vB,SAAWA,EAEhB1vB,KAAKolC,qBAoIN,SAASopD,GAAW9wE,EAAOld,EAAO2tF,EAAkB9zE,EAAairB,EAAWY,EAAY9oB,GAEvF,MAAMqxE,EAAqB,GAAK5sE,kBAAmBnE,GAEnD,GAAK+wE,EAAqBN,EAAmB,CAE5C,MAAMO,EAAiB,IAAI,EAE3B,GAAK/sE,oBAAqBjE,EAAOgxE,GACjCA,EAAej8E,aAAc4H,GAE7B,MAAMsS,EAAW2Y,EAAU/jB,IAAIF,OAAO5Y,WAAYimF,GAElD,GAAK/hE,EAAW2Y,EAAUxc,MAAQ6D,EAAW2Y,EAAUvc,IAAM,OAE7Dmd,EAAW9lC,KAAM,CAEhBusB,SAAUA,EACVgiE,cAAertF,KAAK8G,KAAMqmF,GAC1B/wE,MAAOgxE,EACPluF,MAAOA,EACPslC,KAAM,KACN1oB,OAAQA,KC7KX,SAASwxE,GAAcC,EAAOr/E,EAASE,EAAOC,EAAOC,EAAWC,EAAWC,EAAQjQ,EAAMkQ,GAExF,OAAc/P,KAAM6uF,EAAOr/E,EAASE,EAAOC,EAAOC,EAAWC,EAAWC,EAAQjQ,EAAMkQ,GAEtF/P,KAAK8P,YAAoB/P,IAAX+P,EAAuBA,EAASjR,EAE9CmB,KAAK6P,eAA0B9P,IAAd8P,EAA0BA,EAAYvR,EACvD0B,KAAK4P,eAA0B7P,IAAd6P,EAA0BA,EAAYtR,EAEvD0B,KAAKuQ,iBAAkB,EAEvB,MAAMo2B,EAAQ3mC,KAST,8BAA+B6uF,GAEnCA,EAAMC,2BATP,SAASC,IAERpoD,EAAMnG,aAAc,EACpBquD,EAAMC,0BAA2BC,MCjBnC,SAASC,GAAmB7+E,EAASpK,EAAOC,EAAQ8J,EAAQjQ,EAAM2P,EAASE,EAAOC,EAAOC,EAAWC,EAAWE,EAAYC,GAE1H,OAAchQ,KAAM,KAAMwP,EAASE,EAAOC,EAAOC,EAAWC,EAAWC,EAAQjQ,EAAMkQ,EAAYC,GAEjGhQ,KAAKyO,MAAQ,CAAE1I,MAAOA,EAAOC,OAAQA,GACrChG,KAAKmQ,QAAUA,EAKfnQ,KAAKyQ,OAAQ,EAKbzQ,KAAKuQ,iBAAkB,ECfxB,SAAS0+E,GAAepgF,EAAQW,EAASE,EAAOC,EAAOC,EAAWC,EAAWC,EAAQjQ,EAAMkQ,GAE1F,OAAc/P,KAAM6O,EAAQW,EAASE,EAAOC,EAAOC,EAAWC,EAAWC,EAAQjQ,EAAMkQ,GAEvF/P,KAAKwgC,aAAc,ECHpB,SAAS0uD,GAAcnpF,EAAOC,EAAQnG,EAAM2P,EAASE,EAAOC,EAAOC,EAAWC,EAAWE,EAAYD,GAIpG,IAFAA,OAAoB/P,IAAX+P,EAAuBA,EAAS/Q,KAEzBA,GAAe+Q,IAAW9Q,EAEzC,MAAM,IAAIsH,MAAO,yFAIJvG,IAATF,GAAsBiQ,IAAW/Q,IAAcc,EAAOrB,QAC7CuB,IAATF,GAAsBiQ,IAAW9Q,IAAqBa,EAAOjB,GAElE,OAAcoB,KAAM,KAAMwP,EAASE,EAAOC,EAAOC,EAAWC,EAAWC,EAAQjQ,EAAMkQ,GAErF/P,KAAKyO,MAAQ,CAAE1I,MAAOA,EAAOC,OAAQA,GAErChG,KAAK4P,eAA0B7P,IAAd6P,EAA0BA,EAAY,EACvD5P,KAAK6P,eAA0B9P,IAAd8P,EAA0BA,EAAY,EAEvD7P,KAAKyQ,OAAQ,EACbzQ,KAAKuQ,iBAAkB,EJExB,GAAO3S,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAsB,CAEtEpL,YAAa,GAEbqpB,UAAU,EAEV1oB,KAAM,SAAW4K,GAOhB,OALA,uBAA8BrR,KAAMqR,GAEpCrR,KAAK0vB,SAAWre,EAAOqe,SACvB1vB,KAAK+d,SAAW1M,EAAO0M,SAEhB/d,MAIR8tB,QAAS,SAAWwX,EAAWY,GAE9B,MAAMnoB,EAAW/d,KAAK+d,SAChB1D,EAAcra,KAAKqa,YACnB0vE,EAAYzkD,EAAU0oD,OAAOmB,OAAOpF,UAU1C,GANiC,OAA5BhsE,EAAS2hB,gBAA0B3hB,EAAS2iB,wBAEjD,GAAQj6B,KAAMsX,EAAS2hB,gBACvB,GAAQjtB,aAAc4H,GACtB,GAAQmB,QAAUuuE,GAEiC,IAA9CzkD,EAAU/jB,IAAI9C,iBAAkB,IAAsB,OAI3D,GAAehY,KAAM4T,GAAcxN,SACnC,GAAKpG,KAAM6+B,EAAU/jB,KAAM9O,aAAc,IAEzC,MAAMy7E,EAAiBnE,IAAgB/pF,KAAKiO,MAAM1L,EAAIvC,KAAKiO,MAAMpL,EAAI7C,KAAKiO,MAAMqE,GAAM,GAChF67E,EAAmBD,EAAiBA,EAE1C,GAAKnwE,EAAS8hB,iBAAmB,CAEhC,MAAMr/B,EAAQud,EAASvd,MAEjBiiC,EADa1kB,EAASuhB,WACSzX,SAErC,GAAe,OAAVrnB,EAAiB,CAErB,MAAM0gC,EAAU1gC,EAAMK,MAEtB,IAAM,IAAIE,EAAI,EAAG+b,EAAKokB,EAAQjgC,OAAQF,EAAI+b,EAAI/b,IAAO,CAEpD,MAAM8D,EAAIq8B,EAASngC,GAEnB,GAAUwI,oBAAqBk5B,EAAmB59B,GAElD2pF,GAAW,GAAW3pF,EAAGspF,EAAkB9zE,EAAairB,EAAWY,EAAYlmC,YAMhF,IAAM,IAAIe,EAAI,EAAGC,EAAIyhC,EAAkB/lB,MAAO3b,EAAIC,EAAGD,IAEpD,GAAUwI,oBAAqBk5B,EAAmB1hC,GAElDytF,GAAW,GAAWztF,EAAGotF,EAAkB9zE,EAAairB,EAAWY,EAAYlmC,WAQjF4F,QAAQmE,MAAO,gGAMjBq7B,mBAAoB,WAEnB,MAAMrnB,EAAW/d,KAAK+d,SAEtB,GAAKA,EAAS8hB,iBAAmB,CAEhC,MAAMN,EAAkBxhB,EAASwhB,gBAC3BwE,EAAOzmC,OAAOymC,KAAMxE,GAE1B,GAAKwE,EAAK9iC,OAAS,EAAI,CAEtB,MAAM4/B,EAAiBtB,EAAiBwE,EAAM,IAE9C,QAAwBhkC,IAAnB8gC,EAA+B,CAEnC7gC,KAAKylC,sBAAwB,GAC7BzlC,KAAK+lC,sBAAwB,GAE7B,IAAM,IAAI1jC,EAAI,EAAG2jC,EAAKnF,EAAe5/B,OAAQoB,EAAI2jC,EAAI3jC,IAAO,CAE3D,MAAM6N,EAAO2wB,EAAgBx+B,GAAI6N,MAAQ+1B,OAAQ5jC,GAEjDrC,KAAKylC,sBAAsBrlC,KAAM,GACjCJ,KAAK+lC,sBAAuB71B,GAAS7N,SAQlC,CAEN,MAAMu3B,EAAe7b,EAAS6b,kBAER75B,IAAjB65B,GAA8BA,EAAa34B,OAAS,GAExD2E,QAAQmE,MAAO,4GCjHnB6kF,GAAahxF,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,aAAqB,CAE3EpL,YAAa8oF,GAEbpoF,MAAO,WAEN,OAAO,IAAIxG,KAAK8F,YAAa9F,KAAKyO,OAAQhI,KAAMzG,OAIjD8vE,gBAAgB,EAEhBl5D,OAAQ,WAEP,MAAMi4E,EAAQ7uF,KAAKyO,OAGY,GAFD,8BAA+BogF,GAErBA,EAAMO,YAAcP,EAAMQ,oBAEjErvF,KAAKwgC,aAAc,MC7BtBwuD,GAAkBpxF,UAAYN,OAAO4T,OAAQ,aAC7C89E,GAAkBpxF,UAAUkI,YAAckpF,GAE1CA,GAAkBpxF,UAAU2zE,qBAAsB,ECdlD0d,GAAcrxF,UAAYN,OAAO4T,OAAQ,aACzC+9E,GAAcrxF,UAAUkI,YAAcmpF,GACtCA,GAAcrxF,UAAU0xF,iBAAkB,ECgB1CJ,GAAatxF,UAAYN,OAAO4T,OAAQ,aACxCg+E,GAAatxF,UAAUkI,YAAcopF,GACrCA,GAAatxF,UAAUs1E,gBAAiB,ECxB5B,IAAI,EACJ,IAAI,EACA,IAAI,EACF,IAAInhD,GC4CtB,SAASw9D,GAAYv+E,EAAMggB,EAAOI,EAAKo+D,EAAKC,GAE3C,IAAI1uF,EAAG2uF,EAEP,GAAKD,IA+sBN,SAAqBz+E,EAAMggB,EAAOI,EAAKo+D,GAEtC,IAAIG,EAAM,EACV,IAAM,IAAI5uF,EAAIiwB,EAAO9Q,EAAIkR,EAAMo+D,EAAKzuF,EAAIqwB,EAAKrwB,GAAKyuF,EAEjDG,IAAS3+E,EAAMkP,GAAMlP,EAAMjQ,KAAUiQ,EAAMjQ,EAAI,GAAMiQ,EAAMkP,EAAI,IAC/DA,EAAInf,EAIL,OAAO4uF,EAztBcC,CAAY5+E,EAAMggB,EAAOI,EAAKo+D,GAAQ,EAE1D,IAAMzuF,EAAIiwB,EAAOjwB,EAAIqwB,EAAKrwB,GAAKyuF,EAAME,EAAOG,GAAY9uF,EAAGiQ,EAAMjQ,GAAKiQ,EAAMjQ,EAAI,GAAK2uF,QAIrF,IAAM3uF,EAAIqwB,EAAMo+D,EAAKzuF,GAAKiwB,EAAOjwB,GAAKyuF,EAAME,EAAOG,GAAY9uF,EAAGiQ,EAAMjQ,GAAKiQ,EAAMjQ,EAAI,GAAK2uF,GAW7F,OAPKA,GAAQvmF,GAAQumF,EAAMA,EAAKz+B,QAE/B6+B,GAAYJ,GACZA,EAAOA,EAAKz+B,MAINy+B,EAKR,SAASK,GAAc/+D,EAAOI,GAE7B,IAAOJ,EAAQ,OAAOA,EACfI,IAAMA,EAAMJ,GAEnB,IACCg/D,EADGj4E,EAAIiZ,EAER,GAIC,GAFAg/D,GAAQ,EAEDj4E,EAAEk4E,UAAa9mF,GAAQ4O,EAAGA,EAAEk5C,OAAwC,IAA9B,GAAMl5C,EAAEm4E,KAAMn4E,EAAGA,EAAEk5C,MAS/Dl5C,EAAIA,EAAEk5C,SAT0E,CAIhF,GAFA6+B,GAAY/3E,GACZA,EAAIqZ,EAAMrZ,EAAEm4E,KACPn4E,IAAMA,EAAEk5C,KAAO,MACpB++B,GAAQ,SAQAA,GAASj4E,IAAMqZ,GAEzB,OAAOA,EAKR,SAAS++D,GAAcC,EAAKhnC,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,EAASC,GAEhE,IAAOF,EAAM,QAGNE,GAAQD,GA0VhB,SAAqBr/D,EAAO7U,EAAMC,EAAMi0E,GAEvC,IAAIt4E,EAAIiZ,EACR,GAEc,OAARjZ,EAAEzF,IAAayF,EAAEzF,EAAIi+E,GAAQx4E,EAAExV,EAAGwV,EAAElV,EAAGsZ,EAAMC,EAAMi0E,IACxDt4E,EAAEy4E,MAAQz4E,EAAEm4E,KACZn4E,EAAE04E,MAAQ14E,EAAEk5C,KACZl5C,EAAIA,EAAEk5C,WAEGl5C,IAAMiZ,GAEhBjZ,EAAEy4E,MAAMC,MAAQ,KAChB14E,EAAEy4E,MAAQ,KAQX,SAAqB5yB,GAEpB,IAAI78D,EAAGgX,EAAGnT,EAAG4C,EAAGkpF,EAAMC,EAAWC,EAAOC,EACvCC,EAAS,EAEV,EAAG,CAOF,IALA/4E,EAAI6lD,EACJA,EAAO,KACP8yB,EAAO,KACPC,EAAY,EAEJ54E,GAAI,CAKX,IAHA44E,IACA/rF,EAAImT,EACJ64E,EAAQ,EACF7vF,EAAI,EAAGA,EAAI+vF,IAEhBF,IACAhsF,EAAIA,EAAE6rF,MACC7rF,GAJiB7D,KAUzB,IAFA8vF,EAAQC,EAEAF,EAAQ,GAAOC,EAAQ,GAAKjsF,GAEpB,IAAVgsF,IAA2B,IAAVC,IAAiBjsF,GAAKmT,EAAEzF,GAAK1N,EAAE0N,IAEpD9K,EAAIuQ,EACJA,EAAIA,EAAE04E,MACNG,MAIAppF,EAAI5C,EACJA,EAAIA,EAAE6rF,MACNI,KAIIH,EAAOA,EAAKD,MAAQjpF,EACpBo2D,EAAOp2D,EAEZA,EAAEgpF,MAAQE,EACVA,EAAOlpF,EAIRuQ,EAAInT,EAIL8rF,EAAKD,MAAQ,KACbK,GAAU,QAEDH,EAAY,GAhEtBI,CAAYh5E,GAzWai5E,CAAYZ,EAAKj0E,EAAMC,EAAMi0E,GAEtD,IACCH,EAAMj/B,EADHliB,EAAOqhD,EAIX,KAAQA,EAAIF,OAASE,EAAIn/B,MAKxB,GAHAi/B,EAAOE,EAAIF,KACXj/B,EAAOm/B,EAAIn/B,KAENo/B,EAAUY,GAAab,EAAKj0E,EAAMC,EAAMi0E,GAAYa,GAAOd,GAG/DhnC,EAAUhpD,KAAM8vF,EAAKnvF,EAAIyuF,GACzBpmC,EAAUhpD,KAAMgwF,EAAIrvF,EAAIyuF,GACxBpmC,EAAUhpD,KAAM6wD,EAAKlwD,EAAIyuF,GAEzBM,GAAYM,GAGZA,EAAMn/B,EAAKA,KACXliB,EAAOkiB,EAAKA,UASb,IAHAm/B,EAAMn/B,KAGOliB,EAAO,CAGZuhD,EAMc,IAATA,EAGXH,GADAC,EAAMe,GAAwBpB,GAAcK,GAAOhnC,EAAWomC,GAC3CpmC,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,EAAS,GAIpC,IAATC,GAEXc,GAAahB,EAAKhnC,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,GAb9CF,GAAcJ,GAAcK,GAAOhnC,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,EAAS,GAiBzE,OASH,SAASa,GAAOd,GAEf,MAAMvrF,EAAIurF,EAAIF,KACbprF,EAAIsrF,EACJrrF,EAAIqrF,EAAIn/B,KAET,GAAK,GAAMpsD,EAAGC,EAAGC,IAAO,EAAI,OAAO,EAGnC,IAAIgT,EAAIq4E,EAAIn/B,KAAKA,KAEjB,KAAQl5C,IAAMq4E,EAAIF,MAAO,CAExB,GAAKmB,GAAiBxsF,EAAEtC,EAAGsC,EAAEhC,EAAGiC,EAAEvC,EAAGuC,EAAEjC,EAAGkC,EAAExC,EAAGwC,EAAElC,EAAGkV,EAAExV,EAAGwV,EAAElV,IAC1D,GAAMkV,EAAEm4E,KAAMn4E,EAAGA,EAAEk5C,OAAU,EAAI,OAAO,EACzCl5C,EAAIA,EAAEk5C,KAIP,OAAO,EAIR,SAASggC,GAAab,EAAKj0E,EAAMC,EAAMi0E,GAEtC,MAAMxrF,EAAIurF,EAAIF,KACbprF,EAAIsrF,EACJrrF,EAAIqrF,EAAIn/B,KAET,GAAK,GAAMpsD,EAAGC,EAAGC,IAAO,EAAI,OAAO,EAGnC,MAAMusF,EAAQzsF,EAAEtC,EAAIuC,EAAEvC,EAAMsC,EAAEtC,EAAIwC,EAAExC,EAAIsC,EAAEtC,EAAIwC,EAAExC,EAAQuC,EAAEvC,EAAIwC,EAAExC,EAAIuC,EAAEvC,EAAIwC,EAAExC,EAC3EgvF,EAAQ1sF,EAAEhC,EAAIiC,EAAEjC,EAAMgC,EAAEhC,EAAIkC,EAAElC,EAAIgC,EAAEhC,EAAIkC,EAAElC,EAAQiC,EAAEjC,EAAIkC,EAAElC,EAAIiC,EAAEjC,EAAIkC,EAAElC,EACtE2uF,EAAQ3sF,EAAEtC,EAAIuC,EAAEvC,EAAMsC,EAAEtC,EAAIwC,EAAExC,EAAIsC,EAAEtC,EAAIwC,EAAExC,EAAQuC,EAAEvC,EAAIwC,EAAExC,EAAIuC,EAAEvC,EAAIwC,EAAExC,EACtEkvF,EAAQ5sF,EAAEhC,EAAIiC,EAAEjC,EAAMgC,EAAEhC,EAAIkC,EAAElC,EAAIgC,EAAEhC,EAAIkC,EAAElC,EAAQiC,EAAEjC,EAAIkC,EAAElC,EAAIiC,EAAEjC,EAAIkC,EAAElC,EAGjEwZ,EAAOk0E,GAAQe,EAAOC,EAAOp1E,EAAMC,EAAMi0E,GAC9C7zE,EAAO+zE,GAAQiB,EAAOC,EAAOt1E,EAAMC,EAAMi0E,GAE1C,IAAIt4E,EAAIq4E,EAAII,MACXpuF,EAAIguF,EAAIK,MAGT,KAAQ14E,GAAKA,EAAEzF,GAAK+J,GAAQja,GAAKA,EAAEkQ,GAAKkK,GAAO,CAE9C,GAAKzE,IAAMq4E,EAAIF,MAAQn4E,IAAMq4E,EAAIn/B,MAChCogC,GAAiBxsF,EAAEtC,EAAGsC,EAAEhC,EAAGiC,EAAEvC,EAAGuC,EAAEjC,EAAGkC,EAAExC,EAAGwC,EAAElC,EAAGkV,EAAExV,EAAGwV,EAAElV,IACtD,GAAMkV,EAAEm4E,KAAMn4E,EAAGA,EAAEk5C,OAAU,EAAI,OAAO,EAGzC,GAFAl5C,EAAIA,EAAEy4E,MAEDpuF,IAAMguF,EAAIF,MAAQ9tF,IAAMguF,EAAIn/B,MAChCogC,GAAiBxsF,EAAEtC,EAAGsC,EAAEhC,EAAGiC,EAAEvC,EAAGuC,EAAEjC,EAAGkC,EAAExC,EAAGwC,EAAElC,EAAGT,EAAEG,EAAGH,EAAES,IACtD,GAAMT,EAAE8tF,KAAM9tF,EAAGA,EAAE6uD,OAAU,EAAI,OAAO,EACzC7uD,EAAIA,EAAEquF,MAKP,KAAQ14E,GAAKA,EAAEzF,GAAK+J,GAAO,CAE1B,GAAKtE,IAAMq4E,EAAIF,MAAQn4E,IAAMq4E,EAAIn/B,MAChCogC,GAAiBxsF,EAAEtC,EAAGsC,EAAEhC,EAAGiC,EAAEvC,EAAGuC,EAAEjC,EAAGkC,EAAExC,EAAGwC,EAAElC,EAAGkV,EAAExV,EAAGwV,EAAElV,IACtD,GAAMkV,EAAEm4E,KAAMn4E,EAAGA,EAAEk5C,OAAU,EAAI,OAAO,EACzCl5C,EAAIA,EAAEy4E,MAKP,KAAQpuF,GAAKA,EAAEkQ,GAAKkK,GAAO,CAE1B,GAAKpa,IAAMguF,EAAIF,MAAQ9tF,IAAMguF,EAAIn/B,MAChCogC,GAAiBxsF,EAAEtC,EAAGsC,EAAEhC,EAAGiC,EAAEvC,EAAGuC,EAAEjC,EAAGkC,EAAExC,EAAGwC,EAAElC,EAAGT,EAAEG,EAAGH,EAAES,IACtD,GAAMT,EAAE8tF,KAAM9tF,EAAGA,EAAE6uD,OAAU,EAAI,OAAO,EACzC7uD,EAAIA,EAAEquF,MAIP,OAAO,EAKR,SAASU,GAAwBngE,EAAOo4B,EAAWomC,GAElD,IAAIz3E,EAAIiZ,EACR,EAAG,CAEF,MAAMnsB,EAAIkT,EAAEm4E,KACXprF,EAAIiT,EAAEk5C,KAAKA,MAEL9nD,GAAQtE,EAAGC,IAAOohC,GAAYrhC,EAAGkT,EAAGA,EAAEk5C,KAAMnsD,IAAO4sF,GAAe7sF,EAAGC,IAAO4sF,GAAe5sF,EAAGD,KAEpGukD,EAAUhpD,KAAMyE,EAAE9D,EAAIyuF,GACtBpmC,EAAUhpD,KAAM2X,EAAEhX,EAAIyuF,GACtBpmC,EAAUhpD,KAAM0E,EAAE/D,EAAIyuF,GAGtBM,GAAY/3E,GACZ+3E,GAAY/3E,EAAEk5C,MAEdl5C,EAAIiZ,EAAQlsB,GAIbiT,EAAIA,EAAEk5C,WAEGl5C,IAAMiZ,GAEhB,OAAO++D,GAAch4E,GAKtB,SAASq5E,GAAapgE,EAAOo4B,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,GAGxD,IAAIxrF,EAAImsB,EACR,EAAG,CAEF,IAAIlsB,EAAID,EAAEosD,KAAKA,KACf,KAAQnsD,IAAMD,EAAEqrF,MAAO,CAEtB,GAAKrrF,EAAE9D,IAAM+D,EAAE/D,GAAK4wF,GAAiB9sF,EAAGC,GAAM,CAG7C,IAAIC,EAAI6sF,GAAc/sF,EAAGC,GASzB,OANAD,EAAIkrF,GAAclrF,EAAGA,EAAEosD,MACvBlsD,EAAIgrF,GAAchrF,EAAGA,EAAEksD,MAGvBk/B,GAActrF,EAAGukD,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,QAC7CF,GAAcprF,EAAGqkD,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,GAK9CvrF,EAAIA,EAAEmsD,KAIPpsD,EAAIA,EAAEosD,WAEGpsD,IAAMmsB,GAkCjB,SAAS6gE,GAAUhtF,EAAGC,GAErB,OAAOD,EAAEtC,EAAIuC,EAAEvC,EAKhB,SAASuvF,GAAeC,EAAMC,GAG7B,GADAA,EAcD,SAAyBD,EAAMC,GAE9B,IAAIj6E,EAAIi6E,EACR,MAAMC,EAAKF,EAAKxvF,EACV2vF,EAAKH,EAAKlvF,EAChB,IAAqBR,EAAjBkX,GAAK,IAIT,EAAG,CAEF,GAAK24E,GAAMn6E,EAAElV,GAAKqvF,GAAMn6E,EAAEk5C,KAAKpuD,GAAKkV,EAAEk5C,KAAKpuD,IAAMkV,EAAElV,EAAI,CAEtD,MAAMN,EAAIwV,EAAExV,GAAM2vF,EAAKn6E,EAAElV,IAAQkV,EAAEk5C,KAAK1uD,EAAIwV,EAAExV,IAAQwV,EAAEk5C,KAAKpuD,EAAIkV,EAAElV,GACnE,GAAKN,GAAK0vF,GAAM1vF,EAAIgX,EAAK,CAGxB,GADAA,EAAKhX,EACAA,IAAM0vF,EAAK,CAEf,GAAKC,IAAOn6E,EAAElV,EAAI,OAAOkV,EACzB,GAAKm6E,IAAOn6E,EAAEk5C,KAAKpuD,EAAI,OAAOkV,EAAEk5C,KAIjC5uD,EAAI0V,EAAExV,EAAIwV,EAAEk5C,KAAK1uD,EAAIwV,EAAIA,EAAEk5C,MAM7Bl5C,EAAIA,EAAEk5C,WAEGl5C,IAAMi6E,GAEhB,IAAO3vF,EAAI,OAAO,KAElB,GAAK4vF,IAAO14E,EAAK,OAAOlX,EAMxB,MAAM0sC,EAAO1sC,EACZ8vF,EAAK9vF,EAAEE,EACP6vF,EAAK/vF,EAAEQ,EACR,IAAuB0nC,EAAnB8nD,EAASzyD,EAAAA,EAEb7nB,EAAI1V,EAEJ,GAEM4vF,GAAMl6E,EAAExV,GAAKwV,EAAExV,GAAK4vF,GAAMF,IAAOl6E,EAAExV,GACtC8uF,GAAiBa,EAAKE,EAAKH,EAAK14E,EAAI24E,EAAIC,EAAIC,EAAIF,EAAKE,EAAK74E,EAAK04E,EAAIC,EAAIn6E,EAAExV,EAAGwV,EAAElV,KAE/E0nC,EAAMjpC,KAAK8B,IAAK8uF,EAAKn6E,EAAElV,IAAQovF,EAAKl6E,EAAExV,GAEjCmvF,GAAe35E,EAAGg6E,KAAYxnD,EAAM8nD,GAAY9nD,IAAQ8nD,IAAYt6E,EAAExV,EAAIF,EAAEE,GAAOwV,EAAExV,IAAMF,EAAEE,GAAK+vF,GAAsBjwF,EAAG0V,OAE/H1V,EAAI0V,EACJs6E,EAAS9nD,IAMXxyB,EAAIA,EAAEk5C,WAEGl5C,IAAMg3B,GAEhB,OAAO1sC,EAnFKkwF,CAAgBR,EAAMC,GAC7BA,EAAY,CAEhB,MAAMltF,EAAI8sF,GAAcI,EAAWD,GAGnChC,GAAciC,EAAWA,EAAU/gC,MACnC8+B,GAAcjrF,EAAGA,EAAEmsD,OAiFrB,SAASqhC,GAAsBjwF,EAAG0V,GAEjC,OAAO,GAAM1V,EAAE6tF,KAAM7tF,EAAG0V,EAAEm4E,MAAS,GAAK,GAAMn4E,EAAEk5C,KAAM5uD,EAAGA,EAAE4uD,MAAS,EA2FrE,SAASs/B,GAAQhuF,EAAGM,EAAGsZ,EAAMC,EAAMi0E,GAgBlC,OAPA9tF,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAHzBA,EAAI,OAAUA,EAAI4Z,GAASk0E,GAGf9tF,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAKjBM,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAPzBA,EAAI,OAAUA,EAAIuZ,GAASi0E,GAOfxtF,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAEC,EAKnB,SAAS2vF,GAAaxhE,GAErB,IAAIjZ,EAAIiZ,EACPyhE,EAAWzhE,EACZ,IAEMjZ,EAAExV,EAAIkwF,EAASlwF,GAAOwV,EAAExV,IAAMkwF,EAASlwF,GAAKwV,EAAElV,EAAI4vF,EAAS5vF,KAAM4vF,EAAW16E,GACjFA,EAAIA,EAAEk5C,WAEGl5C,IAAMiZ,GAEhB,OAAOyhE,EAKR,SAASpB,GAAiB72E,EAAIC,EAAIE,EAAIC,EAAI7M,EAAIC,EAAI0kF,EAAIC,GAErD,OAAS5kF,EAAK2kF,IAASj4E,EAAKk4E,IAASn4E,EAAKk4E,IAAS1kF,EAAK2kF,IAAQ,IAC5Dn4E,EAAKk4E,IAAS93E,EAAK+3E,IAASh4E,EAAK+3E,IAASj4E,EAAKk4E,IAAQ,IACvDh4E,EAAK+3E,IAAS1kF,EAAK2kF,IAAS5kF,EAAK2kF,IAAS93E,EAAK+3E,IAAQ,EAK5D,SAAShB,GAAiB9sF,EAAGC,GAE5B,OAAOD,EAAEosD,KAAKlwD,IAAM+D,EAAE/D,GAAK8D,EAAEqrF,KAAKnvF,IAAM+D,EAAE/D,IAsD3C,SAA4B8D,EAAGC,GAE9B,IAAIiT,EAAIlT,EACR,EAAG,CAEF,GAAKkT,EAAEhX,IAAM8D,EAAE9D,GAAKgX,EAAEk5C,KAAKlwD,IAAM8D,EAAE9D,GAAKgX,EAAEhX,IAAM+D,EAAE/D,GAAKgX,EAAEk5C,KAAKlwD,IAAM+D,EAAE/D,GACpEmlC,GAAYnuB,EAAGA,EAAEk5C,KAAMpsD,EAAGC,GAAM,OAAO,EACzCiT,EAAIA,EAAEk5C,WAEGl5C,IAAMlT,GAEhB,OAAO,EAjE0C+tF,CAAmB/tF,EAAGC,KACpE4sF,GAAe7sF,EAAGC,IAAO4sF,GAAe5sF,EAAGD,IA8E/C,SAAuBA,EAAGC,GAEzB,IAAIiT,EAAIlT,EACPguF,GAAS,EACV,MAAMH,GAAO7tF,EAAEtC,EAAIuC,EAAEvC,GAAM,EAC1BowF,GAAO9tF,EAAEhC,EAAIiC,EAAEjC,GAAM,EACtB,GAEUkV,EAAElV,EAAI8vF,GAAW56E,EAAEk5C,KAAKpuD,EAAI8vF,GAAU56E,EAAEk5C,KAAKpuD,IAAMkV,EAAElV,GAC1D6vF,GAAO36E,EAAEk5C,KAAK1uD,EAAIwV,EAAExV,IAAQowF,EAAK56E,EAAElV,IAAQkV,EAAEk5C,KAAKpuD,EAAIkV,EAAElV,GAAMkV,EAAExV,IACnEswF,GAAWA,GACZ96E,EAAIA,EAAEk5C,WAEGl5C,IAAMlT,GAEhB,OAAOguF,EA7F8CC,CAAcjuF,EAAGC,KACnE,GAAMD,EAAEqrF,KAAMrrF,EAAGC,EAAEorF,OAAU,GAAMrrF,EAAGC,EAAEorF,KAAMprF,KAChDqE,GAAQtE,EAAGC,IAAO,GAAMD,EAAEqrF,KAAMrrF,EAAGA,EAAEosD,MAAS,GAAK,GAAMnsD,EAAEorF,KAAMprF,EAAGA,EAAEmsD,MAAS,GAKjF,SAAS,GAAMl5C,EAAGnT,EAAG4I,GAEpB,OAAS5I,EAAE/B,EAAIkV,EAAElV,IAAQ2K,EAAEjL,EAAIqC,EAAErC,IAAQqC,EAAErC,EAAIwV,EAAExV,IAAQiL,EAAE3K,EAAI+B,EAAE/B,GAKlE,SAASsG,GAAQkX,EAAIC,GAEpB,OAAOD,EAAG9d,IAAM+d,EAAG/d,GAAK8d,EAAGxd,IAAMyd,EAAGzd,EAKrC,SAASqjC,GAAY7lB,EAAI0yE,EAAIzyE,EAAI0yE,GAEhC,MAAMC,EAAKpvE,GAAM,GAAMxD,EAAI0yE,EAAIzyE,IACzB4yE,EAAKrvE,GAAM,GAAMxD,EAAI0yE,EAAIC,IACzBG,EAAKtvE,GAAM,GAAMvD,EAAI0yE,EAAI3yE,IACzB+yE,EAAKvvE,GAAM,GAAMvD,EAAI0yE,EAAID,IAE/B,OAAKE,IAAOC,GAAMC,IAAOC,KAEb,IAAPH,IAAYI,GAAWhzE,EAAIC,EAAIyyE,OACxB,IAAPG,IAAYG,GAAWhzE,EAAI2yE,EAAID,OACxB,IAAPI,IAAYE,GAAW/yE,EAAID,EAAI2yE,OACxB,IAAPI,IAAYC,GAAW/yE,EAAIyyE,EAAIC,IAOrC,SAASK,GAAWt7E,EAAGnT,EAAG4I,GAEzB,OAAO5I,EAAErC,GAAKjB,KAAKY,IAAK6V,EAAExV,EAAGiL,EAAEjL,IAAOqC,EAAErC,GAAKjB,KAAKW,IAAK8V,EAAExV,EAAGiL,EAAEjL,IAAOqC,EAAE/B,GAAKvB,KAAKY,IAAK6V,EAAElV,EAAG2K,EAAE3K,IAAO+B,EAAE/B,GAAKvB,KAAKW,IAAK8V,EAAElV,EAAG2K,EAAE3K,GAI7H,SAASghB,GAAMyvE,GAEd,OAAOA,EAAM,EAAI,EAAIA,EAAM,GAAM,EAAI,EAqBtC,SAAS5B,GAAe7sF,EAAGC,GAE1B,OAAO,GAAMD,EAAEqrF,KAAMrrF,EAAGA,EAAEosD,MAAS,EAClC,GAAMpsD,EAAGC,EAAGD,EAAEosD,OAAU,GAAK,GAAMpsD,EAAGA,EAAEqrF,KAAMprF,IAAO,EACrD,GAAMD,EAAGC,EAAGD,EAAEqrF,MAAS,GAAK,GAAMrrF,EAAGA,EAAEosD,KAAMnsD,GAAM,EA0BrD,SAAS8sF,GAAc/sF,EAAGC,GAEzB,MAAMrC,EAAK,IAAI8wF,GAAM1uF,EAAE9D,EAAG8D,EAAEtC,EAAGsC,EAAEhC,GAChCF,EAAK,IAAI4wF,GAAMzuF,EAAE/D,EAAG+D,EAAEvC,EAAGuC,EAAEjC,GAC3B2wF,EAAK3uF,EAAEosD,KACPwiC,EAAK3uF,EAAEorF,KAcR,OAZArrF,EAAEosD,KAAOnsD,EACTA,EAAEorF,KAAOrrF,EAETpC,EAAGwuD,KAAOuiC,EACVA,EAAGtD,KAAOztF,EAEVE,EAAGsuD,KAAOxuD,EACVA,EAAGytF,KAAOvtF,EAEV8wF,EAAGxiC,KAAOtuD,EACVA,EAAGutF,KAAOuD,EAEH9wF,EAKR,SAASktF,GAAY9uF,EAAGwB,EAAGM,EAAG6sF,GAE7B,MAAM33E,EAAI,IAAIw7E,GAAMxyF,EAAGwB,EAAGM,GAgB1B,OAdO6sF,GAON33E,EAAEk5C,KAAOy+B,EAAKz+B,KACdl5C,EAAEm4E,KAAOR,EACTA,EAAKz+B,KAAKi/B,KAAOn4E,EACjB23E,EAAKz+B,KAAOl5C,IARZA,EAAEm4E,KAAOn4E,EACTA,EAAEk5C,KAAOl5C,GAWHA,EAIR,SAAS+3E,GAAY/3E,GAEpBA,EAAEk5C,KAAKi/B,KAAOn4E,EAAEm4E,KAChBn4E,EAAEm4E,KAAKj/B,KAAOl5C,EAAEk5C,KAEXl5C,EAAEy4E,QAAQz4E,EAAEy4E,MAAMC,MAAQ14E,EAAE04E,OAC5B14E,EAAE04E,QAAQ14E,EAAE04E,MAAMD,MAAQz4E,EAAEy4E,OAIlC,SAAS+C,GAAMxyF,EAAGwB,EAAGM,GAGpB7C,KAAKe,EAAIA,EAGTf,KAAKuC,EAAIA,EACTvC,KAAK6C,EAAIA,EAGT7C,KAAKkwF,KAAO,KACZlwF,KAAKixD,KAAO,KAGZjxD,KAAKsS,EAAI,KAGTtS,KAAKwwF,MAAQ,KACbxwF,KAAKywF,MAAQ,KAGbzwF,KAAKiwF,SAAU,EClwBhB,MAAMyD,GAAa,CAIlBC,KAAM,SAAWC,GAEhB,MAAMxxF,EAAIwxF,EAAQ3yF,OAClB,IAAI4D,EAAI,EAER,IAAM,IAAIkT,EAAI3V,EAAI,EAAGwC,EAAI,EAAGA,EAAIxC,EAAG2V,EAAInT,IAEtCC,GAAK+uF,EAAS77E,GAAIxV,EAAIqxF,EAAShvF,GAAI/B,EAAI+wF,EAAShvF,GAAIrC,EAAIqxF,EAAS77E,GAAIlV,EAItE,MAAW,GAAJgC,GAIRgvF,YAAa,SAAWC,GAEvB,OAAOJ,GAAWC,KAAMG,GAAQ,GAIjCC,iBAAkB,SAAWH,EAASI,GAErC,MAAMptD,EAAW,GACXqtD,EAAc,GACdC,EAAQ,GAEdC,GAAiBP,GACjBQ,GAAYxtD,EAAUgtD,GAItB,IAAIS,EAAYT,EAAQ3yF,OAExB+yF,EAAM/a,QAASkb,IAEf,IAAM,IAAIpzF,EAAI,EAAGA,EAAIizF,EAAM/yF,OAAQF,IAElCkzF,EAAY7zF,KAAMi0F,GAClBA,GAAaL,EAAOjzF,GAAIE,OACxBmzF,GAAYxtD,EAAUotD,EAAOjzF,IAM9B,MAAMqoD,ED9CM,SAAWp4C,EAAMijF,EAAazE,GAE1CA,EAAMA,GAAO,EAEb,MAAM8E,EAAWL,GAAeA,EAAYhzF,OACtCszF,EAAWD,EAAWL,EAAa,GAAMzE,EAAMx+E,EAAK/P,OAC1D,IAAI+wF,EAAYzC,GAAYv+E,EAAM,EAAGujF,EAAU/E,GAAK,GACpD,MAAMpmC,EAAY,GAElB,IAAO4oC,GAAaA,EAAU/gC,OAAS+gC,EAAU9B,KAAO,OAAO9mC,EAE/D,IAAIjtC,EAAMC,EAAME,EAAMC,EAAMha,EAAGM,EAAGwtF,EAKlC,GAHKiE,IAAWtC,EAqTlB,SAAyBhhF,EAAMijF,EAAajC,EAAWxC,GAEtD,MAAMgF,EAAQ,GACd,IAAIzzF,EAAGuV,EAAK0a,EAAOI,EAAKwsC,EAExB,IAAM78D,EAAI,EAAGuV,EAAM29E,EAAYhzF,OAAQF,EAAIuV,EAAKvV,IAE/CiwB,EAAQijE,EAAalzF,GAAMyuF,EAC3Bp+D,EAAMrwB,EAAIuV,EAAM,EAAI29E,EAAalzF,EAAI,GAAMyuF,EAAMx+E,EAAK/P,OACtD28D,EAAO2xB,GAAYv+E,EAAMggB,EAAOI,EAAKo+D,GAAK,GACrC5xB,IAASA,EAAK3M,OAAO2M,EAAKqyB,SAAU,GACzCuE,EAAMp0F,KAAMoyF,GAAa50B,IAO1B,IAHA42B,EAAMnqC,KAAMwnC,IAGN9wF,EAAI,EAAGA,EAAIyzF,EAAMvzF,OAAQF,IAE9B+wF,GAAe0C,EAAOzzF,GAAKixF,GAC3BA,EAAYjC,GAAciC,EAAWA,EAAU/gC,MAIhD,OAAO+gC,EA9UsByC,CAAgBzjF,EAAMijF,EAAajC,EAAWxC,IAGrEx+E,EAAK/P,OAAS,GAAKuuF,EAAM,CAE7BrzE,EAAOG,EAAOtL,EAAM,GACpBoL,EAAOG,EAAOvL,EAAM,GAEpB,IAAM,IAAIjQ,EAAIyuF,EAAKzuF,EAAIwzF,EAAUxzF,GAAKyuF,EAErCjtF,EAAIyO,EAAMjQ,GACV8B,EAAImO,EAAMjQ,EAAI,GACTwB,EAAI4Z,IAAOA,EAAO5Z,GAClBM,EAAIuZ,IAAOA,EAAOvZ,GAClBN,EAAI+Z,IAAOA,EAAO/Z,GAClBM,EAAI0Z,IAAOA,EAAO1Z,GAKxBwtF,EAAU/uF,KAAKY,IAAKoa,EAAOH,EAAMI,EAAOH,GACxCi0E,EAAsB,IAAZA,EAAgB,EAAIA,EAAU,EAMzC,OAFAF,GAAc6B,EAAW5oC,EAAWomC,EAAKrzE,EAAMC,EAAMi0E,GAE9CjnC,ECMWsrC,CAAoB9tD,EAAUqtD,GAIhD,IAAM,IAAIlzF,EAAI,EAAGA,EAAIqoD,EAAUnoD,OAAQF,GAAK,EAE3CmzF,EAAM9zF,KAAMgpD,EAAUtoD,MAAOC,EAAGA,EAAI,IAIrC,OAAOmzF,IAMT,SAASC,GAAiBv3E,GAEzB,MAAM5b,EAAI4b,EAAO3b,OAEZD,EAAI,GAAK4b,EAAQ5b,EAAI,GAAImI,OAAQyT,EAAQ,KAE7CA,EAAO8/C,MAMT,SAAS03B,GAAYxtD,EAAUgtD,GAE9B,IAAM,IAAI7yF,EAAI,EAAGA,EAAI6yF,EAAQ3yF,OAAQF,IAEpC6lC,EAASxmC,KAAMwzF,EAAS7yF,GAAIwB,GAC5BqkC,EAASxmC,KAAMwzF,EAAS7yF,GAAI8B,GCzD9B,MAAM,WAAwB,GAE7BiD,YAAa0oB,EAAQxa,GAEpBC,QAEAjU,KAAKH,KAAO,kBAEZG,KAAKovB,WAAa,CACjBZ,OAAQA,EACRxa,QAASA,GAGVwa,EAASvd,MAAMe,QAASwc,GAAWA,EAAS,CAAEA,GAE9C,MAAMmY,EAAQ3mC,KAER20F,EAAgB,GAChBrQ,EAAU,GAEhB,IAAM,IAAIvjF,EAAI,EAAGC,EAAIwtB,EAAOvtB,OAAQF,EAAIC,EAAGD,IAG1C6zF,EADcpmE,EAAQztB,IAcvB,SAAS6zF,EAAUvlE,GAElB,MAAMwlE,EAAc,GAIdC,OAA0C/0F,IAA1BiU,EAAQ8gF,cAA8B9gF,EAAQ8gF,cAAgB,GAC9EC,OAA0Bh1F,IAAlBiU,EAAQ+gF,MAAsB/gF,EAAQ+gF,MAAQ,EAC5D,IAAIxuD,OAA0BxmC,IAAlBiU,EAAQuyB,MAAsBvyB,EAAQuyB,MAAQ,IAEtDyuD,OAAwCj1F,IAAzBiU,EAAQghF,cAA6BhhF,EAAQghF,aAC5DC,OAA4Cl1F,IAA3BiU,EAAQihF,eAA+BjhF,EAAQihF,eAAiB,EACjFC,OAAkCn1F,IAAtBiU,EAAQkhF,UAA0BlhF,EAAQkhF,UAAYD,EAAiB,EACnFE,OAAsCp1F,IAAxBiU,EAAQmhF,YAA4BnhF,EAAQmhF,YAAc,EACxEC,OAA0Cr1F,IAA1BiU,EAAQohF,cAA8BphF,EAAQohF,cAAgB,EAElF,MAAMC,EAAcrhF,EAAQqhF,YAEtBC,OAAgCv1F,IAAxBiU,EAAQuhF,YAA4BvhF,EAAQuhF,YAAcC,QAIhDz1F,IAAnBiU,EAAQyhF,SAEZ7vF,QAAQC,KAAM,kEACd0gC,EAAQvyB,EAAQyhF,QAMjB,IAAIC,EACAC,EAAYC,EAAUx6E,EAAQy6E,EADlBC,GAAgB,EAG3BT,IAEJK,EAAaL,EAAYU,gBAAiBhB,GAE1Ce,GAAgB,EAChBd,GAAe,EAMfW,EAAaN,EAAYW,oBAAqBjB,GAAO,GAIrDa,EAAW,IAAI,EACfx6E,EAAS,IAAI,EACby6E,EAAY,IAAI,GAMVb,IAENI,EAAgB,EAChBH,EAAiB,EACjBC,EAAY,EACZC,EAAc,GAMf,MAAMc,EAAc5mE,EAAM6mE,cAAepB,GAEzC,IAAIluD,EAAWqvD,EAAY5mE,MAC3B,MAAM2kE,EAAQiC,EAAYjC,MAI1B,IAFkBN,GAAWG,YAAajtD,GAE3B,CAEdA,EAAWA,EAASuvD,UAIpB,IAAM,IAAIvpF,EAAI,EAAGwpF,EAAKpC,EAAM/yF,OAAQ2L,EAAIwpF,EAAIxpF,IAAO,CAElD,MAAMypF,EAAQrC,EAAOpnF,GAEhB8mF,GAAWG,YAAawC,KAE5BrC,EAAOpnF,GAAMypF,EAAMF,YAStB,MAAMjC,EAAQR,GAAWK,iBAAkBntD,EAAUotD,GAI/CJ,EAAUhtD,EAEhB,IAAM,IAAIh6B,EAAI,EAAGwpF,EAAKpC,EAAM/yF,OAAQ2L,EAAIwpF,EAAIxpF,IAAO,CAElD,MAAMypF,EAAQrC,EAAOpnF,GAErBg6B,EAAWA,EAAS0vD,OAAQD,GAK7B,SAASE,EAAUC,EAAIC,EAAKx5E,GAI3B,OAFOw5E,GAAM7wF,QAAQmE,MAAO,6CAErB0sF,EAAIjwF,QAAQY,eAAgB6V,GAAOtW,IAAK6vF,GAIhD,MAAME,EAAO9vD,EAAS3lC,OAAQ01F,EAAOzC,EAAMjzF,OAM3C,SAAS21F,EAAaC,EAAMC,EAAQC,GASnC,IAAIC,EAAWC,EAAWC,EAK1B,MAAMC,EAAWN,EAAKt0F,EAAIu0F,EAAOv0F,EAChC60F,EAAWP,EAAKh0F,EAAIi0F,EAAOj0F,EACtBw0F,EAAWN,EAAOx0F,EAAIs0F,EAAKt0F,EAChC+0F,EAAWP,EAAOl0F,EAAIg0F,EAAKh0F,EAEtB00F,EAAiBJ,EAAWA,EAAWC,EAAWA,EAGlDI,EAAeL,EAAWG,EAAWF,EAAWC,EAEtD,GAAK/1F,KAAK8B,IAAKo0F,GAAephF,OAAOC,QAAU,CAM9C,MAAMohF,EAAan2F,KAAK8G,KAAMmvF,GACxBG,EAAap2F,KAAK8G,KAAMivF,EAAWA,EAAWC,EAAWA,GAIzDK,EAAkBb,EAAOv0F,EAAI60F,EAAWK,EACxCG,EAAkBd,EAAOj0F,EAAIs0F,EAAWM,EAOxCI,IALkBd,EAAOx0F,EAAI+0F,EAAWI,EAKfC,GAAkBL,GAJzBP,EAAOl0F,EAAIw0F,EAAWK,EAK1BE,GAAkBP,IACnCF,EAAWG,EAAWF,EAAWC,GAIpCL,EAAcW,EAAgBR,EAAWU,EAAKhB,EAAKt0F,EACnD00F,EAAcW,EAAgBR,EAAWS,EAAKhB,EAAKh0F,EAInD,MAAMi1F,EAAkBd,EAAYA,EAAYC,EAAYA,EAC5D,GAAKa,GAAiB,EAErB,OAAO,IAAI,EAASd,EAAWC,GAI/BC,EAAY51F,KAAK8G,KAAM0vF,EAAgB,OAIlC,CAIN,IAAIC,GAAe,EAEdZ,EAAW/gF,OAAOC,QAEjBghF,EAAWjhF,OAAOC,UAEtB0hF,GAAe,GAMXZ,GAAa/gF,OAAOC,QAEnBghF,GAAajhF,OAAOC,UAExB0hF,GAAe,GAMXz2F,KAAKuiB,KAAMuzE,KAAe91F,KAAKuiB,KAAMyzE,KAEzCS,GAAe,GAQbA,GAGJf,GAAcI,EACdH,EAAYE,EACZD,EAAY51F,KAAK8G,KAAMmvF,KAKvBP,EAAYG,EACZF,EAAYG,EACZF,EAAY51F,KAAK8G,KAAMmvF,EAAe,IAMxC,OAAO,IAAI,EAASP,EAAYE,EAAWD,EAAYC,GAKxD,MAAMc,EAAmB,GAEzB,IAAM,IAAIj3F,EAAI,EAAG+b,EAAK82E,EAAQ3yF,OAAQif,EAAIpD,EAAK,EAAGonD,EAAInjE,EAAI,EAAGA,EAAI+b,EAAI/b,IAAMmf,IAAMgkD,IAE3EhkD,IAAMpD,IAAKoD,EAAI,GACfgkD,IAAMpnD,IAAKonD,EAAI,GAKpB8zB,EAAkBj3F,GAAM61F,EAAahD,EAAS7yF,GAAK6yF,EAAS1zE,GAAK0zE,EAAS1vB,IAI3E,MAAM+zB,EAAiB,GACvB,IAAIC,EAAkBC,EAAoBH,EAAiB1B,SAE3D,IAAM,IAAI1pF,EAAI,EAAGwpF,EAAKpC,EAAM/yF,OAAQ2L,EAAIwpF,EAAIxpF,IAAO,CAElD,MAAMypF,EAAQrC,EAAOpnF,GAErBsrF,EAAmB,GAEnB,IAAM,IAAIn3F,EAAI,EAAG+b,EAAKu5E,EAAMp1F,OAAQif,EAAIpD,EAAK,EAAGonD,EAAInjE,EAAI,EAAGA,EAAI+b,EAAI/b,IAAMmf,IAAMgkD,IAEzEhkD,IAAMpD,IAAKoD,EAAI,GACfgkD,IAAMpnD,IAAKonD,EAAI,GAGpBg0B,EAAkBn3F,GAAM61F,EAAaP,EAAOt1F,GAAKs1F,EAAOn2E,GAAKm2E,EAAOnyB,IAIrE+zB,EAAe73F,KAAM83F,GACrBC,EAAoBA,EAAkB7B,OAAQ4B,GAO/C,IAAM,IAAIpzF,EAAI,EAAGA,EAAIswF,EAAetwF,IAAO,CAI1C,MAAMhC,EAAIgC,EAAIswF,EACR9iF,EAAI2iF,EAAiB3zF,KAAK2D,IAAKnC,EAAIxB,KAAKC,GAAK,GAC7C62F,EAAKlD,EAAY5zF,KAAK4D,IAAKpC,EAAIxB,KAAKC,GAAK,GAAM4zF,EAIrD,IAAM,IAAIp0F,EAAI,EAAG+b,EAAK82E,EAAQ3yF,OAAQF,EAAI+b,EAAI/b,IAAO,CAEpD,MAAMs3F,EAAO9B,EAAU3C,EAAS7yF,GAAKi3F,EAAkBj3F,GAAKq3F,GAE5D1xF,EAAG2xF,EAAK91F,EAAG81F,EAAKx1F,GAAKyP,GAMtB,IAAM,IAAI1F,EAAI,EAAGwpF,EAAKpC,EAAM/yF,OAAQ2L,EAAIwpF,EAAIxpF,IAAO,CAElD,MAAMypF,EAAQrC,EAAOpnF,GACrBsrF,EAAmBD,EAAgBrrF,GAEnC,IAAM,IAAI7L,EAAI,EAAG+b,EAAKu5E,EAAMp1F,OAAQF,EAAI+b,EAAI/b,IAAO,CAElD,MAAMs3F,EAAO9B,EAAUF,EAAOt1F,GAAKm3F,EAAkBn3F,GAAKq3F,GAE1D1xF,EAAG2xF,EAAK91F,EAAG81F,EAAKx1F,GAAKyP,KAQxB,MAAM8lF,EAAKlD,EAAYC,EAIvB,IAAM,IAAIp0F,EAAI,EAAGA,EAAI21F,EAAM31F,IAAO,CAEjC,MAAMs3F,EAAOrD,EAAeuB,EAAU3vD,EAAU7lC,GAAKo3F,EAAmBp3F,GAAKq3F,GAAOxxD,EAAU7lC,GAEvF+0F,GAQN16E,EAAO3U,KAAMkvF,EAAWv0D,QAAS,IAAMh6B,eAAgBixF,EAAK91F,GAC5DqzF,EAASnvF,KAAMkvF,EAAW2C,UAAW,IAAMlxF,eAAgBixF,EAAKx1F,GAEhEgzF,EAAUpvF,KAAMivF,EAAY,IAAM/uF,IAAKyU,GAASzU,IAAKivF,GAErDlvF,EAAGmvF,EAAUtzF,EAAGszF,EAAUhzF,EAAGgzF,EAAUvjF,IAXvC5L,EAAG2xF,EAAK91F,EAAG81F,EAAKx1F,EAAG,GAoBrB,IAAM,IAAIkB,EAAI,EAAGA,GAAKgxF,EAAOhxF,IAE5B,IAAM,IAAIhD,EAAI,EAAGA,EAAI21F,EAAM31F,IAAO,CAEjC,MAAMs3F,EAAOrD,EAAeuB,EAAU3vD,EAAU7lC,GAAKo3F,EAAmBp3F,GAAKq3F,GAAOxxD,EAAU7lC,GAEvF+0F,GAQN16E,EAAO3U,KAAMkvF,EAAWv0D,QAASr9B,IAAMqD,eAAgBixF,EAAK91F,GAC5DqzF,EAASnvF,KAAMkvF,EAAW2C,UAAWv0F,IAAMqD,eAAgBixF,EAAKx1F,GAEhEgzF,EAAUpvF,KAAMivF,EAAY3xF,IAAM4C,IAAKyU,GAASzU,IAAKivF,GAErDlvF,EAAGmvF,EAAUtzF,EAAGszF,EAAUhzF,EAAGgzF,EAAUvjF,IAXvC5L,EAAG2xF,EAAK91F,EAAG81F,EAAKx1F,EAAG0jC,EAAQwuD,EAAQhxF,GAuBtC,IAAM,IAAIe,EAAIswF,EAAgB,EAAGtwF,GAAK,EAAGA,IAAO,CAE/C,MAAMhC,EAAIgC,EAAIswF,EACR9iF,EAAI2iF,EAAiB3zF,KAAK2D,IAAKnC,EAAIxB,KAAKC,GAAK,GAC7C62F,EAAKlD,EAAY5zF,KAAK4D,IAAKpC,EAAIxB,KAAKC,GAAK,GAAM4zF,EAIrD,IAAM,IAAIp0F,EAAI,EAAG+b,EAAK82E,EAAQ3yF,OAAQF,EAAI+b,EAAI/b,IAAO,CAEpD,MAAMs3F,EAAO9B,EAAU3C,EAAS7yF,GAAKi3F,EAAkBj3F,GAAKq3F,GAC5D1xF,EAAG2xF,EAAK91F,EAAG81F,EAAKx1F,EAAG0jC,EAAQj0B,GAM5B,IAAM,IAAI1F,EAAI,EAAGwpF,EAAKpC,EAAM/yF,OAAQ2L,EAAIwpF,EAAIxpF,IAAO,CAElD,MAAMypF,EAAQrC,EAAOpnF,GACrBsrF,EAAmBD,EAAgBrrF,GAEnC,IAAM,IAAI7L,EAAI,EAAG+b,EAAKu5E,EAAMp1F,OAAQF,EAAI+b,EAAI/b,IAAO,CAElD,MAAMs3F,EAAO9B,EAAUF,EAAOt1F,GAAKm3F,EAAkBn3F,GAAKq3F,GAEnDtC,EAMNpvF,EAAG2xF,EAAK91F,EAAG81F,EAAKx1F,EAAI6yF,EAAYX,EAAQ,GAAIlyF,EAAG6yF,EAAYX,EAAQ,GAAIxyF,EAAI+P,GAJ3E5L,EAAG2xF,EAAK91F,EAAG81F,EAAKx1F,EAAG0jC,EAAQj0B,KA4G/B,SAASimF,EAAW3E,EAAS4E,GAE5B,IAAIz3F,EAAI6yF,EAAQ3yF,OAEhB,OAAWF,GAAK,GAAI,CAEnB,MAAMmf,EAAInf,EACV,IAAImjE,EAAInjE,EAAI,EACPmjE,EAAI,IAAIA,EAAI0vB,EAAQ3yF,OAAS,GAIlC,IAAM,IAAI8C,EAAI,EAAG00F,EAAO1D,EAAwB,EAAhBK,EAAqBrxF,EAAI00F,EAAI10F,IAAO,CAEnE,MAAM20F,EAAQhC,EAAO3yF,EACf40F,EAAQjC,GAAS3yF,EAAI,GAO3B60F,EALUJ,EAAct4E,EAAIw4E,EACvBF,EAAct0B,EAAIw0B,EAClBF,EAAct0B,EAAIy0B,EAClBH,EAAct4E,EAAIy4E,KAU1B,SAASjyF,EAAGnE,EAAGM,EAAGyP,GAEjBuiF,EAAYz0F,KAAMmC,GAClBsyF,EAAYz0F,KAAMyC,GAClBgyF,EAAYz0F,KAAMkS,GAKnB,SAASumF,EAAIh0F,EAAGC,EAAGC,GAElB+zF,EAAWj0F,GACXi0F,EAAWh0F,GACXg0F,EAAW/zF,GAEX,MAAMg0F,EAAYpE,EAAc1zF,OAAS,EACnCogC,EAAMi0D,EAAM0D,cAAeryD,EAAOguD,EAAeoE,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAEjGE,EAAO53D,EAAK,IACZ43D,EAAO53D,EAAK,IACZ43D,EAAO53D,EAAK,IAIb,SAASu3D,EAAI/zF,EAAGC,EAAGC,EAAG0H,GAErBqsF,EAAWj0F,GACXi0F,EAAWh0F,GACXg0F,EAAWrsF,GAEXqsF,EAAWh0F,GACXg0F,EAAW/zF,GACX+zF,EAAWrsF,GAGX,MAAMssF,EAAYpE,EAAc1zF,OAAS,EACnCogC,EAAMi0D,EAAM4D,mBAAoBvyD,EAAOguD,EAAeoE,EAAY,EAAGA,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAErHE,EAAO53D,EAAK,IACZ43D,EAAO53D,EAAK,IACZ43D,EAAO53D,EAAK,IAEZ43D,EAAO53D,EAAK,IACZ43D,EAAO53D,EAAK,IACZ43D,EAAO53D,EAAK,IAIb,SAASy3D,EAAWt4F,GAEnBm0F,EAAcv0F,KAAMy0F,EAAqB,EAARr0F,EAAY,IAC7Cm0F,EAAcv0F,KAAMy0F,EAAqB,EAARr0F,EAAY,IAC7Cm0F,EAAcv0F,KAAMy0F,EAAqB,EAARr0F,EAAY,IAK9C,SAASy4F,EAAOE,GAEf7U,EAAQlkF,KAAM+4F,EAAQ52F,GACtB+hF,EAAQlkF,KAAM+4F,EAAQt2F,IA3KvB,WAEC,MAAMmuB,EAAQ2jE,EAAc1zF,OAAS,EAErC,GAAK+zF,EAAe,CAEnB,IAAIoE,EAAQ,EACR/vF,EAASqtF,EAAO0C,EAIpB,IAAM,IAAIr4F,EAAI,EAAGA,EAAI41F,EAAM51F,IAAO,CAEjC,MAAM+kC,EAAOouD,EAAOnzF,GACpB83F,EAAI/yD,EAAM,GAAMz8B,EAAQy8B,EAAM,GAAMz8B,EAAQy8B,EAAM,GAAMz8B,GAIzD+vF,EAAQrE,EAAwB,EAAhBK,EAChB/rF,EAASqtF,EAAO0C,EAIhB,IAAM,IAAIr4F,EAAI,EAAGA,EAAI41F,EAAM51F,IAAO,CAEjC,MAAM+kC,EAAOouD,EAAOnzF,GACpB83F,EAAI/yD,EAAM,GAAMz8B,EAAQy8B,EAAM,GAAMz8B,EAAQy8B,EAAM,GAAMz8B,QAInD,CAIN,IAAM,IAAItI,EAAI,EAAGA,EAAI41F,EAAM51F,IAAO,CAEjC,MAAM+kC,EAAOouD,EAAOnzF,GACpB83F,EAAI/yD,EAAM,GAAKA,EAAM,GAAKA,EAAM,IAMjC,IAAM,IAAI/kC,EAAI,EAAGA,EAAI41F,EAAM51F,IAAO,CAEjC,MAAM+kC,EAAOouD,EAAOnzF,GACpB83F,EAAI/yD,EAAM,GAAM4wD,EAAO3B,EAAOjvD,EAAM,GAAM4wD,EAAO3B,EAAOjvD,EAAM,GAAM4wD,EAAO3B,IAM7EpuD,EAAMvG,SAAUpP,EAAO2jE,EAAc1zF,OAAS,EAAI+vB,EAAO,GA7D1DqoE,GAmEA,WAEC,MAAMroE,EAAQ2jE,EAAc1zF,OAAS,EACrC,IAAIu3F,EAAc,EAClBD,EAAW3E,EAAS4E,GACpBA,GAAe5E,EAAQ3yF,OAEvB,IAAM,IAAI2L,EAAI,EAAGwpF,EAAKpC,EAAM/yF,OAAQ2L,EAAIwpF,EAAIxpF,IAAO,CAElD,MAAMypF,EAAQrC,EAAOpnF,GACrB2rF,EAAWlC,EAAOmC,GAGlBA,GAAenC,EAAMp1F,OAKtB0lC,EAAMvG,SAAUpP,EAAO2jE,EAAc1zF,OAAS,EAAI+vB,EAAO,GAjF1DsoE,GA7bDt5F,KAAKigC,aAAc,WAAY,IAAI,GAAwB00D,EAAe,IAC1E30F,KAAKigC,aAAc,KAAM,IAAI,GAAwBqkD,EAAS,IAE9DtkF,KAAKwiC,uBAknBNlxB,SAEC,MAAMN,EAAO,yBAAsChR,MAKnD,OAgEF,SAAiBwuB,EAAQxa,EAAShD,GAIjC,GAFAA,EAAKwd,OAAS,GAETvd,MAAMe,QAASwc,GAEnB,IAAM,IAAIztB,EAAI,EAAGC,EAAIwtB,EAAOvtB,OAAQF,EAAIC,EAAGD,IAAO,CAEjD,MAAMsuB,EAAQb,EAAQztB,GAEtBiQ,EAAKwd,OAAOpuB,KAAMivB,EAAMpf,WAMzBe,EAAKwd,OAAOpuB,KAAMouB,EAAOve,MAM1B,YAF6BlQ,IAAxBiU,EAAQqhF,cAA4BrkF,EAAKgD,QAAQqhF,YAAcrhF,EAAQqhF,YAAY/jF,UAEjFN,EAtFCM,CAHQtR,KAAKovB,WAAWZ,OACfxuB,KAAKovB,WAAWpb,QAEAhD,IAMlC,MAAMwkF,GAAmB,CAExBwD,cAAe,SAAWj7E,EAAU6oB,EAAU2yD,EAAQC,EAAQC,GAE7D,MAAMC,EAAM9yD,EAAmB,EAAT2yD,GAChBI,EAAM/yD,EAAmB,EAAT2yD,EAAa,GAC7BK,EAAMhzD,EAAmB,EAAT4yD,GAChBK,EAAMjzD,EAAmB,EAAT4yD,EAAa,GAC7BM,EAAMlzD,EAAmB,EAAT6yD,GAChBM,EAAMnzD,EAAmB,EAAT6yD,EAAa,GAEnC,MAAO,CACN,IAAI,EAASC,EAAKC,GAClB,IAAI,EAASC,EAAKC,GAClB,IAAI,EAASC,EAAKC,KAKpBb,mBAAoB,SAAWn7E,EAAU6oB,EAAU2yD,EAAQC,EAAQC,EAAQO,GAE1E,MAAMN,EAAM9yD,EAAmB,EAAT2yD,GAChBI,EAAM/yD,EAAmB,EAAT2yD,EAAa,GAC7BU,EAAMrzD,EAAmB,EAAT2yD,EAAa,GAC7BK,EAAMhzD,EAAmB,EAAT4yD,GAChBK,EAAMjzD,EAAmB,EAAT4yD,EAAa,GAC7BU,EAAMtzD,EAAmB,EAAT4yD,EAAa,GAC7BM,EAAMlzD,EAAmB,EAAT6yD,GAChBM,EAAMnzD,EAAmB,EAAT6yD,EAAa,GAC7BU,EAAMvzD,EAAmB,EAAT6yD,EAAa,GAC7BW,EAAMxzD,EAAmB,EAATozD,GAChBK,EAAMzzD,EAAmB,EAATozD,EAAa,GAC7BM,EAAM1zD,EAAmB,EAATozD,EAAa,GAEnC,OAAK14F,KAAK8B,IAAKu2F,EAAME,GAAQ,IAErB,CACN,IAAI,EAASH,EAAK,EAAIO,GACtB,IAAI,EAASL,EAAK,EAAIM,GACtB,IAAI,EAASJ,EAAK,EAAIK,GACtB,IAAI,EAASC,EAAK,EAAIE,IAKhB,CACN,IAAI,EAASX,EAAK,EAAIM,GACtB,IAAI,EAASJ,EAAK,EAAIK,GACtB,IAAI,EAASH,EAAK,EAAII,GACtB,IAAI,EAASE,EAAK,EAAIC,MCnuB1B,SAASC,GAAoBC,EAAMC,EAAQC,GAE1C,QAAqB16F,MAErBA,KAAKH,KAAO,qBAEZG,KAAKovB,WAAa,CACjBorE,KAAMA,EACNC,OAAQA,EACRC,OAAQA,GAKT,MAAMx5D,EAAU,GACV0F,EAAW,GACXxF,EAAU,GACVC,EAAM,GAENs5D,EAAM,KAENv/E,EAAS,IAAI,EAEbgF,EAAK,IAAI,EAAWC,EAAK,IAAI,EAC7Bu6E,EAAK,IAAI,EAAWC,EAAK,IAAI,EAE9BL,EAAKv5F,OAAS,GAElB2E,QAAQmE,MAAO,oFAMhB,MAAM+wF,EAAaL,EAAS,EAE5B,IAAM,IAAI15F,EAAI,EAAGA,GAAK25F,EAAQ35F,IAAO,CAEpC,MAAM2F,EAAI3F,EAAI25F,EAEd,IAAM,IAAIx6E,EAAI,EAAGA,GAAKu6E,EAAQv6E,IAAO,CAEpC,MAAMsS,EAAItS,EAAIu6E,EAIdD,EAAMhoE,EAAG9rB,EAAG0Z,GACZwmB,EAASxmC,KAAMggB,EAAG7d,EAAG6d,EAAGvd,EAAGud,EAAG9N,GAMzBkgB,EAAImoE,GAAO,GAEfH,EAAMhoE,EAAImoE,EAAKj0F,EAAG2Z,GAClBu6E,EAAG3zF,WAAYmZ,EAAIC,KAInBm6E,EAAMhoE,EAAImoE,EAAKj0F,EAAG2Z,GAClBu6E,EAAG3zF,WAAYoZ,EAAID,IAIf1Z,EAAIi0F,GAAO,GAEfH,EAAMhoE,EAAG9rB,EAAIi0F,EAAKt6E,GAClBw6E,EAAG5zF,WAAYmZ,EAAIC,KAInBm6E,EAAMhoE,EAAG9rB,EAAIi0F,EAAKt6E,GAClBw6E,EAAG5zF,WAAYoZ,EAAID,IAMpBhF,EAAOb,aAAcqgF,EAAIC,GAAKvyF,YAC9B84B,EAAQhhC,KAAMgb,EAAO7Y,EAAG6Y,EAAOvY,EAAGuY,EAAO9I,GAIzC+uB,EAAIjhC,KAAMoyB,EAAG9rB,IAQf,IAAM,IAAI3F,EAAI,EAAGA,EAAI25F,EAAQ35F,IAE5B,IAAM,IAAImf,EAAI,EAAGA,EAAIu6E,EAAQv6E,IAAO,CAEnC,MAAMrb,EAAI9D,EAAI+5F,EAAa56E,EACrBpb,EAAI/D,EAAI+5F,EAAa56E,EAAI,EACzBnb,GAAMhE,EAAI,GAAM+5F,EAAa56E,EAAI,EACjCzT,GAAM1L,EAAI,GAAM+5F,EAAa56E,EAInCghB,EAAQ9gC,KAAMyE,EAAGC,EAAG2H,GACpBy0B,EAAQ9gC,KAAM0E,EAAGC,EAAG0H,GAQtBzM,KAAK+/B,SAAUmB,GACflhC,KAAKigC,aAAc,WAAY,IAAI,GAAwB2G,EAAU,IACrE5mC,KAAKigC,aAAc,SAAU,IAAI,GAAwBmB,EAAS,IAClEphC,KAAKigC,aAAc,KAAM,IAAI,GAAwBoB,EAAK,IAI3Dk5D,GAAmB38F,UAAYN,OAAO4T,OAAQ,cAC9CqpF,GAAmB38F,UAAUkI,YAAcy0F,GC7H3C,MAAMQ,WAAsB,GAE3Bj1F,YAAa0oB,EAAQsmE,EAAgB,IAEpC7gF,QACAjU,KAAKH,KAAO,gBAEZG,KAAKovB,WAAa,CACjBZ,OAAQA,EACRsmE,cAAeA,GAKhB,MAAM5zD,EAAU,GACV0F,EAAW,GACXxF,EAAU,GACVC,EAAM,GAIZ,IAAIyF,EAAa,EACbc,EAAa,EAIjB,IAAiC,IAA5B32B,MAAMe,QAASwc,GAEnBomE,EAAUpmE,QAIV,IAAM,IAAIztB,EAAI,EAAGA,EAAIytB,EAAOvtB,OAAQF,IAEnC6zF,EAAUpmE,EAAQztB,IAElBf,KAAKogC,SAAU0G,EAAYc,EAAY7mC,GAEvC+lC,GAAcc,EACdA,EAAa,EAgBf,SAASgtD,EAAUvlE,GAElB,MAAM2rE,EAAcp0D,EAAS3lC,OAAS,EAChC2b,EAASyS,EAAM6mE,cAAepB,GAEpC,IAAImG,EAAgBr+E,EAAOyS,MAC3B,MAAM6rE,EAAat+E,EAAOo3E,OAIuB,IAA5CN,GAAWG,YAAaoH,KAE5BA,EAAgBA,EAAc9E,WAI/B,IAAM,IAAIp1F,EAAI,EAAGC,EAAIk6F,EAAWj6F,OAAQF,EAAIC,EAAGD,IAAO,CAErD,MAAMo6F,EAAYD,EAAYn6F,IAEe,IAAxC2yF,GAAWG,YAAasH,KAE5BD,EAAYn6F,GAAMo6F,EAAUhF,WAM9B,MAAMjC,EAAQR,GAAWK,iBAAkBkH,EAAeC,GAI1D,IAAM,IAAIn6F,EAAI,EAAGC,EAAIk6F,EAAWj6F,OAAQF,EAAIC,EAAGD,IAAO,CAErD,MAAMo6F,EAAYD,EAAYn6F,GAC9Bk6F,EAAgBA,EAAc3E,OAAQ6E,GAMvC,IAAM,IAAIp6F,EAAI,EAAGC,EAAIi6F,EAAch6F,OAAQF,EAAIC,EAAGD,IAAO,CAExD,MAAMq6F,EAASH,EAAel6F,GAE9B6lC,EAASxmC,KAAMg7F,EAAO74F,EAAG64F,EAAOv4F,EAAG,GACnCu+B,EAAQhhC,KAAM,EAAG,EAAG,GACpBihC,EAAIjhC,KAAMg7F,EAAO74F,EAAG64F,EAAOv4F,GAM5B,IAAM,IAAI9B,EAAI,EAAGC,EAAIkzF,EAAMjzF,OAAQF,EAAIC,EAAGD,IAAO,CAEhD,MAAM+kC,EAAOouD,EAAOnzF,GAEd8D,EAAIihC,EAAM,GAAMk1D,EAChBl2F,EAAIghC,EAAM,GAAMk1D,EAChBj2F,EAAI+gC,EAAM,GAAMk1D,EAEtB95D,EAAQ9gC,KAAMyE,EAAGC,EAAGC,GACpB6iC,GAAc,GAtEhB5nC,KAAK+/B,SAAUmB,GACflhC,KAAKigC,aAAc,WAAY,IAAI,GAAwB2G,EAAU,IACrE5mC,KAAKigC,aAAc,SAAU,IAAI,GAAwBmB,EAAS,IAClEphC,KAAKigC,aAAc,KAAM,IAAI,GAAwBoB,EAAK,IA2E3D/vB,SAEC,MAAMN,EAAO,yBAAsChR,MAInD,OAMF,SAAiBwuB,EAAQxd,GAIxB,GAFAA,EAAKwd,OAAS,GAETvd,MAAMe,QAASwc,GAEnB,IAAM,IAAIztB,EAAI,EAAGC,EAAIwtB,EAAOvtB,OAAQF,EAAIC,EAAGD,IAAO,CAEjD,MAAMsuB,EAAQb,EAAQztB,GAEtBiQ,EAAKwd,OAAOpuB,KAAMivB,EAAMpf,WAMzBe,EAAKwd,OAAOpuB,KAAMouB,EAAOve,MAI1B,OAAOe,EA1BC,CAFQhR,KAAKovB,WAAWZ,OAERxd,ICnIzB,MAAM,WAA0B,GAE/BlL,YAAaiY,GAKZ,GAHA9J,QACAjU,KAAKH,KAAO,qBAEiB,IAAxBke,EAASsoB,WAGb,YADAzgC,QAAQmE,MAAO,gGAOhB,MAAM68B,EAAW,GAIXy0D,EAAO,CAAE,EAAG,GAAKC,EAAQ,GAEzBF,EAAS,IAAI,EAEnB,GAAwB,OAAnBr9E,EAASvd,MAAiB,CAI9B,MAAMqnB,EAAW9J,EAASuhB,WAAWzX,SAC/BqZ,EAAUnjB,EAASvd,MACzB,IAAIi/B,EAAS1hB,EAAS0hB,OAEC,IAAlBA,EAAOx+B,SAEXw+B,EAAS,CAAE,CAAEzO,MAAO,EAAGtU,MAAOwkB,EAAQxkB,MAAO2jB,cAAe,KAM7D,IAAM,IAAIhjC,EAAI,EAAGk+F,EAAK97D,EAAOx+B,OAAQ5D,EAAIk+F,IAAOl+F,EAAI,CAEnD,MAAM+kC,EAAQ3C,EAAQpiC,GAEhB2zB,EAAQoR,EAAMpR,MAGpB,IAAM,IAAIjwB,EAAIiwB,EAAOhwB,EAAMgwB,EAFboR,EAAM1lB,MAEwB3b,EAAIC,EAAGD,GAAK,EAEvD,IAAM,IAAImf,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAMs7E,EAAQt6D,EAAQz3B,KAAM1I,EAAImf,GAC1Bu7E,EAAQv6D,EAAQz3B,KAAM1I,GAAMmf,EAAI,GAAM,GAC5Cm7E,EAAM,GAAM/5F,KAAKW,IAAKu5F,EAAOC,GAC7BJ,EAAM,GAAM/5F,KAAKY,IAAKs5F,EAAOC,GAE7B,MAAMr+F,EAAMi+F,EAAM,GAAM,IAAMA,EAAM,QAEdt7F,IAAjBu7F,EAAOl+F,KAEXk+F,EAAOl+F,GAAQ,CAAE8gC,OAAQm9D,EAAM,GAAKl9D,OAAQk9D,EAAM,MAYtD,IAAM,MAAMj+F,KAAOk+F,EAAQ,CAE1B,MAAM9zF,EAAI8zF,EAAOl+F,GAEjBg+F,EAAO7xF,oBAAqBse,EAAUrgB,EAAE02B,QACxC0I,EAASxmC,KAAMg7F,EAAO74F,EAAG64F,EAAOv4F,EAAGu4F,EAAO9oF,GAE1C8oF,EAAO7xF,oBAAqBse,EAAUrgB,EAAE22B,QACxCyI,EAASxmC,KAAMg7F,EAAO74F,EAAG64F,EAAOv4F,EAAGu4F,EAAO9oF,QAIrC,CAIN,MAAMuV,EAAW9J,EAASuhB,WAAWzX,SAErC,IAAM,IAAI9mB,EAAI,EAAGC,EAAM6mB,EAASnL,MAAQ,EAAK3b,EAAIC,EAAGD,IAEnD,IAAM,IAAImf,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAK9B,MAAMge,EAAS,EAAIn9B,EAAImf,EACvBk7E,EAAO7xF,oBAAqBse,EAAUqW,GACtC0I,EAASxmC,KAAMg7F,EAAO74F,EAAG64F,EAAOv4F,EAAGu4F,EAAO9oF,GAE1C,MAAM6rB,EAAS,EAAIp9B,GAAQmf,EAAI,GAAM,EACrCk7E,EAAO7xF,oBAAqBse,EAAUsW,GACtCyI,EAASxmC,KAAMg7F,EAAO74F,EAAG64F,EAAOv4F,EAAGu4F,EAAO9oF,IAU7CtS,KAAKigC,aAAc,WAAY,IAAI,GAAwB2G,EAAU,KC5GvE,SAASo0B,GAAgB5rC,GAExB2E,GAASj2B,KAAMkC,MAEfA,KAAKH,KAAO,iBAEZG,KAAK62B,MAAQ,IAAI,GAAO,GACxB72B,KAAKs0B,aAAc,EAEnBt0B,KAAKw2B,UAAWpH,GChBjB,SAAS,GAAmBA,GAE3BmZ,GAAezqC,KAAMkC,KAAMovB,GAE3BpvB,KAAKH,KAAO,oBCiDb,SAAS66D,GAAsBtrC,GAE9B2E,GAASj2B,KAAMkC,MAEfA,KAAKwoC,QAAU,CAAE,SAAY,IAE7BxoC,KAAKH,KAAO,uBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UACxB72B,KAAK+2B,UAAY,EACjB/2B,KAAKg3B,UAAY,EAEjBh3B,KAAK43B,IAAM,KAEX53B,KAAK+3B,SAAW,KAChB/3B,KAAK48B,kBAAoB,EAEzB58B,KAAKg4B,MAAQ,KACbh4B,KAAKi4B,eAAiB,EAEtBj4B,KAAKk3B,SAAW,IAAI,GAAO,GAC3Bl3B,KAAKm3B,kBAAoB,EACzBn3B,KAAK44B,YAAc,KAEnB54B,KAAKk4B,QAAU,KACfl4B,KAAKm4B,UAAY,EAEjBn4B,KAAKo4B,UAAY,KACjBp4B,KAAKq4B,chPoF+B,EgPnFpCr4B,KAAKs4B,YAAc,IAAI,EAAS,EAAG,GAEnCt4B,KAAKu4B,gBAAkB,KACvBv4B,KAAKw4B,kBAAoB,EACzBx4B,KAAKy4B,iBAAmB,EAExBz4B,KAAK04B,aAAe,KAEpB14B,KAAK24B,aAAe,KAEpB34B,KAAK83B,SAAW,KAEhB93B,KAAK84B,OAAS,KACd94B,KAAKk5B,gBAAkB,EAEvBl5B,KAAKg5B,gBAAkB,IAEvBh5B,KAAKw5B,WAAY,EACjBx5B,KAAKy5B,mBAAqB,EAC1Bz5B,KAAK05B,iBAAmB,QACxB15B,KAAK25B,kBAAoB,QAEzB35B,KAAK85B,UAAW,EAChB95B,KAAK45B,cAAe,EACpB55B,KAAK65B,cAAe,EAEpB75B,KAAKm3D,gBAAiB,EAEtBn3D,KAAKw2B,UAAWpH,GCxFjB,SAASurC,GAAsBvrC,GAE9BsrC,GAAqB58D,KAAMkC,MAE3BA,KAAKwoC,QAAU,CAEd,SAAY,GACZ,SAAY,IAIbxoC,KAAKH,KAAO,uBAEZG,KAAKs3B,UAAY,EACjBt3B,KAAKw3B,aAAe,KACpBx3B,KAAKu3B,mBAAqB,EAC1Bv3B,KAAKy3B,sBAAwB,KAC7Bz3B,KAAK23B,qBAAuB,IAAI,EAAS,EAAG,GAC5C33B,KAAK03B,mBAAqB,KAE1B13B,KAAK+4B,aAAe,GAEpBz7B,OAAOC,eAAgByC,KAAM,MAAO,CACnCvC,IAAK,WAEJ,OAAS,EAAI,GAAMuC,KAAK+4B,eAAmB,EAAI,GAAM/4B,KAAK+4B,eAG3DpzB,IAAK,SAAW+1F,GAEf17F,KAAK+4B,aAAe,QAAiB,KAAQ2iE,EAAM,IAAQA,EAAM,GAAK,EAAG,MAK3E17F,KAAKi3B,MAAQ,KAEbj3B,KAAKorD,aAAe,EACpBprD,KAAKqrD,gBAAkB,KAEvBrrD,KAAKw2B,UAAWpH,GCXjB,SAASorC,GAAmBprC,GAE3B2E,GAASj2B,KAAMkC,MAEfA,KAAKH,KAAO,oBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UACxB72B,KAAKo3B,SAAW,IAAI,GAAO,SAC3Bp3B,KAAKq3B,UAAY,GAEjBr3B,KAAK43B,IAAM,KAEX53B,KAAK+3B,SAAW,KAChB/3B,KAAK48B,kBAAoB,EAEzB58B,KAAKg4B,MAAQ,KACbh4B,KAAKi4B,eAAiB,EAEtBj4B,KAAKk3B,SAAW,IAAI,GAAO,GAC3Bl3B,KAAKm3B,kBAAoB,EACzBn3B,KAAK44B,YAAc,KAEnB54B,KAAKk4B,QAAU,KACfl4B,KAAKm4B,UAAY,EAEjBn4B,KAAKo4B,UAAY,KACjBp4B,KAAKq4B,clPwF+B,EkPvFpCr4B,KAAKs4B,YAAc,IAAI,EAAS,EAAG,GAEnCt4B,KAAKu4B,gBAAkB,KACvBv4B,KAAKw4B,kBAAoB,EACzBx4B,KAAKy4B,iBAAmB,EAExBz4B,KAAK64B,YAAc,KAEnB74B,KAAK83B,SAAW,KAEhB93B,KAAK84B,OAAS,KACd94B,KAAKi5B,QlP7C2B,EkP8ChCj5B,KAAK+4B,aAAe,EACpB/4B,KAAKg5B,gBAAkB,IAEvBh5B,KAAKw5B,WAAY,EACjBx5B,KAAKy5B,mBAAqB,EAC1Bz5B,KAAK05B,iBAAmB,QACxB15B,KAAK25B,kBAAoB,QAEzB35B,KAAK85B,UAAW,EAChB95B,KAAK45B,cAAe,EACpB55B,KAAK65B,cAAe,EAEpB75B,KAAKw2B,UAAWpH,GC5DjB,SAASqrC,GAAkBrrC,GAE1B2E,GAASj2B,KAAMkC,MAEfA,KAAKwoC,QAAU,CAAE,KAAQ,IAEzBxoC,KAAKH,KAAO,mBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UAExB72B,KAAK43B,IAAM,KACX53B,KAAKm5B,YAAc,KAEnBn5B,KAAK+3B,SAAW,KAChB/3B,KAAK48B,kBAAoB,EAEzB58B,KAAKg4B,MAAQ,KACbh4B,KAAKi4B,eAAiB,EAEtBj4B,KAAKk3B,SAAW,IAAI,GAAO,GAC3Bl3B,KAAKm3B,kBAAoB,EACzBn3B,KAAK44B,YAAc,KAEnB54B,KAAKk4B,QAAU,KACfl4B,KAAKm4B,UAAY,EAEjBn4B,KAAKo4B,UAAY,KACjBp4B,KAAKq4B,cnPgG+B,EmP/FpCr4B,KAAKs4B,YAAc,IAAI,EAAS,EAAG,GAEnCt4B,KAAKu4B,gBAAkB,KACvBv4B,KAAKw4B,kBAAoB,EACzBx4B,KAAKy4B,iBAAmB,EAExBz4B,KAAK83B,SAAW,KAEhB93B,KAAKw5B,WAAY,EACjBx5B,KAAKy5B,mBAAqB,EAC1Bz5B,KAAK05B,iBAAmB,QACxB15B,KAAK25B,kBAAoB,QAEzB35B,KAAK85B,UAAW,EAChB95B,KAAK45B,cAAe,EACpB55B,KAAK65B,cAAe,EAEpB75B,KAAKw2B,UAAWpH,GC7DjB,SAASirC,GAAoBjrC,GAE5B2E,GAASj2B,KAAMkC,MAEfA,KAAKH,KAAO,qBAEZG,KAAKk4B,QAAU,KACfl4B,KAAKm4B,UAAY,EAEjBn4B,KAAKo4B,UAAY,KACjBp4B,KAAKq4B,cpPiI+B,EoPhIpCr4B,KAAKs4B,YAAc,IAAI,EAAS,EAAG,GAEnCt4B,KAAKu4B,gBAAkB,KACvBv4B,KAAKw4B,kBAAoB,EACzBx4B,KAAKy4B,iBAAmB,EAExBz4B,KAAKw5B,WAAY,EACjBx5B,KAAKy5B,mBAAqB,EAE1Bz5B,KAAKg0B,KAAM,EAEXh0B,KAAK85B,UAAW,EAChB95B,KAAK45B,cAAe,EACpB55B,KAAK65B,cAAe,EAEpB75B,KAAKw2B,UAAWpH,GCfjB,SAASmrC,GAAqBnrC,GAE7B2E,GAASj2B,KAAMkC,MAEfA,KAAKH,KAAO,sBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UAExB72B,KAAK43B,IAAM,KAEX53B,KAAK+3B,SAAW,KAChB/3B,KAAK48B,kBAAoB,EAEzB58B,KAAKg4B,MAAQ,KACbh4B,KAAKi4B,eAAiB,EAEtBj4B,KAAKk3B,SAAW,IAAI,GAAO,GAC3Bl3B,KAAKm3B,kBAAoB,EACzBn3B,KAAK44B,YAAc,KAEnB54B,KAAK64B,YAAc,KAEnB74B,KAAK83B,SAAW,KAEhB93B,KAAK84B,OAAS,KACd94B,KAAKi5B,QrPlB2B,EqPmBhCj5B,KAAK+4B,aAAe,EACpB/4B,KAAKg5B,gBAAkB,IAEvBh5B,KAAKw5B,WAAY,EACjBx5B,KAAKy5B,mBAAqB,EAC1Bz5B,KAAK05B,iBAAmB,QACxB15B,KAAK25B,kBAAoB,QAEzB35B,KAAK85B,UAAW,EAChB95B,KAAK45B,cAAe,EACpB55B,KAAK65B,cAAe,EAEpB75B,KAAKw2B,UAAWpH,GC5CjB,SAASwrC,GAAoBxrC,GAE5B2E,GAASj2B,KAAMkC,MAEfA,KAAKwoC,QAAU,CAAE,OAAU,IAE3BxoC,KAAKH,KAAO,qBAEZG,KAAK62B,MAAQ,IAAI,GAAO,UAExB72B,KAAK63B,OAAS,KAEd73B,KAAK43B,IAAM,KAEX53B,KAAKk4B,QAAU,KACfl4B,KAAKm4B,UAAY,EAEjBn4B,KAAKo4B,UAAY,KACjBp4B,KAAKq4B,ctPoH+B,EsPnHpCr4B,KAAKs4B,YAAc,IAAI,EAAS,EAAG,GAEnCt4B,KAAKu4B,gBAAkB,KACvBv4B,KAAKw4B,kBAAoB,EACzBx4B,KAAKy4B,iBAAmB,EAExBz4B,KAAK83B,SAAW,KAEhB93B,KAAK85B,UAAW,EAChB95B,KAAK45B,cAAe,EACpB55B,KAAK65B,cAAe,EAEpB75B,KAAKw2B,UAAWpH,GCjDjB,SAAS0rC,GAAoB1rC,GAE5B,QAAwBpvB,MAExBA,KAAKH,KAAO,qBAEZG,KAAKiO,MAAQ,EACbjO,KAAKs5B,SAAW,EAChBt5B,KAAKu5B,QAAU,EAEfv5B,KAAKw2B,UAAWpH,GTHjB4rC,GAAep9D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACnDo9D,GAAep9D,UAAUkI,YAAck1D,GAEvCA,GAAep9D,UAAU6gF,kBAAmB,EAE5CzjB,GAAep9D,UAAU6I,KAAO,SAAW4K,GAM1C,OAJA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OAEjB72B,MCvBR,GAAkBpC,UAAYN,OAAO4T,OAAQq3B,GAAe3qC,WAC5D,GAAkBA,UAAUkI,YAAc,GAE1C,GAAkBlI,UAAU84D,qBAAsB,ECuGlDgE,GAAqB98D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACzD88D,GAAqB98D,UAAUkI,YAAc40D,GAE7CA,GAAqB98D,UAAU49D,wBAAyB,EAExDd,GAAqB98D,UAAU6I,KAAO,SAAW4K,GAuDhD,OArDA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAKwoC,QAAU,CAAE,SAAY,IAE7BxoC,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OACxB72B,KAAK+2B,UAAY1lB,EAAO0lB,UACxB/2B,KAAKg3B,UAAY3lB,EAAO2lB,UAExBh3B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAK+3B,SAAW1mB,EAAO0mB,SACvB/3B,KAAK48B,kBAAoBvrB,EAAOurB,kBAEhC58B,KAAKg4B,MAAQ3mB,EAAO2mB,MACpBh4B,KAAKi4B,eAAiB5mB,EAAO4mB,eAE7Bj4B,KAAKk3B,SAASzwB,KAAM4K,EAAO6lB,UAC3Bl3B,KAAK44B,YAAcvnB,EAAOunB,YAC1B54B,KAAKm3B,kBAAoB9lB,EAAO8lB,kBAEhCn3B,KAAKk4B,QAAU7mB,EAAO6mB,QACtBl4B,KAAKm4B,UAAY9mB,EAAO8mB,UAExBn4B,KAAKo4B,UAAY/mB,EAAO+mB,UACxBp4B,KAAKq4B,cAAgBhnB,EAAOgnB,cAC5Br4B,KAAKs4B,YAAY7xB,KAAM4K,EAAOinB,aAE9Bt4B,KAAKu4B,gBAAkBlnB,EAAOknB,gBAC9Bv4B,KAAKw4B,kBAAoBnnB,EAAOmnB,kBAChCx4B,KAAKy4B,iBAAmBpnB,EAAOonB,iBAE/Bz4B,KAAK04B,aAAernB,EAAOqnB,aAE3B14B,KAAK24B,aAAetnB,EAAOsnB,aAE3B34B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAK84B,OAASznB,EAAOynB,OACrB94B,KAAKk5B,gBAAkB7nB,EAAO6nB,gBAE9Bl5B,KAAKg5B,gBAAkB3nB,EAAO2nB,gBAE9Bh5B,KAAKw5B,UAAYnoB,EAAOmoB,UACxBx5B,KAAKy5B,mBAAqBpoB,EAAOooB,mBACjCz5B,KAAK05B,iBAAmBroB,EAAOqoB,iBAC/B15B,KAAK25B,kBAAoBtoB,EAAOsoB,kBAEhC35B,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAC3B55B,KAAK65B,aAAexoB,EAAOwoB,aAE3B75B,KAAKm3D,eAAiB9lD,EAAO8lD,eAEtBn3D,MC5GR26D,GAAqB/8D,UAAYN,OAAO4T,OAAQwpD,GAAqB98D,WACrE+8D,GAAqB/8D,UAAUkI,YAAc60D,GAE7CA,GAAqB/8D,UAAU4/E,wBAAyB,EAExD7iB,GAAqB/8D,UAAU6I,KAAO,SAAW4K,GAiChD,OA/BAqpD,GAAqB98D,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEhDrR,KAAKwoC,QAAU,CAEd,SAAY,GACZ,SAAY,IAIbxoC,KAAKs3B,UAAYjmB,EAAOimB,UACxBt3B,KAAKw3B,aAAenmB,EAAOmmB,aAC3Bx3B,KAAKu3B,mBAAqBlmB,EAAOkmB,mBACjCv3B,KAAKy3B,sBAAwBpmB,EAAOomB,sBACpCz3B,KAAK03B,mBAAqBrmB,EAAOqmB,mBACjC13B,KAAK23B,qBAAqBlxB,KAAM4K,EAAOsmB,sBAEvC33B,KAAK+4B,aAAe1nB,EAAO0nB,aAEtB1nB,EAAO4lB,MAEXj3B,KAAKi3B,OAAUj3B,KAAKi3B,OAAS,IAAI,IAAUxwB,KAAM4K,EAAO4lB,OAIxDj3B,KAAKi3B,MAAQ,KAIdj3B,KAAKorD,aAAe/5C,EAAO+5C,aAC3BprD,KAAKqrD,gBAAkBh6C,EAAOg6C,gBAEvBrrD,MCERw6D,GAAkB58D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACtD48D,GAAkB58D,UAAUkI,YAAc00D,GAE1CA,GAAkB58D,UAAU0/E,qBAAsB,EAElD9iB,GAAkB58D,UAAU6I,KAAO,SAAW4K,GAiD7C,OA/CA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OACxB72B,KAAKo3B,SAAS3wB,KAAM4K,EAAO+lB,UAC3Bp3B,KAAKq3B,UAAYhmB,EAAOgmB,UAExBr3B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAK+3B,SAAW1mB,EAAO0mB,SACvB/3B,KAAK48B,kBAAoBvrB,EAAOurB,kBAEhC58B,KAAKg4B,MAAQ3mB,EAAO2mB,MACpBh4B,KAAKi4B,eAAiB5mB,EAAO4mB,eAE7Bj4B,KAAKk3B,SAASzwB,KAAM4K,EAAO6lB,UAC3Bl3B,KAAK44B,YAAcvnB,EAAOunB,YAC1B54B,KAAKm3B,kBAAoB9lB,EAAO8lB,kBAEhCn3B,KAAKk4B,QAAU7mB,EAAO6mB,QACtBl4B,KAAKm4B,UAAY9mB,EAAO8mB,UAExBn4B,KAAKo4B,UAAY/mB,EAAO+mB,UACxBp4B,KAAKq4B,cAAgBhnB,EAAOgnB,cAC5Br4B,KAAKs4B,YAAY7xB,KAAM4K,EAAOinB,aAE9Bt4B,KAAKu4B,gBAAkBlnB,EAAOknB,gBAC9Bv4B,KAAKw4B,kBAAoBnnB,EAAOmnB,kBAChCx4B,KAAKy4B,iBAAmBpnB,EAAOonB,iBAE/Bz4B,KAAK64B,YAAcxnB,EAAOwnB,YAE1B74B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAK84B,OAASznB,EAAOynB,OACrB94B,KAAKi5B,QAAU5nB,EAAO4nB,QACtBj5B,KAAK+4B,aAAe1nB,EAAO0nB,aAC3B/4B,KAAKg5B,gBAAkB3nB,EAAO2nB,gBAE9Bh5B,KAAKw5B,UAAYnoB,EAAOmoB,UACxBx5B,KAAKy5B,mBAAqBpoB,EAAOooB,mBACjCz5B,KAAK05B,iBAAmBroB,EAAOqoB,iBAC/B15B,KAAK25B,kBAAoBtoB,EAAOsoB,kBAEhC35B,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAC3B55B,KAAK65B,aAAexoB,EAAOwoB,aAEpB75B,MCrERy6D,GAAiB78D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACrD68D,GAAiB78D,UAAUkI,YAAc20D,GAEzCA,GAAiB78D,UAAUw/E,oBAAqB,EAEhD3iB,GAAiB78D,UAAU6I,KAAO,SAAW4K,GAyC5C,OAvCA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OAExB72B,KAAK43B,IAAMvmB,EAAOumB,IAClB53B,KAAKm5B,YAAc9nB,EAAO8nB,YAE1Bn5B,KAAK+3B,SAAW1mB,EAAO0mB,SACvB/3B,KAAK48B,kBAAoBvrB,EAAOurB,kBAEhC58B,KAAKg4B,MAAQ3mB,EAAO2mB,MACpBh4B,KAAKi4B,eAAiB5mB,EAAO4mB,eAE7Bj4B,KAAKk3B,SAASzwB,KAAM4K,EAAO6lB,UAC3Bl3B,KAAK44B,YAAcvnB,EAAOunB,YAC1B54B,KAAKm3B,kBAAoB9lB,EAAO8lB,kBAEhCn3B,KAAKk4B,QAAU7mB,EAAO6mB,QACtBl4B,KAAKm4B,UAAY9mB,EAAO8mB,UAExBn4B,KAAKo4B,UAAY/mB,EAAO+mB,UACxBp4B,KAAKq4B,cAAgBhnB,EAAOgnB,cAC5Br4B,KAAKs4B,YAAY7xB,KAAM4K,EAAOinB,aAE9Bt4B,KAAKu4B,gBAAkBlnB,EAAOknB,gBAC9Bv4B,KAAKw4B,kBAAoBnnB,EAAOmnB,kBAChCx4B,KAAKy4B,iBAAmBpnB,EAAOonB,iBAE/Bz4B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAKw5B,UAAYnoB,EAAOmoB,UACxBx5B,KAAKy5B,mBAAqBpoB,EAAOooB,mBACjCz5B,KAAK05B,iBAAmBroB,EAAOqoB,iBAC/B15B,KAAK25B,kBAAoBtoB,EAAOsoB,kBAEhC35B,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAC3B55B,KAAK65B,aAAexoB,EAAOwoB,aAEpB75B,MCjFRq6D,GAAmBz8D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACvDy8D,GAAmBz8D,UAAUkI,YAAcu0D,GAE3CA,GAAmBz8D,UAAUmgF,sBAAuB,EAEpD1jB,GAAmBz8D,UAAU6I,KAAO,SAAW4K,GAsB9C,OApBA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAKk4B,QAAU7mB,EAAO6mB,QACtBl4B,KAAKm4B,UAAY9mB,EAAO8mB,UAExBn4B,KAAKo4B,UAAY/mB,EAAO+mB,UACxBp4B,KAAKq4B,cAAgBhnB,EAAOgnB,cAC5Br4B,KAAKs4B,YAAY7xB,KAAM4K,EAAOinB,aAE9Bt4B,KAAKu4B,gBAAkBlnB,EAAOknB,gBAC9Bv4B,KAAKw4B,kBAAoBnnB,EAAOmnB,kBAChCx4B,KAAKy4B,iBAAmBpnB,EAAOonB,iBAE/Bz4B,KAAKw5B,UAAYnoB,EAAOmoB,UACxBx5B,KAAKy5B,mBAAqBpoB,EAAOooB,mBAEjCz5B,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAC3B55B,KAAK65B,aAAexoB,EAAOwoB,aAEpB75B,MCJRu6D,GAAoB38D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACxD28D,GAAoB38D,UAAUkI,YAAcy0D,GAE5CA,GAAoB38D,UAAUs/E,uBAAwB,EAEtD3iB,GAAoB38D,UAAU6I,KAAO,SAAW4K,GAoC/C,OAlCA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OAExB72B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAK+3B,SAAW1mB,EAAO0mB,SACvB/3B,KAAK48B,kBAAoBvrB,EAAOurB,kBAEhC58B,KAAKg4B,MAAQ3mB,EAAO2mB,MACpBh4B,KAAKi4B,eAAiB5mB,EAAO4mB,eAE7Bj4B,KAAKk3B,SAASzwB,KAAM4K,EAAO6lB,UAC3Bl3B,KAAK44B,YAAcvnB,EAAOunB,YAC1B54B,KAAKm3B,kBAAoB9lB,EAAO8lB,kBAEhCn3B,KAAK64B,YAAcxnB,EAAOwnB,YAE1B74B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAK84B,OAASznB,EAAOynB,OACrB94B,KAAKi5B,QAAU5nB,EAAO4nB,QACtBj5B,KAAK+4B,aAAe1nB,EAAO0nB,aAC3B/4B,KAAKg5B,gBAAkB3nB,EAAO2nB,gBAE9Bh5B,KAAKw5B,UAAYnoB,EAAOmoB,UACxBx5B,KAAKy5B,mBAAqBpoB,EAAOooB,mBACjCz5B,KAAK05B,iBAAmBroB,EAAOqoB,iBAC/B15B,KAAK25B,kBAAoBtoB,EAAOsoB,kBAEhC35B,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAC3B55B,KAAK65B,aAAexoB,EAAOwoB,aAEpB75B,MCtDR46D,GAAmBh9D,UAAYN,OAAO4T,OAAQ6iB,GAASn2B,WACvDg9D,GAAmBh9D,UAAUkI,YAAc80D,GAE3CA,GAAmBh9D,UAAU8/E,sBAAuB,EAEpD9iB,GAAmBh9D,UAAU6I,KAAO,SAAW4K,GA6B9C,OA3BA0iB,GAASn2B,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEpCrR,KAAKwoC,QAAU,CAAE,OAAU,IAE3BxoC,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OAExB72B,KAAK63B,OAASxmB,EAAOwmB,OAErB73B,KAAK43B,IAAMvmB,EAAOumB,IAElB53B,KAAKk4B,QAAU7mB,EAAO6mB,QACtBl4B,KAAKm4B,UAAY9mB,EAAO8mB,UAExBn4B,KAAKo4B,UAAY/mB,EAAO+mB,UACxBp4B,KAAKq4B,cAAgBhnB,EAAOgnB,cAC5Br4B,KAAKs4B,YAAY7xB,KAAM4K,EAAOinB,aAE9Bt4B,KAAKu4B,gBAAkBlnB,EAAOknB,gBAC9Bv4B,KAAKw4B,kBAAoBnnB,EAAOmnB,kBAChCx4B,KAAKy4B,iBAAmBpnB,EAAOonB,iBAE/Bz4B,KAAK83B,SAAWzmB,EAAOymB,SAEvB93B,KAAK85B,SAAWzoB,EAAOyoB,SACvB95B,KAAK45B,aAAevoB,EAAOuoB,aAC3B55B,KAAK65B,aAAexoB,EAAOwoB,aAEpB75B,MCzER86D,GAAmBl9D,UAAYN,OAAO4T,OAAQ,cAC9C4pD,GAAmBl9D,UAAUkI,YAAcg1D,GAE3CA,GAAmBl9D,UAAUugF,sBAAuB,EAEpDrjB,GAAmBl9D,UAAU6I,KAAO,SAAW4K,GAQ9C,OANA,uBAAuCrR,KAAMqR,GAE7CrR,KAAKiO,MAAQoD,EAAOpD,MACpBjO,KAAKs5B,SAAWjoB,EAAOioB,SACvBt5B,KAAKu5B,QAAUloB,EAAOkoB,QAEfv5B,MCvCR,MAAM27F,GAAiB,CAGtBC,WAAY,SAAW/6F,EAAOg7F,EAAMC,GAEnC,OAAKH,GAAeI,aAAcl7F,GAI1B,IAAIA,EAAMiF,YAAajF,EAAMgwC,SAAUgrD,OAAa97F,IAAP+7F,EAAmBA,EAAKj7F,EAAMI,SAI5EJ,EAAMC,MAAO+6F,EAAMC,IAK3BE,aAAc,SAAWn7F,EAAOhB,EAAMo8F,GAErC,OAAOp7F,IACJo7F,GAAcp7F,EAAMiF,cAAgBjG,EAAcgB,EAEd,iBAA3BhB,EAAK8wC,kBAET,IAAI9wC,EAAMgB,GAIXoQ,MAAMrT,UAAUkD,MAAMhD,KAAM+C,IAIpCk7F,aAAc,SAAW3+E,GAExB,OAAO8+E,YAAYC,OAAQ/+E,MACtBA,aAAkBg/E,WAKxBC,iBAAkB,SAAWC,GAQ5B,MAAMl6F,EAAIk6F,EAAMr7F,OACVqiE,EAAS,IAAIryD,MAAO7O,GAC1B,IAAM,IAAIrB,EAAI,EAAGA,IAAMqB,IAAMrB,EAAIuiE,EAAQviE,GAAMA,EAI/C,OAFAuiE,EAAOjZ,MAVP,SAAsBtpD,EAAGmf,GAExB,OAAOo8E,EAAOv7F,GAAMu7F,EAAOp8E,MAUrBojD,GAKRi5B,YAAa,SAAWxsE,EAAQmxB,EAAQl8C,GAEvC,MAAMw3F,EAAUzsE,EAAO9uB,OACjBqiE,EAAS,IAAIvzC,EAAOjqB,YAAa02F,GAEvC,IAAM,IAAIz7F,EAAI,EAAGsU,EAAY,EAAGA,IAAcmnF,IAAYz7F,EAAI,CAE7D,MAAM07F,EAAYz3F,EAAOjE,GAAMmgD,EAE/B,IAAM,IAAIhhC,EAAI,EAAGA,IAAMghC,IAAWhhC,EAEjCojD,EAAQjuD,KAAiB0a,EAAQ0sE,EAAYv8E,GAM/C,OAAOojD,GAKRo5B,YAAa,SAAWC,EAAUL,EAAOvsE,EAAQ6sE,GAEhD,IAAI77F,EAAI,EAAG3D,EAAMu/F,EAAU,GAE3B,UAAgB58F,IAAR3C,QAAkD2C,IAA7B3C,EAAKw/F,IAEjCx/F,EAAMu/F,EAAU57F,KAIjB,QAAahB,IAAR3C,EAAoB,OAEzB,IAAIa,EAAQb,EAAKw/F,GACjB,QAAe78F,IAAV9B,EAEL,GAAKgT,MAAMe,QAAS/T,GAEnB,GAECA,EAAQb,EAAKw/F,QAEE78F,IAAV9B,IAEJq+F,EAAMl8F,KAAMhD,EAAIwxC,MAChB7e,EAAO3vB,KAAKitE,MAAOt9C,EAAQ9xB,IAI5Bb,EAAMu/F,EAAU57F,gBAEChB,IAAR3C,QAEJ,QAAuB2C,IAAlB9B,EAAMqL,QAIjB,GAECrL,EAAQb,EAAKw/F,QAEE78F,IAAV9B,IAEJq+F,EAAMl8F,KAAMhD,EAAIwxC,MAChB3wC,EAAMqL,QAASymB,EAAQA,EAAO9uB,SAI/B7D,EAAMu/F,EAAU57F,gBAEChB,IAAR3C,QAMV,GAECa,EAAQb,EAAKw/F,QAEE78F,IAAV9B,IAEJq+F,EAAMl8F,KAAMhD,EAAIwxC,MAChB7e,EAAO3vB,KAAMnC,IAIdb,EAAMu/F,EAAU57F,gBAEChB,IAAR3C,IAMZy/F,QAAS,SAAWC,EAAY5sF,EAAM6sF,EAAYC,EAAUC,EAAM,IAEjE,MAAMC,EAAOJ,EAAWt2F,QAExB02F,EAAKhtF,KAAOA,EAEZ,MAAMitF,EAAS,GAEf,IAAM,IAAIp8F,EAAI,EAAGA,EAAIm8F,EAAKC,OAAOl8F,SAAWF,EAAI,CAE/C,MAAMq8F,EAAQF,EAAKC,OAAQp8F,GACrBs8F,EAAYD,EAAME,eAElBhB,EAAQ,GACRvsE,EAAS,GAEf,IAAM,IAAI7P,EAAI,EAAGA,EAAIk9E,EAAMd,MAAMr7F,SAAWif,EAAI,CAE/C,MAAM2uB,EAAQuuD,EAAMd,MAAOp8E,GAAM+8E,EAEjC,KAAKpuD,EAAQkuD,GAAcluD,GAASmuD,GAApC,CAEAV,EAAMl8F,KAAMg9F,EAAMd,MAAOp8E,IAEzB,IAAM,IAAIgkD,EAAI,EAAGA,EAAIm5B,IAAcn5B,EAElCn0C,EAAO3vB,KAAMg9F,EAAMrtE,OAAQ7P,EAAIm9E,EAAYn5B,KAMvB,IAAjBo4B,EAAMr7F,SAEXm8F,EAAMd,MAAQX,GAAeK,aAAcM,EAAOc,EAAMd,MAAMx2F,aAC9Ds3F,EAAMrtE,OAAS4rE,GAAeK,aAAcjsE,EAAQqtE,EAAMrtE,OAAOjqB,aAEjEq3F,EAAO/8F,KAAMg9F,IAIdF,EAAKC,OAASA,EAId,IAAII,EAAe39D,EAAAA,EAEnB,IAAM,IAAI7+B,EAAI,EAAGA,EAAIm8F,EAAKC,OAAOl8F,SAAWF,EAEtCw8F,EAAeL,EAAKC,OAAQp8F,GAAIu7F,MAAO,KAE3CiB,EAAeL,EAAKC,OAAQp8F,GAAIu7F,MAAO,IAQzC,IAAM,IAAIv7F,EAAI,EAAGA,EAAIm8F,EAAKC,OAAOl8F,SAAWF,EAE3Cm8F,EAAKC,OAAQp8F,GAAIohF,OAAS,EAAIob,GAM/B,OAFAL,EAAKM,gBAEEN,GAIRO,iBAAkB,SAAWC,EAAYC,EAAiB,EAAGC,EAAgBF,EAAYT,EAAM,IAEzFA,GAAO,IAAIA,EAAM,IAEtB,MAAMY,EAAYD,EAAcT,OAAOl8F,OACjC68F,EAAgBH,EAAiBV,EAGvC,IAAM,IAAIl8F,EAAI,EAAGA,EAAI88F,IAAc98F,EAAI,CAEtC,MAAMg9F,EAAiBH,EAAcT,OAAQp8F,GACvCi9F,EAAqBD,EAAeE,cAG1C,GAA4B,SAAvBD,GAAwD,WAAvBA,EAAkC,SAGxE,MAAME,EAAcR,EAAWP,OAAOgB,MAAM,SAAWf,GAEtD,OAAOA,EAAMltF,OAAS6tF,EAAe7tF,MACjCktF,EAAMa,gBAAkBD,KAI7B,QAAqBj+F,IAAhBm+F,EAA4B,SAEjC,IAAIE,EAAkB,EACtB,MAAMC,EAAqBN,EAAeT,eAErCS,EAAeO,kBAAkBC,4CAErCH,EAAkBC,EAAqB,GAIxC,IAAIG,EAAe,EACnB,MAAMC,EAAkBP,EAAYZ,eAE/BY,EAAYI,kBAAkBC,4CAElCC,EAAeC,EAAkB,GAIlC,MAAM7tC,EAAYmtC,EAAezB,MAAMr7F,OAAS,EAChD,IAAIy9F,EAGJ,GAAKZ,GAAiBC,EAAezB,MAAO,GAAM,CAGjD,MAAMqC,EAAaP,EACbQ,EAAWP,EAAqBD,EACtCM,EAAiB/C,GAAeC,WAAYmC,EAAehuE,OAAQ4uE,EAAYC,QAEzE,GAAKd,GAAiBC,EAAezB,MAAO1rC,GAAc,CAGhE,MAAM+tC,EAAa/tC,EAAYytC,EAAqBD,EAC9CQ,EAAWD,EAAaN,EAAqBD,EACnDM,EAAiB/C,GAAeC,WAAYmC,EAAehuE,OAAQ4uE,EAAYC,OAEzE,CAGN,MAAMC,EAAcd,EAAeO,oBAC7BK,EAAaP,EACbQ,EAAWP,EAAqBD,EACtCS,EAAYC,SAAUhB,GACtBY,EAAiB/C,GAAeC,WAAYiD,EAAYE,aAAcJ,EAAYC,GAKvD,eAAvBZ,IAEkB,IAAItpF,GAAatL,UAAWs1F,GAAiBp2F,YAAYwP,YACjExO,QAASo1F,GAMxB,MAAMM,EAAWd,EAAY5B,MAAMr7F,OACnC,IAAM,IAAIif,EAAI,EAAGA,EAAI8+E,IAAa9+E,EAAI,CAErC,MAAM++E,EAAa/+E,EAAIu+E,EAAkBD,EAEzC,GAA4B,eAAvBR,EAGJtpF,EAAWwqF,wBACVhB,EAAYnuE,OACZkvE,EACAP,EACA,EACAR,EAAYnuE,OACZkvE,OAGK,CAEN,MAAME,EAAWV,EAAiC,EAAfD,EAGnC,IAAM,IAAIt6B,EAAI,EAAGA,EAAIi7B,IAAaj7B,EAEjCg6B,EAAYnuE,OAAQkvE,EAAa/6B,IAAOw6B,EAAgBx6B,KAY5D,OAFAw5B,EAAW0B,UxPlM6B,KwPoMjC1B,ICxUT,SAAS2B,GAAaC,EAAoBC,EAAcC,EAAYT,GAEnE/+F,KAAKs/F,mBAAqBA,EAC1Bt/F,KAAKy/F,aAAe,EAEpBz/F,KAAK++F,kBAAgCh/F,IAAjBg/F,EACnBA,EAAe,IAAIQ,EAAaz5F,YAAa05F,GAC9Cx/F,KAAKu/F,aAAeA,EACpBv/F,KAAKq9F,UAAYmC,ECjBlB,SAASE,GAAkBJ,EAAoBC,EAAcC,EAAYT,GAExEM,GAAYvhG,KAAMkC,KAAMs/F,EAAoBC,EAAcC,EAAYT,GAEtE/+F,KAAK2/F,aAAgB,EACrB3/F,KAAK4/F,aAAgB,EACrB5/F,KAAK6/F,aAAgB,EACrB7/F,KAAK8/F,aAAgB,ECjBtB,SAASC,GAAmBT,EAAoBC,EAAcC,EAAYT,GAEzEM,GAAYvhG,KAAMkC,KAAMs/F,EAAoBC,EAAcC,EAAYT,GCIvE,SAASiB,GAAqBV,EAAoBC,EAAcC,EAAYT,GAE3EM,GAAYvhG,KAAMkC,KAAMs/F,EAAoBC,EAAcC,EAAYT,GCAvE,SAASkB,GAAe/vF,EAAMosF,EAAOvsE,EAAQmwE,GAE5C,QAAcngG,IAATmQ,EAAqB,MAAM,IAAI5J,MAAO,gDAC3C,QAAevG,IAAVu8F,GAAwC,IAAjBA,EAAMr7F,OAAe,MAAM,IAAIqF,MAAO,oDAAsD4J,GAExHlQ,KAAKkQ,KAAOA,EAEZlQ,KAAKs8F,MAAQX,GAAeK,aAAcM,EAAOt8F,KAAKmgG,gBACtDngG,KAAK+vB,OAAS4rE,GAAeK,aAAcjsE,EAAQ/vB,KAAKogG,iBAExDpgG,KAAKqgG,iBAAkBH,GAAiBlgG,KAAKsgG,sBCb9C,SAASC,GAAsBrwF,EAAMosF,EAAOvsE,GAE3CkwE,GAAcniG,KAAMkC,KAAMkQ,EAAMosF,EAAOvsE,GCHxC,SAASywE,GAAoBtwF,EAAMosF,EAAOvsE,EAAQmwE,GAEjDD,GAAcniG,KAAMkC,KAAMkQ,EAAMosF,EAAOvsE,EAAQmwE,GCFhD,SAASO,GAAqBvwF,EAAMosF,EAAOvsE,EAAQmwE,GAElDD,GAAcniG,KAAMkC,KAAMkQ,EAAMosF,EAAOvsE,EAAQmwE,GCDhD,SAASQ,GAA6BpB,EAAoBC,EAAcC,EAAYT,GAEnFM,GAAYvhG,KAAMkC,KAAMs/F,EAAoBC,EAAcC,EAAYT,GCDvE,SAAS4B,GAAyBzwF,EAAMosF,EAAOvsE,EAAQmwE,GAEtDD,GAAcniG,KAAMkC,KAAMkQ,EAAMosF,EAAOvsE,EAAQmwE,GCHhD,SAASU,GAAqB1wF,EAAMosF,EAAOvsE,EAAQmwE,GAElDD,GAAcniG,KAAMkC,KAAMkQ,EAAMosF,EAAOvsE,EAAQmwE,GCHhD,SAASW,GAAqB3wF,EAAMosF,EAAOvsE,EAAQmwE,GAElDD,GAAcniG,KAAMkC,KAAMkQ,EAAMosF,EAAOvsE,EAAQmwE,GCGhD,SAAS,GAAehwF,EAAM4wF,GAAW,EAAK3D,EAAQiC,EAAY2B,MAEjE/gG,KAAKkQ,KAAOA,EACZlQ,KAAKm9F,OAASA,EACdn9F,KAAK8gG,SAAWA,EAChB9gG,KAAKo/F,UAAYA,EAEjBp/F,KAAKiQ,KAAO,iBAGPjQ,KAAK8gG,SAAW,GAEpB9gG,KAAKw9F,gBAgDP,SAASwD,GAAoBlU,GAE5B,QAAmB/sF,IAAd+sF,EAAKjtF,KAET,MAAM,IAAIyG,MAAO,4DAIlB,MAAM26F,EAlDP,SAAuCC,GAEtC,OAASA,EAASC,eAEjB,IAAK,SACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,UAEJ,OAAOV,GAER,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,UAEJ,OAAOI,GAER,IAAK,QAEJ,OAAOL,GAER,IAAK,aAEJ,OAAOG,GAER,IAAK,OACL,IAAK,UAEJ,OAAOJ,GAER,IAAK,SAEJ,OAAOK,GAIT,MAAM,IAAIt6F,MAAO,8CAAgD46F,GAY/CE,CAA8BtU,EAAKjtF,MAErD,QAAoBE,IAAf+sF,EAAKwP,MAAsB,CAE/B,MAAMA,EAAQ,GAAIvsE,EAAS,GAE3B4rE,GAAee,YAAa5P,EAAK/oD,KAAMu4D,EAAOvsE,EAAQ,SAEtD+8D,EAAKwP,MAAQA,EACbxP,EAAK/8D,OAASA,EAKf,YAAyBhwB,IAApBkhG,EAAUhxE,MAEPgxE,EAAUhxE,MAAO68D,GAKjB,IAAImU,EAAWnU,EAAK58E,KAAM48E,EAAKwP,MAAOxP,EAAK/8D,OAAQ+8D,EAAKoT,eZnEjE5iG,OAAOqC,OAAQ0/F,GAAYzhG,UAAW,CAErCkhG,SAAU,SAAWh8F,GAEpB,MAAMu+F,EAAKrhG,KAAKs/F,mBAChB,IAAItsE,EAAKhzB,KAAKy/F,aACb58E,EAAKw+E,EAAIruE,GACTpQ,EAAKy+E,EAAIruE,EAAK,GAEfsuE,EAAmB,CAElBC,EAAM,CAEL,IAAI54E,EAEJ64E,EAAa,CAMZC,EAAc,KAAS3+F,EAAI+f,GAAO,CAEjC,IAAM,IAAI6+E,EAAW1uE,EAAK,IAAO,CAEhC,QAAYjzB,IAAP8iB,EAAmB,CAEvB,GAAK/f,EAAI8f,EAAK,MAAM6+E,EAMpB,OAFAzuE,EAAKquE,EAAGpgG,OACRjB,KAAKy/F,aAAezsE,EACbhzB,KAAK2hG,UAAW3uE,EAAK,EAAGlwB,EAAG8f,GAInC,GAAKoQ,IAAO0uE,EAAW,MAKvB,GAHA9+E,EAAKC,EACLA,EAAKw+E,IAAOruE,GAEPlwB,EAAI+f,EAGR,MAAM0+E,EAOR54E,EAAQ04E,EAAGpgG,OACX,MAAMugG,EAMP,GAAS1+F,GAAK8f,EAiDd,MAAM0+E,EAjDN,CAIC,MAAMM,EAAWP,EAAI,GAEhBv+F,EAAI8+F,IAER5uE,EAAK,EACLpQ,EAAKg/E,GAMN,IAAM,IAAIF,EAAW1uE,EAAK,IAAO,CAEhC,QAAYjzB,IAAP6iB,EAKJ,OADA5iB,KAAKy/F,aAAe,EACbz/F,KAAK6hG,aAAc,EAAG/+F,EAAG+f,GAIjC,GAAKmQ,IAAO0uE,EAAW,MAKvB,GAHA7+E,EAAKD,EACLA,EAAKy+E,IAAOruE,EAAK,GAEZlwB,GAAK8f,EAGT,MAAM2+E,EAOR54E,EAAQqK,EACRA,EAAK,GAaP,KAAQA,EAAKrK,GAAQ,CAEpB,MAAMm5E,EAAQ9uE,EAAKrK,IAAY,EAE1B7lB,EAAIu+F,EAAIS,GAEZn5E,EAAQm5E,EAIR9uE,EAAK8uE,EAAM,EAWb,GALAj/E,EAAKw+E,EAAIruE,GACTpQ,EAAKy+E,EAAIruE,EAAK,QAIFjzB,IAAP6iB,EAGJ,OADA5iB,KAAKy/F,aAAe,EACbz/F,KAAK6hG,aAAc,EAAG/+F,EAAG+f,GAIjC,QAAY9iB,IAAP8iB,EAIJ,OAFAmQ,EAAKquE,EAAGpgG,OACRjB,KAAKy/F,aAAezsE,EACbhzB,KAAK2hG,UAAW3uE,EAAK,EAAGpQ,EAAI9f,GAMrC9C,KAAKy/F,aAAezsE,EAEpBhzB,KAAK+hG,iBAAkB/uE,EAAIpQ,EAAIC,GAIhC,OAAO7iB,KAAKgiG,aAAchvE,EAAIpQ,EAAI9f,EAAG+f,IAItCo/E,SAAU,KAKVC,iBAAkB,GAElBC,aAAc,WAEb,OAAOniG,KAAKiiG,UAAYjiG,KAAKkiG,kBAI9BE,iBAAkB,SAAW5hG,GAI5B,MAAM8iE,EAAStjE,KAAK++F,aACnBhvE,EAAS/vB,KAAKu/F,aACdr+C,EAASlhD,KAAKq9F,UACdh0F,EAAS7I,EAAQ0gD,EAElB,IAAM,IAAIngD,EAAI,EAAGA,IAAMmgD,IAAWngD,EAEjCuiE,EAAQviE,GAAMgvB,EAAQ1mB,EAAStI,GAIhC,OAAOuiE,GAMR0+B,aAAc,WAEb,MAAM,IAAI17F,MAAO,4BAKlBy7F,iBAAkB,eASnBzkG,OAAOqC,OAAQ0/F,GAAYzhG,UAAW,CAGrCikG,aAAcxC,GAAYzhG,UAAUwkG,iBAGpCT,UAAWtC,GAAYzhG,UAAUwkG,mBCpOlC1C,GAAiB9hG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQmuF,GAAYzhG,WAAa,CAEnFkI,YAAa45F,GAEbwC,iBAAkB,CAEjBG,YAAajjG,EACbkjG,UAAWljG,GAIZ2iG,iBAAkB,SAAW/uE,EAAIpQ,EAAIC,GAEpC,MAAMw+E,EAAKrhG,KAAKs/F,mBAChB,IAAIiD,EAAQvvE,EAAK,EAChBwvE,EAAQxvE,EAAK,EAEbyvE,EAAQpB,EAAIkB,GACZG,EAAQrB,EAAImB,GAEb,QAAeziG,IAAV0iG,EAEJ,OAASziG,KAAKmiG,eAAeE,aAE5B,KAAKhjG,EAGJkjG,EAAQvvE,EACRyvE,EAAQ,EAAI7/E,EAAKC,EAEjB,MAED,KAAKvjB,EAGJijG,EAAQlB,EAAGpgG,OAAS,EACpBwhG,EAAQ7/E,EAAKy+E,EAAIkB,GAAUlB,EAAIkB,EAAQ,GAEvC,MAED,QAGCA,EAAQvvE,EACRyvE,EAAQ5/E,EAMX,QAAe9iB,IAAV2iG,EAEJ,OAAS1iG,KAAKmiG,eAAeG,WAE5B,KAAKjjG,EAGJmjG,EAAQxvE,EACR0vE,EAAQ,EAAI7/E,EAAKD,EAEjB,MAED,KAAKtjB,EAGJkjG,EAAQ,EACRE,EAAQ7/E,EAAKw+E,EAAI,GAAMA,EAAI,GAE3B,MAED,QAGCmB,EAAQxvE,EAAK,EACb0vE,EAAQ9/E,EAMX,MAAM+/E,EAAuB,IAAZ9/E,EAAKD,GACrBs+B,EAASlhD,KAAKq9F,UAEfr9F,KAAK2/F,YAAcgD,GAAW//E,EAAK6/E,GACnCziG,KAAK6/F,YAAc8C,GAAWD,EAAQ7/E,GACtC7iB,KAAK4/F,YAAc2C,EAAQrhD,EAC3BlhD,KAAK8/F,YAAc0C,EAAQthD,GAI5B8gD,aAAc,SAAWhvE,EAAIpQ,EAAI9f,EAAG+f,GAEnC,MAAMygD,EAAStjE,KAAK++F,aACnBhvE,EAAS/vB,KAAKu/F,aACdr+C,EAASlhD,KAAKq9F,UAEdpK,EAAKjgE,EAAKkuB,EAAS0hD,EAAK3P,EAAK/xC,EAC7B2hD,EAAK7iG,KAAK4/F,YAAckD,EAAK9iG,KAAK8/F,YAClCiD,EAAK/iG,KAAK2/F,YAAaqD,EAAKhjG,KAAK6/F,YAEjC9nF,GAAMjV,EAAI8f,IAASC,EAAKD,GACxBy+E,EAAKtpF,EAAIA,EACTkrF,EAAM5B,EAAKtpF,EAINmrF,GAAOH,EAAKE,EAAM,EAAIF,EAAK1B,EAAK0B,EAAKhrF,EACrCqK,GAAO,EAAI2gF,GAAOE,IAAU,IAAM,EAAIF,GAAO1B,IAAS,GAAM0B,GAAOhrF,EAAI,EACvEd,IAAS,EAAI+rF,GAAOC,GAAQ,IAAMD,GAAO3B,EAAK,GAAMtpF,EACpDorF,EAAKH,EAAKC,EAAMD,EAAK3B,EAI3B,IAAM,IAAItgG,EAAI,EAAGA,IAAMmgD,IAAWngD,EAEjCuiE,EAAQviE,GACNmiG,EAAKnzE,EAAQ8yE,EAAK9hG,GAClBqhB,EAAK2N,EAAQ6yE,EAAK7hG,GAClBkW,EAAK8Y,EAAQkjE,EAAKlyF,GAClBoiG,EAAKpzE,EAAQ+yE,EAAK/hG,GAIrB,OAAOuiE,KC1ITy8B,GAAkBniG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQmuF,GAAYzhG,WAAa,CAEpFkI,YAAai6F,GAEbiC,aAAc,SAAWhvE,EAAIpQ,EAAI9f,EAAG+f,GAEnC,MAAMygD,EAAStjE,KAAK++F,aACnBhvE,EAAS/vB,KAAKu/F,aACdr+C,EAASlhD,KAAKq9F,UAEd+F,EAAUpwE,EAAKkuB,EACfmiD,EAAUD,EAAUliD,EAEpBoiD,GAAYxgG,EAAI8f,IAASC,EAAKD,GAC9B2gF,EAAU,EAAID,EAEf,IAAM,IAAIviG,EAAI,EAAGA,IAAMmgD,IAAWngD,EAEjCuiE,EAAQviE,GACNgvB,EAAQszE,EAAUtiG,GAAMwiG,EACxBxzE,EAAQqzE,EAAUriG,GAAMuiG,EAI3B,OAAOhgC,KClBT08B,GAAoBpiG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQmuF,GAAYzhG,WAAa,CAEtFkI,YAAak6F,GAEbgC,aAAc,SAAWhvE,GAExB,OAAOhzB,KAAKoiG,iBAAkBpvE,EAAK,MCMrC11B,OAAOqC,OAAQsgG,GAAe,CAK7B3uF,OAAQ,SAAW8rF,GAElB,MAAM6D,EAAY7D,EAAMt3F,YAExB,IAAIgnF,EAGJ,QAA0B/sF,IAArBkhG,EAAU3vF,OAEdw7E,EAAOmU,EAAU3vF,OAAQ8rF,OAEnB,CAGNtQ,EAAO,CAEN,KAAQsQ,EAAMltF,KACd,MAASyrF,GAAeK,aAAcoB,EAAMd,MAAOrrF,OACnD,OAAU0qF,GAAeK,aAAcoB,EAAMrtE,OAAQ9e,QAItD,MAAMivF,EAAgB9C,EAAMoG,mBAEvBtD,IAAkB9C,EAAMkD,uBAE5BxT,EAAKoT,cAAgBA,GAQvB,OAFApT,EAAKjtF,KAAOu9F,EAAMa,cAEXnR,KAMTxvF,OAAOqC,OAAQsgG,GAAcriG,UAAW,CAEvCkI,YAAam6F,GAEbE,eAAgBxiE,aAEhByiE,gBAAiBziE,aAEjB2iE,qBAAsBphG,EAEtBukG,iCAAkC,SAAWngC,GAE5C,OAAO,IAAI08B,GAAqBhgG,KAAKs8F,MAAOt8F,KAAK+vB,OAAQ/vB,KAAKs9F,eAAgBh6B,IAI/EogC,+BAAgC,SAAWpgC,GAE1C,OAAO,IAAIy8B,GAAmB//F,KAAKs8F,MAAOt8F,KAAK+vB,OAAQ/vB,KAAKs9F,eAAgBh6B,IAI7EqgC,+BAAgC,SAAWrgC,GAE1C,OAAO,IAAIo8B,GAAkB1/F,KAAKs8F,MAAOt8F,KAAK+vB,OAAQ/vB,KAAKs9F,eAAgBh6B,IAI5E+8B,iBAAkB,SAAWH,GAE5B,IAAI0D,EAEJ,OAAS1D,GAER,KAAKjhG,EAEJ2kG,EAAgB5jG,KAAKyjG,iCAErB,MAED,KAAKvkG,EAEJ0kG,EAAgB5jG,KAAK0jG,+BAErB,MAED,KAAKvkG,EAEJykG,EAAgB5jG,KAAK2jG,+BAMvB,QAAuB5jG,IAAlB6jG,EAA8B,CAElC,MAAMxhB,EAAU,iCACfpiF,KAAKi+F,cAAgB,yBAA2Bj+F,KAAKkQ,KAEtD,QAAgCnQ,IAA3BC,KAAKs+F,kBAAkC,CAG3C,GAAK4B,IAAkBlgG,KAAKsgG,qBAM3B,MAAM,IAAIh6F,MAAO87E,GAJjBpiF,KAAKqgG,iBAAkBrgG,KAAKsgG,sBAW9B,OADA16F,QAAQC,KAAM,uBAAwBu8E,GAC/BpiF,KAMR,OAFAA,KAAKs+F,kBAAoBsF,EAElB5jG,MAIRwjG,iBAAkB,WAEjB,OAASxjG,KAAKs+F,mBAEb,KAAKt+F,KAAKyjG,iCAET,OAAOxkG,EAER,KAAKe,KAAK0jG,+BAET,OAAOxkG,EAER,KAAKc,KAAK2jG,+BAET,OAAOxkG,IAMVm+F,aAAc,WAEb,OAAOt9F,KAAK+vB,OAAO9uB,OAASjB,KAAKs8F,MAAMr7F,QAKxCkhF,MAAO,SAAW0hB,GAEjB,GAAoB,IAAfA,EAAqB,CAEzB,MAAMvH,EAAQt8F,KAAKs8F,MAEnB,IAAM,IAAIv7F,EAAI,EAAGqB,EAAIk6F,EAAMr7F,OAAQF,IAAMqB,IAAMrB,EAE9Cu7F,EAAOv7F,IAAO8iG,EAMhB,OAAO7jG,MAKRiO,MAAO,SAAW61F,GAEjB,GAAmB,IAAdA,EAAoB,CAExB,MAAMxH,EAAQt8F,KAAKs8F,MAEnB,IAAM,IAAIv7F,EAAI,EAAGqB,EAAIk6F,EAAMr7F,OAAQF,IAAMqB,IAAMrB,EAE9Cu7F,EAAOv7F,IAAO+iG,EAMhB,OAAO9jG,MAMRqyD,KAAM,SAAW0xC,EAAWC,GAE3B,MAAM1H,EAAQt8F,KAAKs8F,MAClB2H,EAAQ3H,EAAMr7F,OAEf,IAAI46F,EAAO,EACVC,EAAKmI,EAAQ,EAEd,KAAQpI,IAASoI,GAAS3H,EAAOT,GAASkI,KAEtClI,EAIJ,MAAiB,IAATC,GAAcQ,EAAOR,GAAOkI,KAEhClI,EAMJ,KAFGA,EAEW,IAATD,GAAcC,IAAOmI,EAAQ,CAG5BpI,GAAQC,IAEZA,EAAKx6F,KAAKY,IAAK45F,EAAI,GACnBD,EAAOC,EAAK,GAIb,MAAM56C,EAASlhD,KAAKs9F,eACpBt9F,KAAKs8F,MAAQX,GAAeC,WAAYU,EAAOT,EAAMC,GACrD97F,KAAK+vB,OAAS4rE,GAAeC,WAAY57F,KAAK+vB,OAAQ8rE,EAAO36C,EAAQ46C,EAAK56C,GAI3E,OAAOlhD,MAKRkkG,SAAU,WAET,IAAIC,GAAQ,EAEZ,MAAM9G,EAAYr9F,KAAKs9F,eAClBD,EAAY/7F,KAAKoC,MAAO25F,IAAgB,IAE5Cz3F,QAAQmE,MAAO,oDAAqD/J,MACpEmkG,GAAQ,GAIT,MAAM7H,EAAQt8F,KAAKs8F,MAClBvsE,EAAS/vB,KAAK+vB,OAEdk0E,EAAQ3H,EAAMr7F,OAEA,IAAVgjG,IAEJr+F,QAAQmE,MAAO,uCAAwC/J,MACvDmkG,GAAQ,GAIT,IAAIC,EAAW,KAEf,IAAM,IAAIrjG,EAAI,EAAGA,IAAMkjG,EAAOljG,IAAO,CAEpC,MAAMsjG,EAAW/H,EAAOv7F,GAExB,GAAyB,iBAAbsjG,GAAyBvjE,MAAOujE,GAAa,CAExDz+F,QAAQmE,MAAO,mDAAoD/J,KAAMe,EAAGsjG,GAC5EF,GAAQ,EACR,MAID,GAAkB,OAAbC,GAAqBA,EAAWC,EAAW,CAE/Cz+F,QAAQmE,MAAO,0CAA2C/J,KAAMe,EAAGsjG,EAAUD,GAC7ED,GAAQ,EACR,MAIDC,EAAWC,EAIZ,QAAgBtkG,IAAXgwB,GAEC4rE,GAAeI,aAAchsE,GAEjC,IAAM,IAAIhvB,EAAI,EAAGqB,EAAI2tB,EAAO9uB,OAAQF,IAAMqB,IAAMrB,EAAI,CAEnD,MAAM9C,EAAQ8xB,EAAQhvB,GAEtB,GAAK+/B,MAAO7iC,GAAU,CAErB2H,QAAQmE,MAAO,oDAAqD/J,KAAMe,EAAG9C,GAC7EkmG,GAAQ,EACR,OAUJ,OAAOA,GAMRG,SAAU,WAGT,MAAMhI,EAAQX,GAAeC,WAAY57F,KAAKs8F,OAC7CvsE,EAAS4rE,GAAeC,WAAY57F,KAAK+vB,QACzCmxB,EAASlhD,KAAKs9F,eAEdiH,EAAsBvkG,KAAKwjG,qBAAuBrkG,EAElDyxD,EAAY0rC,EAAMr7F,OAAS,EAE5B,IAAIujG,EAAa,EAEjB,IAAM,IAAIzjG,EAAI,EAAGA,EAAI6vD,IAAc7vD,EAAI,CAEtC,IAAI0jG,GAAO,EAEX,MAAM71D,EAAO0tD,EAAOv7F,GAKpB,GAAK6tC,IAJY0tD,EAAOv7F,EAAI,KAIM,IAANA,GAAW6tC,IAAS0tD,EAAO,IAEtD,GAAOiI,EAwBNE,GAAO,MAxBqB,CAI5B,MAAMp7F,EAAStI,EAAImgD,EAClBwjD,EAAUr7F,EAAS63C,EACnByjD,EAAUt7F,EAAS63C,EAEpB,IAAM,IAAIhhC,EAAI,EAAGA,IAAMghC,IAAWhhC,EAAI,CAErC,MAAMjiB,EAAQ8xB,EAAQ1mB,EAAS6W,GAE/B,GAAKjiB,IAAU8xB,EAAQ20E,EAAUxkF,IAChCjiB,IAAU8xB,EAAQ40E,EAAUzkF,GAAM,CAElCukF,GAAO,EACP,QAgBJ,GAAKA,EAAO,CAEX,GAAK1jG,IAAMyjG,EAAa,CAEvBlI,EAAOkI,GAAelI,EAAOv7F,GAE7B,MAAM6jG,EAAa7jG,EAAImgD,EACtB2jD,EAAcL,EAAatjD,EAE5B,IAAM,IAAIhhC,EAAI,EAAGA,IAAMghC,IAAWhhC,EAEjC6P,EAAQ80E,EAAc3kF,GAAM6P,EAAQ60E,EAAa1kF,KAMhDskF,GAQL,GAAK5zC,EAAY,EAAI,CAEpB0rC,EAAOkI,GAAelI,EAAO1rC,GAE7B,IAAM,IAAIg0C,EAAah0C,EAAY1P,EAAQ2jD,EAAcL,EAAatjD,EAAQhhC,EAAI,EAAGA,IAAMghC,IAAWhhC,EAErG6P,EAAQ80E,EAAc3kF,GAAM6P,EAAQ60E,EAAa1kF,KAI/CskF,EAgBJ,OAZKA,IAAelI,EAAMr7F,QAEzBjB,KAAKs8F,MAAQX,GAAeC,WAAYU,EAAO,EAAGkI,GAClDxkG,KAAK+vB,OAAS4rE,GAAeC,WAAY7rE,EAAQ,EAAGy0E,EAAatjD,KAIjElhD,KAAKs8F,MAAQA,EACbt8F,KAAK+vB,OAASA,GAIR/vB,MAIRwG,MAAO,WAEN,MAAM81F,EAAQX,GAAeC,WAAY57F,KAAKs8F,MAAO,GAC/CvsE,EAAS4rE,GAAeC,WAAY57F,KAAK+vB,OAAQ,GAGjDqtE,EAAQ,IAAI0H,EADS9kG,KAAK8F,aACM9F,KAAKkQ,KAAMosF,EAAOvsE,GAKxD,OAFAqtE,EAAMkB,kBAAoBt+F,KAAKs+F,kBAExBlB,KCpcTmD,GAAqB3iG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ+uF,GAAcriG,WAAa,CAEzFkI,YAAay6F,GAEbtC,cAAe,OACfmC,gBAAiBnvF,MAEjBqvF,qBAAsBrhG,EAEtBykG,oCAAgC3jG,EAChC4jG,oCAAgC5jG,ICXjCygG,GAAmB5iG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ+uF,GAAcriG,WAAa,CAEvFkI,YAAa06F,GAEbvC,cAAe,UCJhBwC,GAAoB7iG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ+uF,GAAcriG,WAAa,CAExFkI,YAAa26F,GAEbxC,cAAe,WCHhByC,GAA4B9iG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQmuF,GAAYzhG,WAAa,CAE9FkI,YAAa46F,GAEbsB,aAAc,SAAWhvE,EAAIpQ,EAAI9f,EAAG+f,GAEnC,MAAMygD,EAAStjE,KAAK++F,aACnBhvE,EAAS/vB,KAAKu/F,aACdr+C,EAASlhD,KAAKq9F,UAEdt0F,GAAUjG,EAAI8f,IAASC,EAAKD,GAE7B,IAAIvZ,EAAS2pB,EAAKkuB,EAElB,IAAM,IAAI9vB,EAAM/nB,EAAS63C,EAAQ73C,IAAW+nB,EAAK/nB,GAAU,EAE1DqL,EAAWqwF,UAAWzhC,EAAQ,EAAGvzC,EAAQ1mB,EAAS63C,EAAQnxB,EAAQ1mB,EAAQN,GAI3E,OAAOu6D,KCnBTq9B,GAAwB/iG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ+uF,GAAcriG,WAAa,CAE5FkI,YAAa66F,GAEb1C,cAAe,aAIfqC,qBAAsBphG,EAEtBwkG,+BAAgC,SAAWpgC,GAE1C,OAAO,IAAIo9B,GAA6B1gG,KAAKs8F,MAAOt8F,KAAK+vB,OAAQ/vB,KAAKs9F,eAAgBh6B,IAIvFqgC,oCAAgC5jG,ICjBjC6gG,GAAoBhjG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ+uF,GAAcriG,WAAa,CAExFkI,YAAa86F,GAEb3C,cAAe,SACfmC,gBAAiBnvF,MAEjBqvF,qBAAsBrhG,EAEtBykG,oCAAgC3jG,EAEhC4jG,oCAAgC5jG,ICZjC8gG,GAAoBjjG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ+uF,GAAcriG,WAAa,CAExFkI,YAAa+6F,GAEb5C,cAAe,WC0FhB3gG,OAAOqC,OAAQ,GAAe,CAE7BswB,MAAO,SAAW68D,GAEjB,MAAMqQ,EAAS,GACd6H,EAAalY,EAAKqQ,OAClB8H,EAAY,GAAQnY,EAAKmQ,KAAO,GAEjC,IAAM,IAAIl8F,EAAI,EAAGqB,EAAI4iG,EAAW/jG,OAAQF,IAAMqB,IAAMrB,EAEnDo8F,EAAO/8F,KAAM4gG,GAAoBgE,EAAYjkG,IAAMkN,MAAOg3F,IAI3D,MAAM/H,EAAO,IAAI,GAAepQ,EAAK58E,KAAM48E,EAAKgU,SAAU3D,EAAQrQ,EAAKsS,WAGvE,OAFAlC,EAAKjtF,KAAO68E,EAAK78E,KAEVitF,GAIR5rF,OAAQ,SAAW4rF,GAElB,MAAMC,EAAS,GACd+H,EAAahI,EAAKC,OAEbrQ,EAAO,CAEZ,KAAQoQ,EAAKhtF,KACb,SAAYgtF,EAAK4D,SACjB,OAAU3D,EACV,KAAQD,EAAKjtF,KACb,UAAaitF,EAAKkC,WAInB,IAAM,IAAIr+F,EAAI,EAAGqB,EAAI8iG,EAAWjkG,OAAQF,IAAMqB,IAAMrB,EAEnDo8F,EAAO/8F,KAAM6/F,GAAc3uF,OAAQ4zF,EAAYnkG,KAIhD,OAAO+rF,GAIRqY,8BAA+B,SAAWj1F,EAAMk1F,EAAqBnI,EAAKoI,GAEzE,MAAMC,EAAkBF,EAAoBnkG,OACtCk8F,EAAS,GAEf,IAAM,IAAIp8F,EAAI,EAAGA,EAAIukG,EAAiBvkG,IAAO,CAE5C,IAAIu7F,EAAQ,GACRvsE,EAAS,GAEbusE,EAAMl8F,MACHW,EAAIukG,EAAkB,GAAMA,EAC9BvkG,GACEA,EAAI,GAAMukG,GAEbv1E,EAAO3vB,KAAM,EAAG,EAAG,GAEnB,MAAM4E,EAAQ22F,GAAeU,iBAAkBC,GAC/CA,EAAQX,GAAeY,YAAaD,EAAO,EAAGt3F,GAC9C+qB,EAAS4rE,GAAeY,YAAaxsE,EAAQ,EAAG/qB,GAIzCqgG,GAAyB,IAAf/I,EAAO,KAEvBA,EAAMl8F,KAAMklG,GACZv1E,EAAO3vB,KAAM2vB,EAAQ,KAItBotE,EAAO/8F,KACN,IAAIqgG,GACH,0BAA4B2E,EAAqBrkG,GAAImP,KAAO,IAC5DosF,EAAOvsE,GACN9hB,MAAO,EAAMgvF,IAIjB,OAAO,IAAI,GAAe/sF,GAAQ,EAAGitF,IAItCoI,WAAY,SAAWC,EAAmBt1F,GAEzC,IAAIu1F,EAAYD,EAEhB,IAAOv0F,MAAMe,QAASwzF,GAAsB,CAE3C,MAAMnoG,EAAImoG,EACVC,EAAYpoG,EAAE0gB,UAAY1gB,EAAE0gB,SAAS6N,YAAcvuB,EAAEuuB,WAItD,IAAM,IAAI7qB,EAAI,EAAGA,EAAI0kG,EAAUxkG,OAAQF,IAEtC,GAAK0kG,EAAW1kG,GAAImP,OAASA,EAE5B,OAAOu1F,EAAW1kG,GAMpB,OAAO,MAIR2kG,oCAAqC,SAAW9rE,EAAcqjE,EAAKoI,GAElE,MAAMM,EAA0B,GAI1BC,EAAU,qBAIhB,IAAM,IAAI7kG,EAAI,EAAG+b,EAAK8c,EAAa34B,OAAQF,EAAI+b,EAAI/b,IAAO,CAEzD,MAAM8kG,EAAcjsE,EAAc74B,GAC5B+kG,EAAQD,EAAY31F,KAAK2gD,MAAO+0C,GAEtC,GAAKE,GAASA,EAAM7kG,OAAS,EAAI,CAEhC,MAAMiP,EAAO41F,EAAO,GAEpB,IAAIC,EAAwBJ,EAAyBz1F,GAE9C61F,IAENJ,EAAyBz1F,GAAS61F,EAAwB,IAI3DA,EAAsB3lG,KAAMylG,IAM9B,MAAMG,EAAQ,GAEd,IAAM,MAAM91F,KAAQy1F,EAEnBK,EAAM5lG,KAAM,GAAc+kG,8BAA+Bj1F,EAAMy1F,EAAyBz1F,GAAQ+sF,EAAKoI,IAItG,OAAOW,GAKRC,eAAgB,SAAWr2E,EAAW6rC,GAErC,IAAO7rC,EAGN,OADAhqB,QAAQmE,MAAO,yDACR,KAIR,MAAMm8F,EAAmB,SAAWjF,EAAWkF,EAAWC,EAAeC,EAAcC,GAGtF,GAA8B,IAAzBF,EAAcnlG,OAAe,CAEjC,MAAMq7F,EAAQ,GACRvsE,EAAS,GAEf4rE,GAAee,YAAa0J,EAAe9J,EAAOvsE,EAAQs2E,GAGpC,IAAjB/J,EAAMr7F,QAEVqlG,EAAWlmG,KAAM,IAAI6gG,EAAWkF,EAAW7J,EAAOvsE,MAQ/CotE,EAAS,GAEToJ,EAAW32E,EAAU1f,MAAQ,UAC7B+sF,EAAMrtE,EAAUqtE,KAAO,GACvBmC,EAAYxvE,EAAUwvE,UAG5B,IAAI0B,EAAWlxE,EAAU3uB,SAAY,EAErC,MAAMulG,EAAkB52E,EAAU62E,WAAa,GAE/C,IAAM,IAAI75F,EAAI,EAAGA,EAAI45F,EAAgBvlG,OAAQ2L,IAAO,CAEnD,MAAMw5F,EAAgBI,EAAiB55F,GAAIm3B,KAG3C,GAAOqiE,GAA0C,IAAzBA,EAAcnlG,OAGtC,GAAKmlG,EAAe,GAAIxsE,aAAe,CAGtC,MAAM8sE,EAAmB,GAEzB,IAAIxiC,EAEJ,IAAMA,EAAI,EAAGA,EAAIkiC,EAAcnlG,OAAQijE,IAEtC,GAAKkiC,EAAeliC,GAAItqC,aAEvB,IAAM,IAAIv3B,EAAI,EAAGA,EAAI+jG,EAAeliC,GAAItqC,aAAa34B,OAAQoB,IAE5DqkG,EAAkBN,EAAeliC,GAAItqC,aAAcv3B,KAAU,EAWhE,IAAM,MAAMskG,KAAmBD,EAAmB,CAEjD,MAAMpK,EAAQ,GACRvsE,EAAS,GAEf,IAAM,IAAI1tB,EAAI,EAAGA,IAAM+jG,EAAeliC,GAAItqC,aAAa34B,SAAWoB,EAAI,CAErE,MAAMukG,EAAeR,EAAeliC,GAEpCo4B,EAAMl8F,KAAMwmG,EAAah4D,MACzB7e,EAAO3vB,KAAQwmG,EAAaf,cAAgBc,EAAoB,EAAI,GAIrExJ,EAAO/8F,KAAM,IAAIqgG,GAAqB,yBAA2BkG,EAAkB,IAAKrK,EAAOvsE,IAIhG+wE,EAAW4F,EAAiBzlG,QAAWg8F,GAAO,OAExC,CAIN,MAAM4J,EAAW,UAAYprC,EAAO7uD,GAAIsD,KAAO,IAE/Cg2F,EACCrF,GAAqBgG,EAAW,YAChCT,EAAe,MAAOjJ,GAEvB+I,EACCvF,GAAyBkG,EAAW,cACpCT,EAAe,MAAOjJ,GAEvB+I,EACCrF,GAAqBgG,EAAW,SAChCT,EAAe,MAAOjJ,IAMzB,OAAuB,IAAlBA,EAAOl8F,OAEJ,KAIK,IAAI,GAAeslG,EAAUzF,EAAU3D,EAAQiC,MAQ9D9hG,OAAOqC,OAAQ,GAAc/B,UAAW,CAEvC4/F,cAAe,WAGd,IAAIsD,EAAW,EAEf,IAAM,IAAI//F,EAAI,EAAGqB,EAHFpC,KAAKm9F,OAGQl8F,OAAQF,IAAMqB,IAAMrB,EAAI,CAEnD,MAAMq8F,EAAQp9F,KAAKm9F,OAAQp8F,GAE3B+/F,EAAWx/F,KAAKY,IAAK4+F,EAAU1D,EAAMd,MAAOc,EAAMd,MAAMr7F,OAAS,IAMlE,OAFAjB,KAAK8gG,SAAWA,EAET9gG,MAIRqyD,KAAM,WAEL,IAAM,IAAItxD,EAAI,EAAGA,EAAIf,KAAKm9F,OAAOl8F,OAAQF,IAExCf,KAAKm9F,OAAQp8F,GAAIsxD,KAAM,EAAGryD,KAAK8gG,UAIhC,OAAO9gG,MAIRkkG,SAAU,WAET,IAAIC,GAAQ,EAEZ,IAAM,IAAIpjG,EAAI,EAAGA,EAAIf,KAAKm9F,OAAOl8F,OAAQF,IAExCojG,EAAQA,GAASnkG,KAAKm9F,OAAQp8F,GAAImjG,WAInC,OAAOC,GAIRG,SAAU,WAET,IAAM,IAAIvjG,EAAI,EAAGA,EAAIf,KAAKm9F,OAAOl8F,OAAQF,IAExCf,KAAKm9F,OAAQp8F,GAAIujG,WAIlB,OAAOtkG,MAIRwG,MAAO,WAEN,MAAM22F,EAAS,GAEf,IAAM,IAAIp8F,EAAI,EAAGA,EAAIf,KAAKm9F,OAAOl8F,OAAQF,IAExCo8F,EAAO/8F,KAAMJ,KAAKm9F,OAAQp8F,GAAIyF,SAI/B,OAAO,IAAI,GAAexG,KAAKkQ,KAAMlQ,KAAK8gG,SAAU3D,EAAQn9F,KAAKo/F,YAIlE9tF,OAAQ,WAEP,OAAO,GAAcA,OAAQtR,SCrd/B,MAAM8mG,GAAQ,CAEbj8D,SAAS,EAETk8D,MAAO,GAEPpgG,IAAK,SAAWvJ,EAAK4pG,IAEE,IAAjBhnG,KAAK6qC,UAIV7qC,KAAK+mG,MAAO3pG,GAAQ4pG,IAIrBvpG,IAAK,SAAWL,GAEf,IAAsB,IAAjB4C,KAAK6qC,QAIV,OAAO7qC,KAAK+mG,MAAO3pG,IAIpB+vB,OAAQ,SAAW/vB,UAEX4C,KAAK+mG,MAAO3pG,IAIpBgwB,MAAO,WAENptB,KAAK+mG,MAAQ,KCqGTE,GAAwB,IAvI9B,SAAyBC,EAAQC,EAAYC,GAE5C,MAAMzgE,EAAQ3mC,KAEd,IAGIqnG,EAHAC,GAAY,EACZC,EAAc,EACdC,EAAa,EAEjB,MAAMC,EAAW,GAKjBznG,KAAK0nG,aAAU3nG,EACfC,KAAKknG,YAyHwB,EAxH7BlnG,KAAKmnG,gBAwHwB,EAvH7BnnG,KAAKonG,aAuHwB,EArH7BpnG,KAAK2nG,UAAY,SAAW51F,GAE3By1F,KAEmB,IAAdF,QAEmBvnG,IAAlB4mC,EAAM+gE,SAEV/gE,EAAM+gE,QAAS31F,EAAKw1F,EAAaC,GAMnCF,GAAY,GAIbtnG,KAAK4nG,QAAU,SAAW71F,GAEzBw1F,SAE0BxnG,IAArB4mC,EAAMwgE,YAEVxgE,EAAMwgE,WAAYp1F,EAAKw1F,EAAaC,GAIhCD,IAAgBC,IAEpBF,GAAY,OAEUvnG,IAAjB4mC,EAAMugE,QAEVvgE,EAAMugE,WAQTlnG,KAAK6nG,UAAY,SAAW91F,QAEJhS,IAAlB4mC,EAAMygE,SAEVzgE,EAAMygE,QAASr1F,IAMjB/R,KAAK8nG,WAAa,SAAW/1F,GAE5B,OAAKs1F,EAEGA,EAAat1F,GAIdA,GAIR/R,KAAK+nG,eAAiB,SAAWxrB,GAIhC,OAFA8qB,EAAc9qB,EAEPv8E,MAIRA,KAAKgoG,WAAa,SAAWC,EAAOC,GAInC,OAFAT,EAASrnG,KAAM6nG,EAAOC,GAEfloG,MAIRA,KAAKmoG,cAAgB,SAAWF,GAE/B,MAAMznG,EAAQinG,EAAStnG,QAAS8nG,GAQhC,OANiB,IAAZznG,GAEJinG,EAAShnG,OAAQD,EAAO,GAIlBR,MAIRA,KAAKooG,WAAa,SAAWpB,GAE5B,IAAM,IAAIjmG,EAAI,EAAGC,EAAIymG,EAASxmG,OAAQF,EAAIC,EAAGD,GAAK,EAAI,CAErD,MAAMknG,EAAQR,EAAU1mG,GAClBmnG,EAAST,EAAU1mG,EAAI,GAI7B,GAFKknG,EAAMI,SAASJ,EAAMr3C,UAAY,GAEjCq3C,EAAMv5F,KAAMs4F,GAEhB,OAAOkB,EAMT,OAAO,OC/HT,SAAS,GAAQI,GAEhBtoG,KAAKsoG,aAAwBvoG,IAAZuoG,EAA0BA,EAAUrB,GAErDjnG,KAAKuoG,YAAc,YACnBvoG,KAAKwoG,iBAAkB,EACvBxoG,KAAK0wD,KAAO,GACZ1wD,KAAKyoG,aAAe,GACpBzoG,KAAK0oG,cAAgB,GAItBprG,OAAOqC,OAAQ,GAAO/B,UAAW,CAEhC+qG,KAAM,aAENC,UAAW,SAAW72F,EAAKo1F,GAE1B,MAAMxgE,EAAQ3mC,KAEd,OAAO,IAAI6oG,SAAS,SAAWC,EAASC,GAEvCpiE,EAAMgiE,KAAM52F,EAAK+2F,EAAS3B,EAAY4B,OAMxC94E,MAAO,aAEP+4E,eAAgB,SAAWT,GAG1B,OADAvoG,KAAKuoG,YAAcA,EACZvoG,MAIRipG,mBAAoB,SAAWhrG,GAG9B,OADA+B,KAAKwoG,gBAAkBvqG,EAChB+B,MAIRkpG,QAAS,SAAWx4C,GAGnB,OADA1wD,KAAK0wD,KAAOA,EACL1wD,MAIRmpG,gBAAiB,SAAWV,GAG3B,OADAzoG,KAAKyoG,aAAeA,EACbzoG,MAIRopG,iBAAkB,SAAWV,GAG5B,OADA1oG,KAAK0oG,cAAgBA,EACd1oG,QC5DT,MAAMqpG,GAAU,GAEhB,SAAS,GAAYf,GAEpB,QAAatoG,KAAMsoG,GCHpB,SAASgB,GAAiBhB,GAEzB,QAAatoG,KAAMsoG,GCKpB,SAASiB,GAAyBjB,GAEjC,QAAatoG,KAAMsoG,GCVpB,SAAS,GAAaA,GAErB,QAAatoG,KAAMsoG,GCDpB,SAASkB,GAAmBlB,GAE3B,QAAatoG,KAAMsoG,GCKpB,SAAS,GAAmBA,GAE3B,QAAatoG,KAAMsoG,GCRpB,SAASmB,GAAenB,GAEvB,QAAatoG,KAAMsoG,GC4BpB,SAASoB,KAER1pG,KAAKH,KAAO,QAEZG,KAAK2pG,mBAAqB,ICpC3B,SAASC,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpFV,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,eAEZG,KAAK6pG,GAAKA,GAAM,EAChB7pG,KAAK8pG,GAAKA,GAAM,EAEhB9pG,KAAK+pG,QAAUA,GAAW,EAC1B/pG,KAAKgqG,QAAUA,GAAW,EAE1BhqG,KAAKiqG,YAAcA,GAAe,EAClCjqG,KAAKkqG,UAAYA,GAAa,EAAI5oG,KAAKC,GAEvCvB,KAAKmqG,WAAaA,IAAc,EAEhCnqG,KAAKoqG,UAAYA,GAAa,EClB/B,SAASC,GAAUR,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAE3DP,GAAa9rG,KAAMkC,KAAM6pG,EAAIC,EAAIQ,EAASA,EAASL,EAAaC,EAAWC,GAE3EnqG,KAAKH,KAAO,WCiBb,SAAS0qG,KAER,IAAIC,EAAK,EAAGzzF,EAAK,EAAG5R,EAAK,EAAG6R,EAAK,EAUjC,SAASkwC,EAAMxxC,EAAII,EAAI8M,EAAIC,GAE1B2nF,EAAK90F,EACLqB,EAAK6L,EACLzd,GAAO,EAAIuQ,EAAK,EAAII,EAAK,EAAI8M,EAAKC,EAClC7L,EAAK,EAAItB,EAAK,EAAII,EAAK8M,EAAKC,EAI7B,MAAO,CAEN4nF,eAAgB,SAAW/0F,EAAII,EAAIgS,EAAI4iF,EAAIC,GAE1CzjD,EAAMpxC,EAAIgS,EAAI6iF,GAAY7iF,EAAKpS,GAAMi1F,GAAYD,EAAK50F,KAIvD80F,yBAA0B,SAAWl1F,EAAII,EAAIgS,EAAI4iF,EAAIG,EAAKC,EAAKC,GAG9D,IAAIloF,GAAO/M,EAAKJ,GAAOm1F,GAAQ/iF,EAAKpS,IAASm1F,EAAMC,IAAUhjF,EAAKhS,GAAOg1F,EACrEE,GAAOljF,EAAKhS,GAAOg1F,GAAQJ,EAAK50F,IAASg1F,EAAMC,IAAUL,EAAK5iF,GAAOijF,EAGzEloF,GAAMioF,EACNE,GAAMF,EAEN5jD,EAAMpxC,EAAIgS,EAAIjF,EAAImoF,IAInBC,KAAM,SAAWnoG,GAEhB,MAAMkoG,EAAKloG,EAAIA,EAEf,OAAO0nG,EAAKzzF,EAAKjU,EAAIqC,EAAK6lG,EAAKh0F,GADpBg0F,EAAKloG,KV1DnB,GAAWlF,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAExEpL,YAAa,GAEb6iG,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,QAE5BrnG,IAARgS,IAAoBA,EAAM,SAEZhS,IAAdC,KAAK0wD,OAAqB3+C,EAAM/R,KAAK0wD,KAAO3+C,GAEjDA,EAAM/R,KAAKsoG,QAAQR,WAAY/1F,GAE/B,MAAM40B,EAAQ3mC,KAER6vC,EAASi3D,GAAMrpG,IAAKsU,GAE1B,QAAgBhS,IAAX8vC,EAYJ,OAVAlJ,EAAM2hE,QAAQX,UAAW51F,GAEzBm5F,YAAY,WAENhE,GAASA,EAAQr3D,GAEtBlJ,EAAM2hE,QAAQV,QAAS71F,KAErB,GAEI89B,EAMR,QAAwB9vC,IAAnBspG,GAASt3F,GAUb,YARAs3F,GAASt3F,GAAM3R,KAAM,CAEpB8mG,OAAQA,EACRC,WAAYA,EACZC,QAASA,IASX,MACM+D,EAAqBp5F,EAAI8+C,MADV,+BAErB,IAAIu6C,EAGJ,GAAKD,EAAqB,CAEzB,MAAME,EAAWF,EAAoB,GAC/BG,IAAcH,EAAoB,GAExC,IAAIn6F,EAAOm6F,EAAoB,GAC/Bn6F,EAAOu6F,mBAAoBv6F,GAEtBs6F,IAAWt6F,EAAOw6F,KAAMx6F,IAE7B,IAEC,IAAIy6F,EACJ,MAAMC,GAAiB1rG,KAAK0rG,cAAgB,IAAKvK,cAEjD,OAASuK,GAER,IAAK,cACL,IAAK,OAEJ,MAAM/hE,EAAO,IAAIvM,WAAYpsB,EAAK/P,QAElC,IAAM,IAAIF,EAAI,EAAGA,EAAIiQ,EAAK/P,OAAQF,IAEjC4oC,EAAM5oC,GAAMiQ,EAAK26F,WAAY5qG,GAM7B0qG,EAFqB,SAAjBC,EAEO,IAAIE,KAAM,CAAEjiE,EAAK1K,QAAU,CAAEp/B,KAAMwrG,IAInC1hE,EAAK1K,OAIjB,MAED,IAAK,WAEJ,MAAM4sE,EAAS,IAAIC,UACnBL,EAAWI,EAAOE,gBAAiB/6F,EAAMq6F,GAEzC,MAED,IAAK,OAEJI,EAAW58E,KAAKoB,MAAOjf,GAEvB,MAED,QAECy6F,EAAWz6F,EAObk6F,YAAY,WAENhE,GAASA,EAAQuE,GAEtB9kE,EAAM2hE,QAAQV,QAAS71F,KAErB,GAEF,MAAQhI,GAGTmhG,YAAY,WAEN9D,GAAUA,EAASr9F,GAExB48B,EAAM2hE,QAAQT,UAAW91F,GACzB40B,EAAM2hE,QAAQV,QAAS71F,KAErB,QAIE,CAINs3F,GAASt3F,GAAQ,GAEjBs3F,GAASt3F,GAAM3R,KAAM,CAEpB8mG,OAAQA,EACRC,WAAYA,EACZC,QAASA,IAIVgE,EAAU,IAAIY,eAEdZ,EAAQa,KAAM,MAAOl6F,GAAK,GAE1Bq5F,EAAQxrG,iBAAkB,QAAQ,SAAWe,GAE5C,MAAM8qG,EAAWzrG,KAAKyrG,SAEhBS,EAAY7C,GAASt3F,GAI3B,UAFOs3F,GAASt3F,GAEK,MAAhB/R,KAAKiyD,QAAkC,IAAhBjyD,KAAKiyD,OAAe,CAK1B,IAAhBjyD,KAAKiyD,QAAersD,QAAQC,KAAM,6CAIvCihG,GAAMngG,IAAKoL,EAAK05F,GAEhB,IAAM,IAAI1qG,EAAI,EAAG+b,EAAKovF,EAAUjrG,OAAQF,EAAI+b,EAAI/b,IAAO,CAEtD,MAAMiY,EAAWkzF,EAAWnrG,GACvBiY,EAASkuF,QAASluF,EAASkuF,OAAQuE,GAIzC9kE,EAAM2hE,QAAQV,QAAS71F,OAEjB,CAEN,IAAM,IAAIhR,EAAI,EAAG+b,EAAKovF,EAAUjrG,OAAQF,EAAI+b,EAAI/b,IAAO,CAEtD,MAAMiY,EAAWkzF,EAAWnrG,GACvBiY,EAASouF,SAAUpuF,EAASouF,QAASzmG,GAI3CgmC,EAAM2hE,QAAQT,UAAW91F,GACzB40B,EAAM2hE,QAAQV,QAAS71F,OAItB,GAEHq5F,EAAQxrG,iBAAkB,YAAY,SAAWe,GAEhD,MAAMurG,EAAY7C,GAASt3F,GAE3B,IAAM,IAAIhR,EAAI,EAAG+b,EAAKovF,EAAUjrG,OAAQF,EAAI+b,EAAI/b,IAAO,CAEtD,MAAMiY,EAAWkzF,EAAWnrG,GACvBiY,EAASmuF,YAAanuF,EAASmuF,WAAYxmG,OAI/C,GAEHyqG,EAAQxrG,iBAAkB,SAAS,SAAWe,GAE7C,MAAMurG,EAAY7C,GAASt3F,UAEpBs3F,GAASt3F,GAEhB,IAAM,IAAIhR,EAAI,EAAG+b,EAAKovF,EAAUjrG,OAAQF,EAAI+b,EAAI/b,IAAO,CAEtD,MAAMiY,EAAWkzF,EAAWnrG,GACvBiY,EAASouF,SAAUpuF,EAASouF,QAASzmG,GAI3CgmC,EAAM2hE,QAAQT,UAAW91F,GACzB40B,EAAM2hE,QAAQV,QAAS71F,MAErB,GAEHq5F,EAAQxrG,iBAAkB,SAAS,SAAWe,GAE7C,MAAMurG,EAAY7C,GAASt3F,UAEpBs3F,GAASt3F,GAEhB,IAAM,IAAIhR,EAAI,EAAG+b,EAAKovF,EAAUjrG,OAAQF,EAAI+b,EAAI/b,IAAO,CAEtD,MAAMiY,EAAWkzF,EAAWnrG,GACvBiY,EAASouF,SAAUpuF,EAASouF,QAASzmG,GAI3CgmC,EAAM2hE,QAAQT,UAAW91F,GACzB40B,EAAM2hE,QAAQV,QAAS71F,MAErB,QAEwBhS,IAAtBC,KAAK0rG,eAA6BN,EAAQM,aAAe1rG,KAAK0rG,mBACrC3rG,IAAzBC,KAAKwoG,kBAAgC4C,EAAQ5C,gBAAkBxoG,KAAKwoG,iBAEpE4C,EAAQe,kBAAmBf,EAAQe,sBAAoCpsG,IAAlBC,KAAKqrG,SAAyBrrG,KAAKqrG,SAAW,cAExG,IAAM,MAAMe,KAAUpsG,KAAK0oG,cAE1B0C,EAAQhC,iBAAkBgD,EAAQpsG,KAAK0oG,cAAe0D,IAIvDhB,EAAQiB,KAAM,MAMf,OAFA1lE,EAAM2hE,QAAQX,UAAW51F,GAElBq5F,GAIRkB,gBAAiB,SAAWruG,GAG3B,OADA+B,KAAK0rG,aAAeztG,EACb+B,MAIRusG,YAAa,SAAWtuG,GAGvB,OADA+B,KAAKqrG,SAAWptG,EACT+B,QCzRTspG,GAAgB1rG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAE7EpL,YAAawjG,GAEbX,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAMzgE,EAAQ3mC,KAERkoG,EAAS,IAAI,GAAYvhE,EAAM2hE,SACrCJ,EAAOgB,QAASviE,EAAM+pB,MACtBw3C,EAAOkB,iBAAkBziE,EAAM+hE,eAC/BR,EAAOe,mBAAoBtiE,EAAM6hE,iBACjCN,EAAOS,KAAM52F,GAAK,SAAWy6F,GAE5B,IAECtF,EAAQvgE,EAAM1W,MAAOpB,KAAKoB,MAAOu8E,KAEhC,MAAQhlG,GAEJ4/F,EAEJA,EAAS5/F,GAIT5B,QAAQmE,MAAOvC,GAIhBm/B,EAAM2hE,QAAQT,UAAW91F,MAIxBo1F,EAAYC,IAIhBn3E,MAAO,SAAW68D,GAEjB,MAAMlhE,EAAa,GAEnB,IAAM,IAAI7qB,EAAI,EAAGA,EAAI+rF,EAAK7rF,OAAQF,IAAO,CAExC,MAAMm8F,EAAO,SAAqBpQ,EAAM/rF,IAExC6qB,EAAWxrB,KAAM88F,GAIlB,OAAOtxE,KC3CT29E,GAAwB3rG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAErFpL,YAAayjG,GAEbZ,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAMzgE,EAAQ3mC,KAER8R,EAAS,GAETuC,EAAU,IAAI26E,GAEdkZ,EAAS,IAAI,GAAYloG,KAAKsoG,SACpCJ,EAAOgB,QAASlpG,KAAK0wD,MACrBw3C,EAAOoE,gBAAiB,eACxBpE,EAAOkB,iBAAkBppG,KAAK0oG,eAC9BR,EAAOe,mBAAoBtiE,EAAM6hE,iBAEjC,IAAIiE,EAAS,EAEb,SAASC,EAAa3rG,GAErBmnG,EAAOS,KAAM52F,EAAKhR,IAAK,SAAWk+B,GAEjC,MAAM0tE,EAAWhmE,EAAM1W,MAAOgP,GAAQ,GAEtCntB,EAAQ/Q,GAAM,CACbgF,MAAO4mG,EAAS5mG,MAChBC,OAAQ2mG,EAAS3mG,OACjB8J,OAAQ68F,EAAS78F,OACjBK,QAASw8F,EAASx8F,SAGnBs8F,GAAU,EAEM,IAAXA,IAE0B,IAAzBE,EAASC,cAAoBv4F,EAAQxE,UAAYvR,GAEtD+V,EAAQ5F,MAAQqD,EAChBuC,EAAQvE,OAAS68F,EAAS78F,OAC1BuE,EAAQmsB,aAAc,EAEjB0mE,GAASA,EAAQ7yF,MAIrB8yF,EAAYC,GAIhB,GAAKn2F,MAAMe,QAASD,GAEnB,IAAM,IAAIhR,EAAI,EAAG+b,EAAK/K,EAAI9Q,OAAQF,EAAI+b,IAAO/b,EAE5C2rG,EAAa3rG,QAQdmnG,EAAOS,KAAM52F,GAAK,SAAWktB,GAE5B,MAAM0tE,EAAWhmE,EAAM1W,MAAOgP,GAAQ,GAEtC,GAAK0tE,EAASE,UAAY,CAEzB,MAAM3Y,EAAQyY,EAASx8F,QAAQlP,OAAS0rG,EAASC,YAEjD,IAAM,IAAIlgG,EAAI,EAAGA,EAAIwnF,EAAOxnF,IAAO,CAElCoF,EAAQpF,GAAM,CAAEyD,QAAS,IAEzB,IAAM,IAAIpP,EAAI,EAAGA,EAAI4rG,EAASC,YAAa7rG,IAE1C+Q,EAAQpF,GAAIyD,QAAQ/P,KAAMusG,EAASx8F,QAASzD,EAAIigG,EAASC,YAAc7rG,IACvE+Q,EAAQpF,GAAIoD,OAAS68F,EAAS78F,OAC9BgC,EAAQpF,GAAI3G,MAAQ4mG,EAAS5mG,MAC7B+L,EAAQpF,GAAI1G,OAAS2mG,EAAS3mG,OAMhCqO,EAAQ5F,MAAQqD,OAIhBuC,EAAQ5F,MAAM1I,MAAQ4mG,EAAS5mG,MAC/BsO,EAAQ5F,MAAMzI,OAAS2mG,EAAS3mG,OAChCqO,EAAQlE,QAAUw8F,EAASx8F,QAIE,IAAzBw8F,EAASC,cAEbv4F,EAAQxE,UAAYvR,GAIrB+V,EAAQvE,OAAS68F,EAAS78F,OAC1BuE,EAAQmsB,aAAc,EAEjB0mE,GAASA,EAAQ7yF,KAEpB8yF,EAAYC,GAIhB,OAAO/yF,KCvHT,GAAYzW,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAEzEpL,YAAa,GAEb6iG,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,QAEtBrnG,IAAdC,KAAK0wD,OAAqB3+C,EAAM/R,KAAK0wD,KAAO3+C,GAEjDA,EAAM/R,KAAKsoG,QAAQR,WAAY/1F,GAE/B,MAAM40B,EAAQ3mC,KAER6vC,EAASi3D,GAAMrpG,IAAKsU,GAE1B,QAAgBhS,IAAX8vC,EAYJ,OAVAlJ,EAAM2hE,QAAQX,UAAW51F,GAEzBm5F,YAAY,WAENhE,GAASA,EAAQr3D,GAEtBlJ,EAAM2hE,QAAQV,QAAS71F,KAErB,GAEI89B,EAIR,MAAMphC,EAAQK,SAASC,gBAAiB,+BAAgC,OAExE,SAAS+9F,IAERr+F,EAAMnO,oBAAqB,OAAQwsG,GAAa,GAChDr+F,EAAMnO,oBAAqB,QAASysG,GAAc,GAElDjG,GAAMngG,IAAKoL,EAAK/R,MAEXknG,GAASA,EAAQlnG,MAEtB2mC,EAAM2hE,QAAQV,QAAS71F,GAIxB,SAASg7F,EAAcpsG,GAEtB8N,EAAMnO,oBAAqB,OAAQwsG,GAAa,GAChDr+F,EAAMnO,oBAAqB,QAASysG,GAAc,GAE7C3F,GAAUA,EAASzmG,GAExBgmC,EAAM2hE,QAAQT,UAAW91F,GACzB40B,EAAM2hE,QAAQV,QAAS71F,GAiBxB,OAbAtD,EAAM7O,iBAAkB,OAAQktG,GAAa,GAC7Cr+F,EAAM7O,iBAAkB,QAASmtG,GAAc,GAEnB,UAAvBh7F,EAAIi7F,OAAQ,EAAG,SAEOjtG,IAArBC,KAAKuoG,cAA4B95F,EAAM85F,YAAcvoG,KAAKuoG,aAIhE5hE,EAAM2hE,QAAQX,UAAW51F,GAEzBtD,EAAME,IAAMoD,EAELtD,KCrET+6F,GAAkB5rG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAE/EpL,YAAa0jG,GAEbb,KAAM,SAAWsE,EAAM/F,EAAQC,EAAYC,GAE1C,MAAM/yF,EAAU,IAAI,GAEd6zF,EAAS,IAAI,GAAaloG,KAAKsoG,SACrCJ,EAAOc,eAAgBhpG,KAAKuoG,aAC5BL,EAAOgB,QAASlpG,KAAK0wD,MAErB,IAAI+7C,EAAS,EAEb,SAASC,EAAa3rG,GAErBmnG,EAAOS,KAAMsE,EAAMlsG,IAAK,SAAW0N,GAElC4F,EAAQvC,OAAQ/Q,GAAM0N,EAEtBg+F,IAEgB,IAAXA,IAEJp4F,EAAQmsB,aAAc,EAEjB0mE,GAASA,EAAQ7yF,WAIrBtU,EAAWqnG,GAIf,IAAM,IAAIrmG,EAAI,EAAGA,EAAIksG,EAAKhsG,SAAWF,EAEpC2rG,EAAa3rG,GAId,OAAOsT,KCjCT,GAAkBzW,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAE/EpL,YAAa,GAEb6iG,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAMzgE,EAAQ3mC,KAERqU,EAAU,IAAI,GAEd6zF,EAAS,IAAI,GAAYloG,KAAKsoG,SA2EpC,OA1EAJ,EAAOoE,gBAAiB,eACxBpE,EAAOkB,iBAAkBppG,KAAK0oG,eAC9BR,EAAOgB,QAASlpG,KAAK0wD,MACrBw3C,EAAOe,mBAAoBtiE,EAAM6hE,iBACjCN,EAAOS,KAAM52F,GAAK,SAAWktB,GAE5B,MAAMiuE,EAAUvmE,EAAM1W,MAAOgP,GAEtBiuE,SAEgBntG,IAAlBmtG,EAAQz+F,MAEZ4F,EAAQ5F,MAAQy+F,EAAQz+F,WAEI1O,IAAjBmtG,EAAQl8F,OAEnBqD,EAAQ5F,MAAM1I,MAAQmnG,EAAQnnG,MAC9BsO,EAAQ5F,MAAMzI,OAASknG,EAAQlnG,OAC/BqO,EAAQ5F,MAAMuC,KAAOk8F,EAAQl8F,MAI9BqD,EAAQ3E,WAA0B3P,IAAlBmtG,EAAQx9F,MAAsBw9F,EAAQx9F,MAAQtR,EAC9DiW,EAAQ1E,WAA0B5P,IAAlBmtG,EAAQv9F,MAAsBu9F,EAAQv9F,MAAQvR,EAE9DiW,EAAQzE,eAAkC7P,IAAtBmtG,EAAQt9F,UAA0Bs9F,EAAQt9F,UAAYtR,EAC1E+V,EAAQxE,eAAkC9P,IAAtBmtG,EAAQr9F,UAA0Bq9F,EAAQr9F,UAAYvR,EAE1E+V,EAAQtE,gBAAoChQ,IAAvBmtG,EAAQn9F,WAA2Bm9F,EAAQn9F,WAAa,OAEnDhQ,IAArBmtG,EAAQl9F,WAEZqE,EAAQrE,SAAWk9F,EAAQl9F,eAILjQ,IAAlBmtG,EAAQz8F,QAEZ4D,EAAQ5D,MAAQy8F,EAAQz8F,YAID1Q,IAAnBmtG,EAAQp9F,SAEZuE,EAAQvE,OAASo9F,EAAQp9F,aAIJ/P,IAAjBmtG,EAAQrtG,OAEZwU,EAAQxU,KAAOqtG,EAAQrtG,WAICE,IAApBmtG,EAAQ/8F,UAEZkE,EAAQlE,QAAU+8F,EAAQ/8F,QAC1BkE,EAAQxE,UAAYtR,GAIQ,IAAxB2uG,EAAQN,cAEZv4F,EAAQxE,UAAYvR,GAIrB+V,EAAQmsB,aAAc,EAEjB0mE,GAASA,EAAQ7yF,EAAS64F,MAE7B/F,EAAYC,GAGR/yF,KC3FTo1F,GAAc7rG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAE3EpL,YAAa2jG,GAEbd,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAM/yF,EAAU,IAAI,EAEd6zF,EAAS,IAAI,GAAaloG,KAAKsoG,SAsBrC,OArBAJ,EAAOc,eAAgBhpG,KAAKuoG,aAC5BL,EAAOgB,QAASlpG,KAAK0wD,MAErBw3C,EAAOS,KAAM52F,GAAK,SAAWtD,GAE5B4F,EAAQ5F,MAAQA,EAGhB,MAAM0+F,EAASp7F,EAAIq7F,OAAQ,kBAAqB,GAA4C,IAAvCr7F,EAAIq7F,OAAQ,sBAEjE/4F,EAAQvE,OAASq9F,EAAStuG,EAAYC,EACtCuV,EAAQmsB,aAAc,OAENzgC,IAAXmnG,GAEJA,EAAQ7yF,KAIP8yF,EAAYC,GAER/yF,KCET/W,OAAOqC,OAAQ+pG,GAAM9rG,UAAW,CAK/ByvG,SAAU,WAGT,OADAznG,QAAQC,KAAM,6CACP,MAORynG,WAAY,SAAW96E,EAAG+6E,GAEzB,MAAMzqG,EAAI9C,KAAKwtG,eAAgBh7E,GAC/B,OAAOxyB,KAAKqtG,SAAUvqG,EAAGyqG,IAM1BE,UAAW,SAAWC,EAAY,GAEjC,MAAM9wF,EAAS,GAEf,IAAM,IAAInQ,EAAI,EAAGA,GAAKihG,EAAWjhG,IAEhCmQ,EAAOxc,KAAMJ,KAAKqtG,SAAU5gG,EAAIihG,IAIjC,OAAO9wF,GAMRm5E,gBAAiB,SAAW2X,EAAY,GAEvC,MAAM9wF,EAAS,GAEf,IAAM,IAAInQ,EAAI,EAAGA,GAAKihG,EAAWjhG,IAEhCmQ,EAAOxc,KAAMJ,KAAKstG,WAAY7gG,EAAIihG,IAInC,OAAO9wF,GAMR+wF,UAAW,WAEV,MAAMC,EAAU5tG,KAAK6tG,aACrB,OAAOD,EAASA,EAAQ3sG,OAAS,IAMlC4sG,WAAY,SAAWH,GAItB,QAFmB3tG,IAAd2tG,IAA0BA,EAAY1tG,KAAK2pG,oBAE3C3pG,KAAK8tG,iBACP9tG,KAAK8tG,gBAAgB7sG,SAAWysG,EAAY,IAC5C1tG,KAAKwgC,YAEP,OAAOxgC,KAAK8tG,gBAIb9tG,KAAKwgC,aAAc,EAEnB,MAAM1Q,EAAQ,GACd,IAAIi+E,EAASre,EAAO1vF,KAAKqtG,SAAU,GAC/B1d,EAAM,EAEV7/D,EAAM1vB,KAAM,GAEZ,IAAM,IAAI2X,EAAI,EAAGA,GAAK21F,EAAW31F,IAEhCg2F,EAAU/tG,KAAKqtG,SAAUt1F,EAAI21F,GAC7B/d,GAAOoe,EAAQtlG,WAAYinF,GAC3B5/D,EAAM1vB,KAAMuvF,GACZD,EAAOqe,EAMR,OAFA/tG,KAAK8tG,gBAAkBh+E,EAEhBA,GAIRk+E,iBAAkB,WAEjBhuG,KAAKwgC,aAAc,EACnBxgC,KAAK6tG,cAMNL,eAAgB,SAAWh7E,EAAG7F,GAE7B,MAAMshF,EAAajuG,KAAK6tG,aAExB,IAAI9sG,EAAI,EACR,MAAM+b,EAAKmxF,EAAWhtG,OAEtB,IAAIitG,EAIHA,EAFIvhF,GAMc6F,EAAIy7E,EAAYnxF,EAAK,GAMxC,IAA4BqxF,EAAxB3qG,EAAM,EAAGC,EAAOqZ,EAAK,EAEzB,KAAQtZ,GAAOC,GAMd,GAJA1C,EAAIO,KAAKoC,MAAOF,GAAQC,EAAOD,GAAQ,GAEvC2qG,EAAaF,EAAYltG,GAAMmtG,EAE1BC,EAAa,EAEjB3qG,EAAMzC,EAAI,MAEJ,MAAKotG,EAAa,GAIlB,CAEN1qG,EAAO1C,EACP,MALA0C,EAAO1C,EAAI,EAeb,GAFAA,EAAI0C,EAECwqG,EAAYltG,KAAQmtG,EAExB,OAAOntG,GAAM+b,EAAK,GAMnB,MAAMsxF,EAAeH,EAAYltG,GAajC,OAFYA,GAJcmtG,EAAkBE,IANxBH,EAAYltG,EAAI,GAEAqtG,KAQEtxF,EAAK,IAW5CuxF,WAAY,SAAWvrG,EAAGyqG,GAEzB,MAAMx8E,EAAQ,KACd,IAAIlO,EAAK/f,EAAIiuB,EACTi6E,EAAKloG,EAAIiuB,EAIRlO,EAAK,IAAIA,EAAK,GACdmoF,EAAK,IAAIA,EAAK,GAEnB,MAAMsD,EAAMtuG,KAAKqtG,SAAUxqF,GACrB0rF,EAAMvuG,KAAKqtG,SAAUrC,GAErBvqE,EAAU8sE,IAAsBe,EAAc,UAAI,IAAI,EAAY,IAAI,GAI5E,OAFA7tE,EAAQh6B,KAAM8nG,GAAMvnG,IAAKsnG,GAAMhmG,YAExBm4B,GAIR+tE,aAAc,SAAWh8E,EAAG+6E,GAE3B,MAAMzqG,EAAI9C,KAAKwtG,eAAgBh7E,GAC/B,OAAOxyB,KAAKquG,WAAYvrG,EAAGyqG,IAI5BvX,oBAAqB,SAAWyY,EAAUC,GAIzC,MAAMtzF,EAAS,IAAI,EAEbmmB,EAAW,GACXH,EAAU,GACVk3D,EAAY,GAEZ7B,EAAM,IAAI,EACVkY,EAAM,IAAIzqF,GAIhB,IAAM,IAAInjB,EAAI,EAAGA,GAAK0tG,EAAU1tG,IAAO,CAEtC,MAAMyxB,EAAIzxB,EAAI0tG,EAEdltE,EAAUxgC,GAAMf,KAAKwuG,aAAch8E,EAAG,IAAI,GAC1C+O,EAAUxgC,GAAIuH,YAOf84B,EAAS,GAAM,IAAI,EACnBk3D,EAAW,GAAM,IAAI,EACrB,IAAIr2F,EAAMmU,OAAOw4F,UACjB,MAAMlhG,EAAKpM,KAAK8B,IAAKm+B,EAAU,GAAIh/B,GAC7BoL,EAAKrM,KAAK8B,IAAKm+B,EAAU,GAAI1+B,GAC7BgsG,EAAKvtG,KAAK8B,IAAKm+B,EAAU,GAAIjvB,GAE9B5E,GAAMzL,IAEVA,EAAMyL,EACN0N,EAAOzV,IAAK,EAAG,EAAG,IAIdgI,GAAM1L,IAEVA,EAAM0L,EACNyN,EAAOzV,IAAK,EAAG,EAAG,IAIdkpG,GAAM5sG,GAEVmZ,EAAOzV,IAAK,EAAG,EAAG,GAInB8wF,EAAIl8E,aAAcgnB,EAAU,GAAKnmB,GAAS9S,YAE1C84B,EAAS,GAAI7mB,aAAcgnB,EAAU,GAAKk1D,GAC1C6B,EAAW,GAAI/9E,aAAcgnB,EAAU,GAAKH,EAAS,IAKrD,IAAM,IAAIrgC,EAAI,EAAGA,GAAK0tG,EAAU1tG,IAAO,CAQtC,GANAqgC,EAASrgC,GAAMqgC,EAASrgC,EAAI,GAAIyF,QAEhC8xF,EAAWv3F,GAAMu3F,EAAWv3F,EAAI,GAAIyF,QAEpCiwF,EAAIl8E,aAAcgnB,EAAUxgC,EAAI,GAAKwgC,EAAUxgC,IAE1C01F,EAAIx1F,SAAWmV,OAAOC,QAAU,CAEpCogF,EAAInuF,YAEJ,MAAM6F,EAAQ7M,KAAKqR,KAAM,QAAiB4uB,EAAUxgC,EAAI,GAAIkH,IAAKs5B,EAAUxgC,KAAS,EAAG,IAEvFqgC,EAASrgC,GAAI0R,aAAck8F,EAAIjnF,iBAAkB+uE,EAAKtoF,IAIvDmqF,EAAWv3F,GAAIwZ,aAAcgnB,EAAUxgC,GAAKqgC,EAASrgC,IAMtD,IAAgB,IAAX2tG,EAAkB,CAEtB,IAAIvgG,EAAQ7M,KAAKqR,KAAM,QAAiByuB,EAAS,GAAIn5B,IAAKm5B,EAASqtE,KAAgB,EAAG,IACtFtgG,GAASsgG,EAEJltE,EAAU,GAAIt5B,IAAKwuF,EAAIl8E,aAAc6mB,EAAS,GAAKA,EAASqtE,KAAiB,IAEjFtgG,GAAUA,GAIX,IAAM,IAAIpN,EAAI,EAAGA,GAAK0tG,EAAU1tG,IAG/BqgC,EAASrgC,GAAI0R,aAAck8F,EAAIjnF,iBAAkB6Z,EAAUxgC,GAAKoN,EAAQpN,IACxEu3F,EAAWv3F,GAAIwZ,aAAcgnB,EAAUxgC,GAAKqgC,EAASrgC,IAMvD,MAAO,CACNwgC,SAAUA,EACVH,QAASA,EACTk3D,UAAWA,IAKb9xF,MAAO,WAEN,OAAO,IAAIxG,KAAK8F,aAAcW,KAAMzG,OAIrCyG,KAAM,SAAW4K,GAIhB,OAFArR,KAAK2pG,mBAAqBt4F,EAAOs4F,mBAE1B3pG,MAIRsR,OAAQ,WAEP,MAAMN,EAAO,CACZW,SAAU,CACThB,QAAS,IACT9Q,KAAM,QACN+R,UAAW,iBAOb,OAHAZ,EAAK24F,mBAAqB3pG,KAAK2pG,mBAC/B34F,EAAKnR,KAAOG,KAAKH,KAEVmR,GAIR67E,SAAU,SAAWC,GAIpB,OAFA9sF,KAAK2pG,mBAAqB7c,EAAK6c,mBAExB3pG,QCnYT4pG,GAAahsG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WAC9CgsG,GAAahsG,UAAUkI,YAAc8jG,GAErCA,GAAahsG,UAAUkxG,gBAAiB,EAExClF,GAAahsG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,GAE/C,MAAM7vF,EAAQ6vF,GAAkB,IAAI,EAE9BwB,EAAkB,EAAVztG,KAAKC,GACnB,IAAIytG,EAAahvG,KAAKkqG,UAAYlqG,KAAKiqG,YACvC,MAAMgF,EAAa3tG,KAAK8B,IAAK4rG,GAAe54F,OAAOC,QAGnD,KAAQ24F,EAAa,GAAIA,GAAcD,EACvC,KAAQC,EAAaD,GAAQC,GAAcD,EAEtCC,EAAa54F,OAAOC,UAIvB24F,EAFIC,EAES,EAIAF,IAMU,IAApB/uG,KAAKmqG,YAAyB8E,IAE7BD,IAAeD,EAEnBC,GAAeD,EAIfC,GAA0BD,GAM5B,MAAMxmG,EAAQvI,KAAKiqG,YAAcnnG,EAAIksG,EACrC,IAAIzsG,EAAIvC,KAAK6pG,GAAK7pG,KAAK+pG,QAAUzoG,KAAK2D,IAAKsD,GACvC1F,EAAI7C,KAAK8pG,GAAK9pG,KAAKgqG,QAAU1oG,KAAK4D,IAAKqD,GAE3C,GAAwB,IAAnBvI,KAAKoqG,UAAkB,CAE3B,MAAMnlG,EAAM3D,KAAK2D,IAAKjF,KAAKoqG,WACrBllG,EAAM5D,KAAK4D,IAAKlF,KAAKoqG,WAErB18F,EAAKnL,EAAIvC,KAAK6pG,GACdl8F,EAAK9K,EAAI7C,KAAK8pG,GAGpBvnG,EAAImL,EAAKzI,EAAM0I,EAAKzI,EAAMlF,KAAK6pG,GAC/BhnG,EAAI6K,EAAKxI,EAAMyI,EAAK1I,EAAMjF,KAAK8pG,GAIhC,OAAOpsF,EAAM/X,IAAKpD,EAAGM,IAItB+mG,GAAahsG,UAAU6I,KAAO,SAAW4K,GAiBxC,OAfAq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAK6pG,GAAKx4F,EAAOw4F,GACjB7pG,KAAK8pG,GAAKz4F,EAAOy4F,GAEjB9pG,KAAK+pG,QAAU14F,EAAO04F,QACtB/pG,KAAKgqG,QAAU34F,EAAO24F,QAEtBhqG,KAAKiqG,YAAc54F,EAAO44F,YAC1BjqG,KAAKkqG,UAAY74F,EAAO64F,UAExBlqG,KAAKmqG,WAAa94F,EAAO84F,WAEzBnqG,KAAKoqG,UAAY/4F,EAAO+4F,UAEjBpqG,MAKR4pG,GAAahsG,UAAU0T,OAAS,WAE/B,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAe1C,OAbAgR,EAAK64F,GAAK7pG,KAAK6pG,GACf74F,EAAK84F,GAAK9pG,KAAK8pG,GAEf94F,EAAK+4F,QAAU/pG,KAAK+pG,QACpB/4F,EAAKg5F,QAAUhqG,KAAKgqG,QAEpBh5F,EAAKi5F,YAAcjqG,KAAKiqG,YACxBj5F,EAAKk5F,UAAYlqG,KAAKkqG,UAEtBl5F,EAAKm5F,WAAanqG,KAAKmqG,WAEvBn5F,EAAKo5F,UAAYpqG,KAAKoqG,UAEfp5F,GAIR44F,GAAahsG,UAAUivF,SAAW,SAAWC,GAiB5C,OAfA4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAK6pG,GAAK/c,EAAK+c,GACf7pG,KAAK8pG,GAAKhd,EAAKgd,GAEf9pG,KAAK+pG,QAAUjd,EAAKid,QACpB/pG,KAAKgqG,QAAUld,EAAKkd,QAEpBhqG,KAAKiqG,YAAcnd,EAAKmd,YACxBjqG,KAAKkqG,UAAYpd,EAAKod,UAEtBlqG,KAAKmqG,WAAard,EAAKqd,WAEvBnqG,KAAKoqG,UAAYtd,EAAKsd,UAEfpqG,MC7IRqqG,GAASzsG,UAAYN,OAAO4T,OAAQ04F,GAAahsG,WACjDysG,GAASzsG,UAAUkI,YAAcukG,GAEjCA,GAASzsG,UAAUsxG,YAAa,ECmEhC,MAAM9hG,GAAM,IAAI,EACVslF,GAAK,IAAI6X,GAAa5X,GAAK,IAAI4X,GAAa4E,GAAK,IAAI5E,GAE3D,SAAS6E,GAAkBxyF,EAAS,GAAI8xF,GAAS,EAAOW,EAAY,cAAe1E,EAAU,IAE5FjB,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,mBAEZG,KAAK4c,OAASA,EACd5c,KAAK0uG,OAASA,EACd1uG,KAAKqvG,UAAYA,EACjBrvG,KAAK2qG,QAAUA,ECvFhB,SAAS2E,GAAYxsG,EAAGsd,EAAIC,EAAIC,EAAIoS,GAEnC,MAAM1S,EAAmB,IAAZM,EAAKF,GACZnX,EAAmB,IAAZypB,EAAKrS,GACZ2qF,EAAKloG,EAAIA,EAEf,OAAS,EAAIud,EAAK,EAAIC,EAAKN,EAAK/W,IADrBnG,EAAIkoG,KACiC,EAAI3qF,EAAK,EAAIC,EAAK,EAAIN,EAAK/W,GAAO+hG,EAAKhrF,EAAKld,EAAIud,EAyBjG,SAASkvF,GAAiBzsG,EAAGsd,EAAIC,EAAIC,GAEpC,OArBD,SAA4Bxd,EAAGiV,GAE9B,MAAMmsD,EAAI,EAAIphE,EACd,OAAOohE,EAAIA,EAAInsD,EAkBRy3F,CAAmB1sG,EAAGsd,GAd9B,SAA4Btd,EAAGiV,GAE9B,OAAO,GAAM,EAAIjV,GAAMA,EAAIiV,EAYS03F,CAAmB3sG,EAAGud,GAR3D,SAA4Bvd,EAAGiV,GAE9B,OAAOjV,EAAIA,EAAIiV,EAOd23F,CAAmB5sG,EAAGwd,GAgCxB,SAASqvF,GAAa7sG,EAAGsd,EAAIC,EAAIC,EAAIoS,GAEpC,OA5BD,SAAwB5vB,EAAGiV,GAE1B,MAAMmsD,EAAI,EAAIphE,EACd,OAAOohE,EAAIA,EAAIA,EAAInsD,EAyBZ63F,CAAe9sG,EAAGsd,GArB1B,SAAwBtd,EAAGiV,GAE1B,MAAMmsD,EAAI,EAAIphE,EACd,OAAO,EAAIohE,EAAIA,EAAIphE,EAAIiV,EAkBS83F,CAAe/sG,EAAGud,GAdnD,SAAwBvd,EAAGiV,GAE1B,OAAO,GAAM,EAAIjV,GAAMA,EAAIA,EAAIiV,EAY0B+3F,CAAehtG,EAAGwd,GAR5E,SAAwBxd,EAAGiV,GAE1B,OAAOjV,EAAIA,EAAIA,EAAIiV,EAOlBg4F,CAAejtG,EAAG4vB,GCtEpB,SAASs9E,GAAkBhwF,EAAK,IAAI,EAAW/W,EAAK,IAAI,EAAWC,EAAK,IAAI,EAAW+mG,EAAK,IAAI,GAE/FvG,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,mBAEZG,KAAKggB,GAAKA,EACVhgB,KAAKiJ,GAAKA,EACVjJ,KAAKkJ,GAAKA,EACVlJ,KAAKiwG,GAAKA,ECTX,SAASC,GAAmBlwF,EAAK,IAAI,EAAW/W,EAAK,IAAI,EAAWC,EAAK,IAAI,EAAW+mG,EAAK,IAAI,GAEhGvG,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,oBAEZG,KAAKggB,GAAKA,EACVhgB,KAAKiJ,GAAKA,EACVjJ,KAAKkJ,GAAKA,EACVlJ,KAAKiwG,GAAKA,ECVX,SAASE,GAAWlnG,EAAK,IAAI,EAAWC,EAAK,IAAI,GAEhDwgG,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,YAEZG,KAAKiJ,GAAKA,EACVjJ,KAAKkJ,GAAKA,ECPX,SAASknG,GAAYnnG,EAAK,IAAI,EAAWC,EAAK,IAAI,GAEjDwgG,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,aAEZG,KAAKiJ,GAAKA,EACVjJ,KAAKkJ,GAAKA,ECNX,SAASmnG,GAAsBrwF,EAAK,IAAI,EAAW/W,EAAK,IAAI,EAAWC,EAAK,IAAI,GAE/EwgG,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,uBAEZG,KAAKggB,GAAKA,EACVhgB,KAAKiJ,GAAKA,EACVjJ,KAAKkJ,GAAKA,ECRX,SAASonG,GAAuBtwF,EAAK,IAAI,EAAW/W,EAAK,IAAI,EAAWC,EAAK,IAAI,GAEhFwgG,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,wBAEZG,KAAKggB,GAAKA,EACVhgB,KAAKiJ,GAAKA,EACVjJ,KAAKkJ,GAAKA,ECRX,SAASqnG,GAAa3zF,EAAS,IAE9B8sF,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,cAEZG,KAAK4c,OAASA,ECFf,SAAS4zF,KAER9G,GAAM5rG,KAAMkC,MAEZA,KAAKH,KAAO,YAEZG,KAAKywG,OAAS,GACdzwG,KAAK0wG,WAAY,ECPlB,SAASC,GAAM/zF,GAEd4zF,GAAU1yG,KAAMkC,MAEhBA,KAAKH,KAAO,OAEZG,KAAK4wG,aAAe,IAAI,EAEnBh0F,GAEJ5c,KAAK2c,cAAeC,GCftB,SAAS,GAAOA,GAEf+zF,GAAK7yG,KAAMkC,KAAM4c,GAEjB5c,KAAKiQ,KAAO,iBAEZjQ,KAAKH,KAAO,QAEZG,KAAKg0F,MAAQ,GCRd,SAAS6c,GAAOh6E,EAAO6oC,EAAY,GAElC,QAAe1/D,MAEfA,KAAKH,KAAO,QAEZG,KAAK62B,MAAQ,IAAI,GAAOA,GACxB72B,KAAK0/D,UAAYA,ECNlB,SAAS,GAAiBtjB,EAAUC,EAAaqjB,GAEhDmxC,GAAM/yG,KAAMkC,KAAMo8C,EAAUsjB,GAE5B1/D,KAAKH,KAAO,kBAEZG,KAAK6nB,SAASphB,KAAM,cACpBzG,KAAKoR,eAELpR,KAAKq8C,YAAc,IAAI,GAAOA,GCP/B,SAASy0D,GAAa92F,GAErBha,KAAKga,OAASA,EAEdha,KAAKigE,KAAO,EACZjgE,KAAKkgE,WAAa,EAClBlgE,KAAKwb,OAAS,EAEdxb,KAAKmgE,QAAU,IAAI,EAAS,IAAK,KAEjCngE,KAAK43B,IAAM,KACX53B,KAAK8iE,QAAU,KACf9iE,KAAKqO,OAAS,IAAI6V,GAElBlkB,KAAKqkE,YAAa,EAClBrkE,KAAKwgC,aAAc,EAEnBxgC,KAAK6hE,SAAW,IAAIh1B,GACpB7sC,KAAK+wG,cAAgB,IAAI,EAAS,EAAG,GAErC/wG,KAAKgxG,eAAiB,EAEtBhxG,KAAKixG,WAAa,CAEjB,IAAI5+F,EAAS,EAAG,EAAG,EAAG,IC1BxB,SAAS6+F,KAERJ,GAAYhzG,KAAMkC,KAAM,IAAI,GAAmB,GAAI,EAAG,GAAK,MAE3DA,KAAK0pC,MAAQ,ECJd,SAAS,GAAW7S,EAAO6oC,EAAW/yC,EAAUpkB,EAAO83D,EAAU5kB,GAEhEo1D,GAAM/yG,KAAMkC,KAAM62B,EAAO6oC,GAEzB1/D,KAAKH,KAAO,YAEZG,KAAK6nB,SAASphB,KAAM,cACpBzG,KAAKoR,eAELpR,KAAKY,OAAS,IAAI,GAElBtD,OAAOC,eAAgByC,KAAM,QAAS,CACrCvC,IAAK,WAIJ,OAAOuC,KAAK0/D,UAAYp+D,KAAKC,IAG9BoE,IAAK,SAAWwrG,GAIfnxG,KAAK0/D,UAAYyxC,EAAQ7vG,KAAKC,MAKhCvB,KAAK2sB,cAA0B5sB,IAAb4sB,EAA2BA,EAAW,EACxD3sB,KAAKuI,WAAoBxI,IAAVwI,EAAwBA,EAAQjH,KAAKC,GAAK,EACzDvB,KAAKqgE,cAA0BtgE,IAAbsgE,EAA2BA,EAAW,EACxDrgE,KAAKy7C,WAAoB17C,IAAV07C,EAAwBA,EAAQ,EAE/Cz7C,KAAKy9C,OAAS,IAAIyzD,GC/BnB,SAASE,KAERN,GAAYhzG,KAAMkC,KAAM,IAAI,GAAmB,GAAI,EAAG,GAAK,MAE3DA,KAAK+wG,cAAgB,IAAI,EAAS,EAAG,GAErC/wG,KAAKgxG,eAAiB,EAEtBhxG,KAAKixG,WAAa,CAejB,IAAI5+F,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,IAGvBrS,KAAKqxG,gBAAkB,CACtB,IAAI,EAAS,EAAG,EAAG,GAAK,IAAI,GAAW,EAAG,EAAG,GAAK,IAAI,EAAS,EAAG,EAAG,GACrE,IAAI,EAAS,EAAG,GAAK,GAAK,IAAI,EAAS,EAAG,EAAG,GAAK,IAAI,EAAS,GAAK,EAAG,IAGxErxG,KAAKsxG,SAAW,CACf,IAAI,EAAS,EAAG,EAAG,GAAK,IAAI,EAAS,EAAG,EAAG,GAAK,IAAI,EAAS,EAAG,EAAG,GACnE,IAAI,EAAS,EAAG,EAAG,GAAK,IAAI,EAAS,EAAG,EAAG,GAAK,IAAI,EAAS,EAAG,GAAK,IC9CvE,SAAS,GAAYz6E,EAAO6oC,EAAW/yC,EAAU8uB,GAEhDo1D,GAAM/yG,KAAMkC,KAAM62B,EAAO6oC,GAEzB1/D,KAAKH,KAAO,aAEZvC,OAAOC,eAAgByC,KAAM,QAAS,CACrCvC,IAAK,WAIJ,OAAwB,EAAjBuC,KAAK0/D,UAAgBp+D,KAAKC,IAGlCoE,IAAK,SAAWwrG,GAIfnxG,KAAK0/D,UAAYyxC,GAAU,EAAI7vG,KAAKC,OAKtCvB,KAAK2sB,cAA0B5sB,IAAb4sB,EAA2BA,EAAW,EACxD3sB,KAAKy7C,WAAoB17C,IAAV07C,EAAwBA,EAAQ,EAE/Cz7C,KAAKy9C,OAAS,IAAI2zD,GC1BnB,SAAS,GAAoB1oF,GAAO,EAAKC,EAAQ,EAAGC,EAAM,EAAGC,GAAS,EAAKC,EAAO,GAAKC,EAAM,KAE5FugB,GAAOxrC,KAAMkC,MAEbA,KAAKH,KAAO,qBAEZG,KAAKypC,KAAO,EACZzpC,KAAK2pC,KAAO,KAEZ3pC,KAAK0oB,KAAOA,EACZ1oB,KAAK2oB,MAAQA,EACb3oB,KAAK4oB,IAAMA,EACX5oB,KAAK6oB,OAASA,EAEd7oB,KAAK8oB,KAAOA,EACZ9oB,KAAK+oB,IAAMA,EAEX/oB,KAAK8pC,yBCjBN,SAASynE,KAERT,GAAYhzG,KAAMkC,KAAM,IAAI,IAAsB,EAAG,EAAG,GAAK,EAAG,GAAK,MCDtE,SAAS,GAAkB62B,EAAO6oC,GAEjCmxC,GAAM/yG,KAAMkC,KAAM62B,EAAO6oC,GAEzB1/D,KAAKH,KAAO,mBAEZG,KAAK6nB,SAASphB,KAAM,cACpBzG,KAAKoR,eAELpR,KAAKY,OAAS,IAAI,GAElBZ,KAAKy9C,OAAS,IAAI8zD,GCbnB,SAAS,GAAc16E,EAAO6oC,GAE7BmxC,GAAM/yG,KAAMkC,KAAM62B,EAAO6oC,GAEzB1/D,KAAKH,KAAO,eCJb,SAAS,GAAeg3B,EAAO6oC,EAAW35D,EAAOC,GAEhD6qG,GAAM/yG,KAAMkC,KAAM62B,EAAO6oC,GAEzB1/D,KAAKH,KAAO,gBAEZG,KAAK+F,WAAoBhG,IAAVgG,EAAwBA,EAAQ,GAC/C/F,KAAKgG,YAAsBjG,IAAXiG,EAAyBA,EAAS,GvBuFnDopG,GAAiBxxG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WAClDwxG,GAAiBxxG,UAAUkI,YAAcspG,GAEzCA,GAAiBxxG,UAAU4zG,oBAAqB,EAEhDpC,GAAiBxxG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAExE,MAAM7vF,EAAQ6vF,EAER3wF,EAAS5c,KAAK4c,OACd5b,EAAI4b,EAAO3b,OAEX8W,GAAM/W,GAAMhB,KAAK0uG,OAAS,EAAI,IAAQ5rG,EAC5C,IAcIsd,EAAIsS,EAdJ++E,EAAWnwG,KAAKoC,MAAOqU,GACvBq0E,EAASr0E,EAAI05F,EAEZzxG,KAAK0uG,OAET+C,GAAYA,EAAW,EAAI,GAAMnwG,KAAKoC,MAAOpC,KAAK8B,IAAKquG,GAAazwG,GAAM,GAAMA,EAE1D,IAAXorF,GAAgBqlB,IAAazwG,EAAI,IAE5CywG,EAAWzwG,EAAI,EACforF,EAAS,GAMLpsF,KAAK0uG,QAAU+C,EAAW,EAE9BrxF,EAAKxD,GAAU60F,EAAW,GAAMzwG,IAKhCoM,GAAInG,WAAY2V,EAAQ,GAAKA,EAAQ,IAAMjW,IAAKiW,EAAQ,IACxDwD,EAAKhT,IAIN,MAAMiT,EAAKzD,EAAQ60F,EAAWzwG,GACxBsf,EAAK1D,GAAU60F,EAAW,GAAMzwG,GActC,GAZKhB,KAAK0uG,QAAU+C,EAAW,EAAIzwG,EAElC0xB,EAAK9V,GAAU60F,EAAW,GAAMzwG,IAKhCoM,GAAInG,WAAY2V,EAAQ5b,EAAI,GAAK4b,EAAQ5b,EAAI,IAAM2F,IAAKiW,EAAQ5b,EAAI,IACpE0xB,EAAKtlB,IAIkB,gBAAnBpN,KAAKqvG,WAAkD,YAAnBrvG,KAAKqvG,UAA0B,CAGvE,MAAM/qG,EAAyB,YAAnBtE,KAAKqvG,UAA0B,GAAM,IACjD,IAAIxE,EAAMvpG,KAAKgD,IAAK8b,EAAG1X,kBAAmB2X,GAAM/b,GAC5CwmG,EAAMxpG,KAAKgD,IAAK+b,EAAG3X,kBAAmB4X,GAAMhc,GAC5CymG,EAAMzpG,KAAKgD,IAAKgc,EAAG5X,kBAAmBgqB,GAAMpuB,GAG3CwmG,EAAM,OAAOA,EAAM,GACnBD,EAAM,OAAOA,EAAMC,GACnBC,EAAM,OAAOA,EAAMD,GAExBpY,GAAGkY,yBAA0BxqF,EAAG7d,EAAG8d,EAAG9d,EAAG+d,EAAG/d,EAAGmwB,EAAGnwB,EAAGsoG,EAAKC,EAAKC,GAC/DpY,GAAGiY,yBAA0BxqF,EAAGvd,EAAGwd,EAAGxd,EAAGyd,EAAGzd,EAAG6vB,EAAG7vB,EAAGgoG,EAAKC,EAAKC,GAC/DoE,GAAGvE,yBAA0BxqF,EAAG9N,EAAG+N,EAAG/N,EAAGgO,EAAGhO,EAAGogB,EAAGpgB,EAAGu4F,EAAKC,EAAKC,OAEjC,eAAnB/qG,KAAKqvG,YAEhB3c,GAAG+X,eAAgBrqF,EAAG7d,EAAG8d,EAAG9d,EAAG+d,EAAG/d,EAAGmwB,EAAGnwB,EAAGvC,KAAK2qG,SAChDhY,GAAG8X,eAAgBrqF,EAAGvd,EAAGwd,EAAGxd,EAAGyd,EAAGzd,EAAG6vB,EAAG7vB,EAAG7C,KAAK2qG,SAChDwE,GAAG1E,eAAgBrqF,EAAG9N,EAAG+N,EAAG/N,EAAGgO,EAAGhO,EAAGogB,EAAGpgB,EAAGtS,KAAK2qG,UAUjD,OANAjtF,EAAM/X,IACL+sF,GAAGuY,KAAM7e,GACTuG,GAAGsY,KAAM7e,GACT+iB,GAAGlE,KAAM7e,IAGH1uE,GAIR0xF,GAAiBxxG,UAAU6I,KAAO,SAAW4K,GAE5Cq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAK4c,OAAS,GAEd,IAAM,IAAI7b,EAAI,EAAGC,EAAIqQ,EAAOuL,OAAO3b,OAAQF,EAAIC,EAAGD,IAAO,CAExD,MAAM2c,EAAQrM,EAAOuL,OAAQ7b,GAE7Bf,KAAK4c,OAAOxc,KAAMsd,EAAMlX,SAQzB,OAJAxG,KAAK0uG,OAASr9F,EAAOq9F,OACrB1uG,KAAKqvG,UAAYh+F,EAAOg+F,UACxBrvG,KAAK2qG,QAAUt5F,EAAOs5F,QAEf3qG,MAIRovG,GAAiBxxG,UAAU0T,OAAS,WAEnC,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAE1CgR,EAAK4L,OAAS,GAEd,IAAM,IAAI7b,EAAI,EAAGC,EAAIhB,KAAK4c,OAAO3b,OAAQF,EAAIC,EAAGD,IAAO,CAEtD,MAAM2c,EAAQ1d,KAAK4c,OAAQ7b,GAC3BiQ,EAAK4L,OAAOxc,KAAMsd,EAAMpU,WAQzB,OAJA0H,EAAK09F,OAAS1uG,KAAK0uG,OACnB19F,EAAKq+F,UAAYrvG,KAAKqvG,UACtBr+F,EAAK25F,QAAU3qG,KAAK2qG,QAEb35F,GAIRo+F,GAAiBxxG,UAAUivF,SAAW,SAAWC,GAEhD4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAK4c,OAAS,GAEd,IAAM,IAAI7b,EAAI,EAAGC,EAAI8rF,EAAKlwE,OAAO3b,OAAQF,EAAIC,EAAGD,IAAO,CAEtD,MAAM2c,EAAQovE,EAAKlwE,OAAQ7b,GAC3Bf,KAAK4c,OAAOxc,MAAM,IAAI,GAAUgJ,UAAWsU,IAQ5C,OAJA1d,KAAK0uG,OAAS5hB,EAAK4hB,OACnB1uG,KAAKqvG,UAAYviB,EAAKuiB,UACtBrvG,KAAK2qG,QAAU7d,EAAK6d,QAEb3qG,MEtORgwG,GAAiBpyG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WAClDoyG,GAAiBpyG,UAAUkI,YAAckqG,GAEzCA,GAAiBpyG,UAAU8zG,oBAAqB,EAEhD1B,GAAiBpyG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAExE,MAAM7vF,EAAQ6vF,EAERvtF,EAAKhgB,KAAKggB,GAAI/W,EAAKjJ,KAAKiJ,GAAIC,EAAKlJ,KAAKkJ,GAAI+mG,EAAKjwG,KAAKiwG,GAO1D,OALAvyF,EAAM/X,IACLgqG,GAAa7sG,EAAGkd,EAAGzd,EAAG0G,EAAG1G,EAAG2G,EAAG3G,EAAG0tG,EAAG1tG,GACrCotG,GAAa7sG,EAAGkd,EAAGnd,EAAGoG,EAAGpG,EAAGqG,EAAGrG,EAAGotG,EAAGptG,IAG/B6a,GAIRsyF,GAAiBpyG,UAAU6I,KAAO,SAAW4K,GAS5C,OAPAq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKggB,GAAGvZ,KAAM4K,EAAO2O,IACrBhgB,KAAKiJ,GAAGxC,KAAM4K,EAAOpI,IACrBjJ,KAAKkJ,GAAGzC,KAAM4K,EAAOnI,IACrBlJ,KAAKiwG,GAAGxpG,KAAM4K,EAAO4+F,IAEdjwG,MAIRgwG,GAAiBpyG,UAAU0T,OAAS,WAEnC,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAO1C,OALAgR,EAAKgP,GAAKhgB,KAAKggB,GAAG1W,UAClB0H,EAAK/H,GAAKjJ,KAAKiJ,GAAGK,UAClB0H,EAAK9H,GAAKlJ,KAAKkJ,GAAGI,UAClB0H,EAAKi/F,GAAKjwG,KAAKiwG,GAAG3mG,UAEX0H,GAIRg/F,GAAiBpyG,UAAUivF,SAAW,SAAWC,GAShD,OAPA4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAKggB,GAAG5W,UAAW0jF,EAAK9sE,IACxBhgB,KAAKiJ,GAAGG,UAAW0jF,EAAK7jF,IACxBjJ,KAAKkJ,GAAGE,UAAW0jF,EAAK5jF,IACxBlJ,KAAKiwG,GAAG7mG,UAAW0jF,EAAKmjB,IAEjBjwG,MCvDRkwG,GAAkBtyG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WACnDsyG,GAAkBtyG,UAAUkI,YAAcoqG,GAE1CA,GAAkBtyG,UAAU+zG,qBAAsB,EAElDzB,GAAkBtyG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAEzE,MAAM7vF,EAAQ6vF,EAERvtF,EAAKhgB,KAAKggB,GAAI/W,EAAKjJ,KAAKiJ,GAAIC,EAAKlJ,KAAKkJ,GAAI+mG,EAAKjwG,KAAKiwG,GAQ1D,OANAvyF,EAAM/X,IACLgqG,GAAa7sG,EAAGkd,EAAGzd,EAAG0G,EAAG1G,EAAG2G,EAAG3G,EAAG0tG,EAAG1tG,GACrCotG,GAAa7sG,EAAGkd,EAAGnd,EAAGoG,EAAGpG,EAAGqG,EAAGrG,EAAGotG,EAAGptG,GACrC8sG,GAAa7sG,EAAGkd,EAAG1N,EAAGrJ,EAAGqJ,EAAGpJ,EAAGoJ,EAAG29F,EAAG39F,IAG/BoL,GAIRwyF,GAAkBtyG,UAAU6I,KAAO,SAAW4K,GAS7C,OAPAq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKggB,GAAGvZ,KAAM4K,EAAO2O,IACrBhgB,KAAKiJ,GAAGxC,KAAM4K,EAAOpI,IACrBjJ,KAAKkJ,GAAGzC,KAAM4K,EAAOnI,IACrBlJ,KAAKiwG,GAAGxpG,KAAM4K,EAAO4+F,IAEdjwG,MAIRkwG,GAAkBtyG,UAAU0T,OAAS,WAEpC,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAO1C,OALAgR,EAAKgP,GAAKhgB,KAAKggB,GAAG1W,UAClB0H,EAAK/H,GAAKjJ,KAAKiJ,GAAGK,UAClB0H,EAAK9H,GAAKlJ,KAAKkJ,GAAGI,UAClB0H,EAAKi/F,GAAKjwG,KAAKiwG,GAAG3mG,UAEX0H,GAIRk/F,GAAkBtyG,UAAUivF,SAAW,SAAWC,GASjD,OAPA4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAKggB,GAAG5W,UAAW0jF,EAAK9sE,IACxBhgB,KAAKiJ,GAAGG,UAAW0jF,EAAK7jF,IACxBjJ,KAAKkJ,GAAGE,UAAW0jF,EAAK5jF,IACxBlJ,KAAKiwG,GAAG7mG,UAAW0jF,EAAKmjB,IAEjBjwG,MC3DRmwG,GAAUvyG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WAC3CuyG,GAAUvyG,UAAUkI,YAAcqqG,GAElCA,GAAUvyG,UAAUg0G,aAAc,EAElCzB,GAAUvyG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAEjE,MAAM7vF,EAAQ6vF,EAad,OAXW,IAANzqG,EAEJ4a,EAAMjX,KAAMzG,KAAKkJ,KAIjBwU,EAAMjX,KAAMzG,KAAKkJ,IAAKlC,IAAKhH,KAAKiJ,IAChCyU,EAAMtW,eAAgBtE,GAAI6D,IAAK3G,KAAKiJ,KAI9ByU,GAMRyyF,GAAUvyG,UAAU0vG,WAAa,SAAW96E,EAAG+6E,GAE9C,OAAOvtG,KAAKqtG,SAAU76E,EAAG+6E,IAI1B4C,GAAUvyG,UAAUywG,WAAa,SAAWvrG,EAAGyqG,GAE9C,MAAM9sE,EAAU8sE,GAAkB,IAAI,EAItC,OAFA9sE,EAAQh6B,KAAMzG,KAAKkJ,IAAKlC,IAAKhH,KAAKiJ,IAAKX,YAEhCm4B,GAIR0vE,GAAUvyG,UAAU6I,KAAO,SAAW4K,GAOrC,OALAq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKiJ,GAAGxC,KAAM4K,EAAOpI,IACrBjJ,KAAKkJ,GAAGzC,KAAM4K,EAAOnI,IAEdlJ,MAIRmwG,GAAUvyG,UAAU0T,OAAS,WAE5B,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAK1C,OAHAgR,EAAK/H,GAAKjJ,KAAKiJ,GAAGK,UAClB0H,EAAK9H,GAAKlJ,KAAKkJ,GAAGI,UAEX0H,GAIRm/F,GAAUvyG,UAAUivF,SAAW,SAAWC,GAOzC,OALA4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAKiJ,GAAGG,UAAW0jF,EAAK7jF,IACxBjJ,KAAKkJ,GAAGE,UAAW0jF,EAAK5jF,IAEjBlJ,MCvERowG,GAAWxyG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WAC5CwyG,GAAWxyG,UAAUkI,YAAcsqG,GAEnCA,GAAWxyG,UAAUi0G,cAAe,EAEpCzB,GAAWxyG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAElE,MAAM7vF,EAAQ6vF,EAad,OAXW,IAANzqG,EAEJ4a,EAAMjX,KAAMzG,KAAKkJ,KAIjBwU,EAAMjX,KAAMzG,KAAKkJ,IAAKlC,IAAKhH,KAAKiJ,IAChCyU,EAAMtW,eAAgBtE,GAAI6D,IAAK3G,KAAKiJ,KAI9ByU,GAMR0yF,GAAWxyG,UAAU0vG,WAAa,SAAW96E,EAAG+6E,GAE/C,OAAOvtG,KAAKqtG,SAAU76E,EAAG+6E,IAI1B6C,GAAWxyG,UAAU6I,KAAO,SAAW4K,GAOtC,OALAq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKiJ,GAAGxC,KAAM4K,EAAOpI,IACrBjJ,KAAKkJ,GAAGzC,KAAM4K,EAAOnI,IAEdlJ,MAIRowG,GAAWxyG,UAAU0T,OAAS,WAE7B,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAK1C,OAHAgR,EAAK/H,GAAKjJ,KAAKiJ,GAAGK,UAClB0H,EAAK9H,GAAKlJ,KAAKkJ,GAAGI,UAEX0H,GAIRo/F,GAAWxyG,UAAUivF,SAAW,SAAWC,GAO1C,OALA4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAKiJ,GAAGG,UAAW0jF,EAAK7jF,IACxBjJ,KAAKkJ,GAAGE,UAAW0jF,EAAK5jF,IAEjBlJ,MC3DRqwG,GAAqBzyG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WACtDyyG,GAAqBzyG,UAAUkI,YAAcuqG,GAE7CA,GAAqBzyG,UAAUk0G,wBAAyB,EAExDzB,GAAqBzyG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAE5E,MAAM7vF,EAAQ6vF,EAERvtF,EAAKhgB,KAAKggB,GAAI/W,EAAKjJ,KAAKiJ,GAAIC,EAAKlJ,KAAKkJ,GAO5C,OALAwU,EAAM/X,IACL4pG,GAAiBzsG,EAAGkd,EAAGzd,EAAG0G,EAAG1G,EAAG2G,EAAG3G,GACnCgtG,GAAiBzsG,EAAGkd,EAAGnd,EAAGoG,EAAGpG,EAAGqG,EAAGrG,IAG7B6a,GAIR2yF,GAAqBzyG,UAAU6I,KAAO,SAAW4K,GAQhD,OANAq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKggB,GAAGvZ,KAAM4K,EAAO2O,IACrBhgB,KAAKiJ,GAAGxC,KAAM4K,EAAOpI,IACrBjJ,KAAKkJ,GAAGzC,KAAM4K,EAAOnI,IAEdlJ,MAIRqwG,GAAqBzyG,UAAU0T,OAAS,WAEvC,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAM1C,OAJAgR,EAAKgP,GAAKhgB,KAAKggB,GAAG1W,UAClB0H,EAAK/H,GAAKjJ,KAAKiJ,GAAGK,UAClB0H,EAAK9H,GAAKlJ,KAAKkJ,GAAGI,UAEX0H,GAIRq/F,GAAqBzyG,UAAUivF,SAAW,SAAWC,GAQpD,OANA4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAKggB,GAAG5W,UAAW0jF,EAAK9sE,IACxBhgB,KAAKiJ,GAAGG,UAAW0jF,EAAK7jF,IACxBjJ,KAAKkJ,GAAGE,UAAW0jF,EAAK5jF,IAEjBlJ,MCpDRswG,GAAsB1yG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WACvD0yG,GAAsB1yG,UAAUkI,YAAcwqG,GAE9CA,GAAsB1yG,UAAUm0G,yBAA0B,EAE1DzB,GAAsB1yG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAE7E,MAAM7vF,EAAQ6vF,EAERvtF,EAAKhgB,KAAKggB,GAAI/W,EAAKjJ,KAAKiJ,GAAIC,EAAKlJ,KAAKkJ,GAQ5C,OANAwU,EAAM/X,IACL4pG,GAAiBzsG,EAAGkd,EAAGzd,EAAG0G,EAAG1G,EAAG2G,EAAG3G,GACnCgtG,GAAiBzsG,EAAGkd,EAAGnd,EAAGoG,EAAGpG,EAAGqG,EAAGrG,GACnC0sG,GAAiBzsG,EAAGkd,EAAG1N,EAAGrJ,EAAGqJ,EAAGpJ,EAAGoJ,IAG7BoL,GAIR4yF,GAAsB1yG,UAAU6I,KAAO,SAAW4K,GAQjD,OANAq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKggB,GAAGvZ,KAAM4K,EAAO2O,IACrBhgB,KAAKiJ,GAAGxC,KAAM4K,EAAOpI,IACrBjJ,KAAKkJ,GAAGzC,KAAM4K,EAAOnI,IAEdlJ,MAIRswG,GAAsB1yG,UAAU0T,OAAS,WAExC,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAM1C,OAJAgR,EAAKgP,GAAKhgB,KAAKggB,GAAG1W,UAClB0H,EAAK/H,GAAKjJ,KAAKiJ,GAAGK,UAClB0H,EAAK9H,GAAKlJ,KAAKkJ,GAAGI,UAEX0H,GAIRs/F,GAAsB1yG,UAAUivF,SAAW,SAAWC,GAQrD,OANA4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAKggB,GAAG5W,UAAW0jF,EAAK9sE,IACxBhgB,KAAKiJ,GAAGG,UAAW0jF,EAAK7jF,IACxBjJ,KAAKkJ,GAAGE,UAAW0jF,EAAK5jF,IAEjBlJ,MCvDRuwG,GAAY3yG,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WAC7C2yG,GAAY3yG,UAAUkI,YAAcyqG,GAEpCA,GAAY3yG,UAAUo0G,eAAgB,EAEtCzB,GAAY3yG,UAAUyvG,SAAW,SAAWvqG,EAAGyqG,EAAiB,IAAI,GAEnE,MAAM7vF,EAAQ6vF,EAER3wF,EAAS5c,KAAK4c,OACd7E,GAAM6E,EAAO3b,OAAS,GAAM6B,EAE5B2uG,EAAWnwG,KAAKoC,MAAOqU,GACvBq0E,EAASr0E,EAAI05F,EAEbrxF,EAAKxD,EAAqB,IAAb60F,EAAiBA,EAAWA,EAAW,GACpDpxF,EAAKzD,EAAQ60F,GACbnxF,EAAK1D,EAAQ60F,EAAW70F,EAAO3b,OAAS,EAAI2b,EAAO3b,OAAS,EAAIwwG,EAAW,GAC3E/+E,EAAK9V,EAAQ60F,EAAW70F,EAAO3b,OAAS,EAAI2b,EAAO3b,OAAS,EAAIwwG,EAAW,GAOjF,OALA/zF,EAAM/X,IACL2pG,GAAYljB,EAAQhsE,EAAG7d,EAAG8d,EAAG9d,EAAG+d,EAAG/d,EAAGmwB,EAAGnwB,GACzC+sG,GAAYljB,EAAQhsE,EAAGvd,EAAGwd,EAAGxd,EAAGyd,EAAGzd,EAAG6vB,EAAG7vB,IAGnC6a,GAIR6yF,GAAY3yG,UAAU6I,KAAO,SAAW4K,GAEvCq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAK4c,OAAS,GAEd,IAAM,IAAI7b,EAAI,EAAGC,EAAIqQ,EAAOuL,OAAO3b,OAAQF,EAAIC,EAAGD,IAAO,CAExD,MAAM2c,EAAQrM,EAAOuL,OAAQ7b,GAE7Bf,KAAK4c,OAAOxc,KAAMsd,EAAMlX,SAIzB,OAAOxG,MAIRuwG,GAAY3yG,UAAU0T,OAAS,WAE9B,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAE1CgR,EAAK4L,OAAS,GAEd,IAAM,IAAI7b,EAAI,EAAGC,EAAIhB,KAAK4c,OAAO3b,OAAQF,EAAIC,EAAGD,IAAO,CAEtD,MAAM2c,EAAQ1d,KAAK4c,OAAQ7b,GAC3BiQ,EAAK4L,OAAOxc,KAAMsd,EAAMpU,WAIzB,OAAO0H,GAIRu/F,GAAY3yG,UAAUivF,SAAW,SAAWC,GAE3C4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAK4c,OAAS,GAEd,IAAM,IAAI7b,EAAI,EAAGC,EAAI8rF,EAAKlwE,OAAO3b,OAAQF,EAAIC,EAAGD,IAAO,CAEtD,MAAM2c,EAAQovE,EAAKlwE,OAAQ7b,GAC3Bf,KAAK4c,OAAOxc,MAAM,IAAI,GAAUgJ,UAAWsU,IAI5C,OAAO1d,MCxERwwG,GAAU5yG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQw4F,GAAM9rG,WAAa,CAEtEkI,YAAa0qG,GAEb7pG,IAAK,SAAWsrG,GAEfjyG,KAAKywG,OAAOrwG,KAAM6xG,IAInBC,UAAW,WAGV,MAAMC,EAAanyG,KAAKywG,OAAQ,GAAIpD,SAAU,GACxC+E,EAAWpyG,KAAKywG,OAAQzwG,KAAKywG,OAAOxvG,OAAS,GAAIosG,SAAU,GAE1D8E,EAAWhpG,OAAQipG,IAEzBpyG,KAAKywG,OAAOrwG,KAAM,IAAI,GAAuBgyG,EAAUD,KAezD9E,SAAU,SAAWvqG,GAEpB,MAAM2J,EAAI3J,EAAI9C,KAAK2tG,YACb0E,EAAeryG,KAAKsyG,kBAC1B,IAAIvxG,EAAI,EAIR,KAAQA,EAAIsxG,EAAapxG,QAAS,CAEjC,GAAKoxG,EAActxG,IAAO0L,EAAI,CAE7B,MAAM8lG,EAAOF,EAActxG,GAAM0L,EAC3BwlG,EAAQjyG,KAAKywG,OAAQ1vG,GAErByxG,EAAgBP,EAAMtE,YACtBn7E,EAAsB,IAAlBggF,EAAsB,EAAI,EAAID,EAAOC,EAE/C,OAAOP,EAAM3E,WAAY96E,GAI1BzxB,IAID,OAAO,MAUR4sG,UAAW,WAEV,MAAM8E,EAAOzyG,KAAKsyG,kBAClB,OAAOG,EAAMA,EAAKxxG,OAAS,IAK5B+sG,iBAAkB,WAEjBhuG,KAAKwgC,aAAc,EACnBxgC,KAAK0yG,aAAe,KACpB1yG,KAAKsyG,mBAONA,gBAAiB,WAIhB,GAAKtyG,KAAK0yG,cAAgB1yG,KAAK0yG,aAAazxG,SAAWjB,KAAKywG,OAAOxvG,OAElE,OAAOjB,KAAK0yG,aAOb,MAAM9E,EAAU,GAChB,IAAI+E,EAAO,EAEX,IAAM,IAAI5xG,EAAI,EAAGC,EAAIhB,KAAKywG,OAAOxvG,OAAQF,EAAIC,EAAGD,IAE/C4xG,GAAQ3yG,KAAKywG,OAAQ1vG,GAAI4sG,YACzBC,EAAQxtG,KAAMuyG,GAMf,OAFA3yG,KAAK0yG,aAAe9E,EAEbA,GAIR7X,gBAAiB,SAAW2X,EAAY,IAEvC,MAAM9wF,EAAS,GAEf,IAAM,IAAI7b,EAAI,EAAGA,GAAK2sG,EAAW3sG,IAEhC6b,EAAOxc,KAAMJ,KAAKqtG,SAAUtsG,EAAI2sG,IAUjC,OANK1tG,KAAK0wG,WAET9zF,EAAOxc,KAAMwc,EAAQ,IAIfA,GAIR6wF,UAAW,SAAWC,EAAY,IAEjC,MAAM9wF,EAAS,GACf,IAAI8yE,EAEJ,IAAM,IAAI3uF,EAAI,EAAG0vG,EAASzwG,KAAKywG,OAAQ1vG,EAAI0vG,EAAOxvG,OAAQF,IAAO,CAEhE,MAAMkxG,EAAQxB,EAAQ1vG,GAChByhE,EAAeyvC,GAASA,EAAMnD,eAA+B,EAAZpB,EAClDuE,IAAWA,EAAML,aAAeK,EAAMJ,cAAmB,EACxDI,GAASA,EAAMD,cAAkBtE,EAAYuE,EAAMr1F,OAAO3b,OAC3DysG,EAEC5Z,EAAMme,EAAMxE,UAAWjrC,GAE7B,IAAM,IAAItiD,EAAI,EAAGA,EAAI4zE,EAAI7yF,OAAQif,IAAO,CAEvC,MAAMxC,EAAQo2E,EAAK5zE,GAEdwvE,GAAQA,EAAKvmF,OAAQuU,KAE1Bd,EAAOxc,KAAMsd,GACbgyE,EAAOhyE,IAYT,OANK1d,KAAK0wG,WAAa9zF,EAAO3b,OAAS,IAAO2b,EAAQA,EAAO3b,OAAS,GAAIkI,OAAQyT,EAAQ,KAEzFA,EAAOxc,KAAMwc,EAAQ,IAIfA,GAIRnW,KAAM,SAAW4K,GAEhBq4F,GAAM9rG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKywG,OAAS,GAEd,IAAM,IAAI1vG,EAAI,EAAGC,EAAIqQ,EAAOo/F,OAAOxvG,OAAQF,EAAIC,EAAGD,IAAO,CAExD,MAAMkxG,EAAQ5gG,EAAOo/F,OAAQ1vG,GAE7Bf,KAAKywG,OAAOrwG,KAAM6xG,EAAMzrG,SAMzB,OAFAxG,KAAK0wG,UAAYr/F,EAAOq/F,UAEjB1wG,MAIRsR,OAAQ,WAEP,MAAMN,EAAO04F,GAAM9rG,UAAU0T,OAAOxT,KAAMkC,MAE1CgR,EAAK0/F,UAAY1wG,KAAK0wG,UACtB1/F,EAAKy/F,OAAS,GAEd,IAAM,IAAI1vG,EAAI,EAAGC,EAAIhB,KAAKywG,OAAOxvG,OAAQF,EAAIC,EAAGD,IAAO,CAEtD,MAAMkxG,EAAQjyG,KAAKywG,OAAQ1vG,GAC3BiQ,EAAKy/F,OAAOrwG,KAAM6xG,EAAM3gG,UAIzB,OAAON,GAIR67E,SAAU,SAAWC,GAEpB4c,GAAM9rG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAErC9sF,KAAK0wG,UAAY5jB,EAAK4jB,UACtB1wG,KAAKywG,OAAS,GAEd,IAAM,IAAI1vG,EAAI,EAAGC,EAAI8rF,EAAK2jB,OAAOxvG,OAAQF,EAAIC,EAAGD,IAAO,CAEtD,MAAMkxG,EAAQnlB,EAAK2jB,OAAQ1vG,GAC3Bf,KAAKywG,OAAOrwG,MAAM,IAAI,EAAQ6xG,EAAMpyG,OAASgtF,SAAUolB,IAIxD,OAAOjyG,QC9NT2wG,GAAK/yG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQs/F,GAAU5yG,WAAa,CAErEkI,YAAa6qG,GAEbh0F,cAAe,SAAWC,GAEzB5c,KAAK4yG,OAAQh2F,EAAQ,GAAIra,EAAGqa,EAAQ,GAAI/Z,GAExC,IAAM,IAAI9B,EAAI,EAAGC,EAAI4b,EAAO3b,OAAQF,EAAIC,EAAGD,IAE1Cf,KAAK6yG,OAAQj2F,EAAQ7b,GAAIwB,EAAGqa,EAAQ7b,GAAI8B,GAIzC,OAAO7C,MAIR4yG,OAAQ,SAAWrwG,EAAGM,GAIrB,OAFA7C,KAAK4wG,aAAajrG,IAAKpD,EAAGM,GAEnB7C,MAIR6yG,OAAQ,SAAWtwG,EAAGM,GAErB,MAAMovG,EAAQ,IAAI9B,GAAWnwG,KAAK4wG,aAAapqG,QAAS,IAAI,EAASjE,EAAGM,IAKxE,OAJA7C,KAAKywG,OAAOrwG,KAAM6xG,GAElBjyG,KAAK4wG,aAAajrG,IAAKpD,EAAGM,GAEnB7C,MAIR8yG,iBAAkB,SAAWC,EAAMC,EAAMnJ,EAAIC,GAE5C,MAAMmI,EAAQ,IAAI5B,GACjBrwG,KAAK4wG,aAAapqG,QAClB,IAAI,EAASusG,EAAMC,GACnB,IAAI,EAASnJ,EAAIC,IAOlB,OAJA9pG,KAAKywG,OAAOrwG,KAAM6xG,GAElBjyG,KAAK4wG,aAAajrG,IAAKkkG,EAAIC,GAEpB9pG,MAIRizG,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAOxJ,EAAIC,GAEzD,MAAMmI,EAAQ,IAAIjC,GACjBhwG,KAAK4wG,aAAapqG,QAClB,IAAI,EAAS0sG,EAAOC,GACpB,IAAI,EAASC,EAAOC,GACpB,IAAI,EAASxJ,EAAIC,IAOlB,OAJA9pG,KAAKywG,OAAOrwG,KAAM6xG,GAElBjyG,KAAK4wG,aAAajrG,IAAKkkG,EAAIC,GAEpB9pG,MAIRszG,WAAY,SAAWxf,GAEtB,MAEMme,EAAQ,IAAI1B,GAFL,CAAEvwG,KAAK4wG,aAAapqG,SAAU8vF,OAAQxC,IAOnD,OAJA9zF,KAAKywG,OAAOrwG,KAAM6xG,GAElBjyG,KAAK4wG,aAAanqG,KAAMqtF,EAAKA,EAAI7yF,OAAS,IAEnCjB,MAIRuzG,IAAK,SAAW1J,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAExD,MAAMz0F,EAAK1V,KAAK4wG,aAAaruG,EACvBoT,EAAK3V,KAAK4wG,aAAa/tG,EAK7B,OAHA7C,KAAKwzG,OAAQ3J,EAAKn0F,EAAIo0F,EAAKn0F,EAAI20F,EAC9BL,EAAaC,EAAWC,GAElBnqG,MAIRwzG,OAAQ,SAAW3J,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAI3D,OAFAnqG,KAAKyzG,WAAY5J,EAAIC,EAAIQ,EAASA,EAASL,EAAaC,EAAWC,GAE5DnqG,MAIR0zG,QAAS,SAAW7J,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEjF,MAAM10F,EAAK1V,KAAK4wG,aAAaruG,EACvBoT,EAAK3V,KAAK4wG,aAAa/tG,EAI7B,OAFA7C,KAAKyzG,WAAY5J,EAAKn0F,EAAIo0F,EAAKn0F,EAAIo0F,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAElFpqG,MAIRyzG,WAAY,SAAW5J,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpF,MAAM6H,EAAQ,IAAIrI,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAE9F,GAAKpqG,KAAKywG,OAAOxvG,OAAS,EAAI,CAG7B,MAAM0yG,EAAa1B,EAAM5E,SAAU,GAE5BsG,EAAWxqG,OAAQnJ,KAAK4wG,eAE9B5wG,KAAK6yG,OAAQc,EAAWpxG,EAAGoxG,EAAW9wG,GAMxC7C,KAAKywG,OAAOrwG,KAAM6xG,GAElB,MAAM2B,EAAY3B,EAAM5E,SAAU,GAGlC,OAFArtG,KAAK4wG,aAAanqG,KAAMmtG,GAEjB5zG,MAIRyG,KAAM,SAAW4K,GAMhB,OAJAm/F,GAAU5yG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAErCrR,KAAK4wG,aAAanqG,KAAM4K,EAAOu/F,cAExB5wG,MAIRsR,OAAQ,WAEP,MAAMN,EAAOw/F,GAAU5yG,UAAU0T,OAAOxT,KAAMkC,MAI9C,OAFAgR,EAAK4/F,aAAe5wG,KAAK4wG,aAAatnG,UAE/B0H,GAIR67E,SAAU,SAAWC,GAMpB,OAJA0jB,GAAU5yG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAEzC9sF,KAAK4wG,aAAaxnG,UAAW0jF,EAAK8jB,cAE3B5wG,QC/KT,GAAMpC,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQy/F,GAAK/yG,WAAa,CAEjEkI,YAAa,GAEb+tG,eAAgB,SAAWnG,GAE1B,MAAMoG,EAAW,GAEjB,IAAM,IAAI/yG,EAAI,EAAGC,EAAIhB,KAAKg0F,MAAM/yF,OAAQF,EAAIC,EAAGD,IAE9C+yG,EAAU/yG,GAAMf,KAAKg0F,MAAOjzF,GAAI0sG,UAAWC,GAI5C,OAAOoG,GAMR5d,cAAe,SAAWwX,GAEzB,MAAO,CAENr+E,MAAOrvB,KAAKytG,UAAWC,GACvB1Z,MAAOh0F,KAAK6zG,eAAgBnG,KAM9BjnG,KAAM,SAAW4K,GAEhBs/F,GAAK/yG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEhCrR,KAAKg0F,MAAQ,GAEb,IAAM,IAAIjzF,EAAI,EAAGC,EAAIqQ,EAAO2iF,MAAM/yF,OAAQF,EAAIC,EAAGD,IAAO,CAEvD,MAAMgxF,EAAO1gF,EAAO2iF,MAAOjzF,GAE3Bf,KAAKg0F,MAAM5zF,KAAM2xF,EAAKvrF,SAIvB,OAAOxG,MAIRsR,OAAQ,WAEP,MAAMN,EAAO2/F,GAAK/yG,UAAU0T,OAAOxT,KAAMkC,MAEzCgR,EAAKf,KAAOjQ,KAAKiQ,KACjBe,EAAKgjF,MAAQ,GAEb,IAAM,IAAIjzF,EAAI,EAAGC,EAAIhB,KAAKg0F,MAAM/yF,OAAQF,EAAIC,EAAGD,IAAO,CAErD,MAAMgxF,EAAO/xF,KAAKg0F,MAAOjzF,GACzBiQ,EAAKgjF,MAAM5zF,KAAM2xF,EAAKzgF,UAIvB,OAAON,GAIR67E,SAAU,SAAWC,GAEpB6jB,GAAK/yG,UAAUivF,SAAS/uF,KAAMkC,KAAM8sF,GAEpC9sF,KAAKiQ,KAAO68E,EAAK78E,KACjBjQ,KAAKg0F,MAAQ,GAEb,IAAM,IAAIjzF,EAAI,EAAGC,EAAI8rF,EAAKkH,MAAM/yF,OAAQF,EAAIC,EAAGD,IAAO,CAErD,MAAMgxF,EAAOjF,EAAKkH,MAAOjzF,GACzBf,KAAKg0F,MAAM5zF,MAAM,IAAIuwG,IAAO9jB,SAAUkF,IAIvC,OAAO/xF,QClFT6wG,GAAMjzG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAsB,CAErEpL,YAAa+qG,GAEb3jF,SAAS,EAETzmB,KAAM,SAAW4K,GAOhB,OALA,uBAA8BrR,KAAMqR,GAEpCrR,KAAK62B,MAAMpwB,KAAM4K,EAAOwlB,OACxB72B,KAAK0/D,UAAYruD,EAAOquD,UAEjB1/D,MAIRsR,OAAQ,SAAWC,GAElB,MAAMP,EAAO,yBAAgChR,KAAMuR,GAcnD,OAZAP,EAAKoM,OAAOyZ,MAAQ72B,KAAK62B,MAAMC,SAC/B9lB,EAAKoM,OAAOsiD,UAAY1/D,KAAK0/D,eAEH3/D,IAArBC,KAAKq8C,cAA4BrrC,EAAKoM,OAAOi/B,YAAcr8C,KAAKq8C,YAAYvlB,eAE1D/2B,IAAlBC,KAAK2sB,WAAyB3b,EAAKoM,OAAOuP,SAAW3sB,KAAK2sB,eAC3C5sB,IAAfC,KAAKuI,QAAsByI,EAAKoM,OAAO7U,MAAQvI,KAAKuI,YACrCxI,IAAfC,KAAKy7C,QAAsBzqC,EAAKoM,OAAOq+B,MAAQz7C,KAAKy7C,YAClC17C,IAAlBC,KAAKqgE,WAAyBrvD,EAAKoM,OAAOijD,SAAWrgE,KAAKqgE,eAE1CtgE,IAAhBC,KAAKy9C,SAAuBzsC,EAAKoM,OAAOqgC,OAASz9C,KAAKy9C,OAAOnsC,UAE3DN,KC9BT,GAAgBpT,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ2/F,GAAMjzG,WAAa,CAE5EkI,YAAa,GAEb06D,mBAAmB,EAEnB/5D,KAAM,SAAW4K,GAMhB,OAJAw/F,GAAMjzG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKq8C,YAAY51C,KAAM4K,EAAOgrC,aAEvBr8C,QCOT1C,OAAOqC,OAAQmxG,GAAYlzG,UAAW,CAErCujF,kBAAmB,IAAIj9D,GAEvB6vF,oBAAqB,IAAI,EAEzBC,YAAa,IAAI,EAEjB7uC,iBAAkB,WAEjB,OAAOnlE,KAAKgxG,gBAIbzrC,WAAY,WAEX,OAAOvlE,KAAK6hE,UAIbyD,eAAgB,SAAWxH,GAE1B,MAAMmG,EAAejkE,KAAKga,OACzBi6F,EAAej0G,KAAKqO,OACpB6lG,EAAmBl0G,KAAKmhF,kBACxBgzB,EAAan0G,KAAKg0G,YAClBI,EAAqBp0G,KAAK+zG,oBAE3BK,EAAmBv4F,sBAAuBiiD,EAAMzjD,aAChD4pD,EAAap8C,SAASphB,KAAM2tG,GAE5BD,EAAWt4F,sBAAuBiiD,EAAMl9D,OAAOyZ,aAC/C4pD,EAAaxiD,OAAQ0yF,GACrBlwC,EAAa/1C,oBAEbgmF,EAAiBhpG,iBAAkB+4D,EAAa/pD,iBAAkB+pD,EAAahqD,oBAC/Eja,KAAK6hE,SAAS30B,wBAAyBgnE,GAEvCD,EAAatuG,IACZ,GAAK,EAAK,EAAK,GACf,EAAK,GAAK,EAAK,GACf,EAAK,EAAK,GAAK,GACf,EAAK,EAAK,EAAK,GAGhBsuG,EAAa9sG,SAAU88D,EAAa/pD,kBACpC+5F,EAAa9sG,SAAU88D,EAAahqD,qBAIrCorD,YAAa,SAAWgvC,GAEvB,OAAOr0G,KAAKixG,WAAYoD,IAIzBtvC,gBAAiB,WAEhB,OAAO/kE,KAAK+wG,eAIbtqG,KAAM,SAAW4K,GAShB,OAPArR,KAAKga,OAAS3I,EAAO2I,OAAOxT,QAE5BxG,KAAKigE,KAAO5uD,EAAO4uD,KACnBjgE,KAAKwb,OAASnK,EAAOmK,OAErBxb,KAAKmgE,QAAQ15D,KAAM4K,EAAO8uD,SAEnBngE,MAIRwG,MAAO,WAEN,OAAO,IAAIxG,KAAK8F,aAAcW,KAAMzG,OAIrCsR,OAAQ,WAEP,MAAM8L,EAAS,GAUf,OARmB,IAAdpd,KAAKigE,OAAa7iD,EAAO6iD,KAAOjgE,KAAKigE,MACjB,IAApBjgE,KAAKkgE,aAAmB9iD,EAAO8iD,WAAalgE,KAAKkgE,YACjC,IAAhBlgE,KAAKwb,SAAe4B,EAAO5B,OAASxb,KAAKwb,QACtB,MAAnBxb,KAAKmgE,QAAQ59D,GAAgC,MAAnBvC,KAAKmgE,QAAQt9D,IAAYua,EAAO+iD,QAAUngE,KAAKmgE,QAAQ72D,WAEtF8T,EAAOpD,OAASha,KAAKga,OAAO1I,QAAQ,GAAQ8L,cACrCA,EAAOpD,OAAO3L,OAEd+O,KCrHT8zF,GAAgBtzG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ4/F,GAAYlzG,WAAa,CAElFkI,YAAaorG,GAEboD,mBAAmB,EAEnBhvC,eAAgB,SAAWxH,GAE1B,MAAM9jD,EAASha,KAAKga,OAEduvB,EAA0B,EAApB,UAAwBu0B,EAAMv1D,MAAQvI,KAAK0pC,MACjDF,EAASxpC,KAAKmgE,QAAQp6D,MAAQ/F,KAAKmgE,QAAQn6D,OAC3C+iB,EAAM+0C,EAAMnxC,UAAY3S,EAAO+O,IAEhCwgB,IAAQvvB,EAAOuvB,KAAOC,IAAWxvB,EAAOwvB,QAAUzgB,IAAQ/O,EAAO+O,MAErE/O,EAAOuvB,IAAMA,EACbvvB,EAAOwvB,OAASA,EAChBxvB,EAAO+O,IAAMA,EACb/O,EAAO8vB,0BAIRgnE,GAAYlzG,UAAU0nE,eAAexnE,KAAMkC,KAAM89D,MCMnD,GAAUlgE,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ2/F,GAAMjzG,WAAa,CAEtEkI,YAAa,GAEbs6D,aAAa,EAEb35D,KAAM,SAAW4K,GAahB,OAXAw/F,GAAMjzG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAK2sB,SAAWtb,EAAOsb,SACvB3sB,KAAKuI,MAAQ8I,EAAO9I,MACpBvI,KAAKqgE,SAAWhvD,EAAOgvD,SACvBrgE,KAAKy7C,MAAQpqC,EAAOoqC,MAEpBz7C,KAAKY,OAASyQ,EAAOzQ,OAAO4F,QAE5BxG,KAAKy9C,OAASpsC,EAAOosC,OAAOj3C,QAErBxG,QCNToxG,GAAiBxzG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ4/F,GAAYlzG,WAAa,CAEnFkI,YAAasrG,GAEbpsC,oBAAoB,EAEpBM,eAAgB,SAAWxH,EAAOu2C,EAAgB,GAEjD,MAAMr6F,EAASha,KAAKga,OACnBi6F,EAAej0G,KAAKqO,OACpB+lG,EAAqBp0G,KAAK+zG,oBAC1BI,EAAan0G,KAAKg0G,YAClBE,EAAmBl0G,KAAKmhF,kBAEzBizB,EAAmBv4F,sBAAuBiiD,EAAMzjD,aAChDL,EAAO6N,SAASphB,KAAM2tG,GAEtBD,EAAW1tG,KAAMuT,EAAO6N,UACxBssF,EAAWxtG,IAAK3G,KAAKqxG,gBAAiBgD,IACtCr6F,EAAOiM,GAAGxf,KAAMzG,KAAKsxG,SAAU+C,IAC/Br6F,EAAOyH,OAAQ0yF,GACfn6F,EAAOkU,oBAEP+lF,EAAa3sF,iBAAmB8sF,EAAmB7xG,GAAK6xG,EAAmBvxG,GAAKuxG,EAAmB9hG,GAEnG4hG,EAAiBhpG,iBAAkB8O,EAAOE,iBAAkBF,EAAOC,oBACnEja,KAAK6hE,SAAS30B,wBAAyBgnE,MC/CzC,GAAWt2G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ2/F,GAAMjzG,WAAa,CAEvEkI,YAAa,GAEby6D,cAAc,EAEd95D,KAAM,SAAW4K,GAShB,OAPAw/F,GAAMjzG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAK2sB,SAAWtb,EAAOsb,SACvB3sB,KAAKy7C,MAAQpqC,EAAOoqC,MAEpBz7C,KAAKy9C,OAASpsC,EAAOosC,OAAOj3C,QAErBxG,QCxBT,GAAmBpC,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQo4B,GAAO1rC,WAAa,CAEhFkI,YAAa,GAEb+gF,sBAAsB,EAEtBpgF,KAAM,SAAW4K,EAAQ2e,GAcxB,OAZAsZ,GAAO1rC,UAAU6I,KAAK3I,KAAMkC,KAAMqR,EAAQ2e,GAE1ChwB,KAAK0oB,KAAOrX,EAAOqX,KACnB1oB,KAAK2oB,MAAQtX,EAAOsX,MACpB3oB,KAAK4oB,IAAMvX,EAAOuX,IAClB5oB,KAAK6oB,OAASxX,EAAOwX,OACrB7oB,KAAK8oB,KAAOzX,EAAOyX,KACnB9oB,KAAK+oB,IAAM1X,EAAO0X,IAElB/oB,KAAKypC,KAAOp4B,EAAOo4B,KACnBzpC,KAAK2pC,KAAuB,OAAhBt4B,EAAOs4B,KAAgB,KAAOrsC,OAAOqC,OAAQ,GAAI0R,EAAOs4B,MAE7D3pC,MAIR0qC,cAAe,SAAWC,EAAWC,EAAYroC,EAAGM,EAAGkD,EAAOC,GAE1C,OAAdhG,KAAK2pC,OAET3pC,KAAK2pC,KAAO,CACXkB,SAAS,EACTF,UAAW,EACXC,WAAY,EACZE,QAAS,EACTC,QAAS,EACThlC,MAAO,EACPC,OAAQ,IAKVhG,KAAK2pC,KAAKkB,SAAU,EACpB7qC,KAAK2pC,KAAKgB,UAAYA,EACtB3qC,KAAK2pC,KAAKiB,WAAaA,EACvB5qC,KAAK2pC,KAAKmB,QAAUvoC,EACpBvC,KAAK2pC,KAAKoB,QAAUloC,EACpB7C,KAAK2pC,KAAK5jC,MAAQA,EAClB/F,KAAK2pC,KAAK3jC,OAASA,EAEnBhG,KAAK8pC,0BAINkB,gBAAiB,WAEG,OAAdhrC,KAAK2pC,OAET3pC,KAAK2pC,KAAKkB,SAAU,GAIrB7qC,KAAK8pC,0BAINA,uBAAwB,WAEvB,MAAMnhC,GAAO3I,KAAK2oB,MAAQ3oB,KAAK0oB,OAAW,EAAI1oB,KAAKypC,MAC7C7gC,GAAO5I,KAAK4oB,IAAM5oB,KAAK6oB,SAAa,EAAI7oB,KAAKypC,MAC7C17B,GAAO/N,KAAK2oB,MAAQ3oB,KAAK0oB,MAAS,EAClC1a,GAAOhO,KAAK4oB,IAAM5oB,KAAK6oB,QAAW,EAExC,IAAIH,EAAO3a,EAAKpF,EACZggB,EAAQ5a,EAAKpF,EACbigB,EAAM5a,EAAKpF,EACXigB,EAAS7a,EAAKpF,EAElB,GAAmB,OAAd5I,KAAK2pC,MAAiB3pC,KAAK2pC,KAAKkB,QAAU,CAE9C,MAAM0pE,GAAWv0G,KAAK2oB,MAAQ3oB,KAAK0oB,MAAS1oB,KAAK2pC,KAAKgB,UAAY3qC,KAAKypC,KACjE+qE,GAAWx0G,KAAK4oB,IAAM5oB,KAAK6oB,QAAW7oB,KAAK2pC,KAAKiB,WAAa5qC,KAAKypC,KAExE/gB,GAAQ6rF,EAASv0G,KAAK2pC,KAAKmB,QAC3BniB,EAAQD,EAAO6rF,EAASv0G,KAAK2pC,KAAK5jC,MAClC6iB,GAAO4rF,EAASx0G,KAAK2pC,KAAKoB,QAC1BliB,EAASD,EAAM4rF,EAASx0G,KAAK2pC,KAAK3jC,OAInChG,KAAKka,iBAAiB8O,iBAAkBN,EAAMC,EAAOC,EAAKC,EAAQ7oB,KAAK8oB,KAAM9oB,KAAK+oB,KAElF/oB,KAAKoa,wBAAwB3T,KAAMzG,KAAKka,kBAAmBrN,UAI5DyE,OAAQ,SAAWC,GAElB,MAAMP,EAAO,yBAAgChR,KAAMuR,GAYnD,OAVAP,EAAKoM,OAAOqsB,KAAOzpC,KAAKypC,KACxBz4B,EAAKoM,OAAOsL,KAAO1oB,KAAK0oB,KACxB1X,EAAKoM,OAAOuL,MAAQ3oB,KAAK2oB,MACzB3X,EAAKoM,OAAOwL,IAAM5oB,KAAK4oB,IACvB5X,EAAKoM,OAAOyL,OAAS7oB,KAAK6oB,OAC1B7X,EAAKoM,OAAO0L,KAAO9oB,KAAK8oB,KACxB9X,EAAKoM,OAAO2L,IAAM/oB,KAAK+oB,IAEJ,OAAd/oB,KAAK2pC,OAAgB34B,EAAKoM,OAAOusB,KAAOrsC,OAAOqC,OAAQ,GAAIK,KAAK2pC,OAE9D34B,KC3HTugG,GAAuB3zG,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ4/F,GAAYlzG,WAAa,CAEzFkI,YAAayrG,GAEbkD,0BAA0B,EAE1BnvC,eAAgB,SAAWxH,GAE1BgzC,GAAYlzG,UAAU0nE,eAAexnE,KAAMkC,KAAM89D,MCEnD,GAAiBlgE,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ2/F,GAAMjzG,WAAa,CAE7EkI,YAAa,GAEbi6D,oBAAoB,EAEpBt5D,KAAM,SAAW4K,GAQhB,OANAw/F,GAAMjzG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAKY,OAASyQ,EAAOzQ,OAAO4F,QAE5BxG,KAAKy9C,OAASpsC,EAAOosC,OAAOj3C,QAErBxG,QCvBT,GAAapC,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ2/F,GAAMjzG,WAAa,CAEzEkI,YAAa,GAEb65D,gBAAgB,ICDjB,GAAc/hE,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ2/F,GAAMjzG,WAAa,CAE1EkI,YAAa,GAEbw6D,iBAAiB,EAEjB75D,KAAM,SAAW4K,GAOhB,OALAw/F,GAAMjzG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAK+F,MAAQsL,EAAOtL,MACpB/F,KAAKgG,OAASqL,EAAOrL,OAEdhG,MAIRsR,OAAQ,SAAWC,GAElB,MAAMP,EAAO6/F,GAAMjzG,UAAU0T,OAAOxT,KAAMkC,KAAMuR,GAKhD,OAHAP,EAAKoM,OAAOrX,MAAQ/F,KAAK+F,MACzBiL,EAAKoM,OAAOpX,OAAShG,KAAKgG,OAEnBgL,KCzBT,MAAM0jG,GAEL5uG,cAECxI,OAAOC,eAAgByC,KAAM,wBAAyB,CAAE/B,OAAO,IAE/D+B,KAAK8/D,aAAe,GAEpB,IAAM,IAAI/+D,EAAI,EAAGA,EAAI,EAAGA,IAEvBf,KAAK8/D,aAAa1/D,KAAM,IAAI,GAM9BuF,IAAKm6D,GAEJ,IAAM,IAAI/+D,EAAI,EAAGA,EAAI,EAAGA,IAEvBf,KAAK8/D,aAAc/+D,GAAI0F,KAAMq5D,EAAc/+D,IAI5C,OAAOf,KAIR20G,OAEC,IAAM,IAAI5zG,EAAI,EAAGA,EAAI,EAAGA,IAEvBf,KAAK8/D,aAAc/+D,GAAI4E,IAAK,EAAG,EAAG,GAInC,OAAO3F,KAMR40G,MAAOx5F,EAAQxa,GAId,MAAM2B,EAAI6Y,EAAO7Y,EAAGM,EAAIuY,EAAOvY,EAAGyP,EAAI8I,EAAO9I,EAEvCuiG,EAAQ70G,KAAK8/D,aAiBnB,OAdAl/D,EAAO6F,KAAMouG,EAAO,IAAMztG,eAAgB,SAG1CxG,EAAOmG,gBAAiB8tG,EAAO,GAAK,QAAWhyG,GAC/CjC,EAAOmG,gBAAiB8tG,EAAO,GAAK,QAAWviG,GAC/C1R,EAAOmG,gBAAiB8tG,EAAO,GAAK,QAAWtyG,GAG/C3B,EAAOmG,gBAAiB8tG,EAAO,GAAkBtyG,EAAIM,EAAjB,UACpCjC,EAAOmG,gBAAiB8tG,EAAO,GAAkBhyG,EAAIyP,EAAjB,UACpC1R,EAAOmG,gBAAiB8tG,EAAO,GAAK,SAAa,EAAMviG,EAAIA,EAAI,IAC/D1R,EAAOmG,gBAAiB8tG,EAAO,GAAkBtyG,EAAI+P,EAAjB,UACpC1R,EAAOmG,gBAAiB8tG,EAAO,GAAK,SAAatyG,EAAIA,EAAIM,EAAIA,IAEtDjC,EAORk0G,gBAAiB15F,EAAQxa,GAIxB,MAAM2B,EAAI6Y,EAAO7Y,EAAGM,EAAIuY,EAAOvY,EAAGyP,EAAI8I,EAAO9I,EAEvCuiG,EAAQ70G,KAAK8/D,aAiBnB,OAdAl/D,EAAO6F,KAAMouG,EAAO,IAAMztG,eAAgB,SAG1CxG,EAAOmG,gBAAiB8tG,EAAO,GAAK,SAAiBhyG,GACrDjC,EAAOmG,gBAAiB8tG,EAAO,GAAK,SAAiBviG,GACrD1R,EAAOmG,gBAAiB8tG,EAAO,GAAK,SAAiBtyG,GAGrD3B,EAAOmG,gBAAiB8tG,EAAO,GAAK,QAAiBtyG,EAAIM,GACzDjC,EAAOmG,gBAAiB8tG,EAAO,GAAK,QAAiBhyG,EAAIyP,GACzD1R,EAAOmG,gBAAiB8tG,EAAO,GAAK,QAAWviG,EAAIA,EAAI,SACvD1R,EAAOmG,gBAAiB8tG,EAAO,GAAK,QAAiBtyG,EAAI+P,GACzD1R,EAAOmG,gBAAiB8tG,EAAO,GAAK,SAAatyG,EAAIA,EAAIM,EAAIA,IAEtDjC,EAIR+F,IAAKk5D,GAEJ,IAAM,IAAI9+D,EAAI,EAAGA,EAAI,EAAGA,IAEvBf,KAAK8/D,aAAc/+D,GAAI4F,IAAKk5D,EAAGC,aAAc/+D,IAI9C,OAAOf,KAIR+0G,YAAal1C,EAAI97D,GAEhB,IAAM,IAAIhD,EAAI,EAAGA,EAAI,EAAGA,IAEvBf,KAAK8/D,aAAc/+D,GAAIgG,gBAAiB84D,EAAGC,aAAc/+D,GAAKgD,GAI/D,OAAO/D,KAIRiO,MAAOlK,GAEN,IAAM,IAAIhD,EAAI,EAAGA,EAAI,EAAGA,IAEvBf,KAAK8/D,aAAc/+D,GAAIqG,eAAgBrD,GAIxC,OAAO/D,KAIR4C,KAAMi9D,EAAI92D,GAET,IAAM,IAAIhI,EAAI,EAAGA,EAAI,EAAGA,IAEvBf,KAAK8/D,aAAc/+D,GAAI6B,KAAMi9D,EAAGC,aAAc/+D,GAAKgI,GAIpD,OAAO/I,KAIRmJ,OAAQ02D,GAEP,IAAM,IAAI9+D,EAAI,EAAGA,EAAI,EAAGA,IAEvB,IAAOf,KAAK8/D,aAAc/+D,GAAIoI,OAAQ02D,EAAGC,aAAc/+D,IAEtD,OAAO,EAMT,OAAO,EAIR0F,KAAMo5D,GAEL,OAAO7/D,KAAK2F,IAAKk6D,EAAGC,cAIrBt5D,QAEC,OAAO,IAAIxG,KAAK8F,aAAcW,KAAMzG,MAIrCoJ,UAAWvI,EAAOwI,EAAS,GAE1B,MAAMy2D,EAAe9/D,KAAK8/D,aAE1B,IAAM,IAAI/+D,EAAI,EAAGA,EAAI,EAAGA,IAEvB++D,EAAc/+D,GAAIqI,UAAWvI,EAAOwI,EAAe,EAAJtI,GAIhD,OAAOf,KAIRsJ,QAASzI,EAAQ,GAAIwI,EAAS,GAE7B,MAAMy2D,EAAe9/D,KAAK8/D,aAE1B,IAAM,IAAI/+D,EAAI,EAAGA,EAAI,EAAGA,IAEvB++D,EAAc/+D,GAAIuI,QAASzI,EAAOwI,EAAe,EAAJtI,GAI9C,OAAOF,EAMRkU,kBAAmBqG,EAAQ45F,GAI1B,MAAMzyG,EAAI6Y,EAAO7Y,EAAGM,EAAIuY,EAAOvY,EAAGyP,EAAI8I,EAAO9I,EAG7C0iG,EAAS,GAAM,QAGfA,EAAS,GAAM,QAAWnyG,EAC1BmyG,EAAS,GAAM,QAAW1iG,EAC1B0iG,EAAS,GAAM,QAAWzyG,EAG1ByyG,EAAS,GAAM,SAAWzyG,EAAIM,EAC9BmyG,EAAS,GAAM,SAAWnyG,EAAIyP,EAC9B0iG,EAAS,GAAM,SAAa,EAAI1iG,EAAIA,EAAI,GACxC0iG,EAAS,GAAM,SAAWzyG,EAAI+P,EAC9B0iG,EAAS,GAAM,SAAazyG,EAAIA,EAAIM,EAAIA,ICzO1C,SAAS,GAAYg9D,EAAIH,GAExBmxC,GAAM/yG,KAAMkC,UAAMD,EAAW2/D,GAE7B1/D,KAAKH,KAAO,aAEZG,KAAK6/D,QAAc9/D,IAAP8/D,EAAqBA,EAAK,IAAI60C,GCC3C,SAAS,GAAgBpM,GAExB,QAAatoG,KAAMsoG,GAEnBtoG,KAAKyR,SAAW,GDDjB,GAAW7T,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ2/F,GAAMjzG,WAAa,CAEvEkI,YAAa,GAEb85D,cAAc,EAEdn5D,KAAM,SAAW4K,GAMhB,OAJAw/F,GAAMjzG,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAEjCrR,KAAK6/D,GAAGp5D,KAAM4K,EAAOwuD,IAEd7/D,MAIR6sF,SAAU,SAAWC,GAKpB,OAHA9sF,KAAK0/D,UAAYotB,EAAKptB,UACtB1/D,KAAK6/D,GAAGz2D,UAAW0jF,EAAKjtB,IAEjB7/D,MAIRsR,OAAQ,SAAWC,GAElB,MAAMP,EAAO6/F,GAAMjzG,UAAU0T,OAAOxT,KAAMkC,KAAMuR,GAIhD,OAFAP,EAAKoM,OAAOyiD,GAAK7/D,KAAK6/D,GAAGv2D,UAElB0H,KC1BT,GAAepT,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAE5EpL,YAAa,GAEb6iG,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAMzgE,EAAQ3mC,KAERkoG,EAAS,IAAI,GAAYvhE,EAAM2hE,SACrCJ,EAAOgB,QAASviE,EAAM+pB,MACtBw3C,EAAOkB,iBAAkBziE,EAAM+hE,eAC/BR,EAAOe,mBAAoBtiE,EAAM6hE,iBACjCN,EAAOS,KAAM52F,GAAK,SAAWy6F,GAE5B,IAECtF,EAAQvgE,EAAM1W,MAAOpB,KAAKoB,MAAOu8E,KAEhC,MAAQhlG,GAEJ4/F,EAEJA,EAAS5/F,GAIT5B,QAAQmE,MAAOvC,GAIhBm/B,EAAM2hE,QAAQT,UAAW91F,MAIxBo1F,EAAYC,IAIhBn3E,MAAO,SAAW68D,GAEjB,MAAMr7E,EAAWzR,KAAKyR,SAEtB,SAASwjG,EAAY/kG,GAQpB,YAN0BnQ,IAArB0R,EAAUvB,IAEdtK,QAAQC,KAAM,0CAA2CqK,GAInDuB,EAAUvB,GAIlB,MAAMwf,EAAW,IAAI,EAAWo9D,EAAKjtF,MA+ErC,QA7EmBE,IAAd+sF,EAAK78E,OAAqByf,EAASzf,KAAO68E,EAAK78E,WACjClQ,IAAd+sF,EAAK58E,OAAqBwf,EAASxf,KAAO48E,EAAK58E,WAChCnQ,IAAf+sF,EAAKj2D,YAA0C92B,IAAnB2vB,EAASmH,OAAsBnH,EAASmH,MAAM2D,OAAQsyD,EAAKj2D,YACpE92B,IAAnB+sF,EAAK/1D,YAA0BrH,EAASqH,UAAY+1D,EAAK/1D,gBACtCh3B,IAAnB+sF,EAAK91D,YAA0BtH,EAASsH,UAAY81D,EAAK91D,gBAC1Cj3B,IAAf+sF,EAAK71D,QAAsBvH,EAASuH,OAAQ,IAAI,IAAQuD,OAAQsyD,EAAK71D,aACnDl3B,IAAlB+sF,EAAK51D,eAAgDn3B,IAAtB2vB,EAASwH,UAAyBxH,EAASwH,SAASsD,OAAQsyD,EAAK51D,eAC9En3B,IAAlB+sF,EAAK11D,eAAgDr3B,IAAtB2vB,EAAS0H,UAAyB1H,EAAS0H,SAASoD,OAAQsyD,EAAK11D,eAC7Er3B,IAAnB+sF,EAAKz1D,YAA0B3H,EAAS2H,UAAYy1D,EAAKz1D,gBACtCt3B,IAAnB+sF,EAAKx1D,YAA0B5H,EAAS4H,UAAYw1D,EAAKx1D,gBAC7Bv3B,IAA5B+sF,EAAKv1D,qBAAmC7H,EAAS6H,mBAAqBu1D,EAAKv1D,yBAC9Dx3B,IAAb+sF,EAAK94D,MAAoBtE,EAASsE,IAAM84D,EAAK94D,UACxBj0B,IAArB+sF,EAAK34D,cAA4BzE,EAASyE,YAAc24D,EAAK34D,kBAC3Cp0B,IAAlB+sF,EAAK74D,WAAyBvE,EAASuE,SAAW64D,EAAK74D,eACtCl0B,IAAjB+sF,EAAK7zD,UAAwBvJ,EAASuJ,QAAU6zD,EAAK7zD,cACvCl5B,IAAd+sF,EAAK54D,OAAqBxE,EAASwE,KAAO44D,EAAK54D,WAC9Bn0B,IAAjB+sF,EAAKz4D,UAAwB3E,EAAS2E,QAAUy4D,EAAKz4D,cAChCt0B,IAArB+sF,EAAKx4D,cAA4B5E,EAAS4E,YAAcw4D,EAAKx4D,kBAC1Cv0B,IAAnB+sF,EAAK52D,YAA0BxG,EAASwG,UAAY42D,EAAK52D,gBACtCn2B,IAAnB+sF,EAAKh4D,YAA0BpF,EAASoF,UAAYg4D,EAAKh4D,gBACrC/0B,IAApB+sF,EAAK/3D,aAA2BrF,EAASqF,WAAa+3D,EAAK/3D,iBACvCh1B,IAApB+sF,EAAKl3D,aAA2BlG,EAASkG,WAAak3D,EAAKl3D,iBAErC71B,IAAtB+sF,EAAKv3D,eAA6B7F,EAAS6F,aAAeu3D,EAAKv3D,mBACrCx1B,IAA1B+sF,EAAK93D,mBAAiCtF,EAASsF,iBAAmB83D,EAAK93D,uBAClDj1B,IAArB+sF,EAAK73D,cAA4BvF,EAASuF,YAAc63D,EAAK73D,kBACzCl1B,IAApB+sF,EAAK53D,aAA2BxF,EAASwF,WAAa43D,EAAK53D,iBAClCn1B,IAAzB+sF,EAAK33D,kBAAgCzF,EAASyF,gBAAkB23D,EAAK33D,sBAChDp1B,IAArB+sF,EAAK13D,cAA4B1F,EAAS0F,YAAc03D,EAAK13D,kBACvCr1B,IAAtB+sF,EAAKz3D,eAA6B3F,EAAS2F,aAAey3D,EAAKz3D,mBACzCt1B,IAAtB+sF,EAAKx3D,eAA6B5F,EAAS4F,aAAew3D,EAAKx3D,mBAE5Cv1B,IAAnB+sF,EAAKtzD,YAA0B9J,EAAS8J,UAAYszD,EAAKtzD,gBAC7Bz5B,IAA5B+sF,EAAKrzD,qBAAmC/J,EAAS+J,mBAAqBqzD,EAAKrzD,yBACjD15B,IAA1B+sF,EAAKpzD,mBAAiChK,EAASgK,iBAAmBozD,EAAKpzD,uBAC5C35B,IAA3B+sF,EAAKnzD,oBAAkCjK,EAASiK,kBAAoBmzD,EAAKnzD,wBAEvD55B,IAAlB+sF,EAAKh/E,WAAyB4hB,EAAS5hB,SAAWg/E,EAAKh/E,UAEpC,IAAnBg/E,EAAKzzD,YAAkB3J,EAAS2J,UAAYyzD,EAAKzzD,gBAC/Bt5B,IAAlB+sF,EAAKxzD,WAAyB5J,EAAS4J,SAAWwzD,EAAKxzD,eACtCv5B,IAAjB+sF,EAAKvzD,UAAwB7J,EAAS6J,QAAUuzD,EAAKvzD,cACtCx5B,IAAf+sF,EAAK7+E,QAAsByhB,EAASzhB,MAAQ6+E,EAAK7+E,YAE1BlO,IAAvB+sF,EAAKh3D,gBAA8BpG,EAASoG,cAAgBg3D,EAAKh3D,oBACpC/1B,IAA7B+sF,EAAK/2D,sBAAoCrG,EAASqG,oBAAsB+2D,EAAK/2D,0BACjDh2B,IAA5B+sF,EAAK92D,qBAAmCtG,EAASsG,mBAAqB82D,EAAK92D,yBAEzDj2B,IAAlB+sF,EAAKhzD,WAAyBpK,EAASoK,SAAWgzD,EAAKhzD,eACjC/5B,IAAtB+sF,EAAKlzD,eAA6BlK,EAASkK,aAAekzD,EAAKlzD,mBACzC75B,IAAtB+sF,EAAKjzD,eAA6BnK,EAASmK,aAAeizD,EAAKjzD,mBAC5C95B,IAAnB+sF,EAAK72D,YAA0BvG,EAASuG,UAAY62D,EAAK72D,gBAEjCl2B,IAAxB+sF,EAAK31B,iBAA+BznC,EAASynC,eAAiB21B,EAAK31B,qBAElDp3D,IAAjB+sF,EAAKvhE,UAAwBmE,EAASnE,QAAUuhE,EAAKvhE,cAEjCxrB,IAApB+sF,EAAK12D,aAA2B1G,EAAS0G,WAAa02D,EAAK12D,iBAEzCr2B,IAAlB+sF,EAAKjhE,WAAyB6D,EAAS7D,SAAWihE,EAAKjhE,eAEjC9rB,IAAtB+sF,EAAK14D,eAEyB,iBAAtB04D,EAAK14D,aAEhB1E,EAAS0E,aAAiB04D,EAAK14D,aAAe,EAI9C1E,EAAS0E,aAAe04D,EAAK14D,mBAQRr0B,IAAlB+sF,EAAK1kD,SAET,IAAM,MAAMl4B,KAAQ48E,EAAK1kD,SAAW,CAEnC,MAAMme,EAAUumC,EAAK1kD,SAAUl4B,GAI/B,OAFAwf,EAAS0Y,SAAUl4B,GAAS,GAEnBq2C,EAAQ1mD,MAEhB,IAAK,IACJ6vB,EAAS0Y,SAAUl4B,GAAOjS,MAAQg3G,EAAY1uD,EAAQtoD,OACtD,MAED,IAAK,IACJyxB,EAAS0Y,SAAUl4B,GAAOjS,OAAQ,IAAI,IAAQu8B,OAAQ+rB,EAAQtoD,OAC9D,MAED,IAAK,KACJyxB,EAAS0Y,SAAUl4B,GAAOjS,OAAQ,IAAI,GAAUmL,UAAWm9C,EAAQtoD,OACnE,MAED,IAAK,KACJyxB,EAAS0Y,SAAUl4B,GAAOjS,OAAQ,IAAI,GAAUmL,UAAWm9C,EAAQtoD,OACnE,MAED,IAAK,KACJyxB,EAAS0Y,SAAUl4B,GAAOjS,OAAQ,IAAIoU,GAAUjJ,UAAWm9C,EAAQtoD,OACnE,MAED,IAAK,KACJyxB,EAAS0Y,SAAUl4B,GAAOjS,OAAQ,IAAI4L,GAAUT,UAAWm9C,EAAQtoD,OACnE,MAED,IAAK,KACJyxB,EAAS0Y,SAAUl4B,GAAOjS,OAAQ,IAAIimB,IAAU9a,UAAWm9C,EAAQtoD,OACnE,MAED,QACCyxB,EAAS0Y,SAAUl4B,GAAOjS,MAAQsoD,EAAQtoD,OAY9C,QAJsB8B,IAAjB+sF,EAAKtkD,UAAwB9Y,EAAS8Y,QAAUskD,EAAKtkD,cAC/BzoC,IAAtB+sF,EAAKrkD,eAA6B/Y,EAAS+Y,aAAeqkD,EAAKrkD,mBACvC1oC,IAAxB+sF,EAAKpkD,iBAA+BhZ,EAASgZ,eAAiBokD,EAAKpkD,qBAE/C3oC,IAApB+sF,EAAKjkD,WAET,IAAM,MAAMzrC,KAAO0vF,EAAKjkD,WAEvBnZ,EAASmZ,WAAYzrC,GAAQ0vF,EAAKjkD,WAAYzrC,GA2BhD,QAnBsB2C,IAAjB+sF,EAAKooB,UAAwBxlF,EAASyE,YAA+B,IAAjB24D,EAAKooB,cAI3Cn1G,IAAd+sF,EAAK7vE,OAAqByS,EAASzS,KAAO6vE,EAAK7vE,WACtBld,IAAzB+sF,EAAK1zD,kBAAgC1J,EAAS0J,gBAAkB0zD,EAAK1zD,sBAIxDr5B,IAAb+sF,EAAKl1D,MAAoBlI,EAASkI,IAAMq9E,EAAYnoB,EAAKl1D,WACzC73B,IAAhB+sF,EAAKj1D,SAAuBnI,EAASmI,OAASo9E,EAAYnoB,EAAKj1D,cAE7C93B,IAAlB+sF,EAAKh1D,WAAyBpI,EAASoI,SAAWm9E,EAAYnoB,EAAKh1D,gBAElD/3B,IAAjB+sF,EAAK50D,UAAwBxI,EAASwI,QAAU+8E,EAAYnoB,EAAK50D,eAC9Cn4B,IAAnB+sF,EAAK30D,YAA0BzI,EAASyI,UAAY20D,EAAK30D,gBAEtCp4B,IAAnB+sF,EAAK10D,YAA0B1I,EAAS0I,UAAY68E,EAAYnoB,EAAK10D,iBAC9Cr4B,IAAvB+sF,EAAKz0D,gBAA8B3I,EAAS2I,cAAgBy0D,EAAKz0D,oBAC5Ct4B,IAArB+sF,EAAKx0D,YAA4B,CAErC,IAAIA,EAAcw0D,EAAKx0D,aAEe,IAAjCrnB,MAAMe,QAASsmB,KAInBA,EAAc,CAAEA,EAAaA,IAI9B5I,EAAS4I,aAAc,IAAI,GAAUlvB,UAAWkvB,GAsCjD,YAlC8Bv4B,IAAzB+sF,EAAKv0D,kBAAgC7I,EAAS6I,gBAAkB08E,EAAYnoB,EAAKv0D,uBACtDx4B,IAA3B+sF,EAAKt0D,oBAAkC9I,EAAS8I,kBAAoBs0D,EAAKt0D,wBAC/Cz4B,IAA1B+sF,EAAKr0D,mBAAiC/I,EAAS+I,iBAAmBq0D,EAAKr0D,uBAEjD14B,IAAtB+sF,EAAKp0D,eAA6BhJ,EAASgJ,aAAeu8E,EAAYnoB,EAAKp0D,oBACrD34B,IAAtB+sF,EAAKn0D,eAA6BjJ,EAASiJ,aAAes8E,EAAYnoB,EAAKn0D,oBAEtD54B,IAArB+sF,EAAKl0D,cAA4BlJ,EAASkJ,YAAcq8E,EAAYnoB,EAAKl0D,mBAC9C74B,IAA3B+sF,EAAK31D,oBAAkCzH,EAASyH,kBAAoB21D,EAAK31D,wBAEpDp3B,IAArB+sF,EAAKj0D,cAA4BnJ,EAASmJ,YAAco8E,EAAYnoB,EAAKj0D,mBAEzD94B,IAAhB+sF,EAAKh0D,SAAuBpJ,EAASoJ,OAASm8E,EAAYnoB,EAAKh0D,cACtC/4B,IAAzB+sF,EAAK5zD,kBAAgCxJ,EAASwJ,gBAAkB4zD,EAAK5zD,sBAE/Cn5B,IAAtB+sF,EAAK/zD,eAA6BrJ,EAASqJ,aAAe+zD,EAAK/zD,mBACtCh5B,IAAzB+sF,EAAK9zD,kBAAgCtJ,EAASsJ,gBAAkB8zD,EAAK9zD,sBAEnDj5B,IAAlB+sF,EAAK/0D,WAAyBrI,EAASqI,SAAWk9E,EAAYnoB,EAAK/0D,gBACxCh4B,IAA3B+sF,EAAKlwD,oBAAkClN,EAASkN,kBAAoBkwD,EAAKlwD,wBAE1D78B,IAAf+sF,EAAK90D,QAAsBtI,EAASsI,MAAQi9E,EAAYnoB,EAAK90D,aACrCj4B,IAAxB+sF,EAAK70D,iBAA+BvI,EAASuI,eAAiB60D,EAAK70D,qBAE9Cl4B,IAArB+sF,EAAK3zD,cAA4BzJ,EAASyJ,YAAc87E,EAAYnoB,EAAK3zD,mBAEnDp5B,IAAtB+sF,EAAKt1D,eAA6B9H,EAAS8H,aAAey9E,EAAYnoB,EAAKt1D,oBAC5Cz3B,IAA/B+sF,EAAKr1D,wBAAsC/H,EAAS+H,sBAAwBw9E,EAAYnoB,EAAKr1D,6BACjE13B,IAA5B+sF,EAAKp1D,qBAAmChI,EAASgI,mBAAqBu9E,EAAYnoB,EAAKp1D,0BACzD33B,IAA9B+sF,EAAKn1D,uBAAqCjI,EAASiI,sBAAuB,IAAI,GAAUvuB,UAAW0jF,EAAKn1D,4BAElF53B,IAAtB+sF,EAAK1hC,eAA6B17B,EAAS07B,aAAe0hC,EAAK1hC,mBACtCrrD,IAAzB+sF,EAAKzhC,kBAAgC37B,EAAS27B,gBAAkB4pD,EAAYnoB,EAAKzhC,kBAE/E37B,GAIRylF,YAAa,SAAWl3G,GAGvB,OADA+B,KAAKyR,SAAWxT,EACT+B,QChST,SAASo1G,KAER,QAAqBp1G,MAErBA,KAAKH,KAAO,0BACZG,KAAKwpD,cAAgB5pB,EAAAA,ECLtB,SAASy1E,GAA0Bx0G,EAAOk8B,EAAUJ,EAAYkkB,GAEhC,iBAAnB,IAEXA,EAAmBlkB,EAEnBA,GAAa,EAEb/2B,QAAQmE,MAAO,kGAIhB,QAAsB/J,KAAMa,EAAOk8B,EAAUJ,GAE7C38B,KAAK6gD,iBAAmBA,GAAoB,ECJ7C,SAAS,GAAsBynD,GAE9B,QAAatoG,KAAMsoG,GCXpB,SAASgN,GAAmBhN,GAEO,oBAAtBiN,mBAEX3vG,QAAQC,KAAM,+DAIO,oBAAV2vG,OAEX5vG,QAAQC,KAAM,mDAIf,QAAa7F,KAAMsoG,GAEnBtoG,KAAKgU,QAAU,CAAExD,iBAAkB,QCdpC,SAASilG,KAERz1G,KAAKH,KAAO,YAEZG,KAAK62B,MAAQ,IAAI,GAEjB72B,KAAK01G,SAAW,GAChB11G,KAAK21G,YAAc,KJDpBP,GAAwBx3G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAA4B,CAE7FpL,YAAasvG,GAEbhzD,2BAA2B,EAE3B37C,KAAM,SAAW4K,GAMhB,OAJA,uBAAoCrR,KAAMqR,GAE1CrR,KAAKwpD,cAAgBn4C,EAAOm4C,cAErBxpD,MAIRwG,MAAO,WAEN,OAAO,IAAIxG,KAAK8F,aAAcW,KAAMzG,OAIrCsR,OAAQ,WAEP,MAAMN,EAAO,yBAAsChR,MAMnD,OAJAgR,EAAKw4C,cAAgBxpD,KAAKwpD,cAE1Bx4C,EAAKoxC,2BAA4B,EAE1BpxC,KCrBTqkG,GAAyBz3G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAA6B,CAE/FpL,YAAauvG,GAEbzyD,4BAA4B,EAE5Bn8C,KAAM,SAAW4K,GAMhB,OAJA,uBAAqCrR,KAAMqR,GAE3CrR,KAAK6gD,iBAAmBxvC,EAAOwvC,iBAExB7gD,MAIRsR,OAAQ,WAEP,MAAMN,EAAO,yBAAuChR,MAMpD,OAJAgR,EAAK6vC,iBAAmB7gD,KAAK6gD,iBAE7B7vC,EAAK4xC,4BAA6B,EAE3B5xC,KC1BT,GAAqBpT,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAElFpL,YAAa,GAEb6iG,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAMzgE,EAAQ3mC,KAERkoG,EAAS,IAAI,GAAYvhE,EAAM2hE,SACrCJ,EAAOgB,QAASviE,EAAM+pB,MACtBw3C,EAAOkB,iBAAkBziE,EAAM+hE,eAC/BR,EAAOe,mBAAoBtiE,EAAM6hE,iBACjCN,EAAOS,KAAM52F,GAAK,SAAWy6F,GAE5B,IAECtF,EAAQvgE,EAAM1W,MAAOpB,KAAKoB,MAAOu8E,KAEhC,MAAQhlG,GAEJ4/F,EAEJA,EAAS5/F,GAIT5B,QAAQmE,MAAOvC,GAIhBm/B,EAAM2hE,QAAQT,UAAW91F,MAIxBo1F,EAAYC,IAIhBn3E,MAAO,SAAW68D,GAEjB,MAAM8oB,EAAuB,GACvBC,EAAiB,GAEvB,SAASC,EAAsBhpB,EAAM78E,GAEpC,QAAsClQ,IAAjC61G,EAAsB3lG,GAAuB,OAAO2lG,EAAsB3lG,GAE/E,MACMy6E,EADqBoC,EAAKlC,mBACc36E,GAExCgvB,EAYP,SAAyB6tD,EAAM78E,GAE9B,QAAgClQ,IAA3B81G,EAAgB5lG,GAAuB,OAAO4lG,EAAgB5lG,GAEnE,MACM8lG,EADejpB,EAAKxC,aACQr6E,GAE5BizB,EAAK,IAAIzF,YAAas4E,GAAc92E,OAI1C,OAFA42E,EAAgB5lG,GAASizB,EAElBA,EAvBQ8yE,CAAgBlpB,EAAMpC,EAAkBzrD,QAGjDurD,EAAK,IAAIJ,GADD,GAAeM,EAAkB7qF,KAAMo/B,GACZyrD,EAAkBxpC,QAK3D,OAJAspC,EAAGv6E,KAAOy6E,EAAkBz6E,KAE5B2lG,EAAsB3lG,GAASu6E,EAExBA,EAmBR,MAAMzsE,EAAW+uE,EAAK1qC,0BAA4B,IAAIgzD,GAA4B,IAAI,GAEhF50G,EAAQssF,EAAK97E,KAAKxQ,MAExB,QAAeT,IAAVS,EAAsB,CAE1B,MAAMy1G,EAAa,GAAez1G,EAAMX,KAAMW,EAAMK,OACpDkd,EAASgiB,SAAU,IAAI,GAAiBk2E,EAAY,IAIrD,MAAM32E,EAAawtD,EAAK97E,KAAKsuB,WAE7B,IAAM,MAAMliC,KAAOkiC,EAAa,CAE/B,MAAM91B,EAAY81B,EAAYliC,GAC9B,IAAI84G,EAEJ,GAAK1sG,EAAUimC,6BAGdymE,EAAkB,IAAIzrB,GADIqrB,EAAsBhpB,EAAK97E,KAAMxH,EAAUwH,MACAxH,EAAUuzB,SAAUvzB,EAAUH,OAAQG,EAAUmzB,gBAE/G,CAEN,MAAMs5E,EAAa,GAAezsG,EAAU3J,KAAM2J,EAAU3I,OAE5Dq1G,EAAkB,IADY1sG,EAAUo5C,2BAA6ByyD,GAA2B,IACnDY,EAAYzsG,EAAUuzB,SAAUvzB,EAAUmzB,iBAIhE58B,IAAnByJ,EAAU0G,OAAqBgmG,EAAgBhmG,KAAO1G,EAAU0G,MACrE6N,EAASkiB,aAAc7iC,EAAK84G,GAI7B,MAAM32E,EAAkButD,EAAK97E,KAAKuuB,gBAElC,GAAKA,EAEJ,IAAM,MAAMniC,KAAOmiC,EAAkB,CAEpC,MAAM2E,EAAiB3E,EAAiBniC,GAElCyD,EAAQ,GAEd,IAAM,IAAIE,EAAI,EAAG+b,EAAKonB,EAAejjC,OAAQF,EAAI+b,EAAI/b,IAAO,CAE3D,MAAMyI,EAAY06B,EAAgBnjC,GAClC,IAAIm1G,EAKHA,EAHI1sG,EAAUimC,6BAGI,IAAIg7C,GADIqrB,EAAsBhpB,EAAK97E,KAAMxH,EAAUwH,MACAxH,EAAUuzB,SAAUvzB,EAAUH,OAAQG,EAAUmzB,YAKnG,IAAI,GADH,GAAenzB,EAAU3J,KAAM2J,EAAU3I,OACT2I,EAAUuzB,SAAUvzB,EAAUmzB,iBAI1D58B,IAAnByJ,EAAU0G,OAAqBgmG,EAAgBhmG,KAAO1G,EAAU0G,MACrErP,EAAMT,KAAM81G,GAIbn4F,EAASwhB,gBAAiBniC,GAAQyD,EAMPisF,EAAK97E,KAAKwuB,uBAItCzhB,EAASyhB,sBAAuB,GAIjC,MAAMC,EAASqtD,EAAK97E,KAAKyuB,QAAUqtD,EAAK97E,KAAKmlG,WAAarpB,EAAK97E,KAAKolG,QAEpE,QAAgBr2G,IAAX0/B,EAEJ,IAAM,IAAI1+B,EAAI,EAAGqB,EAAIq9B,EAAOx+B,OAAQF,IAAMqB,IAAMrB,EAAI,CAEnD,MAAMqhC,EAAQ3C,EAAQ1+B,GAEtBgd,EAASqiB,SAAUgC,EAAMpR,MAAOoR,EAAM1lB,MAAO0lB,EAAM/B,eAMrD,MAAMX,EAAiBotD,EAAK97E,KAAK0uB,eAEjC,QAAwB3/B,IAAnB2/B,EAA+B,CAEnC,MAAM91B,EAAS,IAAI,OAEY7J,IAA1B2/B,EAAe91B,QAEnBA,EAAOR,UAAWs2B,EAAe91B,QAIlCmU,EAAS2hB,eAAiB,IAAInf,GAAQ3W,EAAQ81B,EAAelkB,QAO9D,OAHKsxE,EAAK58E,OAAO6N,EAAS7N,KAAO48E,EAAK58E,MACjC48E,EAAKjhE,WAAW9N,EAAS8N,SAAWihE,EAAKjhE,UAEvC9N,KC3LTu3F,GAAkB13G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAE/EpL,YAAawvG,GAEbe,qBAAqB,EAErBC,WAAY,SAAqBtiG,GAIhC,OAFAhU,KAAKgU,QAAUA,EAERhU,MAIR2oG,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,QAE5BrnG,IAARgS,IAAoBA,EAAM,SAEZhS,IAAdC,KAAK0wD,OAAqB3+C,EAAM/R,KAAK0wD,KAAO3+C,GAEjDA,EAAM/R,KAAKsoG,QAAQR,WAAY/1F,GAE/B,MAAM40B,EAAQ3mC,KAER6vC,EAASi3D,GAAMrpG,IAAKsU,GAE1B,QAAgBhS,IAAX8vC,EAYJ,OAVAlJ,EAAM2hE,QAAQX,UAAW51F,GAEzBm5F,YAAY,WAENhE,GAASA,EAAQr3D,GAEtBlJ,EAAM2hE,QAAQV,QAAS71F,KAErB,GAEI89B,EAIR,MAAM0mE,EAAe,GACrBA,EAAaC,YAAqC,cAArBx2G,KAAKuoG,YAAgC,cAAgB,UAElFiN,MAAOzjG,EAAKwkG,GAAeE,MAAM,SAAWC,GAE3C,OAAOA,EAAIC,UAERF,MAAM,SAAWE,GAEpB,OAAOpB,kBAAmBoB,EAAMhwE,EAAM3yB,YAEnCyiG,MAAM,SAAWG,GAEpB9P,GAAMngG,IAAKoL,EAAK6kG,GAEX1P,GAASA,EAAQ0P,GAEtBjwE,EAAM2hE,QAAQV,QAAS71F,MAEpB8kG,OAAO,SAAWrvG,GAEhB4/F,GAAUA,EAAS5/F,GAExBm/B,EAAM2hE,QAAQT,UAAW91F,GACzB40B,EAAM2hE,QAAQV,QAAS71F,MAIxB40B,EAAM2hE,QAAQX,UAAW51F,MC7E3BzU,OAAOqC,OAAQ81G,GAAU73G,UAAW,CAEnCg1G,OAAQ,SAAWrwG,EAAGM,GAMrB,OAJA7C,KAAK21G,YAAc,IAAIhF,GACvB3wG,KAAK01G,SAASt1G,KAAMJ,KAAK21G,aACzB31G,KAAK21G,YAAY/C,OAAQrwG,EAAGM,GAErB7C,MAIR6yG,OAAQ,SAAWtwG,EAAGM,GAIrB,OAFA7C,KAAK21G,YAAY9C,OAAQtwG,EAAGM,GAErB7C,MAIR8yG,iBAAkB,SAAWC,EAAMC,EAAMnJ,EAAIC,GAI5C,OAFA9pG,KAAK21G,YAAY7C,iBAAkBC,EAAMC,EAAMnJ,EAAIC,GAE5C9pG,MAIRizG,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAOxJ,EAAIC,GAIzD,OAFA9pG,KAAK21G,YAAY1C,cAAeC,EAAOC,EAAOC,EAAOC,EAAOxJ,EAAIC,GAEzD9pG,MAIRszG,WAAY,SAAWxf,GAItB,OAFA9zF,KAAK21G,YAAYrC,WAAYxf,GAEtB9zF,MAIR82G,SAAU,SAAWC,EAAOC,GAE3B,SAASC,EAAiBC,GAEzB,MAAM1oF,EAAS,GAEf,IAAM,IAAIztB,EAAI,EAAGC,EAAIk2G,EAAWj2G,OAAQF,EAAIC,EAAGD,IAAO,CAErD,MAAMo2G,EAAUD,EAAYn2G,GAEtBq2G,EAAW,IAAI,GACrBA,EAAS3G,OAAS0G,EAAQ1G,OAE1BjiF,EAAOpuB,KAAMg3G,GAId,OAAO5oF,EAIR,SAAS6oF,EAAsBxgB,EAAMygB,GAEpC,MAAMC,EAAUD,EAAUr2G,OAM1B,IAAI4xF,GAAS,EACb,IAAM,IAAI96E,EAAIw/F,EAAU,EAAG3yG,EAAI,EAAGA,EAAI2yG,EAASx/F,EAAInT,IAAO,CAEzD,IAAI4yG,EAAYF,EAAWv/F,GACvB0/F,EAAaH,EAAW1yG,GAExB8yG,EAASD,EAAWl1G,EAAIi1G,EAAUj1G,EAClCo1G,EAASF,EAAW50G,EAAI20G,EAAU30G,EAEtC,GAAKvB,KAAK8B,IAAKu0G,GAAWvhG,OAAOC,QAAU,CAU1C,GAPKshG,EAAS,IAEbH,EAAYF,EAAW1yG,GAAK8yG,GAAWA,EACvCD,EAAaH,EAAWv/F,GAAK4/F,GAAWA,GAIlC9gB,EAAKh0F,EAAI20G,EAAU30G,GAASg0F,EAAKh0F,EAAI40G,EAAW50G,EAAQ,SAE/D,GAAKg0F,EAAKh0F,IAAM20G,EAAU30G,GAEzB,GAAKg0F,EAAKt0F,IAAMi1G,EAAUj1G,EAAK,OAAO,MAGhC,CAEN,MAAMq1G,EAAWD,GAAW9gB,EAAKt0F,EAAIi1G,EAAUj1G,GAAMm1G,GAAW7gB,EAAKh0F,EAAI20G,EAAU30G,GACnF,GAAkB,IAAb+0G,EAAoB,OAAO,EAChC,GAAKA,EAAW,EAAQ,SACxB/kB,GAAWA,OAIN,CAGN,GAAKgE,EAAKh0F,IAAM20G,EAAU30G,EAAM,SAEhC,GAAS40G,EAAWl1G,GAAKs0F,EAAKt0F,GAASs0F,EAAKt0F,GAAKi1G,EAAUj1G,GACrDi1G,EAAUj1G,GAAKs0F,EAAKt0F,GAASs0F,EAAKt0F,GAAKk1G,EAAWl1G,EAAS,OAAO,GAO1E,OAAOswF,EAIR,MAAMgB,EAAcH,GAAWG,YAEzB6hB,EAAW11G,KAAK01G,SACtB,GAAyB,IAApBA,EAASz0G,OAAe,MAAO,GAEpC,IAAiB,IAAZ+1G,EAAmB,OAAOC,EAAiBvB,GAGhD,IAAImC,EAAOV,EAASC,EACpB,MAAM5oF,EAAS,GAEf,GAAyB,IAApBknF,EAASz0G,OAMb,OAJAk2G,EAAUzB,EAAU,GACpB0B,EAAW,IAAI,GACfA,EAAS3G,OAAS0G,EAAQ1G,OAC1BjiF,EAAOpuB,KAAMg3G,GACN5oF,EAIR,IAAIspF,GAAejkB,EAAa6hB,EAAU,GAAIjI,aAC9CqK,EAAaf,GAAUe,EAAaA,EAIpC,MAAMC,EAAmB,GACnBC,EAAY,GAClB,IAEIC,EAkGAC,EApGAC,EAAgB,GAChBC,EAAU,EAGdJ,EAAWI,QAAYr4G,EACvBo4G,EAAeC,GAAY,GAE3B,IAAM,IAAIr3G,EAAI,EAAGC,EAAI00G,EAASz0G,OAAQF,EAAIC,EAAGD,IAE5Co2G,EAAUzB,EAAU30G,GACpBk3G,EAAYd,EAAQ1J,YACpBoK,EAAQhkB,EAAaokB,GACrBJ,EAAQd,GAAUc,EAAQA,EAErBA,IAEKC,GAAkBE,EAAWI,IAAcA,IAEpDJ,EAAWI,GAAY,CAAEr0G,EAAG,IAAI,GAASgU,GACzCigG,EAAWI,GAAUr0G,EAAE0sG,OAAS0G,EAAQ1G,OAEnCqH,GAAaM,IAClBD,EAAeC,GAAY,IAM3BD,EAAeC,GAAUh4G,KAAM,CAAEwM,EAAGuqG,EAASp/F,EAAGkgG,EAAW,KAS7D,IAAOD,EAAW,GAAM,OAAOf,EAAiBvB,GAGhD,GAAKsC,EAAU/2G,OAAS,EAAI,CAE3B,IAAIo3G,GAAY,EAChB,MAAMC,EAAW,GAEjB,IAAM,IAAIC,EAAO,EAAGC,EAAOR,EAAU/2G,OAAQs3G,EAAOC,EAAMD,IAEzDR,EAAkBQ,GAAS,GAI5B,IAAM,IAAIA,EAAO,EAAGC,EAAOR,EAAU/2G,OAAQs3G,EAAOC,EAAMD,IAAU,CAEnE,MAAME,EAAMN,EAAeI,GAE3B,IAAM,IAAIG,EAAO,EAAGA,EAAOD,EAAIx3G,OAAQy3G,IAAU,CAEhD,MAAMC,EAAKF,EAAKC,GAChB,IAAIE,GAAkB,EAEtB,IAAM,IAAIC,EAAQ,EAAGA,EAAQb,EAAU/2G,OAAQ43G,IAEzCxB,EAAsBsB,EAAG5gG,EAAGigG,EAAWa,GAAQ9gG,KAE9CwgG,IAASM,GAAQP,EAASl4G,KAAM,CAAE04G,MAAOP,EAAMQ,IAAKF,EAAO9mB,KAAM2mB,IACjEE,GAEJA,GAAkB,EAClBb,EAAkBc,GAAQz4G,KAAMu4G,IAIhCN,GAAY,GAQVO,GAEJb,EAAkBQ,GAAOn4G,KAAMu4G,IAS7BL,EAASr3G,OAAS,IAGfo3G,IAAYF,EAAgBJ,IAQrC,IAAM,IAAIh3G,EAAI,EAAG+b,EAAKk7F,EAAU/2G,OAAQF,EAAI+b,EAAI/b,IAAO,CAEtDq2G,EAAWY,EAAWj3G,GAAIgD,EAC1ByqB,EAAOpuB,KAAMg3G,GACbc,EAAWC,EAAep3G,GAE1B,IAAM,IAAImf,EAAI,EAAG6gB,EAAKm3E,EAASj3G,OAAQif,EAAI6gB,EAAI7gB,IAE9Ck3F,EAASpjB,MAAM5zF,KAAM83G,EAAUh4F,GAAItT,GAQrC,OAAO4hB,KC7RT,MAAMwqF,GAELlzG,YAAakL,GAEZ1T,OAAOC,eAAgByC,KAAM,SAAU,CAAE/B,OAAO,IAEhD+B,KAAKH,KAAO,OAEZG,KAAKgR,KAAOA,EAIbioG,eAAgBzM,EAAMvvF,EAAO,KAE5B,MAAMuR,EAAS,GACT0qF,EAcR,SAAsB1M,EAAMvvF,EAAMjM,GAEjC,MAAMmoG,EAAQloG,MAAM4qF,KAAO5qF,MAAM4qF,KAAM2Q,GAASvmE,OAAQumE,GAAOl6C,MAAO,IAChErkD,EAAQgP,EAAOjM,EAAKwxD,WACpB42C,GAAgBpoG,EAAKgN,YAAYq7F,KAAOroG,EAAKgN,YAAYs7F,KAAOtoG,EAAKuoG,oBAAuBtrG,EAE5FirG,EAAQ,GAEd,IAAIpuE,EAAU,EAAGC,EAAU,EAE3B,IAAM,IAAIhqC,EAAI,EAAGA,EAAIo4G,EAAMl4G,OAAQF,IAAO,CAEzC,MAAMy4G,EAAOL,EAAOp4G,GAEpB,GAAc,OAATy4G,EAEJ1uE,EAAU,EACVC,GAAWquE,MAEL,CAEN,MAAMK,EAAMC,GAAYF,EAAMvrG,EAAO68B,EAASC,EAAS/5B,GACvD85B,GAAW2uE,EAAI3uE,QACfouE,EAAM94G,KAAMq5G,EAAI/oD,OAMlB,OAAOwoD,EA3CQS,CAAanN,EAAMvvF,EAAMjd,KAAKgR,MAE5C,IAAM,IAAI+G,EAAI,EAAGwkD,EAAK28C,EAAMj4G,OAAQ8W,EAAIwkD,EAAIxkD,IAE3C9G,MAAMrT,UAAUwC,KAAKitE,MAAO7+C,EAAQ0qF,EAAOnhG,GAAI++F,YAIhD,OAAOtoF,GAuCT,SAASkrF,GAAYF,EAAMvrG,EAAO68B,EAASC,EAAS/5B,GAEnD,MAAM4oG,EAAQ5oG,EAAK6oG,OAAQL,IAAUxoG,EAAK6oG,OAAQ,KAElD,IAAOD,EAIN,YAFAh0G,QAAQmE,MAAO,0BAA4ByvG,EAAO,oCAAsCxoG,EAAK8oG,WAAa,KAM3G,MAAMppD,EAAO,IAAI+kD,GAEjB,IAAIlzG,EAAGM,EAAGk3G,EAAKC,EAAKC,EAAMC,EAAMC,EAAMC,EAEtC,GAAKR,EAAMv8G,EAAI,CAEd,MAAMg9G,EAAUT,EAAMU,iBAAoBV,EAAMU,eAAiBV,EAAMv8G,EAAEi1D,MAAO,MAEhF,IAAM,IAAIvxD,EAAI,EAAGC,EAAIq5G,EAAQp5G,OAAQF,EAAIC,GAIxC,OAFeq5G,EAASt5G,MAIvB,IAAK,IAEJwB,EAAI83G,EAASt5G,KAASkN,EAAQ68B,EAC9BjoC,EAAIw3G,EAASt5G,KAASkN,EAAQ88B,EAE9B2lB,EAAKkiD,OAAQrwG,EAAGM,GAEhB,MAED,IAAK,IAEJN,EAAI83G,EAASt5G,KAASkN,EAAQ68B,EAC9BjoC,EAAIw3G,EAASt5G,KAASkN,EAAQ88B,EAE9B2lB,EAAKmiD,OAAQtwG,EAAGM,GAEhB,MAED,IAAK,IAEJk3G,EAAMM,EAASt5G,KAASkN,EAAQ68B,EAChCkvE,EAAMK,EAASt5G,KAASkN,EAAQ88B,EAChCkvE,EAAOI,EAASt5G,KAASkN,EAAQ68B,EACjCovE,EAAOG,EAASt5G,KAASkN,EAAQ88B,EAEjC2lB,EAAKoiD,iBAAkBmH,EAAMC,EAAMH,EAAKC,GAExC,MAED,IAAK,IAEJD,EAAMM,EAASt5G,KAASkN,EAAQ68B,EAChCkvE,EAAMK,EAASt5G,KAASkN,EAAQ88B,EAChCkvE,EAAOI,EAASt5G,KAASkN,EAAQ68B,EACjCovE,EAAOG,EAASt5G,KAASkN,EAAQ88B,EACjCovE,EAAOE,EAASt5G,KAASkN,EAAQ68B,EACjCsvE,EAAOC,EAASt5G,KAASkN,EAAQ88B,EAEjC2lB,EAAKuiD,cAAegH,EAAMC,EAAMC,EAAMC,EAAML,EAAKC,IAUrD,MAAO,CAAElvE,QAAS8uE,EAAMW,GAAKtsG,EAAOyiD,KAAMA,GCtI3C,SAAS8pD,GAAYlS,GAEpB,QAAatoG,KAAMsoG,GCNpB,IAAIzpB,GDUJ27B,GAAW58G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAExEpL,YAAa00G,GAEb7R,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAMzgE,EAAQ3mC,KAERkoG,EAAS,IAAI,GAAYloG,KAAKsoG,SACpCJ,EAAOgB,QAASlpG,KAAK0wD,MACrBw3C,EAAOkB,iBAAkBppG,KAAK0oG,eAC9BR,EAAOe,mBAAoBtiE,EAAM6hE,iBACjCN,EAAOS,KAAM52F,GAAK,SAAWy6F,GAE5B,IAAI1f,EAEJ,IAECA,EAAOj+D,KAAKoB,MAAOu8E,GAElB,MAAQhlG,GAET5B,QAAQC,KAAM,yFACdinF,EAAOj+D,KAAKoB,MAAOu8E,EAAKiO,UAAW,GAAIjO,EAAKvrG,OAAS,IAItD,MAAMy5G,EAAO/zE,EAAM1W,MAAO68D,GAErBoa,GAASA,EAAQwT,KAEpBvT,EAAYC,IAIhBn3E,MAAO,SAAW68D,GAEjB,OAAO,IAAIksB,GAAMlsB,ME3CnB,SAAS6tB,GAAarS,GAErB,QAAatoG,KAAMsoG,GCFpB,SAASsS,GAAsBx+D,EAAUC,EAAaqjB,GAErD,QAAiB1/D,UAAMD,EAAW2/D,GAElC,MAAMnjC,GAAS,IAAI,IAAQ52B,IAAKy2C,GAC1B5f,GAAS,IAAI,IAAQ72B,IAAK02C,GAE1Bw+D,EAAM,IAAI,EAASt+E,EAAO/uB,EAAG+uB,EAAO5vB,EAAG4vB,EAAOz3B,GAC9Cg2G,EAAS,IAAI,EAASt+E,EAAOhvB,EAAGgvB,EAAO7vB,EAAG6vB,EAAO13B,GAGjD0lG,EAAKlpG,KAAK8G,KAAM9G,KAAKC,IACrBwV,EAAKyzF,EAAKlpG,KAAK8G,KAAM,KAE3BpI,KAAK6/D,GAAGC,aAAc,GAAIr5D,KAAMo0G,GAAMl0G,IAAKm0G,GAAS1zG,eAAgBojG,GACpExqG,KAAK6/D,GAAGC,aAAc,GAAIr5D,KAAMo0G,GAAM7zG,IAAK8zG,GAAS1zG,eAAgB2P,GChBrE,SAASgkG,GAAmBlkF,EAAO6oC,GAElC,QAAiB1/D,UAAMD,EAAW2/D,GAElC,MAAMnjC,GAAS,IAAI,IAAQ52B,IAAKkxB,GAGhC72B,KAAK6/D,GAAGC,aAAc,GAAIn6D,IAAK42B,EAAO/uB,EAAG+uB,EAAO5vB,EAAG4vB,EAAOz3B,GAAIsC,eAAgB,EAAI9F,KAAK8G,KAAM9G,KAAKC,KFAnGo5G,GAAY/8G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAoB,CAEzEpL,YAAa60G,GAEbhS,KAAM,SAAW52F,EAAKm1F,EAAQC,EAAYC,GAEzC,MAAMzgE,EAAQ3mC,KAERkoG,EAAS,IAAI,GAAYvhE,EAAM2hE,SACrCJ,EAAOoE,gBAAiB,eACxBpE,EAAOgB,QAASviE,EAAM+pB,MACtBw3C,EAAOkB,iBAAkBziE,EAAM+hE,eAC/BR,EAAOe,mBAAoBtiE,EAAM6hE,iBACjCN,EAAOS,KAAM52F,GAAK,SAAWktB,GAE5B,IAIC,MAAM+7E,EAAa/7E,EAAOn+B,MAAO,SDvBjBf,IAAb8+E,KAEJA,GAAW,IAAMoI,OAAOg0B,cAAgBh0B,OAAOi0B,qBAIzCr8B,ICoBGs8B,gBAAiBH,GAAY,SAAWI,GAE/ClU,EAAQkU,MAIR,MAAQ5zG,GAEJ4/F,EAEJA,EAAS5/F,GAIT5B,QAAQmE,MAAOvC,GAIhBm/B,EAAM2hE,QAAQT,UAAW91F,MAIxBo1F,EAAYC,MC/BjBwT,GAAqBh9G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAwB,CAEtFpL,YAAa80G,GAEbS,wBAAwB,EAExB50G,KAAM,SAAW4K,GAIhB,OAFA,uBAAgCrR,KAAMqR,GAE/BrR,MAIRsR,OAAQ,SAAWC,GAMlB,OAJa,yBAAkCvR,KAAMuR,MCzBvDwpG,GAAkBn9G,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQ,cAAwB,CAEnFpL,YAAai1G,GAEbO,qBAAqB,EAErB70G,KAAM,SAAW4K,GAIhB,OAFA,uBAAgCrR,KAAMqR,GAE/BrR,MAIRsR,OAAQ,SAAWC,GAMlB,OAJa,yBAAkCvR,KAAMuR,MC1BvD,MAAMgqG,GAAY,IAAIr3F,GAChBs3F,GAAW,IAAIt3F,GCHrB,SAASu3F,GAAeC,EAASxa,EAAU7D,GAK1C,IAAIse,EACHC,EACAC,EAkBD,OAvBA77G,KAAK07G,QAAUA,EACf17G,KAAKq9F,UAAYA,EAsBR6D,GAER,IAAK,aACJya,EAAc37G,KAAK87G,OACnBF,EAAsB57G,KAAK+7G,eAC3BF,EAAc77G,KAAKg8G,+BAEnBh8G,KAAKi/B,OAAS,IAAIrB,aAA0B,EAAZy/D,GAChCr9F,KAAKi8G,WAAa,EAClB,MAED,IAAK,SACL,IAAK,OACJN,EAAc37G,KAAKk8G,QAInBN,EAAsB57G,KAAKk8G,QAE3BL,EAAc77G,KAAKm8G,0BAEnBn8G,KAAKi/B,OAAS,IAAIhuB,MAAmB,EAAZosF,GACzB,MAED,QACCse,EAAc37G,KAAKo8G,MACnBR,EAAsB57G,KAAKq8G,cAC3BR,EAAc77G,KAAKs8G,4BAEnBt8G,KAAKi/B,OAAS,IAAIrB,aAA0B,EAAZy/D,GAIlCr9F,KAAKu8G,iBAAmBZ,EACxB37G,KAAKw8G,yBAA2BZ,EAChC57G,KAAKy8G,aAAeZ,EACpB77G,KAAK08G,WAAa,EAClB18G,KAAK28G,UAAY,EAEjB38G,KAAK48G,iBAAmB,EACxB58G,KAAK68G,yBAA2B,EAEhC78G,KAAK88G,SAAW,EAChB98G,KAAK+8G,eAAiB,EDnCvBz/G,OAAOqC,OA5BP,WAECK,KAAKH,KAAO,eAEZG,KAAKwpC,OAAS,EAEdxpC,KAAKg9G,OAAS,KAEdh9G,KAAKw4E,QAAU,IAAI,GACnBx4E,KAAKw4E,QAAQpuD,OAAOL,OAAQ,GAC5B/pB,KAAKw4E,QAAQloE,kBAAmB,EAEhCtQ,KAAKy4E,QAAU,IAAI,GACnBz4E,KAAKy4E,QAAQruD,OAAOL,OAAQ,GAC5B/pB,KAAKy4E,QAAQnoE,kBAAmB,EAEhCtQ,KAAKi9G,OAAS,CACbvzE,MAAO,KACPH,IAAK,KACLC,OAAQ,KACR1gB,KAAM,KACNC,IAAK,KACL0gB,KAAM,KACNuzE,OAAQ,OAKkBp/G,UAAW,CAEtCgZ,OAAQ,SAAWoD,GAElB,MAAM8V,EAAQ9vB,KAAKi9G,OAMnB,GAJoBntF,EAAM4Z,QAAU1vB,EAAO0vB,OAAS5Z,EAAMyZ,MAAQvvB,EAAOuvB,KACxEzZ,EAAM0Z,SAAWxvB,EAAOwvB,OAASxpC,KAAKwpC,QAAU1Z,EAAMhH,OAAS9O,EAAO8O,MACtEgH,EAAM/G,MAAQ/O,EAAO+O,KAAO+G,EAAM2Z,OAASzvB,EAAOyvB,MAAQ3Z,EAAMktF,SAAWh9G,KAAKg9G,OAE9D,CAElBltF,EAAM4Z,MAAQ1vB,EAAO0vB,MACrB5Z,EAAMyZ,IAAMvvB,EAAOuvB,IACnBzZ,EAAM0Z,OAASxvB,EAAOwvB,OAASxpC,KAAKwpC,OACpC1Z,EAAMhH,KAAO9O,EAAO8O,KACpBgH,EAAM/G,IAAM/O,EAAO+O,IACnB+G,EAAM2Z,KAAOzvB,EAAOyvB,KACpB3Z,EAAMktF,OAASh9G,KAAKg9G,OAKpB,MAAM9iG,EAAmBF,EAAOE,iBAAiB1T,QAC3C02G,EAAaptF,EAAMktF,OAAS,EAC5BG,EAAqBD,EAAaptF,EAAMhH,KAAOgH,EAAM4Z,MACrD0zE,EAASttF,EAAMhH,KAAOxnB,KAAKipC,IAAK,UAAoBza,EAAMyZ,IAAM,IAAUzZ,EAAM2Z,KACtF,IAAI4zE,EAAMC,EAIV9B,GAAS/zG,SAAU,KAASy1G,EAC5B3B,GAAU9zG,SAAU,IAAOy1G,EAI3BG,GAASD,EAAOttF,EAAM0Z,OAAS2zE,EAC/BG,EAAOF,EAAOttF,EAAM0Z,OAAS2zE,EAE7BjjG,EAAiBzS,SAAU,GAAM,EAAIqoB,EAAMhH,MAASw0F,EAAOD,GAC3DnjG,EAAiBzS,SAAU,IAAQ61G,EAAOD,IAAWC,EAAOD,GAE5Dr9G,KAAKw4E,QAAQt+D,iBAAiBzT,KAAMyT,GAIpCmjG,GAASD,EAAOttF,EAAM0Z,OAAS2zE,EAC/BG,EAAOF,EAAOttF,EAAM0Z,OAAS2zE,EAE7BjjG,EAAiBzS,SAAU,GAAM,EAAIqoB,EAAMhH,MAASw0F,EAAOD,GAC3DnjG,EAAiBzS,SAAU,IAAQ61G,EAAOD,IAAWC,EAAOD,GAE5Dr9G,KAAKy4E,QAAQv+D,iBAAiBzT,KAAMyT,GAIrCla,KAAKw4E,QAAQn+D,YAAY5T,KAAMuT,EAAOK,aAAclT,SAAUq0G,IAC9Dx7G,KAAKy4E,QAAQp+D,YAAY5T,KAAMuT,EAAOK,aAAclT,SAAUo0G,OClBhEj+G,OAAOqC,OAAQ87G,GAAc79G,UAAW,CAGvC2/G,WAAY,SAAWC,EAAWpxB,GAKjC,MAAMntD,EAASj/B,KAAKi/B,OACnBiiB,EAASlhD,KAAKq9F,UACdh0F,EAASm0G,EAAYt8D,EAASA,EAE/B,IAAIu8D,EAAgBz9G,KAAK48G,iBAEzB,GAAuB,IAAlBa,EAAsB,CAI1B,IAAM,IAAI18G,EAAI,EAAGA,IAAMmgD,IAAWngD,EAEjCk+B,EAAQ51B,EAAStI,GAAMk+B,EAAQl+B,GAIhC08G,EAAgBrxB,MAEV,CAINqxB,GAAiBrxB,EACjB,MAAMsxB,EAAMtxB,EAASqxB,EACrBz9G,KAAKu8G,iBAAkBt9E,EAAQ51B,EAAQ,EAAGq0G,EAAKx8D,GAIhDlhD,KAAK48G,iBAAmBa,GAKzBE,mBAAoB,SAAWvxB,GAE9B,MAAMntD,EAASj/B,KAAKi/B,OACnBiiB,EAASlhD,KAAKq9F,UACdh0F,EAAS63C,EAASlhD,KAAK28G,UAEe,IAAlC38G,KAAK68G,0BAIT78G,KAAKy8G,eAMNz8G,KAAKw8G,yBAA0Bv9E,EAAQ51B,EAAQ,EAAG+iF,EAAQlrC,GAC1DlhD,KAAK68G,0BAA4BzwB,GAKlC/e,MAAO,SAAWmwC,GAEjB,MAAMt8D,EAASlhD,KAAKq9F,UACnBp+D,EAASj/B,KAAKi/B,OACd51B,EAASm0G,EAAYt8D,EAASA,EAE9BkrC,EAASpsF,KAAK48G,iBACdgB,EAAiB59G,KAAK68G,yBAEtBnB,EAAU17G,KAAK07G,QAKhB,GAHA17G,KAAK48G,iBAAmB,EACxB58G,KAAK68G,yBAA2B,EAE3BzwB,EAAS,EAAI,CAIjB,MAAMyxB,EAAsB38D,EAASlhD,KAAK08G,WAE1C18G,KAAKu8G,iBACJt9E,EAAQ51B,EAAQw0G,EAAqB,EAAIzxB,EAAQlrC,GAI9C08D,EAAiB,GAIrB59G,KAAKw8G,yBAA0Bv9E,EAAQ51B,EAAQrJ,KAAK28G,UAAYz7D,EAAQ,EAAGA,GAI5E,IAAM,IAAIngD,EAAImgD,EAAQ15C,EAAI05C,EAASA,EAAQngD,IAAMyG,IAAMzG,EAEtD,GAAKk+B,EAAQl+B,KAAQk+B,EAAQl+B,EAAImgD,GAAW,CAI3Cw6D,EAAQhxD,SAAUzrB,EAAQ51B,GAC1B,QASHy0G,kBAAmB,WAElB,MAAMpC,EAAU17G,KAAK07G,QAEfz8E,EAASj/B,KAAKi/B,OACnBiiB,EAASlhD,KAAKq9F,UAEdwgB,EAAsB38D,EAASlhD,KAAK08G,WAErChB,EAAQqC,SAAU9+E,EAAQ4+E,GAG1B,IAAM,IAAI98G,EAAImgD,EAAQ15C,EAAIq2G,EAAqB98G,IAAMyG,IAAMzG,EAE1Dk+B,EAAQl+B,GAAMk+B,EAAQ4+E,EAAwB98G,EAAImgD,GAKnDlhD,KAAKy8G,eAELz8G,KAAK48G,iBAAmB,EACxB58G,KAAK68G,yBAA2B,GAKjCmB,qBAAsB,WAErB,MAAMH,EAAuC,EAAjB79G,KAAKq9F,UACjCr9F,KAAK07G,QAAQhxD,SAAU1qD,KAAKi/B,OAAQ4+E,IAIrCvB,4BAA6B,WAE5B,MAAM3d,EAAa3+F,KAAK28G,UAAY38G,KAAKq9F,UACnCuB,EAAWD,EAAa3+F,KAAKq9F,UAEnC,IAAM,IAAIt8F,EAAI49F,EAAY59F,EAAI69F,EAAU79F,IAEvCf,KAAKi/B,OAAQl+B,GAAM,GAMrBi7G,+BAAgC,WAE/Bh8G,KAAKs8G,8BACLt8G,KAAKi/B,OAAQj/B,KAAK28G,UAAY38G,KAAKq9F,UAAY,GAAM,GAItD8e,0BAA2B,WAE1B,MAAMxd,EAAa3+F,KAAK08G,WAAa18G,KAAKq9F,UACpC4gB,EAAcj+G,KAAK28G,UAAY38G,KAAKq9F,UAE1C,IAAM,IAAIt8F,EAAI,EAAGA,EAAIf,KAAKq9F,UAAWt8F,IAEpCf,KAAKi/B,OAAQg/E,EAAcl9G,GAAMf,KAAKi/B,OAAQ0/D,EAAa59F,IAS7Dm7G,QAAS,SAAWj9E,EAAQ5pB,EAAWonF,EAAW35F,EAAGo+C,GAEpD,GAAKp+C,GAAK,GAET,IAAM,IAAI/B,EAAI,EAAGA,IAAMmgD,IAAWngD,EAEjCk+B,EAAQ5pB,EAAYtU,GAAMk+B,EAAQw9D,EAAY17F,IAQjD+6G,OAAQ,SAAW78E,EAAQ5pB,EAAWonF,EAAW35F,GAEhD4R,EAAWqwF,UAAW9lE,EAAQ5pB,EAAW4pB,EAAQ5pB,EAAW4pB,EAAQw9D,EAAW35F,IAIhFi5G,eAAgB,SAAW98E,EAAQ5pB,EAAWonF,EAAW35F,EAAGo+C,GAE3D,MAAMg9D,EAAal+G,KAAKi8G,WAAa/6D,EAGrCxsC,EAAWwqF,wBAAyBjgE,EAAQi/E,EAAYj/E,EAAQ5pB,EAAW4pB,EAAQw9D,GAGnF/nF,EAAWqwF,UAAW9lE,EAAQ5pB,EAAW4pB,EAAQ5pB,EAAW4pB,EAAQi/E,EAAYp7G,IAIjFs5G,MAAO,SAAWn9E,EAAQ5pB,EAAWonF,EAAW35F,EAAGo+C,GAElD,MAAMn9C,EAAI,EAAIjB,EAEd,IAAM,IAAI/B,EAAI,EAAGA,IAAMmgD,IAAWngD,EAAI,CAErC,MAAMmf,EAAI7K,EAAYtU,EAEtBk+B,EAAQ/e,GAAM+e,EAAQ/e,GAAMnc,EAAIk7B,EAAQw9D,EAAY17F,GAAM+B,IAM5Du5G,cAAe,SAAWp9E,EAAQ5pB,EAAWonF,EAAW35F,EAAGo+C,GAE1D,IAAM,IAAIngD,EAAI,EAAGA,IAAMmgD,IAAWngD,EAAI,CAErC,MAAMmf,EAAI7K,EAAYtU,EAEtBk+B,EAAQ/e,GAAM+e,EAAQ/e,GAAM+e,EAAQw9D,EAAY17F,GAAM+B,MCnTzD,MACMq7G,GAAc,IAAIC,OAAQ,kBAAgC,KAK1DC,GAAY,mBACZC,GAAiB,KAPI,gBAOsBrrD,QAAS,MAAO,IAAO,IAIlEsrD,GAAe,kBAAkBltG,OAAO4hD,QAAS,KAAMorD,IAGvDG,GAAU,WAAWntG,OAAO4hD,QAAS,OAAQqrD,IAI7CG,GAAY,4BAA4BptG,OAAO4hD,QAAS,KAAMorD,IAI9DK,GAAc,uBAAuBrtG,OAAO4hD,QAAS,KAAMorD,IAE3DM,GAAW,IAAIP,OAClB,IACAG,GACAC,GACAC,GACAC,GACA,KAGGE,GAAwB,CAAE,WAAY,YAAa,SAEzD,SAASC,GAAWC,EAAapuD,EAAMquD,GAEtC,MAAMC,EAAaD,GAAsBE,GAAgBC,eAAgBxuD,GAEzE1wD,KAAKm/G,aAAeL,EACpB9+G,KAAKo/G,UAAYN,EAAYO,WAAY3uD,EAAMsuD,GAyDhD,SAASC,GAAiBK,EAAU5uD,EAAMsuD,GAEzCh/G,KAAK0wD,KAAOA,EACZ1wD,KAAKg/G,WAAaA,GAAcC,GAAgBC,eAAgBxuD,GAEhE1wD,KAAKu/G,KAAON,GAAgBO,SAAUF,EAAUt/G,KAAKg/G,WAAWS,WAAcH,EAE9Et/G,KAAKs/G,SAAWA,EA5DjBhiH,OAAOqC,OAAQk/G,GAAUjhH,UAAW,CAEnCmgH,SAAU,SAAWl9G,EAAOwI,GAE3BrJ,KAAK+rF,OAEL,MAAM2zB,EAAkB1/G,KAAKm/G,aAAaQ,gBACzCjE,EAAU17G,KAAKo/G,UAAWM,QAGV3/G,IAAZ27G,GAAwBA,EAAQqC,SAAUl9G,EAAOwI,IAIvDqhD,SAAU,SAAW7pD,EAAOwI,GAE3B,MAAMu2G,EAAW5/G,KAAKo/G,UAEtB,IAAM,IAAIr+G,EAAIf,KAAKm/G,aAAaQ,gBAAiBv9G,EAAIw9G,EAAS3+G,OAAQF,IAAMqB,IAAMrB,EAEjF6+G,EAAU7+G,GAAI2pD,SAAU7pD,EAAOwI,IAMjC0iF,KAAM,WAEL,MAAM6zB,EAAW5/G,KAAKo/G,UAEtB,IAAM,IAAIr+G,EAAIf,KAAKm/G,aAAaQ,gBAAiBv9G,EAAIw9G,EAAS3+G,OAAQF,IAAMqB,IAAMrB,EAEjF6+G,EAAU7+G,GAAIgrF,QAMhB8zB,OAAQ,WAEP,MAAMD,EAAW5/G,KAAKo/G,UAEtB,IAAM,IAAIr+G,EAAIf,KAAKm/G,aAAaQ,gBAAiBv9G,EAAIw9G,EAAS3+G,OAAQF,IAAMqB,IAAMrB,EAEjF6+G,EAAU7+G,GAAI8+G,YAoBjBviH,OAAOqC,OAAQs/G,GAAiB,CAE/BJ,UAAWA,GAEX3tG,OAAQ,SAAW4uG,EAAMpvD,EAAMsuD,GAE9B,OAASc,GAAQA,EAAKC,uBAMd,IAAId,GAAgBJ,UAAWiB,EAAMpvD,EAAMsuD,GAJ3C,IAAIC,GAAiBa,EAAMpvD,EAAMsuD,IAiB1CgB,iBAAkB,SAAW9vG,GAE5B,OAAOA,EAAK+iD,QAAS,MAAO,KAAMA,QAASkrD,GAAa,KAIzDe,eAAgB,SAAW/Y,GAE1B,MAAM8Z,EAAUtB,GAAS3jF,KAAMmrE,GAE/B,IAAO8Z,EAEN,MAAM,IAAI35G,MAAO,4CAA8C6/F,GAIhE,MAAM+Z,EAAU,CAEfT,SAAUQ,EAAS,GACnBE,WAAYF,EAAS,GACrBG,YAAaH,EAAS,GACtB5Z,aAAc4Z,EAAS,GACvBI,cAAeJ,EAAS,IAGnBK,EAAUJ,EAAQT,UAAYS,EAAQT,SAASc,YAAa,KAElE,QAAiBxgH,IAAZugH,IAAuC,IAAdA,EAAkB,CAE/C,MAAMH,EAAaD,EAAQT,SAAShF,UAAW6F,EAAU,IAMF,IAAlD1B,GAAsBz+G,QAASggH,KAEnCD,EAAQT,SAAWS,EAAQT,SAAShF,UAAW,EAAG6F,GAClDJ,EAAQC,WAAaA,GAMvB,GAA8B,OAAzBD,EAAQ7Z,cAAyD,IAAhC6Z,EAAQ7Z,aAAaplG,OAE1D,MAAM,IAAIqF,MAAO,+DAAiE6/F,GAInF,OAAO+Z,GAIRV,SAAU,SAAWM,EAAML,GAE1B,IAAOA,GAAyB,KAAbA,GAAgC,MAAbA,IAAmC,IAAfA,GAAoBA,IAAaK,EAAK5vG,MAAQuvG,IAAaK,EAAK7vG,KAEzH,OAAO6vG,EAKR,GAAKA,EAAKrwF,SAAW,CAEpB,MAAMk9D,EAAOmzB,EAAKrwF,SAASm9D,cAAe6yB,GAE1C,QAAc1/G,IAAT4sF,EAEJ,OAAOA,EAOT,GAAKmzB,EAAK1hG,SAAW,CAEpB,MAAMoiG,EAAoB,SAAWpiG,GAEpC,IAAM,IAAIrd,EAAI,EAAGA,EAAIqd,EAASnd,OAAQF,IAAO,CAE5C,MAAM0/G,EAAYriG,EAAUrd,GAE5B,GAAK0/G,EAAUvwG,OAASuvG,GAAYgB,EAAUxwG,OAASwvG,EAEtD,OAAOgB,EAIR,MAAMn9C,EAASk9C,EAAmBC,EAAUriG,UAE5C,GAAKklD,EAAS,OAAOA,EAItB,OAAO,MAIFo9C,EAAcF,EAAmBV,EAAK1hG,UAE5C,GAAKsiG,EAEJ,OAAOA,EAMT,OAAO,QAMTpjH,OAAOqC,OAAQs/G,GAAgBrhH,UAAW,CAGzC+iH,sBAAuB,aACvBC,sBAAuB,aAEvBC,YAAa,CACZC,OAAQ,EACRC,YAAa,EACbC,aAAc,EACdC,eAAgB,GAGjBC,WAAY,CACXC,KAAM,EACNC,YAAa,EACbC,uBAAwB,GAGzBC,oBAAqB,CAEpB,SAA0BriF,EAAQ51B,GAEjC41B,EAAQ51B,GAAWrJ,KAAKu/G,KAAMv/G,KAAKqmG,eAIpC,SAAyBpnE,EAAQ51B,GAEhC,MAAMgI,EAASrR,KAAKuhH,iBAEpB,IAAM,IAAIxgH,EAAI,EAAGqB,EAAIiP,EAAOpQ,OAAQF,IAAMqB,IAAMrB,EAE/Ck+B,EAAQ51B,KAAcgI,EAAQtQ,IAMhC,SAAgCk+B,EAAQ51B,GAEvC41B,EAAQ51B,GAAWrJ,KAAKuhH,iBAAkBvhH,KAAKqgH,gBAIhD,SAA2BphF,EAAQ51B,GAElCrJ,KAAKuhH,iBAAiBj4G,QAAS21B,EAAQ51B,KAMzCm4G,iCAAkC,CAEjC,CAGC,SAA0BviF,EAAQ51B,GAEjCrJ,KAAKyhH,aAAczhH,KAAKqmG,cAAiBpnE,EAAQ51B,IAIlD,SAAyC41B,EAAQ51B,GAEhDrJ,KAAKyhH,aAAczhH,KAAKqmG,cAAiBpnE,EAAQ51B,GACjDrJ,KAAKyhH,aAAajhF,aAAc,GAIjC,SAAoDvB,EAAQ51B,GAE3DrJ,KAAKyhH,aAAczhH,KAAKqmG,cAAiBpnE,EAAQ51B,GACjDrJ,KAAKyhH,aAAan2F,wBAAyB,IAI1C,CAIF,SAAyB2T,EAAQ51B,GAEhC,MAAMq4G,EAAO1hH,KAAKuhH,iBAElB,IAAM,IAAIxgH,EAAI,EAAGqB,EAAIs/G,EAAKzgH,OAAQF,IAAMqB,IAAMrB,EAE7C2gH,EAAM3gH,GAAMk+B,EAAQ51B,MAMtB,SAAwC41B,EAAQ51B,GAE/C,MAAMq4G,EAAO1hH,KAAKuhH,iBAElB,IAAM,IAAIxgH,EAAI,EAAGqB,EAAIs/G,EAAKzgH,OAAQF,IAAMqB,IAAMrB,EAE7C2gH,EAAM3gH,GAAMk+B,EAAQ51B,KAIrBrJ,KAAKyhH,aAAajhF,aAAc,GAIjC,SAAmDvB,EAAQ51B,GAE1D,MAAMq4G,EAAO1hH,KAAKuhH,iBAElB,IAAM,IAAIxgH,EAAI,EAAGqB,EAAIs/G,EAAKzgH,OAAQF,IAAMqB,IAAMrB,EAE7C2gH,EAAM3gH,GAAMk+B,EAAQ51B,KAIrBrJ,KAAKyhH,aAAan2F,wBAAyB,IAI1C,CAIF,SAAgC2T,EAAQ51B,GAEvCrJ,KAAKuhH,iBAAkBvhH,KAAKqgH,eAAkBphF,EAAQ51B,IAIvD,SAA+C41B,EAAQ51B,GAEtDrJ,KAAKuhH,iBAAkBvhH,KAAKqgH,eAAkBphF,EAAQ51B,GACtDrJ,KAAKyhH,aAAajhF,aAAc,GAIjC,SAA0DvB,EAAQ51B,GAEjErJ,KAAKuhH,iBAAkBvhH,KAAKqgH,eAAkBphF,EAAQ51B,GACtDrJ,KAAKyhH,aAAan2F,wBAAyB,IAI1C,CAIF,SAA6B2T,EAAQ51B,GAEpCrJ,KAAKuhH,iBAAiBn4G,UAAW61B,EAAQ51B,IAI1C,SAA4C41B,EAAQ51B,GAEnDrJ,KAAKuhH,iBAAiBn4G,UAAW61B,EAAQ51B,GACzCrJ,KAAKyhH,aAAajhF,aAAc,GAIjC,SAAuDvB,EAAQ51B,GAE9DrJ,KAAKuhH,iBAAiBn4G,UAAW61B,EAAQ51B,GACzCrJ,KAAKyhH,aAAan2F,wBAAyB,KAQ9CyyF,SAAU,SAA2B4D,EAAat4G,GAEjDrJ,KAAK+rF,OACL/rF,KAAK+9G,SAAU4D,EAAat4G,IAU7BqhD,SAAU,SAA2Bk3D,EAAav4G,GAEjDrJ,KAAK+rF,OACL/rF,KAAK0qD,SAAUk3D,EAAav4G,IAK7B0iF,KAAM,WAEL,IAAI01B,EAAezhH,KAAKu/G,KACxB,MAAMP,EAAah/G,KAAKg/G,WAElBmB,EAAanB,EAAWmB,WACxB9Z,EAAe2Y,EAAW3Y,aAChC,IAAIga,EAAgBrB,EAAWqB,cAe/B,GAbOoB,IAENA,EAAexC,GAAgBO,SAAUx/G,KAAKs/G,SAAUN,EAAWS,WAAcz/G,KAAKs/G,SAEtFt/G,KAAKu/G,KAAOkC,GAKbzhH,KAAK+9G,SAAW/9G,KAAK2gH,sBACrB3gH,KAAK0qD,SAAW1qD,KAAK4gH,uBAGda,EAGN,YADA77G,QAAQmE,MAAO,2DAA6D/J,KAAK0wD,KAAO,yBAKzF,GAAKyvD,EAAa,CAEjB,IAAIC,EAAcpB,EAAWoB,YAG7B,OAASD,GAER,IAAK,YAEJ,IAAOsB,EAAa/xF,SAGnB,YADA9pB,QAAQmE,MAAO,oFAAqF/J,MAKrG,IAAOyhH,EAAa/xF,SAASnB,UAG5B,YADA3oB,QAAQmE,MAAO,8GAA+G/J,MAK/HyhH,EAAeA,EAAa/xF,SAASnB,UAErC,MAED,IAAK,QAEJ,IAAOkzF,EAAahyF,SAGnB,YADA7pB,QAAQmE,MAAO,iFAAkF/J,MAQlGyhH,EAAeA,EAAahyF,SAASgsC,MAGrC,IAAM,IAAI16D,EAAI,EAAGA,EAAI0gH,EAAaxgH,OAAQF,IAEzC,GAAK0gH,EAAc1gH,GAAImP,OAASkwG,EAAc,CAE7CA,EAAcr/G,EACd,MAMF,MAED,QAEC,QAAoChB,IAA/B0hH,EAActB,GAGlB,YADAv6G,QAAQmE,MAAO,uEAAwE/J,MAKxFyhH,EAAeA,EAActB,GAK/B,QAAqBpgH,IAAhBqgH,EAA4B,CAEhC,QAAqCrgH,IAAhC0hH,EAAcrB,GAGlB,YADAx6G,QAAQmE,MAAO,wFAAyF/J,KAAMyhH,GAK/GA,EAAeA,EAAcrB,IAO/B,MAAMyB,EAAeJ,EAAcpb,GAEnC,QAAsBtmG,IAAjB8hH,EAA6B,CAEjC,MAAMpC,EAAWT,EAAWS,SAI5B,YAFA75G,QAAQmE,MAAO,+DAAiE01G,EAC/E,IAAMpZ,EAAe,wBAA0Bob,GAMjD,IAAIK,EAAa9hH,KAAKkhH,WAAWC,KAEjCnhH,KAAKyhH,aAAeA,OAEc1hH,IAA7B0hH,EAAajhF,YAEjBshF,EAAa9hH,KAAKkhH,WAAWE,iBAEsBrhH,IAAxC0hH,EAAan2F,yBAExBw2F,EAAa9hH,KAAKkhH,WAAWG,wBAK9B,IAAIU,EAAc/hH,KAAK6gH,YAAYC,OAEnC,QAAuB/gH,IAAlBsgH,EAA8B,CAIlC,GAAsB,0BAAjBha,EAA2C,CAK/C,IAAOob,EAAa1jG,SAGnB,YADAnY,QAAQmE,MAAO,sGAAuG/J,MAKvH,IAAKyhH,EAAa1jG,SAAS8hB,iBAmB1B,YADAj6B,QAAQmE,MAAO,oHAAqH/J,MAhBpI,IAAOyhH,EAAa1jG,SAASwhB,gBAG5B,YADA35B,QAAQmE,MAAO,sHAAuH/J,WAK1ED,IAAxD0hH,EAAa17E,sBAAuBs6E,KAExCA,EAAgBoB,EAAa17E,sBAAuBs6E,IAcvD0B,EAAc/hH,KAAK6gH,YAAYG,aAE/BhhH,KAAKuhH,iBAAmBM,EACxB7hH,KAAKqgH,cAAgBA,YAEiBtgH,IAA3B8hH,EAAaz4G,gBAAoDrJ,IAAzB8hH,EAAav4G,SAIhEy4G,EAAc/hH,KAAK6gH,YAAYI,eAE/BjhH,KAAKuhH,iBAAmBM,GAEb5wG,MAAMe,QAAS6vG,IAE1BE,EAAc/hH,KAAK6gH,YAAYE,YAE/B/gH,KAAKuhH,iBAAmBM,GAIxB7hH,KAAKqmG,aAAeA,EAKrBrmG,KAAK+9G,SAAW/9G,KAAKshH,oBAAqBS,GAC1C/hH,KAAK0qD,SAAW1qD,KAAKwhH,iCAAkCO,GAAeD,IAIvEjC,OAAQ,WAEP7/G,KAAKu/G,KAAO,KAIZv/G,KAAK+9G,SAAW/9G,KAAKgiH,kBACrBhiH,KAAK0qD,SAAW1qD,KAAKiiH,qBAOvB3kH,OAAOqC,OAAQs/G,GAAgBrhH,UAAW,CAGzCokH,kBAAmB/C,GAAgBrhH,UAAUmgH,SAC7CkE,kBAAmBhD,GAAgBrhH,UAAU8sD,WCrlB9CptD,OAAOqC,OAlDP,WAECK,KAAKiQ,KAAO,iBAGZjQ,KAAK4hE,SAAW3wD,MAAMrT,UAAUkD,MAAMhD,KAAMgM,WAE5C9J,KAAK2/G,gBAAkB,EAGvB,MAAMz+E,EAAU,GAChBlhC,KAAKkiH,eAAiBhhF,EAEtB,IAAM,IAAIngC,EAAI,EAAGqB,EAAI0H,UAAU7I,OAAQF,IAAMqB,IAAMrB,EAElDmgC,EAASp3B,UAAW/I,GAAIkP,MAASlP,EAIlCf,KAAKmiH,OAAS,GACdniH,KAAKoiH,aAAe,GACpBpiH,KAAKo/G,UAAY,GACjBp/G,KAAKqiH,uBAAyB,GAE9B,MAAM17E,EAAQ3mC,KAEdA,KAAKsiH,MAAQ,CAEZzkE,QAAS,CACJ0kE,YAEH,OAAO57E,EAAMi7B,SAAS3gE,QAGnBuhH,YAEH,OAAOxiH,KAAKuiH,MAAQ57E,EAAMg5E,kBAIxB8C,wBAEH,OAAO97E,EAAMy4E,UAAUn+G,UAQUrD,UAAW,CAE9CmiH,wBAAwB,EAExBp5G,IAAK,WAEJ,MAAMk3C,EAAU79C,KAAK4hE,SACpB8gD,EAAgB1iH,KAAKkiH,eACrBhJ,EAAQl5G,KAAKmiH,OACbQ,EAAc3iH,KAAKoiH,aACnBxC,EAAW5/G,KAAKo/G,UAChBwD,EAAYhD,EAAS3+G,OAEtB,IAAI4hH,EACHC,EAAWjlE,EAAQ58C,OACnB8hH,EAAiB/iH,KAAK2/G,gBAEvB,IAAM,IAAI5+G,EAAI,EAAGqB,EAAI0H,UAAU7I,OAAQF,IAAMqB,IAAMrB,EAAI,CAEtD,MAAMqc,EAAStT,UAAW/I,GACzBkP,EAAOmN,EAAOnN,KACf,IAAIzP,EAAQkiH,EAAezyG,GAE3B,QAAelQ,IAAVS,EAAsB,CAI1BA,EAAQsiH,IACRJ,EAAezyG,GAASzP,EACxBq9C,EAAQz9C,KAAMgd,GAId,IAAM,IAAI8C,EAAI,EAAG7d,EAAIugH,EAAW1iG,IAAM7d,IAAM6d,EAE3C0/F,EAAU1/F,GAAI9f,KAAM,IAAI6+G,GAAiB7hG,EAAQ87F,EAAOh5F,GAAKyiG,EAAaziG,UAIrE,GAAK1f,EAAQuiH,EAAiB,CAEpCF,EAAchlE,EAASr9C,GAIvB,MAAMwiH,IAAsBD,EAC3BE,EAAmBplE,EAASmlE,GAE7BN,EAAeO,EAAiBhzG,MAASzP,EACzCq9C,EAASr9C,GAAUyiH,EAEnBP,EAAezyG,GAAS+yG,EACxBnlE,EAASmlE,GAAqB5lG,EAI9B,IAAM,IAAI8C,EAAI,EAAG7d,EAAIugH,EAAW1iG,IAAM7d,IAAM6d,EAAI,CAE/C,MAAMgjG,EAAkBtD,EAAU1/F,GACjCijG,EAAaD,EAAiBF,GAE/B,IAAItH,EAAUwH,EAAiB1iH,GAE/B0iH,EAAiB1iH,GAAU2iH,OAEVpjH,IAAZ27G,IAMJA,EAAU,IAAIuD,GAAiB7hG,EAAQ87F,EAAOh5F,GAAKyiG,EAAaziG,KAIjEgjG,EAAiBF,GAAqBtH,QAI5B79D,EAASr9C,KAAYqiH,GAEhCj9G,QAAQmE,MAAO,sJAOjB/J,KAAK2/G,gBAAkBoD,GAIxB51F,OAAQ,WAEP,MAAM0wB,EAAU79C,KAAK4hE,SACpB8gD,EAAgB1iH,KAAKkiH,eACrBtC,EAAW5/G,KAAKo/G,UAChBwD,EAAYhD,EAAS3+G,OAEtB,IAAI8hH,EAAiB/iH,KAAK2/G,gBAE1B,IAAM,IAAI5+G,EAAI,EAAGqB,EAAI0H,UAAU7I,OAAQF,IAAMqB,IAAMrB,EAAI,CAEtD,MAAMqc,EAAStT,UAAW/I,GACzBkP,EAAOmN,EAAOnN,KACdzP,EAAQkiH,EAAezyG,GAExB,QAAelQ,IAAVS,GAAuBA,GAASuiH,EAAiB,CAIrD,MAAMK,EAAkBL,IACvBM,EAAoBxlE,EAASulE,GAE9BV,EAAeW,EAAkBpzG,MAASzP,EAC1Cq9C,EAASr9C,GAAU6iH,EAEnBX,EAAezyG,GAASmzG,EACxBvlE,EAASulE,GAAoBhmG,EAI7B,IAAM,IAAI8C,EAAI,EAAG7d,EAAIugH,EAAW1iG,IAAM7d,IAAM6d,EAAI,CAE/C,MAAMgjG,EAAkBtD,EAAU1/F,GACjCojG,EAAcJ,EAAiBE,GAC/B1H,EAAUwH,EAAiB1iH,GAE5B0iH,EAAiB1iH,GAAU8iH,EAC3BJ,EAAiBE,GAAoB1H,IAQxC17G,KAAK2/G,gBAAkBoD,GAKxBQ,QAAS,WAER,MAAM1lE,EAAU79C,KAAK4hE,SACpB8gD,EAAgB1iH,KAAKkiH,eACrBtC,EAAW5/G,KAAKo/G,UAChBwD,EAAYhD,EAAS3+G,OAEtB,IAAI8hH,EAAiB/iH,KAAK2/G,gBACzBmD,EAAWjlE,EAAQ58C,OAEpB,IAAM,IAAIF,EAAI,EAAGqB,EAAI0H,UAAU7I,OAAQF,IAAMqB,IAAMrB,EAAI,CAEtD,MACCkP,EADcnG,UAAW/I,GACXkP,KACdzP,EAAQkiH,EAAezyG,GAExB,QAAelQ,IAAVS,EAIJ,UAFOkiH,EAAezyG,GAEjBzP,EAAQuiH,EAAiB,CAI7B,MAAMC,IAAsBD,EAC3BE,EAAmBplE,EAASmlE,GAC5BpyD,IAAekyD,EACfU,EAAa3lE,EAAS+S,GAGvB8xD,EAAeO,EAAiBhzG,MAASzP,EACzCq9C,EAASr9C,GAAUyiH,EAGnBP,EAAec,EAAWvzG,MAAS+yG,EACnCnlE,EAASmlE,GAAqBQ,EAC9B3lE,EAAQ6e,MAIR,IAAM,IAAIx8C,EAAI,EAAG7d,EAAIugH,EAAW1iG,IAAM7d,IAAM6d,EAAI,CAE/C,MAAMgjG,EAAkBtD,EAAU1/F,GACjCijG,EAAaD,EAAiBF,GAC9BtzB,EAAOwzB,EAAiBtyD,GAEzBsyD,EAAiB1iH,GAAU2iH,EAC3BD,EAAiBF,GAAqBtzB,EACtCwzB,EAAgBxmD,WAIX,CAIN,MAAM9L,IAAekyD,EACpBU,EAAa3lE,EAAS+S,GAElBA,EAAY,IAEhB8xD,EAAec,EAAWvzG,MAASzP,GAIpCq9C,EAASr9C,GAAUgjH,EACnB3lE,EAAQ6e,MAIR,IAAM,IAAIx8C,EAAI,EAAG7d,EAAIugH,EAAW1iG,IAAM7d,IAAM6d,EAAI,CAE/C,MAAMgjG,EAAkBtD,EAAU1/F,GAElCgjG,EAAiB1iH,GAAU0iH,EAAiBtyD,GAC5CsyD,EAAgBxmD,QAUpB18D,KAAK2/G,gBAAkBoD,GAMxB1D,WAAY,SAAW3uD,EAAMsuD,GAK5B,MAAMyE,EAAgBzjH,KAAKqiH,uBAC3B,IAAI7hH,EAAQijH,EAAe/yD,GAC3B,MAAMkvD,EAAW5/G,KAAKo/G,UAEtB,QAAer/G,IAAVS,EAAsB,OAAOo/G,EAAUp/G,GAE5C,MAAM04G,EAAQl5G,KAAKmiH,OAClBQ,EAAc3iH,KAAKoiH,aACnBvkE,EAAU79C,KAAK4hE,SACfkhD,EAAWjlE,EAAQ58C,OACnB8hH,EAAiB/iH,KAAK2/G,gBACtBuD,EAAkB,IAAIjyG,MAAO6xG,GAE9BtiH,EAAQo/G,EAAS3+G,OAEjBwiH,EAAe/yD,GAASlwD,EAExB04G,EAAM94G,KAAMswD,GACZiyD,EAAYviH,KAAM4+G,GAClBY,EAASx/G,KAAM8iH,GAEf,IAAM,IAAIniH,EAAIgiH,EAAgB3gH,EAAIy7C,EAAQ58C,OAAQF,IAAMqB,IAAMrB,EAAI,CAEjE,MAAMqc,EAASygC,EAAS98C,GACxBmiH,EAAiBniH,GAAM,IAAIk+G,GAAiB7hG,EAAQszC,EAAMsuD,GAI3D,OAAOkE,GAIRQ,aAAc,SAAWhzD,GAKxB,MAAM+yD,EAAgBzjH,KAAKqiH,uBAC1B7hH,EAAQijH,EAAe/yD,GAExB,QAAe3wD,IAAVS,EAAsB,CAE1B,MAAM04G,EAAQl5G,KAAKmiH,OAClBQ,EAAc3iH,KAAKoiH,aACnBxC,EAAW5/G,KAAKo/G,UAChBuE,EAAoB/D,EAAS3+G,OAAS,EACtC2iH,EAAehE,EAAU+D,GAG1BF,EAFoB/yD,EAAMizD,IAEUnjH,EAEpCo/G,EAAUp/G,GAAUojH,EACpBhE,EAASljD,MAETimD,EAAaniH,GAAUmiH,EAAagB,GACpChB,EAAYjmD,MAEZw8C,EAAO14G,GAAU04G,EAAOyK,GACxBzK,EAAMx8C,UCvXT,MAAMmnD,GAEL/9G,YAAag+G,EAAO5mB,EAAM6mB,EAAY,KAAM3kB,EAAYlC,EAAKkC,WAE5Dp/F,KAAKgkH,OAASF,EACd9jH,KAAKikH,MAAQ/mB,EACbl9F,KAAKkkH,WAAaH,EAClB/jH,KAAKo/F,UAAYA,EAEjB,MAAMjC,EAASD,EAAKC,OACnBgnB,EAAUhnB,EAAOl8F,OACjBmjH,EAAe,IAAInzG,MAAOkzG,GAErBE,EAAsB,CAC3BhiB,YAAajjG,EACbkjG,UAAWljG,GAGZ,IAAM,IAAI2B,EAAI,EAAGA,IAAMojH,IAAYpjH,EAAI,CAEtC,MAAM89F,EAAc1B,EAAQp8F,GAAIu9F,kBAAmB,MACnD8lB,EAAcrjH,GAAM89F,EACpBA,EAAYoD,SAAWoiB,EAIxBrkH,KAAKskH,qBAAuBD,EAE5BrkH,KAAKukH,cAAgBH,EAGrBpkH,KAAKwkH,kBAAoB,IAAIvzG,MAAOkzG,GAEpCnkH,KAAKykH,YAAc,KACnBzkH,KAAK0kH,kBAAoB,KAEzB1kH,KAAK2kH,sBAAwB,KAC7B3kH,KAAK4kH,mBAAqB,KAE1B5kH,KAAK6kH,K7TsGmB,K6TrGxB7kH,KAAK8kH,YAAe,EAIpB9kH,KAAK+kH,WAAa,KAIlB/kH,KAAK4uC,KAAO,EAEZ5uC,KAAK8jG,UAAY,EACjB9jG,KAAKglH,oBAAsB,EAE3BhlH,KAAKosF,OAAS,EACdpsF,KAAKilH,iBAAmB,EAExBjlH,KAAKklH,YAActlF,EAAAA,EAEnB5/B,KAAKmlH,QAAS,EACdnlH,KAAK6qC,SAAU,EAEf7qC,KAAKolH,mBAAoB,EAEzBplH,KAAKqlH,kBAAmB,EACxBrlH,KAAKslH,gBAAiB,EAMvBC,OAIC,OAFAvlH,KAAKgkH,OAAOwB,gBAAiBxlH,MAEtBA,KAIR+uC,OAIC,OAFA/uC,KAAKgkH,OAAOyB,kBAAmBzlH,MAExBA,KAAKohD,QAIbA,QASC,OAPAphD,KAAKmlH,QAAS,EACdnlH,KAAK6qC,SAAU,EAEf7qC,KAAK4uC,KAAO,EACZ5uC,KAAK8kH,YAAe,EACpB9kH,KAAK+kH,WAAa,KAEX/kH,KAAK0lH,aAAaC,cAI1BC,YAEC,OAAO5lH,KAAK6qC,UAAa7qC,KAAKmlH,QAA6B,IAAnBnlH,KAAK8jG,WACxB,OAApB9jG,KAAK+kH,YAAuB/kH,KAAKgkH,OAAO6B,gBAAiB7lH,MAK3D8lH,cAEC,OAAO9lH,KAAKgkH,OAAO6B,gBAAiB7lH,MAIrC+lH,QAASn3E,GAIR,OAFA5uC,KAAK+kH,WAAan2E,EAEX5uC,KAIRgmH,QAASviE,EAAMyhE,GAKd,OAHAllH,KAAK6kH,KAAOphE,EACZzjD,KAAKklH,YAAcA,EAEZllH,KASRimH,mBAAoB75B,GAOnB,OALApsF,KAAKosF,OAASA,EAGdpsF,KAAKilH,iBAAmBjlH,KAAK6qC,QAAUuhD,EAAS,EAEzCpsF,KAAK0lH,aAKbQ,qBAEC,OAAOlmH,KAAKilH,iBAIbkB,OAAQrlB,GAEP,OAAO9gG,KAAKomH,gBAAiBtlB,EAAU,EAAG,GAI3CulB,QAASvlB,GAER,OAAO9gG,KAAKomH,gBAAiBtlB,EAAU,EAAG,GAI3CwlB,cAAeC,EAAezlB,EAAU0lB,GAKvC,GAHAD,EAAcF,QAASvlB,GACvB9gG,KAAKmmH,OAAQrlB,GAER0lB,EAAO,CAEX,MAAMC,EAAiBzmH,KAAKikH,MAAMnjB,SACjC4lB,EAAkBH,EAActC,MAAMnjB,SAEtC6lB,EAAgBD,EAAkBD,EAClCG,EAAgBH,EAAiBC,EAElCH,EAAcC,KAAM,EAAKG,EAAe7lB,GACxC9gG,KAAKwmH,KAAMI,EAAe,EAAK9lB,GAIhC,OAAO9gG,KAIR6mH,YAAaC,EAAchmB,EAAU0lB,GAEpC,OAAOM,EAAaR,cAAetmH,KAAM8gG,EAAU0lB,GAIpDd,aAEC,MAAMqB,EAAoB/mH,KAAK4kH,mBAS/B,OAP2B,OAAtBmC,IAEJ/mH,KAAK4kH,mBAAqB,KAC1B5kH,KAAKgkH,OAAOgD,4BAA6BD,IAInC/mH,KASRinH,sBAAuBnjB,GAKtB,OAHA9jG,KAAK8jG,UAAYA,EACjB9jG,KAAKglH,oBAAsBhlH,KAAKmlH,OAAS,EAAIrhB,EAEtC9jG,KAAK2lH,cAKbuB,wBAEC,OAAOlnH,KAAKglH,oBAIbmC,YAAarmB,GAIZ,OAFA9gG,KAAK8jG,UAAY9jG,KAAKikH,MAAMnjB,SAAWA,EAEhC9gG,KAAK2lH,cAIbyB,SAAUC,GAKT,OAHArnH,KAAK4uC,KAAOy4E,EAAOz4E,KACnB5uC,KAAK8jG,UAAYujB,EAAOvjB,UAEjB9jG,KAAK2lH,cAIb2B,KAAMxmB,GAEL,OAAO9gG,KAAKwmH,KAAMxmH,KAAKglH,oBAAqB,EAAGlkB,GAIhD0lB,KAAMe,EAAgBC,EAAc1mB,GAEnC,MAAMgjB,EAAQ9jH,KAAKgkH,OAClByD,EAAM3D,EAAMl1E,KACZk1D,EAAY9jG,KAAK8jG,UAElB,IAAIjF,EAAc7+F,KAAK2kH,sBAEF,OAAhB9lB,IAEJA,EAAcilB,EAAM4D,0BACpB1nH,KAAK2kH,sBAAwB9lB,GAI9B,MAAMvC,EAAQuC,EAAYS,mBACzBvvE,EAAS8uE,EAAYU,aAQtB,OANAjD,EAAO,GAAMmrB,EACbnrB,EAAO,GAAMmrB,EAAM3mB,EAEnB/wE,EAAQ,GAAMw3F,EAAiBzjB,EAC/B/zE,EAAQ,GAAMy3F,EAAe1jB,EAEtB9jG,KAIR2lH,cAEC,MAAMgC,EAAuB3nH,KAAK2kH,sBASlC,OAP8B,OAAzBgD,IAEJ3nH,KAAK2kH,sBAAwB,KAC7B3kH,KAAKgkH,OAAOgD,4BAA6BW,IAInC3nH,KAMR4nH,WAEC,OAAO5nH,KAAKgkH,OAIb6D,UAEC,OAAO7nH,KAAKikH,MAIb6D,UAEC,OAAO9nH,KAAKkkH,YAAclkH,KAAKgkH,OAAO+D,MAMvCC,QAASp5E,EAAMq5E,EAAWC,EAAe1K,GAIxC,IAAOx9G,KAAK6qC,QAKX,YADA7qC,KAAKmoH,cAAev5E,GAKrB,MAAMm1D,EAAY/jG,KAAK+kH,WAEvB,GAAmB,OAAdhhB,EAAqB,CAIzB,MAAMqkB,GAAgBx5E,EAAOm1D,GAAcmkB,EAC3C,GAAKE,EAAc,GAAuB,IAAlBF,EAEvB,OAMDloH,KAAK+kH,WAAa,KAClBkD,EAAYC,EAAgBE,EAM7BH,GAAajoH,KAAKqoH,iBAAkBz5E,GACpC,MAAM05E,EAAWtoH,KAAKuoH,YAAaN,GAK7B77B,EAASpsF,KAAKmoH,cAAev5E,GAEnC,GAAKw9C,EAAS,EAAI,CAEjB,MAAMg4B,EAAepkH,KAAKukH,cACpBiE,EAAiBxoH,KAAKwkH,kBAE5B,G7TvNuC,O6TuN9BxkH,KAAKo/F,UAIZ,IAAM,IAAIl/E,EAAI,EAAG7d,EAAI+hH,EAAanjH,OAAQif,IAAM7d,IAAM6d,EAErDkkG,EAAclkG,GAAI4+E,SAAUwpB,GAC5BE,EAAgBtoG,GAAIy9F,mBAAoBvxB,QASzC,IAAM,IAAIlsE,EAAI,EAAG7d,EAAI+hH,EAAanjH,OAAQif,IAAM7d,IAAM6d,EAErDkkG,EAAclkG,GAAI4+E,SAAUwpB,GAC5BE,EAAgBtoG,GAAIq9F,WAAYC,EAAWpxB,IAUhD+7B,cAAev5E,GAEd,IAAIw9C,EAAS,EAEb,GAAKpsF,KAAK6qC,QAAU,CAEnBuhD,EAASpsF,KAAKosF,OACd,MAAMyS,EAAc7+F,KAAK4kH,mBAEzB,GAAqB,OAAhB/lB,EAAuB,CAE3B,MAAM4pB,EAAmB5pB,EAAYC,SAAUlwD,GAAQ,GAEvDw9C,GAAUq8B,EAEL75E,EAAOiwD,EAAYS,mBAAoB,KAE3Ct/F,KAAK0lH,aAEqB,IAArB+C,IAGJzoH,KAAK6qC,SAAU,KAWnB,OADA7qC,KAAKilH,iBAAmB74B,EACjBA,EAIRi8B,iBAAkBz5E,GAEjB,IAAIk1D,EAAY,EAEhB,IAAO9jG,KAAKmlH,OAAS,CAEpBrhB,EAAY9jG,KAAK8jG,UAEjB,MAAMjF,EAAc7+F,KAAK2kH,sBAEJ,OAAhB9lB,IAIJiF,GAFyBjF,EAAYC,SAAUlwD,GAAQ,GAIlDA,EAAOiwD,EAAYS,mBAAoB,KAE3Ct/F,KAAK2lH,cAEc,IAAd7hB,EAGJ9jG,KAAKmlH,QAAS,EAKdnlH,KAAK8jG,UAAYA,IAWrB,OADA9jG,KAAKglH,oBAAsBlhB,EACpBA,EAIRykB,YAAaN,GAEZ,MAAMnnB,EAAW9gG,KAAKikH,MAAMnjB,SACtB+jB,EAAO7kH,KAAK6kH,KAElB,IAAIj2E,EAAO5uC,KAAK4uC,KAAOq5E,EACnBS,EAAY1oH,KAAK8kH,WAErB,MAAM6D,E7TpVoB,O6ToVP9D,EAEnB,GAAmB,IAAdoD,EAEJ,OAAqB,IAAhBS,EAA2B95E,EAEvB+5E,GAAkC,IAAR,EAAZD,GAA0B5nB,EAAWlyD,EAAOA,EAIpE,G7ThWsB,O6TgWjBi2E,EAAoB,EAEH,IAAhB6D,IAIJ1oH,KAAK8kH,WAAa,EAClB9kH,KAAK4oH,aAAa,GAAM,GAAM,IAI/BC,EAAa,CAEZ,GAAKj6E,GAAQkyD,EAEZlyD,EAAOkyD,MAED,MAAKlyD,EAAO,GAIZ,CAEN5uC,KAAK4uC,KAAOA,EAEZ,MAAMi6E,EANNj6E,EAAO,EAUH5uC,KAAKolH,kBAAoBplH,KAAKmlH,QAAS,EACvCnlH,KAAK6qC,SAAU,EAEpB7qC,KAAK4uC,KAAOA,EAEZ5uC,KAAKgkH,OAAOtjH,cAAe,CAC1Bb,KAAM,WAAYwnH,OAAQrnH,KAC1BshB,UAAW2mG,EAAY,GAAM,EAAI,SAK7B,CAwBN,IAtBqB,IAAhBS,IAICT,GAAa,GAEjBS,EAAY,EAEZ1oH,KAAK4oH,aAAa,EAA2B,IAArB5oH,KAAKklH,YAAmByD,IAQhD3oH,KAAK4oH,YAAkC,IAArB5oH,KAAKklH,aAAmB,EAAMyD,IAM7C/5E,GAAQkyD,GAAYlyD,EAAO,EAAI,CAInC,MAAMk6E,EAAYxnH,KAAKoC,MAAOkrC,EAAOkyD,GACrClyD,GAAQkyD,EAAWgoB,EAEnBJ,GAAapnH,KAAK8B,IAAK0lH,GAEvB,MAAMC,EAAU/oH,KAAKklH,YAAcwD,EAEnC,GAAKK,GAAW,EAIV/oH,KAAKolH,kBAAoBplH,KAAKmlH,QAAS,EACvCnlH,KAAK6qC,SAAU,EAEpB+D,EAAOq5E,EAAY,EAAInnB,EAAW,EAElC9gG,KAAK4uC,KAAOA,EAEZ5uC,KAAKgkH,OAAOtjH,cAAe,CAC1Bb,KAAM,WAAYwnH,OAAQrnH,KAC1BshB,UAAW2mG,EAAY,EAAI,GAAM,QAG5B,CAIN,GAAiB,IAAZc,EAAgB,CAIpB,MAAMC,EAAUf,EAAY,EAC5BjoH,KAAK4oH,YAAaI,GAAWA,EAASL,QAItC3oH,KAAK4oH,aAAa,GAAO,EAAOD,GAIjC3oH,KAAK8kH,WAAa4D,EAElB1oH,KAAK4uC,KAAOA,EAEZ5uC,KAAKgkH,OAAOtjH,cAAe,CAC1Bb,KAAM,OAAQwnH,OAAQrnH,KAAM8oH,UAAWA,UAOzC9oH,KAAK4uC,KAAOA,EAIb,GAAK+5E,GAAkC,IAAR,EAAZD,GAIlB,OAAO5nB,EAAWlyD,EAMpB,OAAOA,EAIRg6E,YAAaI,EAASC,EAAON,GAE5B,MAAM1mB,EAAWjiG,KAAKskH,qBAEjBqE,GAEJ1mB,EAASI,YAAchjG,EACvB4iG,EAASK,UAAYjjG,IAQpB4iG,EAASI,YAFL2mB,EAEmBhpH,KAAKqlH,iBAAmBhmH,EAAkBD,EAI1CE,EAMvB2iG,EAASK,UAFL2mB,EAEiBjpH,KAAKslH,eAAiBjmH,EAAkBD,EAItCE,GAQ1B8mH,gBAAiBtlB,EAAUooB,EAAWC,GAErC,MAAMrF,EAAQ9jH,KAAKgkH,OAAQyD,EAAM3D,EAAMl1E,KACvC,IAAIiwD,EAAc7+F,KAAK4kH,mBAEF,OAAhB/lB,IAEJA,EAAcilB,EAAM4D,0BACpB1nH,KAAK4kH,mBAAqB/lB,GAI3B,MAAMvC,EAAQuC,EAAYS,mBACzBvvE,EAAS8uE,EAAYU,aAOtB,OALAjD,EAAO,GAAMmrB,EACb13F,EAAQ,GAAMm5F,EACd5sB,EAAO,GAAMmrB,EAAM3mB,EACnB/wE,EAAQ,GAAMo5F,EAEPnpH,MC3qBT,SAASopH,GAAgBtJ,GAExB9/G,KAAK+nH,MAAQjI,EACb9/G,KAAKqpH,qBACLrpH,KAAKspH,WAAa,EAElBtpH,KAAK4uC,KAAO,EAEZ5uC,KAAK8jG,UAAY,ECdlB,SAASylB,GAA4B1oH,EAAOqgD,EAAQL,GAEnDupC,GAAkBtsF,KAAMkC,KAAMa,EAAOqgD,GAErClhD,KAAK6gD,iBAAmBA,GAAoB,ECN7C,SAAS2oE,GAAmBvqF,EAAQp/B,EAAMk9B,EAAUgT,EAAarzB,GAEhE1c,KAAKi/B,OAASA,EACdj/B,KAAKH,KAAOA,EACZG,KAAK+8B,SAAWA,EAChB/8B,KAAK+vC,YAAcA,EACnB/vC,KAAK0c,MAAQA,EAEb1c,KAAK2Q,QAAU,ECLhB,SAAS84G,GAAWpoG,EAAQC,EAAWwH,EAAMC,GAE5C/oB,KAAKuhB,IAAM,IAAIH,GAAKC,EAAQC,GAG5BthB,KAAK8oB,KAAOA,GAAQ,EACpB9oB,KAAK+oB,IAAMA,GAAO6W,EAAAA,EAClB5/B,KAAKga,OAAS,KACdha,KAAKoqB,OAAS,IAAIR,GAElB5pB,KAAKguF,OAAS,CACb07B,KAAM,GACNz7B,KAAM,CAAElE,UAAW,GACnB4/B,IAAK,GACLx6B,OAAQ,CAAEpF,UAAW,GACrB6/B,OAAQ,IAGTtsH,OAAO2tB,iBAAkBjrB,KAAKguF,OAAQ,CACrC67B,WAAY,CACXpsH,IAAK,WAGJ,OADAmI,QAAQC,KAAM,yEACP7F,KAAKmvF,WAQhB,SAAS26B,GAASjlH,EAAGC,GAEpB,OAAOD,EAAE8nB,SAAW7nB,EAAE6nB,SAIvB,SAASo9F,GAAiB3sG,EAAQkoB,EAAWY,EAAYlW,GAQxD,GANK5S,EAAOgN,OAAO1b,KAAM42B,EAAUlb,SAElChN,EAAO0Q,QAASwX,EAAWY,IAIT,IAAdlW,EAAqB,CAEzB,MAAM5R,EAAWhB,EAAOgB,SAExB,IAAM,IAAIrd,EAAI,EAAGC,EAAIod,EAASnd,OAAQF,EAAIC,EAAGD,IAE5CgpH,GAAiB3rG,EAAUrd,GAAKukC,EAAWY,GAAY,IHlC1DkjF,GAAexrH,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQxR,EAAgB9B,WAAa,CAErFkI,YAAasjH,GAEbY,YAAa,SAAW3C,EAAQ4C,GAE/B,MAAMnK,EAAOuH,EAAOnD,YAAclkH,KAAK+nH,MACtC5qB,EAASkqB,EAAOpD,MAAM9mB,OACtBgnB,EAAUhnB,EAAOl8F,OACjB2+G,EAAWyH,EAAO7C,kBAClBJ,EAAeiD,EAAO9C,cACtB2F,EAAWpK,EAAK7vG,KAChBk6G,EAAiBnqH,KAAKoqH,uBAEvB,IAAIC,EAAiBF,EAAgBD,QAEbnqH,IAAnBsqH,IAEJA,EAAiB,GACjBF,EAAgBD,GAAaG,GAI9B,IAAM,IAAItpH,EAAI,EAAGA,IAAMojH,IAAYpjH,EAAI,CAEtC,MAAMq8F,EAAQD,EAAQp8F,GACrBolG,EAAY/I,EAAMltF,KAEnB,IAAIwrG,EAAU2O,EAAgBlkB,GAE9B,QAAiBpmG,IAAZ27G,EAEJkE,EAAU7+G,GAAM26G,MAEV,CAIN,GAFAA,EAAUkE,EAAU7+G,QAEHhB,IAAZ27G,EAAwB,CAIC,OAAxBA,EAAQ+I,gBAET/I,EAAQqB,eACX/8G,KAAKsqH,oBAAqB5O,EAASwO,EAAU/jB,IAI9C,SAID,MAAMz1C,EAAOu5D,GAAmBA,EAC/BzF,kBAAmBzjH,GAAI26G,QAAQsD,WAEhCtD,EAAU,IAAID,GACbwD,GAAgB/tG,OAAQ4uG,EAAM3Z,EAAWz1C,GACzC0sC,EAAMa,cAAeb,EAAME,kBAEzBoe,EAAQqB,eACX/8G,KAAKsqH,oBAAqB5O,EAASwO,EAAU/jB,GAE7CyZ,EAAU7+G,GAAM26G,EAIjB0I,EAAcrjH,GAAIg+F,aAAe2c,EAAQz8E,SAM3CumF,gBAAiB,SAAW6B,GAE3B,IAAOrnH,KAAK6lH,gBAAiBwB,GAAW,CAEvC,GAA4B,OAAvBA,EAAO5C,YAAuB,CAKlC,MAAMyF,GAAa7C,EAAOnD,YAAclkH,KAAK+nH,OAAQ93G,KACpDs6G,EAAWlD,EAAOpD,MAAMh0G,KACxBu6G,EAAiBxqH,KAAKyqH,eAAgBF,GAEvCvqH,KAAKgqH,YAAa3C,EACjBmD,GAAkBA,EAAeE,aAAc,IAEhD1qH,KAAK2qH,mBAAoBtD,EAAQkD,EAAUL,GAI5C,MAAMtK,EAAWyH,EAAO7C,kBAGxB,IAAM,IAAIzjH,EAAI,EAAGqB,EAAIw9G,EAAS3+G,OAAQF,IAAMqB,IAAMrB,EAAI,CAErD,MAAM26G,EAAUkE,EAAU7+G,GAEG,GAAxB26G,EAAQoB,aAEZ98G,KAAK4qH,aAAclP,GACnBA,EAAQoC,qBAMV99G,KAAK6qH,YAAaxD,KAMpB5B,kBAAmB,SAAW4B,GAE7B,GAAKrnH,KAAK6lH,gBAAiBwB,GAAW,CAErC,MAAMzH,EAAWyH,EAAO7C,kBAGxB,IAAM,IAAIzjH,EAAI,EAAGqB,EAAIw9G,EAAS3+G,OAAQF,IAAMqB,IAAMrB,EAAI,CAErD,MAAM26G,EAAUkE,EAAU7+G,GAEG,KAArB26G,EAAQoB,WAEfpB,EAAQsC,uBACRh+G,KAAK8qH,iBAAkBpP,IAMzB17G,KAAK+qH,gBAAiB1D,KAQxBgC,mBAAoB,WAEnBrpH,KAAKgrH,SAAW,GAChBhrH,KAAKirH,gBAAkB,EAEvBjrH,KAAKyqH,eAAiB,GAQtBzqH,KAAKo/G,UAAY,GACjBp/G,KAAKkrH,iBAAmB,EAExBlrH,KAAKoqH,uBAAyB,GAG9BpqH,KAAKmrH,qBAAuB,GAC5BnrH,KAAKorH,4BAA8B,EAEnC,MAAMzkF,EAAQ3mC,KAEdA,KAAKsiH,MAAQ,CAEZ+I,QAAS,CACJ9I,YAEH,OAAO57E,EAAMqkF,SAAS/pH,QAGnBuhH,YAEH,OAAO77E,EAAMskF,kBAIfrL,SAAU,CACL2C,YAEH,OAAO57E,EAAMy4E,UAAUn+G,QAGpBuhH,YAEH,OAAO77E,EAAMukF,mBAIfI,oBAAqB,CAChB/I,YAEH,OAAO57E,EAAMwkF,qBAAqBlqH,QAG/BuhH,YAEH,OAAO77E,EAAMykF,gCAWjBvF,gBAAiB,SAAWwB,GAE3B,MAAM7mH,EAAQ6mH,EAAO5C,YACrB,OAAiB,OAAVjkH,GAAkBA,EAAQR,KAAKirH,iBAIvCN,mBAAoB,SAAWtD,EAAQkD,EAAUL,GAEhD,MAAMmB,EAAUrrH,KAAKgrH,SACpBO,EAAgBvrH,KAAKyqH,eAEtB,IAAID,EAAiBe,EAAehB,GAEpC,QAAwBxqH,IAAnByqH,EAEJA,EAAiB,CAEhBE,aAAc,CAAErD,GAChBmE,aAAc,IAIfnE,EAAO3C,kBAAoB,EAE3B6G,EAAehB,GAAaC,MAEtB,CAEN,MAAME,EAAeF,EAAeE,aAEpCrD,EAAO3C,kBAAoBgG,EAAazpH,OACxCypH,EAAatqH,KAAMinH,GAIpBA,EAAO5C,YAAc4G,EAAQpqH,OAC7BoqH,EAAQjrH,KAAMinH,GAEdmD,EAAegB,aAActB,GAAa7C,GAI3CoE,sBAAuB,SAAWpE,GAEjC,MAAMgE,EAAUrrH,KAAKgrH,SACpBU,EAAqBL,EAASA,EAAQpqH,OAAS,GAC/C0qH,EAAatE,EAAO5C,YAErBiH,EAAmBjH,YAAckH,EACjCN,EAASM,GAAeD,EACxBL,EAAQ3uD,MAER2qD,EAAO5C,YAAc,KAGrB,MAAM8F,EAAWlD,EAAOpD,MAAMh0G,KAC7Bs7G,EAAgBvrH,KAAKyqH,eACrBD,EAAiBe,EAAehB,GAChCqB,EAAsBpB,EAAeE,aAErCmB,EACCD,EAAqBA,EAAoB3qH,OAAS,GAEnD6qH,EAAmBzE,EAAO3C,kBAE3BmH,EAAgBnH,kBAAoBoH,EACpCF,EAAqBE,GAAqBD,EAC1CD,EAAoBlvD,MAEpB2qD,EAAO3C,kBAAoB,YAGN8F,EAAegB,cACtBnE,EAAOnD,YAAclkH,KAAK+nH,OAAQ93G,MAIZ,IAA/B27G,EAAoB3qH,eAEjBsqH,EAAehB,GAIvBvqH,KAAK+rH,iCAAkC1E,IAIxC0E,iCAAkC,SAAW1E,GAE5C,MAAMzH,EAAWyH,EAAO7C,kBAExB,IAAM,IAAIzjH,EAAI,EAAGqB,EAAIw9G,EAAS3+G,OAAQF,IAAMqB,IAAMrB,EAAI,CAErD,MAAM26G,EAAUkE,EAAU7+G,GAES,KAA3B26G,EAAQqB,gBAEf/8G,KAAKgsH,uBAAwBtQ,KAQhCmP,YAAa,SAAWxD,GAQvB,MAAMgE,EAAUrrH,KAAKgrH,SACpBiB,EAAY5E,EAAO5C,YAEnByH,EAAkBlsH,KAAKirH,kBAEvBkB,EAAsBd,EAASa,GAEhC7E,EAAO5C,YAAcyH,EACrBb,EAASa,GAAoB7E,EAE7B8E,EAAoB1H,YAAcwH,EAClCZ,EAASY,GAAcE,GAIxBpB,gBAAiB,SAAW1D,GAQ3B,MAAMgE,EAAUrrH,KAAKgrH,SACpBiB,EAAY5E,EAAO5C,YAEnB2H,IAAwBpsH,KAAKirH,gBAE7BoB,EAAmBhB,EAASe,GAE7B/E,EAAO5C,YAAc2H,EACrBf,EAASe,GAAuB/E,EAEhCgF,EAAiB5H,YAAcwH,EAC/BZ,EAASY,GAAcI,GAMxB/B,oBAAqB,SAAW5O,EAASwO,EAAU/jB,GAElD,MAAMgkB,EAAiBnqH,KAAKoqH,uBAC3BxK,EAAW5/G,KAAKo/G,UAEjB,IAAIkN,EAAgBnC,EAAgBD,QAEbnqH,IAAlBusH,IAEJA,EAAgB,GAChBnC,EAAgBD,GAAaoC,GAI9BA,EAAenmB,GAAcuV,EAE7BA,EAAQ+I,YAAc7E,EAAS3+G,OAC/B2+G,EAASx/G,KAAMs7G,IAIhBsQ,uBAAwB,SAAWtQ,GAElC,MAAMkE,EAAW5/G,KAAKo/G,UACrBmN,EAAc7Q,EAAQA,QACtBwO,EAAWqC,EAAYjN,SAASrvG,KAChCk2F,EAAYomB,EAAY77D,KACxBy5D,EAAiBnqH,KAAKoqH,uBACtBkC,EAAgBnC,EAAgBD,GAEhCsC,EAAsB5M,EAAUA,EAAS3+G,OAAS,GAClD0qH,EAAajQ,EAAQ+I,YAEtB+H,EAAoB/H,YAAckH,EAClC/L,EAAU+L,GAAea,EACzB5M,EAASljD,aAEF4vD,EAAenmB,GAEuB,IAAxC7oG,OAAOymC,KAAMuoF,GAAgBrrH,eAE1BkpH,EAAgBD,IAMzBU,aAAc,SAAWlP,GAExB,MAAMkE,EAAW5/G,KAAKo/G,UACrB6M,EAAYvQ,EAAQ+I,YAEpByH,EAAkBlsH,KAAKkrH,mBAEvBuB,EAAuB7M,EAAUsM,GAElCxQ,EAAQ+I,YAAcyH,EACtBtM,EAAUsM,GAAoBxQ,EAE9B+Q,EAAqBhI,YAAcwH,EACnCrM,EAAUqM,GAAcQ,GAIzB3B,iBAAkB,SAAWpP,GAE5B,MAAMkE,EAAW5/G,KAAKo/G,UACrB6M,EAAYvQ,EAAQ+I,YAEpB2H,IAAwBpsH,KAAKkrH,iBAE7BwB,EAAoB9M,EAAUwM,GAE/B1Q,EAAQ+I,YAAc2H,EACtBxM,EAAUwM,GAAuB1Q,EAEjCgR,EAAkBjI,YAAcwH,EAChCrM,EAAUqM,GAAcS,GAOzBhF,wBAAyB,WAExB,MAAMtD,EAAepkH,KAAKmrH,qBACzBe,EAAkBlsH,KAAKorH,8BAExB,IAAIvsB,EAAculB,EAAc8H,GAahC,YAXqBnsH,IAAhB8+F,IAEJA,EAAc,IAAIkB,GACjB,IAAIpiE,aAAc,GAAK,IAAIA,aAAc,GACzC,EAAG39B,KAAK2sH,kCAET9tB,EAAY+tB,aAAeV,EAC3B9H,EAAc8H,GAAoBrtB,GAI5BA,GAIRmoB,4BAA6B,SAAWnoB,GAEvC,MAAMulB,EAAepkH,KAAKmrH,qBACzBc,EAAYptB,EAAY+tB,aAExBR,IAAwBpsH,KAAKorH,4BAE7ByB,EAAwBzI,EAAcgI,GAEvCvtB,EAAY+tB,aAAeR,EAC3BhI,EAAcgI,GAAuBvtB,EAErCguB,EAAsBD,aAAeX,EACrC7H,EAAc6H,GAAcY,GAI7BF,iCAAkC,IAAIhvF,aAAc,GAKpDmvF,WAAY,SAAW5vB,EAAM6vB,EAAc3tB,GAE1C,MAAM0gB,EAAOiN,GAAgB/sH,KAAK+nH,MACjCmC,EAAWpK,EAAK7vG,KAEjB,IAAI+8G,EAA6B,iBAAT9vB,EAAoB,cAA0B4iB,EAAM5iB,GAASA,EAErF,MAAMqtB,EAA0B,OAAfyC,EAAsBA,EAAW/8G,KAAOitF,EAEnDstB,EAAiBxqH,KAAKyqH,eAAgBF,GAC5C,IAAIN,EAAkB,KAgBtB,QAdmBlqH,IAAdq/F,IAIHA,EAFmB,OAAf4tB,EAEQA,EAAW5tB,U9T1Xa,W8ToYdr/F,IAAnByqH,EAA+B,CAEnC,MAAMyC,EAAiBzC,EAAegB,aAActB,GAEpD,QAAwBnqH,IAAnBktH,GAAgCA,EAAe7tB,YAAcA,EAEjE,OAAO6tB,EAMRhD,EAAkBO,EAAeE,aAAc,GAG3B,OAAfsC,IACJA,EAAa/C,EAAgBhG,OAK/B,GAAoB,OAAf+I,EAAsB,OAAO,KAGlC,MAAME,EAAY,IAAIrJ,GAAiB7jH,KAAMgtH,EAAYD,EAAc3tB,GAOvE,OALAp/F,KAAKgqH,YAAakD,EAAWjD,GAG7BjqH,KAAK2qH,mBAAoBuC,EAAW3C,EAAUL,GAEvCgD,GAKRD,eAAgB,SAAW/vB,EAAM6vB,GAEhC,MAAMjN,EAAOiN,GAAgB/sH,KAAK+nH,MACjCmC,EAAWpK,EAAK7vG,KAEhB+8G,EAA6B,iBAAT9vB,EACnB,cAA0B4iB,EAAM5iB,GAASA,EAE1CqtB,EAAWyC,EAAaA,EAAW/8G,KAAOitF,EAE1CstB,EAAiBxqH,KAAKyqH,eAAgBF,GAEvC,YAAwBxqH,IAAnByqH,GAEGA,EAAegB,aAActB,IAI9B,MAKRiD,cAAe,WAEd,MAAM9B,EAAUrrH,KAAKgrH,SAGrB,IAAM,IAAIjqH,EAFEf,KAAKirH,gBAEQ,EAAGlqH,GAAK,IAAMA,EAEtCsqH,EAAStqH,GAAIguC,OAId,OAAO/uC,MAKR4W,OAAQ,SAAWqxG,GAElBA,GAAajoH,KAAK8jG,UAElB,MAAMunB,EAAUrrH,KAAKgrH,SACpBoC,EAAWptH,KAAKirH,gBAEhBr8E,EAAO5uC,KAAK4uC,MAAQq5E,EACpBC,EAAgB5mH,KAAKuiB,KAAMokG,GAE3BzK,EAAYx9G,KAAKspH,YAAc,EAIhC,IAAM,IAAIvoH,EAAI,EAAGA,IAAMqsH,IAAarsH,EAEpBsqH,EAAStqH,GAEjBinH,QAASp5E,EAAMq5E,EAAWC,EAAe1K,GAMjD,MAAMoC,EAAW5/G,KAAKo/G,UACrBwD,EAAY5iH,KAAKkrH,iBAElB,IAAM,IAAInqH,EAAI,EAAGA,IAAM6hH,IAAc7hH,EAEpC6+G,EAAU7+G,GAAIssE,MAAOmwC,GAItB,OAAOx9G,MAKRqtH,QAAS,SAAWC,GAEnBttH,KAAK4uC,KAAO,EACZ,IAAM,IAAI7tC,EAAI,EAAGA,EAAIf,KAAKgrH,SAAS/pH,OAAQF,IAE1Cf,KAAKgrH,SAAUjqH,GAAI6tC,KAAO,EAI3B,OAAO5uC,KAAK4W,OAAQ02G,IAKrBxF,QAAS,WAER,OAAO9nH,KAAK+nH,OAKbwF,YAAa,SAAWrwB,GAEvB,MAAMmuB,EAAUrrH,KAAKgrH,SACpBT,EAAWrtB,EAAKjtF,KAChBs7G,EAAgBvrH,KAAKyqH,eACrBD,EAAiBe,EAAehB,GAEjC,QAAwBxqH,IAAnByqH,EAA+B,CAMnC,MAAMgD,EAAkBhD,EAAeE,aAEvC,IAAM,IAAI3pH,EAAI,EAAGqB,EAAIorH,EAAgBvsH,OAAQF,IAAMqB,IAAMrB,EAAI,CAE5D,MAAMsmH,EAASmG,EAAiBzsH,GAEhCf,KAAKylH,kBAAmB4B,GAExB,MAAMsE,EAAatE,EAAO5C,YACzBiH,EAAqBL,EAASA,EAAQpqH,OAAS,GAEhDomH,EAAO5C,YAAc,KACrB4C,EAAO3C,kBAAoB,KAE3BgH,EAAmBjH,YAAckH,EACjCN,EAASM,GAAeD,EACxBL,EAAQ3uD,MAER18D,KAAK+rH,iCAAkC1E,UAIjCkE,EAAehB,KAOxBkD,YAAa,SAAW3N,GAEvB,MAAMoK,EAAWpK,EAAK7vG,KACrBs7G,EAAgBvrH,KAAKyqH,eAEtB,IAAM,MAAMF,KAAYgB,EAAgB,CAEvC,MACClE,EADoBkE,EAAehB,GAAWiB,aACvBtB,QAERnqH,IAAXsnH,IAEJrnH,KAAKylH,kBAAmB4B,GACxBrnH,KAAKyrH,sBAAuBpE,IAM9B,MACCiF,EADsBtsH,KAAKoqH,uBACKF,GAEjC,QAAuBnqH,IAAlBusH,EAEJ,IAAM,MAAMnmB,KAAammB,EAAgB,CAExC,MAAM5Q,EAAU4Q,EAAenmB,GAC/BuV,EAAQsC,uBACRh+G,KAAKgsH,uBAAwBtQ,KAShCgS,cAAe,SAAWxwB,EAAM6vB,GAE/B,MAAM1F,EAASrnH,KAAKitH,eAAgB/vB,EAAM6vB,GAE1B,OAAX1F,IAEJrnH,KAAKylH,kBAAmB4B,GACxBrnH,KAAKyrH,sBAAuBpE,OC9uB/BkC,GAA2B3rH,UAAYN,OAAOqC,OAAQrC,OAAO4T,OAAQk5E,GAAkBxsF,WAAa,CAEnGkI,YAAayjH,GAEb9mE,8BAA8B,EAE9Bh8C,KAAM,SAAW4K,GAMhB,OAJA+4E,GAAkBxsF,UAAU6I,KAAK3I,KAAMkC,KAAMqR,GAE7CrR,KAAK6gD,iBAAmBxvC,EAAOwvC,iBAExB7gD,MAIRwG,MAAO,SAAWwK,GAEjB,MAAMw5E,EAAKJ,GAAkBxsF,UAAU4I,MAAM1I,KAAMkC,KAAMgR,GAIzD,OAFAw5E,EAAG3pC,iBAAmB7gD,KAAK6gD,iBAEpB2pC,GAIRl5E,OAAQ,SAAWN,GAElB,MAAM87E,EAAO1C,GAAkBxsF,UAAU0T,OAAOxT,KAAMkC,KAAMgR,GAK5D,OAHA87E,EAAKrqC,8BAA+B,EACpCqqC,EAAKjsC,iBAAmB7gD,KAAK6gD,iBAEtBisC,KC/BTxvF,OAAOC,eAAgBisH,GAAkB5rH,UAAW,cAAe,CAElE+H,IAAK,SAAW1H,IAEA,IAAVA,GAAiB+B,KAAK2Q,aAM7BrT,OAAOqC,OAAQ6pH,GAAkB5rH,UAAW,CAE3CgjC,qBAAqB,EAErB+sF,UAAW,SAAW1uF,GAIrB,OAFAj/B,KAAKi/B,OAASA,EAEPj/B,MAIR4tH,QAAS,SAAW/tH,EAAMkwC,GAKzB,OAHA/vC,KAAKH,KAAOA,EACZG,KAAK+vC,YAAcA,EAEZ/vC,MAIR6tH,YAAa,SAAW9wF,GAIvB,OAFA/8B,KAAK+8B,SAAWA,EAET/8B,MAIR8tH,SAAU,SAAWpxG,GAIpB,OAFA1c,KAAK0c,MAAQA,EAEN1c,QCOT1C,OAAOqC,OAAQ8pH,GAAU7rH,UAAW,CAEnC+H,IAAK,SAAW0b,EAAQC,GAIvBthB,KAAKuhB,IAAI5b,IAAK0b,EAAQC,IAIvBysG,cAAe,SAAWC,EAAQh0G,GAE5BA,GAAUA,EAAOgwB,qBAErBhqC,KAAKuhB,IAAIF,OAAOxF,sBAAuB7B,EAAOK,aAC9Cra,KAAKuhB,IAAID,UAAU3b,IAAKqoH,EAAOzrH,EAAGyrH,EAAOnrH,EAAG,IAAMsX,UAAWH,GAAShT,IAAKhH,KAAKuhB,IAAIF,QAAS/Y,YAC7FtI,KAAKga,OAASA,GAEHA,GAAUA,EAAO6sE,sBAE5B7mF,KAAKuhB,IAAIF,OAAO1b,IAAKqoH,EAAOzrH,EAAGyrH,EAAOnrH,GAAKmX,EAAO8O,KAAO9O,EAAO+O,MAAU/O,EAAO8O,KAAO9O,EAAO+O,MAAQ5O,UAAWH,GAClHha,KAAKuhB,IAAID,UAAU3b,IAAK,EAAG,GAAK,GAAI2U,mBAAoBN,EAAOK,aAC/Dra,KAAKga,OAASA,GAIdpU,QAAQmE,MAAO,6CAA+CiQ,EAAOna,OAMvEkqH,gBAAiB,SAAW3sG,EAAQ4S,EAAWu9E,GAE9C,MAAMrnE,EAAaqnE,GAAkB,GAMrC,OAJAwc,GAAiB3sG,EAAQpd,KAAMkmC,EAAYlW,GAE3CkW,EAAWmkB,KAAMy/D,IAEV5jF,GAIR+nF,iBAAkB,SAAWpwE,EAAS7tB,EAAWu9E,GAEhD,MAAMrnE,EAAaqnE,GAAkB,GAErC,IAAkC,IAA7Bt8F,MAAMe,QAAS6rC,GAGnB,OADAj4C,QAAQC,KAAM,8DACPqgC,EAIR,IAAM,IAAInlC,EAAI,EAAGC,EAAI68C,EAAQ58C,OAAQF,EAAIC,EAAGD,IAE3CgpH,GAAiBlsE,EAAS98C,GAAKf,KAAMkmC,EAAYlW,GAMlD,OAFAkW,EAAWmkB,KAAMy/D,IAEV5jF,KC3HT,MAAM,GAAwB,IAAI,ECAlC,SAASgoF,GAAuBx+F,GAE/B,QAAe1vB,MAEfA,KAAK0vB,SAAWA,EAChB1vB,KAAKksC,OAAS,aAEdlsC,KAAK+jF,cAAe,EACpB/jF,KAAKgkF,YAAa,EAClBhkF,KAAKkkF,WAAY,EACjBlkF,KAAKikF,QAAS,EAEdjkF,KAAKmkF,cAAgB,KACrBnkF,KAAKqkF,YAAc,KACnBrkF,KAAKukF,WAAa,KAClBvkF,KAAKskF,QAAU,KAEftkF,KAAK0c,MAAQ,EAIdwxG,GAAsBtwH,UAAYN,OAAO4T,OAAQ,cACjDg9G,GAAsBtwH,UAAUkI,YAAcooH,GAE9CA,GAAsBtwH,UAAU8nF,yBAA0B,EClB1D,MAAM,GAAwB,IAAI,EAC5ByoC,GAA4B,IAAIjqG,GAChCkqG,GAAgC,IAAIlqG,GAwF1C,SAASmqG,GAAajxG,GAErB,MAAMkxG,EAAW,GAEZlxG,GAAUA,EAAOmvE,QAErB+hC,EAASluH,KAAMgd,GAIhB,IAAM,IAAIrc,EAAI,EAAGA,EAAIqc,EAAOgB,SAASnd,OAAQF,IAE5CutH,EAASluH,KAAKitE,MAAOihD,EAAUD,GAAajxG,EAAOgB,SAAUrd,KAI9D,OAAOutH,EClHR,MAAMC,GAAa,IAAI5wF,aAAc,GCsC/B6wF,IDrCa,IAAIhxF,WAAY+wF,GAAWtvF,QC+B7B39B,KAAKgD,IAAK,EADX,GAOQ,CAAE,KAAO,KAAO,IAAM,KAAO,KAAO,OAEtDmqH,GAAaC,EAAwBF,GAAgBvtH,OAgBrD0tH,GAAqB,IAAI,GAAmB,CACjDz6F,KtU7CuB,EsU8CvBa,YAAY,EACZD,WAAW,KAKN,WAAE85F,GAAU,UAAEC,GAAS,QAAEC,KAHT,IAAI,GAAM,IAAI,GAAqBH,IAGAI,MAiezD,SAASA,KAER,MAAMH,EAAa,GACbC,EAAY,GACZC,EAAU,GAEhB,IAAIE,EAxgBW,EA0gBf,IAAM,IAAIjuH,EAAI,EAAGA,EAAI0tH,GAAY1tH,IAAO,CAEvC,MAAMkuH,EAAU3tH,KAAKgD,IAAK,EAAG0qH,GAC7BH,EAAUzuH,KAAM6uH,GAChB,IAAIC,EAAQ,EAAMD,EAEbluH,EAAI2tH,EAERQ,EAAQV,GAAiBztH,EAlhBZ,EADA,EAmhBoC,GAEjC,GAALA,IAEXmuH,EAAQ,GAITJ,EAAQ1uH,KAAM8uH,GAEd,MAAMC,EAAY,GAAQF,EAAU,GAC9BhtH,GAAQktH,EAAY,EACpBjtH,EAAM,EAAIitH,EAAY,EACtBx8F,EAAM,CAAE1wB,EAAKA,EAAKC,EAAKD,EAAKC,EAAKA,EAAKD,EAAKA,EAAKC,EAAKA,EAAKD,EAAKC,GAE/DktH,EAAY,EACZxoF,EAAW,EACXyoF,EAAe,EACfC,EAAS,EACTC,EAAgB,EAEhB1nG,EAAW,IAAI8V,aAAc0xF,EAAezoF,EAAWwoF,GACvDh9G,EAAK,IAAIurB,aAAc2xF,EAAS1oF,EAAWwoF,GAC3ChpF,EAAY,IAAIzI,aAAc4xF,EAAgB3oF,EAAWwoF,GAE/D,IAAM,IAAItpF,EAAO,EAAGA,EAAOspF,EAAWtpF,IAAU,CAE/C,MAAMvjC,EAAMujC,EAAO,EAAM,EAAI,EAAI,EAC3BjjC,EAAIijC,EAAO,EAAI,GAAM,EACrB0pF,EAAc,CACnBjtH,EAAGM,EAAG,EACNN,EAAI,EAAI,EAAGM,EAAG,EACdN,EAAI,EAAI,EAAGM,EAAI,EAAG,EAClBN,EAAGM,EAAG,EACNN,EAAI,EAAI,EAAGM,EAAI,EAAG,EAClBN,EAAGM,EAAI,EAAG,GAEXglB,EAASliB,IAAK6pH,EAAaH,EAAezoF,EAAWd,GACrD1zB,EAAGzM,IAAKgtB,EAAK28F,EAAS1oF,EAAWd,GACjC,MAAM2pF,EAAO,CAAE3pF,EAAMA,EAAMA,EAAMA,EAAMA,EAAMA,GAC7CM,EAAUzgC,IAAK8pH,EAAMF,EAAgB3oF,EAAWd,GAIjD,MAAMkH,EAAS,IAAI,GACnBA,EAAO/M,aAAc,WAAY,IAAI,GAAiBpY,EAAUwnG,IAChEriF,EAAO/M,aAAc,KAAM,IAAI,GAAiB7tB,EAAIk9G,IACpDtiF,EAAO/M,aAAc,YAAa,IAAI,GAAiBmG,EAAWmpF,IAClEX,EAAWxuH,KAAM4sC,GAEZgiF,EArkBS,GAukBbA,IAMF,MAAO,CAAEJ,WAAAA,EAAYC,UAAAA,EAAWC,QAAAA,GAtiBfxtH,KAAK8G,KAAM,GCrE7B,MAAMsnH,GAEL5pH,YAAa7H,GAEU,iBAAVA,IAEX2H,QAAQC,KAAM,sDACd5H,EAAQ6L,UAAW,IAIpB9J,KAAK/B,MAAQA,EAIduI,QAEC,OAAO,IAAIkpH,QAA8B3vH,IAArBC,KAAK/B,MAAMuI,MAAsBxG,KAAK/B,MAAQ+B,KAAK/B,MAAMuI,UCoRxE,SAASmpH,GAAQ/yG,GAEvBhX,QAAQC,KAAM,sEAEdupG,GAAiBtxG,KAAMkC,KAAM4c,GAC7B5c,KAAKH,KAAO,aA3Db6pG,GAAMx4F,OAAS,SAAW0+G,EAAWviB,GAQpC,OANAznG,QAAQpB,IAAK,4CAEborH,EAAUhyH,UAAYN,OAAO4T,OAAQw4F,GAAM9rG,WAC3CgyH,EAAUhyH,UAAUkI,YAAc8pH,EAClCA,EAAUhyH,UAAUyvG,SAAWA,EAExBuiB,GAMRtyH,OAAOqC,OAAQgxG,GAAK/yG,UAAW,CAE9BiyH,WAAY,SAAWjzG,GAGtB,OADAhX,QAAQC,KAAM,mEACP7F,KAAK2c,cAAeC,MAkBEtf,OAAO4T,OAAQk+F,GAAiBxxG,WAatCN,OAAO4T,OAAQk+F,GAAiBxxG,WAazD+xH,GAAO/xH,UAAYN,OAAO4T,OAAQk+F,GAAiBxxG,WAEnDN,OAAOqC,OAAQgwH,GAAO/xH,UAAW,CAEhCkyH,cAAe,WAEdlqH,QAAQmE,MAAO,qDAGhBgmH,sBAAuB,WAEtBnqH,QAAQmE,MAAO,6DAGhBimH,yBAA0B,WAEzBpqH,QAAQmE,MAAO,kECxTjB,cAAyB,GAExBjE,YAAamX,EAAO,GAAIywF,EAAY,GAAInxE,EAAS,QAAUC,EAAS,SAEnED,EAAS,IAAI,GAAOA,GACpBC,EAAS,IAAI,GAAOA,GAEpB,MAAM5yB,EAAS8jG,EAAY,EACrB71F,EAAOoF,EAAOywF,EACdxwF,EAAWD,EAAO,EAElB2pB,EAAW,GAAItI,EAAS,GAE9B,IAAM,IAAIv9B,EAAI,EAAGmf,EAAI,EAAGgkD,GAAMhnD,EAAUnc,GAAK2sG,EAAW3sG,IAAMmjE,GAAKrsD,EAAO,CAEzE+uB,EAASxmC,MAAQ8c,EAAU,EAAGgnD,EAAGhnD,EAAU,EAAGgnD,GAC9Ct9B,EAASxmC,KAAM8jE,EAAG,GAAKhnD,EAAUgnD,EAAG,EAAGhnD,GAEvC,MAAM2Z,EAAQ91B,IAAM6I,EAAS2yB,EAASC,EAEtC3F,EAAMvtB,QAASg1B,EAAQpe,GAAKA,GAAK,EACjC2W,EAAMvtB,QAASg1B,EAAQpe,GAAKA,GAAK,EACjC2W,EAAMvtB,QAASg1B,EAAQpe,GAAKA,GAAK,EACjC2W,EAAMvtB,QAASg1B,EAAQpe,GAAKA,GAAK,EAIlC,MAAMnC,EAAW,IAAI,GACrBA,EAASkiB,aAAc,WAAY,IAAI,GAAwB2G,EAAU,IACzE7oB,EAASkiB,aAAc,QAAS,IAAI,GAAwB3B,EAAQ,IAIpErqB,MAAO8J,EAFU,IAAI,GAAmB,CAAEqW,cAAc,EAAMgC,YAAY,KAI1Ep2B,KAAKH,KAAO,eDkTHjC,UAAUqyH,UAAY,WAEhCrqH,QAAQmE,MAAO,6FJhVhB,cAA6B,GAE5BjE,YAAasX,GAEZ,MAAMq+C,EAAQ4yD,GAAajxG,GAErBW,EAAW,IAAI,GAEf6oB,EAAW,GACXtI,EAAS,GAET/B,EAAS,IAAI,GAAO,EAAG,EAAG,GAC1BC,EAAS,IAAI,GAAO,EAAG,EAAG,GAEhC,IAAM,IAAIz7B,EAAI,EAAGA,EAAI06D,EAAMx6D,OAAQF,IAAO,CAEzC,MAAM4rF,EAAOlxB,EAAO16D,GAEf4rF,EAAK5hE,QAAU4hE,EAAK5hE,OAAOwhE,SAE/B3lD,EAASxmC,KAAM,EAAG,EAAG,GACrBwmC,EAASxmC,KAAM,EAAG,EAAG,GACrBk+B,EAAOl+B,KAAMm8B,EAAO/uB,EAAG+uB,EAAO5vB,EAAG4vB,EAAOz3B,GACxCw5B,EAAOl+B,KAAMo8B,EAAOhvB,EAAGgvB,EAAO7vB,EAAG6vB,EAAO13B,IAM1CiZ,EAASkiB,aAAc,WAAY,IAAI,GAAwB2G,EAAU,IACzE7oB,EAASkiB,aAAc,QAAS,IAAI,GAAwB3B,EAAQ,IAIpErqB,MAAO8J,EAFU,IAAI,GAAmB,CAAEqW,cAAc,EAAMU,WAAW,EAAOC,YAAY,EAAOqB,YAAY,EAAO9B,aAAa,KAInIt0B,KAAKH,KAAO,iBACZG,KAAKkwH,kBAAmB,EAExBlwH,KAAK8/G,KAAO1iG,EACZpd,KAAKy7D,MAAQA,EAEbz7D,KAAKqO,OAAS+O,EAAO/C,YACrBra,KAAKsQ,kBAAmB,EAIzB4d,kBAAmBC,GAElB,MAAMstC,EAAQz7D,KAAKy7D,MAEb19C,EAAW/d,KAAK+d,SAChB8J,EAAW9J,EAASiiB,aAAc,YAExCouF,GAAgB3nH,KAAMzG,KAAK8/G,KAAKzlG,aAAcxN,SAE9C,IAAM,IAAI9L,EAAI,EAAGmf,EAAI,EAAGnf,EAAI06D,EAAMx6D,OAAQF,IAAO,CAEhD,MAAM4rF,EAAOlxB,EAAO16D,GAEf4rF,EAAK5hE,QAAU4hE,EAAK5hE,OAAOwhE,SAE/B4hC,GAAYjjH,iBAAkBkjH,GAAiBzhC,EAAKtyE,aACpD,GAAQwB,sBAAuBsyG,IAC/BtmG,EAAS+W,OAAQ1e,EAAG,GAAQ3d,EAAG,GAAQM,EAAG,GAAQyP,GAElD67G,GAAYjjH,iBAAkBkjH,GAAiBzhC,EAAK5hE,OAAO1Q,aAC3D,GAAQwB,sBAAuBsyG,IAC/BtmG,EAAS+W,OAAQ1e,EAAI,EAAG,GAAQ3d,EAAG,GAAQM,EAAG,GAAQyP,GAEtD4N,GAAK,GAMPnC,EAASiiB,aAAc,YAAaQ,aAAc,EAElDvsB,MAAMia,kBAAmBC,KIsQZvwB,UAAUgZ,OAAS,WAEjChR,QAAQmE,MAAO,iEAahBzM,OAAOqC,OAAQ,aAAkB,CAEhCwwH,eAAgB,SAAWp+G,GAG1B,OADAnM,QAAQC,KAAM,wGEhVC,SAAWkM,GAE1B,MAAMvR,EAAQuR,EAAIwuG,YAAa,KAE/B,OAAiB,IAAZ//G,EAAuB,KAErBuR,EAAIi7F,OAAQ,EAAGxsG,EAAQ,GF2UvB,CAA4BuR,MAMrC,YAAkB,CAEjBpL,IAAK,WAEJf,QAAQmE,MAAO,4FAIhBtM,IAAK,WAEJmI,QAAQmE,MAAO,6FAsBjBzM,OAAOqC,ONvZP,MAECmG,YAAa7D,EAAKC,GAEjB5E,OAAOC,eAAgByC,KAAM,SAAU,CAAE/B,OAAO,IAEhD+B,KAAKiC,SAAgBlC,IAARkC,EAAsBA,EAAM,IAAI,EAAS,IAAY,KAClEjC,KAAKkC,SAAgBnC,IAARmC,EAAsBA,EAAM,IAAI,GAAS,KAAY,KAInEyD,IAAK1D,EAAKC,GAKT,OAHAlC,KAAKiC,IAAIwE,KAAMxE,GACfjC,KAAKkC,IAAIuE,KAAMvE,GAERlC,KAIR2c,cAAeC,GAEd5c,KAAK6c,YAEL,IAAM,IAAI9b,EAAI,EAAG+b,EAAKF,EAAO3b,OAAQF,EAAI+b,EAAI/b,IAE5Cf,KAAK+c,cAAeH,EAAQ7b,IAI7B,OAAOf,KAIRgd,qBAAsBpT,EAAQqT,GAE7B,MAAMC,EAAW,GAAQzW,KAAMwW,GAAO7V,eAAgB,IAItD,OAHApH,KAAKiC,IAAIwE,KAAMmD,GAAS5C,IAAKkW,GAC7Bld,KAAKkC,IAAIuE,KAAMmD,GAASjD,IAAKuW,GAEtBld,KAIRwG,QAEC,OAAO,IAAIxG,KAAK8F,aAAcW,KAAMzG,MAIrCyG,KAAM6W,GAKL,OAHAtd,KAAKiC,IAAIwE,KAAM6W,EAAIrb,KACnBjC,KAAKkC,IAAIuE,KAAM6W,EAAIpb,KAEZlC,KAIR6c,YAKC,OAHA7c,KAAKiC,IAAIM,EAAIvC,KAAKiC,IAAIY,EAAI,IAC1B7C,KAAKkC,IAAIK,EAAIvC,KAAKkC,IAAIW,GAAI,IAEnB7C,KAIRud,UAIC,OAASvd,KAAKkC,IAAIK,EAAIvC,KAAKiC,IAAIM,GAASvC,KAAKkC,IAAIW,EAAI7C,KAAKiC,IAAIY,EAI/D2a,UAAW5c,GASV,YAPgBb,IAAXa,IAEJgF,QAAQC,KAAM,mDACdjF,EAAS,IAAI,GAIPZ,KAAKud,UAAY3c,EAAO+E,IAAK,EAAG,GAAM/E,EAAOiG,WAAY7G,KAAKiC,IAAKjC,KAAKkC,KAAMkF,eAAgB,IAItGqW,QAAS7c,GASR,YAPgBb,IAAXa,IAEJgF,QAAQC,KAAM,iDACdjF,EAAS,IAAI,GAIPZ,KAAKud,UAAY3c,EAAO+E,IAAK,EAAG,GAAM/E,EAAOqG,WAAYjH,KAAKkC,IAAKlC,KAAKiC,KAIhF8a,cAAeW,GAKd,OAHA1d,KAAKiC,IAAIA,IAAKyb,GACd1d,KAAKkC,IAAIA,IAAKwb,GAEP1d,KAIR2d,eAAgBC,GAKf,OAHA5d,KAAKiC,IAAI+E,IAAK4W,GACd5d,KAAKkC,IAAIyE,IAAKiX,GAEP5d,KAIR6d,eAAgB3X,GAKf,OAHAlG,KAAKiC,IAAI6E,WAAaZ,GACtBlG,KAAKkC,IAAI4E,UAAWZ,GAEblG,KAIRqe,cAAeX,GAEd,QAAOA,EAAMnb,EAAIvC,KAAKiC,IAAIM,GAAKmb,EAAMnb,EAAIvC,KAAKkC,IAAIK,GACjDmb,EAAM7a,EAAI7C,KAAKiC,IAAIY,GAAK6a,EAAM7a,EAAI7C,KAAKkC,IAAIW,GAI7Cyb,YAAahB,GAEZ,OAAOtd,KAAKiC,IAAIM,GAAK+a,EAAIrb,IAAIM,GAAK+a,EAAIpb,IAAIK,GAAKvC,KAAKkC,IAAIK,GACvDvC,KAAKiC,IAAIY,GAAKya,EAAIrb,IAAIY,GAAKya,EAAIpb,IAAIW,GAAK7C,KAAKkC,IAAIW,EAInD0b,aAAcb,EAAO9c,GAYpB,YAPgBb,IAAXa,IAEJgF,QAAQC,KAAM,sDACdjF,EAAS,IAAI,GAIPA,EAAO+E,KACX+X,EAAMnb,EAAIvC,KAAKiC,IAAIM,IAAQvC,KAAKkC,IAAIK,EAAIvC,KAAKiC,IAAIM,IACjDmb,EAAM7a,EAAI7C,KAAKiC,IAAIY,IAAQ7C,KAAKkC,IAAIW,EAAI7C,KAAKiC,IAAIY,IAKrD2b,cAAelB,GAId,QAAOA,EAAIpb,IAAIK,EAAIvC,KAAKiC,IAAIM,GAAK+a,EAAIrb,IAAIM,EAAIvC,KAAKkC,IAAIK,GACrD+a,EAAIpb,IAAIW,EAAI7C,KAAKiC,IAAIY,GAAKya,EAAIrb,IAAIY,EAAI7C,KAAKkC,IAAIW,GAIjD8b,WAAYjB,EAAO9c,GASlB,YAPgBb,IAAXa,IAEJgF,QAAQC,KAAM,oDACdjF,EAAS,IAAI,GAIPA,EAAO6F,KAAMiX,GAAQ1b,MAAOhC,KAAKiC,IAAKjC,KAAKkC,KAInD0d,gBAAiBlC,GAGhB,OADqB,GAAQjX,KAAMiX,GAAQ1b,MAAOhC,KAAKiC,IAAKjC,KAAKkC,KAC7C8E,IAAK0W,GAAQzc,SAIlC6e,UAAWxC,GAKV,OAHAtd,KAAKiC,IAAIC,IAAKob,EAAIrb,KAClBjC,KAAKkC,IAAID,IAAKqb,EAAIpb,KAEXlC,KAIRme,MAAOb,GAKN,OAHAtd,KAAKiC,IAAIA,IAAKqb,EAAIrb,KAClBjC,KAAKkC,IAAIA,IAAKob,EAAIpb,KAEXlC,KAIRoO,UAAW/E,GAKV,OAHArJ,KAAKiC,IAAI0E,IAAK0C,GACdrJ,KAAKkC,IAAIyE,IAAK0C,GAEPrJ,KAIRmJ,OAAQmU,GAEP,OAAOA,EAAIrb,IAAIkH,OAAQnJ,KAAKiC,MAASqb,EAAIpb,IAAIiH,OAAQnJ,KAAKkC,OM2LxCtE,UAAW,CAE9BgM,OAAQ,SAAW2jG,GAGlB,OADA3nG,QAAQC,KAAM,2DACP7F,KAAKwd,UAAW+vF,IAGxB6iB,MAAO,WAGN,OADAxqH,QAAQC,KAAM,wDACP7F,KAAKud,WAGb8yG,kBAAmB,SAAW/yG,GAG7B,OADA1X,QAAQC,KAAM,0EACP7F,KAAKwe,cAAelB,IAG5BL,KAAM,SAAWswF,GAGhB,OADA3nG,QAAQC,KAAM,uDACP7F,KAAKyd,QAAS8vF,MAKvBjwG,OAAOqC,OAAQsc,EAAKre,UAAW,CAE9BgM,OAAQ,SAAW2jG,GAGlB,OADA3nG,QAAQC,KAAM,2DACP7F,KAAKwd,UAAW+vF,IAGxB6iB,MAAO,WAGN,OADAxqH,QAAQC,KAAM,wDACP7F,KAAKud,WAGb8yG,kBAAmB,SAAW/yG,GAG7B,OADA1X,QAAQC,KAAM,0EACP7F,KAAKwe,cAAelB,IAG5BgzG,qBAAsB,SAAW5xG,GAGhC,OADA9Y,QAAQC,KAAM,gFACP7F,KAAKye,iBAAkBC,IAG/BzB,KAAM,SAAWswF,GAGhB,OADA3nG,QAAQC,KAAM,uDACP7F,KAAKyd,QAAS8vF,MAKvBjwG,OAAOqC,OAAQ4gB,GAAO3iB,UAAW,CAEhCwyH,MAAO,WAGN,OADAxqH,QAAQC,KAAM,0DACP7F,KAAKud,aAMdsvB,GAAQjvC,UAAU2yH,cAAgB,SAAWluH,GAG5C,OADAuD,QAAQC,KAAM,mFACP7F,KAAKktC,wBAAyB7qC,IAWtC/E,OAAOqC,OAAQ,EAAW,CAEzB6wH,SAAU,WAGT,OADA5qH,QAAQC,KAAM,2EACPvE,KAAKK,UAIb8uH,kBAAmB,SAAWxyH,GAG7B,OADA2H,QAAQC,KAAM,4EACP,kBAA2B5H,IAInCyyH,eAAgB,SAAWzyH,GAG1B,OADA2H,QAAQC,KAAM,wEACP,iBAA0B5H,MAMnCX,OAAOqC,OAAQkK,EAAQjM,UAAW,CAEjC+yH,qBAAsB,SAAW9vH,EAAOwI,GAGvC,OADAzD,QAAQC,KAAM,uFACP7F,KAAKsJ,QAASzI,EAAOwI,IAG7BunH,gBAAiB,SAAWhzG,GAG3B,OADAhY,QAAQC,KAAM,kGACP+X,EAAOrW,aAAcvH,OAG7B6wH,qBAAsB,WAErBjrH,QAAQmE,MAAO,6DAGhB+mH,uBAAwB,SAAWtnH,GAGlC,OADA5D,QAAQC,KAAM,4GACP2D,EAAUjC,aAAcvH,OAGhC+wH,oBAAqB,WAEpBnrH,QAAQmE,MAAO,4DAGhBinH,WAAY,SAAW3iH,GAGtB,OADAzI,QAAQC,KAAM,kGACP7F,KAAKyG,KAAM4H,GAASxB,YAM7BvP,OAAOqC,OAAQukB,GAAQtmB,UAAW,CAEjCqzH,gBAAiB,SAAW5uH,GAG3B,OADAuD,QAAQC,KAAM,0EACP7F,KAAK0kB,aAAcriB,IAG3BsuH,qBAAsB,SAAW9vH,EAAOwI,GAGvC,OADAzD,QAAQC,KAAM,uFACP7F,KAAKsJ,QAASzI,EAAOwI,IAG7B6nH,YAAa,WAGZ,OADAtrH,QAAQC,KAAM,yGACP,IAAI,GAAUkW,oBAAqB/b,KAAM,IAGjDosB,0BAA2B,SAAWxnB,GAGrC,OADAgB,QAAQC,KAAM,kGACP7F,KAAK4lB,2BAA4BhhB,IAGzCusH,gBAAiB,WAEhBvrH,QAAQC,KAAM,wDAGf+qH,gBAAiB,SAAWhzG,GAG3B,OADAhY,QAAQC,KAAM,kGACP+X,EAAOnL,aAAczS,OAG7BoxH,gBAAiB,SAAWxzG,GAG3B,OADAhY,QAAQC,KAAM,kGACP+X,EAAOnL,aAAczS,OAG7B6wH,qBAAsB,WAErBjrH,QAAQmE,MAAO,6DAGhBsnH,WAAY,SAAW3qH,GAEtBd,QAAQC,KAAM,oGACda,EAAE4T,mBAAoBta,OAGvBsxH,YAAa,SAAW1zG,GAGvB,OADAhY,QAAQC,KAAM,8FACP+X,EAAOnL,aAAczS,OAG7BoO,UAAW,WAEVxI,QAAQmE,MAAO,kDAGhBwiB,QAAS,WAER3mB,QAAQmE,MAAO,gDAGhByiB,QAAS,WAER5mB,QAAQmE,MAAO,gDAGhB0iB,QAAS,WAER7mB,QAAQmE,MAAO,gDAGhBwnH,aAAc,WAEb3rH,QAAQmE,MAAO,qDAGhB+mH,uBAAwB,SAAWtnH,GAGlC,OADA5D,QAAQC,KAAM,4GACP2D,EAAUiJ,aAAczS,OAGhC+wH,oBAAqB,WAEpBnrH,QAAQmE,MAAO,4DAGhBynH,YAAa,SAAW9oG,EAAMC,EAAOE,EAAQD,EAAKE,EAAMC,GAGvD,OADAnjB,QAAQC,KAAM,wHACP7F,KAAKyoB,gBAAiBC,EAAMC,EAAOC,EAAKC,EAAQC,EAAMC,IAG9DioG,WAAY,SAAW3iH,GAGtB,OADAzI,QAAQC,KAAM,kGACP7F,KAAKyG,KAAM4H,GAASxB,YAM7ByjB,GAAM1yB,UAAU6zH,mBAAqB,SAAW3gG,GAG/C,OADAlrB,QAAQC,KAAM,6EACP7F,KAAKixB,eAAgBH,IAI7BxzB,OAAOqC,OAAQ+U,EAAW9W,UAAW,CAEpCgzH,gBAAiB,SAAWhzG,GAG3B,OADAhY,QAAQC,KAAM,mHACP+X,EAAOzE,gBAAiBnZ,OAGhC0sF,QAAS,WAGR,OADA9mF,QAAQC,KAAM,8DACP7F,KAAK6M,YAMdvP,OAAOqC,OAAQyhB,GAAIxjB,UAAW,CAE7ByyH,kBAAmB,SAAW/yG,GAG7B,OADA1X,QAAQC,KAAM,yEACP7F,KAAKwe,cAAelB,IAG5Bo0G,oBAAqB,SAAW7yG,GAG/B,OADAjZ,QAAQC,KAAM,6EACP7F,KAAK4e,gBAAiBC,IAG9ByxG,qBAAsB,SAAW5xG,GAGhC,OADA9Y,QAAQC,KAAM,+EACP7F,KAAKye,iBAAkBC,MAMhCphB,OAAOqC,OAAQoyB,GAASn0B,UAAW,CAElC+1F,KAAM,WAGL,OADA/tF,QAAQC,KAAM,2DACP7F,KAAKkzB,WAGby+F,mBAAoB,SAAWj0G,EAAO9c,GAGrC,OADAgF,QAAQC,KAAM,8EACP7F,KAAKyyB,aAAc/U,EAAO9c,IAGlCgxH,SAAU,SAAWhxH,GAGpB,OADAgF,QAAQC,KAAM,mEACP7F,KAAKmzB,YAAavyB,IAG1Bwa,OAAQ,SAAWxa,GAGlB,OADAgF,QAAQC,KAAM,+DACP7F,KAAKozB,UAAWxyB,IAGxBie,MAAO,SAAWje,GAGjB,OADAgF,QAAQC,KAAM,6DACP7F,KAAKqzB,SAAUzyB,MAMxBtD,OAAOqC,OAAQoyB,GAAU,CAExB4/F,mBAAoB,SAAWj0G,EAAO7Y,EAAGC,EAAGC,EAAGnE,GAG9C,OADAgF,QAAQC,KAAM,8EACPksB,GAASU,aAAc/U,EAAO7Y,EAAGC,EAAGC,EAAGnE,IAG/Cwa,OAAQ,SAAWvW,EAAGC,EAAGC,EAAGnE,GAG3B,OADAgF,QAAQC,KAAM,+DACPksB,GAASqB,UAAWvuB,EAAGC,EAAGC,EAAGnE,MAMtCtD,OAAOqC,OAAQ,aAAiB,CAE/BkyH,iBAAkB,SAAWnkB,GAG5B,OADA9nG,QAAQC,KAAM,oFACP7F,KAAKk2F,cAAewX,IAG5BokB,QAAS,SAAW99G,GAGnB,OADApO,QAAQC,KAAM,4EACP,IAAI,GAAiB7F,KAAMgU,IAGnC+9G,aAAc,SAAW/9G,GAGxB,OADApO,QAAQC,KAAM,+EACP,IAAIk1F,GAAe/6F,KAAMgU,MAMlC1W,OAAOqC,OAAQ,YAAmB,CAEjCqyH,cAAe,SAAWxoH,EAAWhJ,EAAO6I,GAG3C,OADAzD,QAAQC,KAAM,+EACP7F,KAAKuJ,oBAAqBC,EAAWhJ,EAAO6I,IAGpD4oH,oBAAqB,SAAWvrH,GAG/B,OADAd,QAAQC,KAAM,qFACP7F,KAAK6I,oBAAqBnC,IAGlCwrH,gBAAiB,WAGhB,OADAtsH,QAAQC,KAAM,6EACP7F,KAAKqI,qBAMd/K,OAAOqC,OAAQ,YAAmB,CAEjCwyH,2BAA4B,WAE3BvsH,QAAQmE,MAAO,8GAGhBqoH,uBAAwB,WAEvBxsH,QAAQmE,MAAO,sGAGhBsoH,sBAAuB,SAAWhwH,GAGjC,OADAuD,QAAQC,KAAM,yFACP7F,KAAK6b,sBAAuBxZ,IAGpCiwH,mBAAoB,SAAWjwH,GAG9B,OADAuD,QAAQC,KAAM,mFACP7F,KAAK8b,mBAAoBzZ,IAGjCkwH,oBAAqB,SAAW/xH,EAAO6N,GAGtC,OADAzI,QAAQC,KAAM,qFACP7F,KAAK+b,oBAAqB1N,EAAQ7N,IAG1CgyH,gBAAiB,SAAWnwH,GAG3B,OADAuD,QAAQC,KAAM,uFACP7F,KAAKyS,aAAcpQ,IAG3B2vH,cAAe,SAAWxoH,EAAWhJ,EAAO6I,GAG3C,OADAzD,QAAQC,KAAM,+EACP7F,KAAKuJ,oBAAqBC,EAAWhJ,EAAO6I,IAGpD4oH,oBAAqB,SAAWvrH,GAG/B,OADAd,QAAQC,KAAM,qFACP7F,KAAK6I,oBAAqBnC,IAGlCwrH,gBAAiB,WAGhB,OADAtsH,QAAQC,KAAM,6EACP7F,KAAKqI,qBAMd/K,OAAOqC,OAAQ0S,EAAQzU,UAAW,CAEjCo0H,cAAe,SAAWxoH,EAAWhJ,EAAO6I,GAG3C,OADAzD,QAAQC,KAAM,+EACP7F,KAAKuJ,oBAAqBC,EAAWhJ,EAAO6I,IAGpD6oH,gBAAiB,WAGhB,OADAtsH,QAAQC,KAAM,6EACP7F,KAAKqI,qBAQd/K,OAAOqC,OAAQ,aAAoB,CAElC8yH,eAAgB,SAAWviH,GAG1B,OADAtK,QAAQC,KAAM,6EACP7F,KAAKytB,gBAAiBvd,IAG9BwiH,YAAa,WAEZ9sH,QAAQC,KAAM,8EAGfuI,UAAW,SAAWue,EAAUvV,GAG/B,OADAxR,QAAQC,KAAM,kGACP7F,KAAK0sB,gBAAiBtV,EAAMuV,IAGpCgmG,iBAAkB,WAEjB/sH,QAAQmE,MAAO,mHAGhB6oH,YAAa,SAAWvkH,GAGvB,OADAzI,QAAQC,KAAM,uEACP7F,KAAKyS,aAAcpE,MAM5B/Q,OAAO2tB,iBAAkB,aAAoB,CAE5C4nG,WAAY,CACXp1H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,uDACP7F,KAAK8N,SAAS9I,OAGtBW,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,uDACd7F,KAAK8N,SAAS9I,MAAQ/G,IAIxB60H,cAAe,CACdr1H,IAAK,WAEJmI,QAAQC,KAAM,kGAGfF,IAAK,WAEJC,QAAQC,KAAM,qGAOjBvI,OAAOqC,OAAQ,aAAgB,CAE9BozH,YAAa,WAEZntH,QAAQmE,MAAO,gMAMjBzM,OAAO2tB,iBAAkB,aAAgB,CAExC+nG,SAAU,CACTv1H,IAAK,WAGJ,OADAmI,QAAQmE,MAAO,oGxUnzBe,GwUuzB/BpE,IAAK,WAEJC,QAAQmE,MAAO,4LAOlBzM,OAAO2tB,iBAAkB,aAAe,CAEvC4yB,QAAS,CACRpgD,IAAK,WAGJ,OADAmI,QAAQC,KAAM,oDACP7F,KAAKurF,WAOfjuF,OAAOC,eAAgB,aAAoB,mBAAoB,CAE9DE,IAAK,WAEJmI,QAAQC,KAAM,uDAGfF,IAAK,WAEJC,QAAQC,KAAM,yDAMhB,uBAAkC,WAEjCD,QAAQmE,MAAO,qDAIhBzM,OAAOC,eAAgBmsG,GAAM9rG,UAAW,uBAAwB,CAE/DH,IAAK,WAGJ,OADAmI,QAAQC,KAAM,kEACP7F,KAAK2pG,oBAGbhkG,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,kEACd7F,KAAK2pG,mBAAqB1rG,KAQ5B,qBAAsC,SAAWisC,EAAaN,GAE7DhkC,QAAQC,KAAM,oHAGK9F,IAAd6pC,IAA0B5pC,KAAK4pC,UAAYA,GAChD5pC,KAAKiqC,eAAgBC,IAMtB5sC,OAAO2tB,iBAAkB4lF,GAAMjzG,UAAW,CACzCq1H,WAAY,CACXttH,IAAK,WAEJC,QAAQC,KAAM,gDAIhBqtH,gBAAiB,CAChBvtH,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,4DACd7F,KAAKy9C,OAAOzjC,OAAOuvB,IAAMtrC,IAI3Bk1H,iBAAkB,CACjBxtH,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,8DACd7F,KAAKy9C,OAAOzjC,OAAO0O,KAAOzqB,IAI5Bm1H,kBAAmB,CAClBztH,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,gEACd7F,KAAKy9C,OAAOzjC,OAAO2O,MAAQ1qB,IAI7Bo1H,gBAAiB,CAChB1tH,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,4DACd7F,KAAKy9C,OAAOzjC,OAAO4O,IAAM3qB,IAI3Bq1H,mBAAoB,CACnB3tH,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,kEACd7F,KAAKy9C,OAAOzjC,OAAO6O,OAAS5qB,IAI9B89C,iBAAkB,CACjBp2C,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,8DACd7F,KAAKy9C,OAAOzjC,OAAO8O,KAAO7qB,IAI5B+9C,gBAAiB,CAChBr2C,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,4DACd7F,KAAKy9C,OAAOzjC,OAAO+O,IAAM9qB,IAI3Bs1H,oBAAqB,CACpB5tH,IAAK,WAEJC,QAAQC,KAAM,oHAIhBm1C,WAAY,CACXr1C,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,iDACd7F,KAAKy9C,OAAOwiB,KAAOhiE,IAIrBu1H,eAAgB,CACf7tH,IAAK,WAEJC,QAAQC,KAAM,oDAIhB4tH,eAAgB,CACf9tH,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,8DACd7F,KAAKy9C,OAAO0iB,QAAQp6D,MAAQ9H,IAI9By1H,gBAAiB,CAChB/tH,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,gEACd7F,KAAKy9C,OAAO0iB,QAAQn6D,OAAS/H,MAQhCX,OAAO2tB,iBAAkB,aAA2B,CAEnDhqB,OAAQ,CACPxD,IAAK,WAGJ,OADAmI,QAAQC,KAAM,2EACP7F,KAAKa,MAAMI,SAIpB0yH,QAAS,CACRl2H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,4EACP7F,KAAKi9B,QAAU,GAGvBt3B,IAAK,WAEJC,QAAQC,KAAM,4EACd7F,KAAKg+B,SAAU,OAOlB1gC,OAAOqC,OAAQ,aAA2B,CACzCi0H,WAAY,SAAW31H,GAItB,OAFA2H,QAAQC,KAAM,sFACd7F,KAAKg+B,UAAoB,IAAV//B,EAAiB,EAAmBuB,GAC5CQ,MAGR6zH,iBAAkB,WAEjBjuH,QAAQmE,MAAO,iEAGhB+pH,SAAU,WAETluH,QAAQmE,MAAO,8HAKjBzM,OAAOqC,OAAQ,aAA0B,CAExCo0H,SAAU,SAAWvzH,GAEpBoF,QAAQC,KAAM,sEACd7F,KAAK+/B,SAAUv/B,IAGhBwzH,aAAc,SAAW9jH,EAAM1G,GAI9B,OAFA5D,QAAQC,KAAM,8EAEL2D,GAAaA,EAAUs0B,mBAA2Bt0B,GAAaA,EAAUimC,6BAQpE,UAATv/B,GAEJtK,QAAQC,KAAM,2EACd7F,KAAK+/B,SAAUv2B,GAERxJ,MAIDA,KAAKigC,aAAc/vB,EAAM1G,IAf/B5D,QAAQC,KAAM,0EAEP7F,KAAKigC,aAAc/vB,EAAM,IAAI,GAAiBpG,UAAW,GAAKA,UAAW,OAgBlFmqH,YAAa,SAAWjjG,EAAOtU,EAAOs+E,QAEhBj7F,IAAhBi7F,GAEJp1F,QAAQC,KAAM,wEAIfD,QAAQC,KAAM,4DACd7F,KAAKogC,SAAUpP,EAAOtU,IAGvBw3G,eAAgB,WAEftuH,QAAQC,KAAM,kEACd7F,KAAKsgC,eAGN6zF,eAAgB,WAEfvuH,QAAQC,KAAM,8DAGfuuH,gBAAiB,SAAWlkH,GAI3B,OAFAtK,QAAQC,KAAM,oFAEP7F,KAAKkgC,gBAAiBhwB,IAG9B0iH,YAAa,SAAWvkH,GAGvB,OADAzI,QAAQC,KAAM,6EACP7F,KAAKyS,aAAcpE,MAM5B/Q,OAAO2tB,iBAAkB,aAA0B,CAElDkrF,UAAW,CACV14G,IAAK,WAGJ,OADAmI,QAAQmE,MAAO,iEACR/J,KAAKy/B,SAId22E,QAAS,CACR34G,IAAK,WAGJ,OADAmI,QAAQC,KAAM,+DACP7F,KAAKy/B,WAOfniC,OAAO2tB,iBAAkBmqF,GAAwBx3G,UAAW,CAE3Dy2H,kBAAmB,CAClB52H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,yFACP7F,KAAKwpD,eAGb7jD,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,yFACd7F,KAAKwpD,cAAgBvrD,MAOxBX,OAAO2tB,iBAAkBw+F,GAAU7rH,UAAW,CAE7C02H,cAAe,CACd72H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,4FACP7F,KAAKguF,OAAOC,KAAKlE,WAGzBpkF,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,4FACd7F,KAAKguF,OAAOC,KAAKlE,UAAY9rF,MAOhCX,OAAO2tB,iBAAkBm/D,GAAkBxsF,UAAW,CAErD+1H,QAAS,CACRl2H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,6EACP7F,KAAKi9B,QAAU,GAGvBt3B,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,6EACd7F,KAAKg+B,SAAU//B,OAOlBX,OAAOqC,OAAQyqF,GAAkBxsF,UAAW,CAC3Cg2H,WAAY,SAAW31H,GAItB,OAFA2H,QAAQC,KAAM,wFACd7F,KAAKg+B,UAAoB,IAAV//B,EAAiB,EAAmBuB,GAC5CQ,MAGR8zH,SAAU,WAETluH,QAAQmE,MAAO,gIAOjBzM,OAAOqC,OAAQ,aAA2B,CAEzC40H,UAAW,WAEV3uH,QAAQmE,MAAO,0DAIhByqH,aAAc,WAEb5uH,QAAQmE,MAAO,6DAIhB6qF,SAAU,WAEThvF,QAAQmE,MAAO,2DAQjBzM,OAAOqC,OAAQ,aAAiB,CAE/BuS,QAAS,WAERtM,QAAQmE,MAAO,gDAQjBzM,OAAO2tB,iBAAkBykG,GAAQ9xH,UAAW,CAE3C+1H,QAAS,CACRhuH,IAAK,WAEJC,QAAQC,KAAM,oFAIhB+K,SAAU,CACT3S,MAAO,WAGN,OADA2H,QAAQC,KAAM,qFACP7F,SASV1C,OAAO2tB,iBAAkB8I,GAASn2B,UAAW,CAE5C62H,WAAY,CACXh3H,IAAK,WAEJmI,QAAQC,KAAM,kDAGfF,IAAK,WAEJC,QAAQC,KAAM,mDAKhB6uH,SAAU,CACTj3H,IAAK,WAEJmI,QAAQC,KAAM,gDAGfF,IAAK,WAEJC,QAAQC,KAAM,iDAKhB8uH,QAAS,CACRl3H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,8CACP,IAAI,KAKbqvG,QAAS,CACRz3G,IAAK,WAEJmI,QAAQmE,MAAO,SAAW/J,KAAKH,KAAO,uEAGvC8F,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,SAAW7F,KAAKH,KAAO,sEACrCG,KAAKm0B,YxUp7CmB,IwUo7CHl2B,IAKvBypE,YAAa,CACZjqE,IAAK,WAGJ,OADAmI,QAAQC,KAAM,SAAW7F,KAAKH,KAAO,kEAC9BG,KAAKm1B,iBAGbxvB,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,SAAW7F,KAAKH,KAAO,kEACrCG,KAAKm1B,gBAAkBl3B,MAO1BX,OAAO2tB,iBAAkBuvC,GAAkB58D,UAAW,CAErDg3H,MAAO,CACNn3H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,8FACP,GAGRF,IAAK,WAEJC,QAAQC,KAAM,gGAOjBvI,OAAO2tB,iBAAkB0vC,GAAqB/8D,UAAW,CAExDi3H,aAAc,CACbp3H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,gFACP7F,KAAKorD,cAGbzlD,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,gFACd7F,KAAKorD,aAAentD,MAOvBX,OAAO2tB,iBAAkBsd,GAAe3qC,UAAW,CAElDkrC,YAAa,CACZrrC,IAAK,WAGJ,OADAmI,QAAQC,KAAM,iFACP7F,KAAK6oC,WAAWC,aAGxBnjC,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,kFACd7F,KAAK6oC,WAAWC,YAAc7qC,MASjCX,OAAOqC,OAAQ++E,GAAc9gF,UAAW,CAEvCk3H,YAAa,SAAW3pF,EAActU,EAAO0P,EAAOqG,GAEnDhnC,QAAQC,KAAM,yGACd7F,KAAKisC,gBAAiBd,GACtBnrC,KAAKotB,MAAOyJ,EAAO0P,EAAOqG,IAG3BmoF,QAAS,SAAW/7G,GAEnBpT,QAAQC,KAAM,+DACd7F,KAAKivC,iBAAkBj2B,IAGxBg8G,uBAAwB,WAGvB,OADApvH,QAAQC,KAAM,6EACP7F,KAAKgsC,mBAGb4Z,iBAAkB,WAGjB,OADAhgD,QAAQC,KAAM,qFACP7F,KAAKqvC,aAAauW,oBAG1BqvE,aAAc,WAGb,OADArvH,QAAQC,KAAM,wEACP7F,KAAKqvC,aAAaxZ,WAG1Bq/F,aAAc,WAGb,OADAtvH,QAAQC,KAAM,+DACP7F,KAAK49C,MAAMwD,SAGnB+zE,sBAAuB,WAGtB,OADAvvH,QAAQC,KAAM,gGACP7F,KAAK6oC,WAAWprC,IAAK,sBAG7B23H,0BAA2B,WAG1B,OADAxvH,QAAQC,KAAM,yGACP7F,KAAK6oC,WAAWprC,IAAK,2BAG7B43H,4BAA6B,WAG5B,OADAzvH,QAAQC,KAAM,6GACP7F,KAAK6oC,WAAWprC,IAAK,6BAG7B63H,8BAA+B,WAG9B,OADA1vH,QAAQC,KAAM,oHACP7F,KAAK6oC,WAAWprC,IAAK,kCAG7B83H,+BAAgC,WAG/B,OADA3vH,QAAQC,KAAM,sHACP7F,KAAK6oC,WAAWprC,IAAK,mCAG7B+3H,oBAAqB,WAGpB,OADA5vH,QAAQC,KAAM,6FACP7F,KAAK6oC,WAAWprC,IAAK,qBAG7Bq5D,uBAAwB,WAGvB,OADAlxD,QAAQC,KAAM,uFACP7F,KAAKqvC,aAAaqW,gBAG1B+vE,wBAAyB,WAGxB,OADA7vH,QAAQC,KAAM,uGACP7F,KAAK6oC,WAAWprC,IAAK,2BAG7Bi4H,kBAAmB,SAAWjyC,GAE7B79E,QAAQC,KAAM,uEACd7F,KAAK6kE,eAAgB4e,IAGtB6B,aAAc,WAEb1/E,QAAQC,KAAM,2DAGf8vH,aAAc,WAEb/vH,QAAQC,KAAM,2DAGf+vH,cAAe,WAEdhwH,QAAQC,KAAM,4DAGfgwH,gBAAiB,WAEhBjwH,QAAQC,KAAM,8DAGfiwH,eAAgB,WAEflwH,QAAQC,KAAM,6DAGfkwH,iBAAkB,WAEjBnwH,QAAQC,KAAM,+DAGfmwH,WAAY,WAEXpwH,QAAQC,KAAM,yDAGf6qE,aAAc,WAEb9qE,QAAQC,KAAM,2DAGfmrE,eAAgB,WAEfprE,QAAQC,KAAM,6DAGfowH,qBAAsB,WAGrB,OADArwH,QAAQC,KAAM,gFACP7F,KAAKykE,0BAMdnnE,OAAO2tB,iBAAkByzD,GAAc9gF,UAAW,CAEjD65D,iBAAkB,CACjBh6D,IAAK,WAEJ,OAAOuC,KAAKo8D,UAAUvxB,SAGvBllC,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,qEACd7F,KAAKo8D,UAAUvxB,QAAU5sC,IAI3B22D,cAAe,CACdn3D,IAAK,WAEJ,OAAOuC,KAAKo8D,UAAUv8D,MAGvB8F,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,+DACd7F,KAAKo8D,UAAUv8D,KAAO5B,IAIxBi4H,kBAAmB,CAClBz4H,IAAK,WAEJmI,QAAQC,KAAM,+FAIfF,IAAK,WAEJC,QAAQC,KAAM,gGAIhBmJ,QAAS,CACRvR,IAAK,WAGJ,OADAmI,QAAQC,KAAM,8EACP7F,KAAKiP,eAIdknH,GAAI,CACH14H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,oDACP7F,KAAK8rC,KAIdsqF,WAAY,CACX34H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,mHACP,GAGRF,IAAK,WAEJC,QAAQC,KAAM,oHAIhBwwH,YAAa,CACZ54H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,kGACP,GAGRF,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,iGACd7F,KAAKg4D,gBAA6B,IAAV/5D,ExUvlDC,KwUulDiC,IAI5Dq4H,sBAAuB,CACtB74H,IAAK,WAGJ,OADAmI,QAAQC,KAAM,iEACP,GAGRF,IAAK,WAEJC,QAAQC,KAAM,qEAOjBvI,OAAO2tB,iBAAkBy2C,GAAe9jE,UAAW,CAElDouE,SAAU,CACTvuE,IAAK,WAEJmI,QAAQC,KAAM,gGAIfF,IAAK,WAEJC,QAAQC,KAAM,iGAIhB0wH,mBAAoB,CACnB94H,IAAK,WAEJmI,QAAQC,KAAM,0GAIfF,IAAK,WAEJC,QAAQC,KAAM,2GAIhB2wH,kBAAmB,CAClB/4H,IAAK,WAEJmI,QAAQC,KAAM,yGAIfF,IAAK,WAEJC,QAAQC,KAAM,4GAgBjBvI,OAAO2tB,iBAAkB,YAA6B,CAErDvb,MAAO,CACNjS,IAAK,WAGJ,OADAmI,QAAQC,KAAM,0DACP7F,KAAKqU,QAAQ3E,OAGrB/J,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,0DACd7F,KAAKqU,QAAQ3E,MAAQzR,IAIvB0R,MAAO,CACNlS,IAAK,WAGJ,OADAmI,QAAQC,KAAM,0DACP7F,KAAKqU,QAAQ1E,OAGrBhK,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,0DACd7F,KAAKqU,QAAQ1E,MAAQ1R,IAIvB2R,UAAW,CACVnS,IAAK,WAGJ,OADAmI,QAAQC,KAAM,kEACP7F,KAAKqU,QAAQzE,WAGrBjK,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,kEACd7F,KAAKqU,QAAQzE,UAAY3R,IAI3B4R,UAAW,CACVpS,IAAK,WAGJ,OADAmI,QAAQC,KAAM,kEACP7F,KAAKqU,QAAQxE,WAGrBlK,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,kEACd7F,KAAKqU,QAAQxE,UAAY5R,IAI3B8R,WAAY,CACXtS,IAAK,WAGJ,OADAmI,QAAQC,KAAM,oEACP7F,KAAKqU,QAAQtE,YAGrBpK,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,oEACd7F,KAAKqU,QAAQtE,WAAa9R,IAI5BoL,OAAQ,CACP5L,IAAK,WAGJ,OADAmI,QAAQC,KAAM,4DACP7F,KAAKqU,QAAQhL,QAGrB1D,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,4DACd7F,KAAKqU,QAAQhL,OAASpL,IAIxBoS,OAAQ,CACP5S,IAAK,WAGJ,OADAmI,QAAQC,KAAM,4DACP7F,KAAKqU,QAAQhE,QAGrB1K,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,4DACd7F,KAAKqU,QAAQhE,OAASpS,IAIxB6R,OAAQ,CACPrS,IAAK,WAGJ,OADAmI,QAAQC,KAAM,4DACP7F,KAAKqU,QAAQvE,QAGrBnK,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,4DACd7F,KAAKqU,QAAQvE,OAAS7R,IAIxB4B,KAAM,CACLpC,IAAK,WAGJ,OADAmI,QAAQC,KAAM,wDACP7F,KAAKqU,QAAQxU,MAGrB8F,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,wDACd7F,KAAKqU,QAAQxU,KAAO5B,IAItBsS,gBAAiB,CAChB9S,IAAK,WAGJ,OADAmI,QAAQC,KAAM,8EACP7F,KAAKqU,QAAQ9D,iBAGrB5K,IAAK,SAAW1H,GAEf2H,QAAQC,KAAM,8EACd7F,KAAKqU,QAAQ9D,gBAAkBtS,MASlCX,OAAO2tB,iBG/8DP,cAAoB,GAEnBnlB,YAAahG,GAEZmU,QAEAjU,KAAKH,KAAO,QAEZG,KAAKF,SAAWA,EAChBE,KAAKgP,QAAUlP,EAASkP,QAExBhP,KAAKy2H,KAAOz2H,KAAKgP,QAAQ0nH,aACzB12H,KAAKy2H,KAAKE,QAAS72H,EAAS82H,YAE5B52H,KAAK62H,UAAW,EAEhB72H,KAAKi/B,OAAS,KACdj/B,KAAK82H,OAAS,EACd92H,KAAK6kH,MAAO,EACZ7kH,KAAK+2H,UAAY,EACjB/2H,KAAKg3H,QAAU,EACfh3H,KAAKqJ,OAAS,EACdrJ,KAAK8gG,cAAW/gG,EAChBC,KAAKi3H,aAAe,EACpBj3H,KAAKk3H,WAAY,EACjBl3H,KAAKm3H,oBAAqB,EAC1Bn3H,KAAKqR,OAAS,KACdrR,KAAKo3H,WAAa,QAElBp3H,KAAKq3H,WAAa,EAClBr3H,KAAKs3H,UAAY,EACjBt3H,KAAKu3H,YAAa,EAElBv3H,KAAKw3H,QAAU,GAIhBC,YAEC,OAAOz3H,KAAKy2H,KAIbiB,cAAeC,GAOd,OALA33H,KAAKm3H,oBAAqB,EAC1Bn3H,KAAKo3H,WAAa,YAClBp3H,KAAKqR,OAASsmH,EACd33H,KAAK22H,UAEE32H,KAIR43H,sBAAuBC,GAOtB,OALA73H,KAAKm3H,oBAAqB,EAC1Bn3H,KAAKo3H,WAAa,YAClBp3H,KAAKqR,OAASrR,KAAKgP,QAAQ8oH,yBAA0BD,GACrD73H,KAAK22H,UAEE32H,KAIR+3H,qBAAsBC,GAOrB,OALAh4H,KAAKm3H,oBAAqB,EAC1Bn3H,KAAKo3H,WAAa,kBAClBp3H,KAAKqR,OAASrR,KAAKgP,QAAQipH,wBAAyBD,GACpDh4H,KAAK22H,UAEE32H,KAIR2tH,UAAWvS,GAOV,OALAp7G,KAAKi/B,OAASm8E,EACdp7G,KAAKo3H,WAAa,SAEbp3H,KAAK62H,UAAW72H,KAAKulH,OAEnBvlH,KAIRulH,KAAM2S,EAAQ,GAEb,IAAwB,IAAnBl4H,KAAKk3H,UAGT,YADAtxH,QAAQC,KAAM,0CAKf,IAAiC,IAA5B7F,KAAKm3H,mBAGT,YADAvxH,QAAQC,KAAM,oDAKf7F,KAAKq3H,WAAar3H,KAAKgP,QAAQmpH,YAAcD,EAE7C,MAAM7mH,EAASrR,KAAKgP,QAAQopH,qBAe5B,OAdA/mH,EAAO4tB,OAASj/B,KAAKi/B,OACrB5tB,EAAOwzG,KAAO7kH,KAAK6kH,KACnBxzG,EAAO0lH,UAAY/2H,KAAK+2H,UACxB1lH,EAAO2lH,QAAUh3H,KAAKg3H,QACtB3lH,EAAOgnH,QAAUr4H,KAAKs4H,QAAQvsC,KAAM/rF,MACpCqR,EAAO2f,MAAOhxB,KAAKq3H,WAAYr3H,KAAKs3H,UAAYt3H,KAAKqJ,OAAQrJ,KAAK8gG,UAElE9gG,KAAKk3H,WAAY,EAEjBl3H,KAAKqR,OAASA,EAEdrR,KAAKu4H,UAAWv4H,KAAK82H,QACrB92H,KAAKw4H,gBAAiBx4H,KAAKi3H,cAEpBj3H,KAAK22H,UAIb8B,QAEC,IAAiC,IAA5Bz4H,KAAKm3H,mBA4BV,OArBwB,IAAnBn3H,KAAKk3H,YAITl3H,KAAKs3H,WAAah2H,KAAKY,IAAKlC,KAAKgP,QAAQmpH,YAAcn4H,KAAKq3H,WAAY,GAAMr3H,KAAKi3H,cAEhE,IAAdj3H,KAAK6kH,OAIT7kH,KAAKs3H,UAAYt3H,KAAKs3H,WAAct3H,KAAK8gG,UAAY9gG,KAAKi/B,OAAO6hE,WAIlE9gG,KAAKqR,OAAO09B,OACZ/uC,KAAKqR,OAAOgnH,QAAU,KAEtBr4H,KAAKk3H,WAAY,GAIXl3H,KA1BN4F,QAAQC,KAAM,oDA8BhBkpC,OAEC,IAAiC,IAA5B/uC,KAAKm3H,mBAaV,OANAn3H,KAAKs3H,UAAY,EAEjBt3H,KAAKqR,OAAO09B,OACZ/uC,KAAKqR,OAAOgnH,QAAU,KACtBr4H,KAAKk3H,WAAY,EAEVl3H,KAXN4F,QAAQC,KAAM,oDAehB8wH,UAEC,GAAK32H,KAAKw3H,QAAQv2H,OAAS,EAAI,CAE9BjB,KAAKqR,OAAOslH,QAAS32H,KAAKw3H,QAAS,IAEnC,IAAM,IAAIz2H,EAAI,EAAGC,EAAIhB,KAAKw3H,QAAQv2H,OAAQF,EAAIC,EAAGD,IAEhDf,KAAKw3H,QAASz2H,EAAI,GAAI41H,QAAS32H,KAAKw3H,QAASz2H,IAI9Cf,KAAKw3H,QAASx3H,KAAKw3H,QAAQv2H,OAAS,GAAI01H,QAAS32H,KAAKy3H,kBAItDz3H,KAAKqR,OAAOslH,QAAS32H,KAAKy3H,aAM3B,OAFAz3H,KAAKu3H,YAAa,EAEXv3H,KAIRk5E,aAEC,GAAKl5E,KAAKw3H,QAAQv2H,OAAS,EAAI,CAE9BjB,KAAKqR,OAAO6nE,WAAYl5E,KAAKw3H,QAAS,IAEtC,IAAM,IAAIz2H,EAAI,EAAGC,EAAIhB,KAAKw3H,QAAQv2H,OAAQF,EAAIC,EAAGD,IAEhDf,KAAKw3H,QAASz2H,EAAI,GAAIm4E,WAAYl5E,KAAKw3H,QAASz2H,IAIjDf,KAAKw3H,QAASx3H,KAAKw3H,QAAQv2H,OAAS,GAAIi4E,WAAYl5E,KAAKy3H,kBAIzDz3H,KAAKqR,OAAO6nE,WAAYl5E,KAAKy3H,aAM9B,OAFAz3H,KAAKu3H,YAAa,EAEXv3H,KAIR04H,aAEC,OAAO14H,KAAKw3H,QAIbmB,WAAY16H,GAgBX,OAdOA,IAAQA,EAAQ,KAEE,IAApB+B,KAAKu3H,YAETv3H,KAAKk5E,aACLl5E,KAAKw3H,QAAUv5H,EAAM6C,QACrBd,KAAK22H,WAIL32H,KAAKw3H,QAAUv5H,EAAM6C,QAIfd,KAIRu4H,UAAWt6H,GAIV,GAFA+B,KAAK82H,OAAS74H,OAEc8B,IAAvBC,KAAKqR,OAAOylH,OAQjB,OANwB,IAAnB92H,KAAKk3H,WAETl3H,KAAKqR,OAAOylH,OAAO8B,gBAAiB54H,KAAK82H,OAAQ92H,KAAKgP,QAAQmpH,YAAa,KAIrEn4H,KAIR64H,YAEC,OAAO74H,KAAK82H,OAIbgC,YAEC,OAAO94H,KAAK04H,aAAc,GAI3BK,UAAW9iE,GAEV,OAAOj2D,KAAK24H,WAAY1iE,EAAS,CAAEA,GAAW,IAI/CuiE,gBAAiBv6H,GAEhB,IAAiC,IAA5B+B,KAAKm3H,mBAeV,OARAn3H,KAAKi3H,aAAeh5H,GAEI,IAAnB+B,KAAKk3H,WAETl3H,KAAKqR,OAAO4lH,aAAa2B,gBAAiB54H,KAAKi3H,aAAcj3H,KAAKgP,QAAQmpH,YAAa,KAIjFn4H,KAbN4F,QAAQC,KAAM,oDAiBhBmzH,kBAEC,OAAOh5H,KAAKi3H,aAIbqB,UAECt4H,KAAKk3H,WAAY,EAIlB+B,UAEC,OAAiC,IAA5Bj5H,KAAKm3H,oBAETvxH,QAAQC,KAAM,qDACP,GAID7F,KAAK6kH,KAIbmB,QAAS/nH,GAER,IAAiC,IAA5B+B,KAAKm3H,mBAeV,OARAn3H,KAAK6kH,KAAO5mH,GAEY,IAAnB+B,KAAKk3H,YAETl3H,KAAKqR,OAAOwzG,KAAO7kH,KAAK6kH,MAIlB7kH,KAbN4F,QAAQC,KAAM,oDAiBhBqzH,aAAcj7H,GAIb,OAFA+B,KAAK+2H,UAAY94H,EAEV+B,KAIRm5H,WAAYl7H,GAIX,OAFA+B,KAAKg3H,QAAU/4H,EAER+B,KAIRo5H,YAEC,OAAOp5H,KAAKy2H,KAAKA,KAAKx4H,MAIvBo7H,UAAWp7H,GAIV,OAFA+B,KAAKy2H,KAAKA,KAAKmC,gBAAiB36H,EAAO+B,KAAKgP,QAAQmpH,YAAa,KAE1Dn4H,OHilDgB,UAAiB,CAEzC2oG,KAAM,CACL1qG,MAAO,SAAW+oG,GAEjBphG,QAAQC,KAAM,0EACd,MAAM8gC,EAAQ3mC,KAOd,OANoB,IAAI26G,IACZhS,KAAM3B,GAAM,SAAW/nE,GAElC0H,EAAMgnF,UAAW1uF,MAGXj/B,OAIT+jG,UAAW,CACVp+F,IAAK,WAEJC,QAAQC,KAAM,sDAgBjBqlC,GAAWttC,UAAU07H,cAAgB,SAAW3tF,EAAUC,GAGzD,OADAhmC,QAAQC,KAAM,wDACP7F,KAAK4W,OAAQ+0B,EAAUC,IAI/BV,GAAWttC,UAAUwvB,MAAQ,SAAWue,EAAU9U,EAAO0P,EAAOqG,GAG/D,OADAhnC,QAAQC,KAAM,4DACP7F,KAAKmrC,aAAa/d,MAAOue,EAAU9U,EAAO0P,EAAOqG,IAmCzDr+B,EAAWg6F,iBAAcxoG,EAEzBwO,EAAWm+F,YAAc,SAAW36F,EAAKvC,EAAS03F,EAAQE,GAEzDxhG,QAAQC,KAAM,wFAEd,MAAMqiG,EAAS,IAAIuB,GACnBvB,EAAOc,eAAgBhpG,KAAKuoG,aAE5B,MAAMl0F,EAAU6zF,EAAOS,KAAM52F,EAAKm1F,OAAQnnG,EAAWqnG,GAIrD,OAFK53F,IAAU6E,EAAQ7E,QAAUA,GAE1B6E,GAIR9F,EAAWgrH,gBAAkB,SAAWtsB,EAAMz9F,EAAS03F,EAAQE,GAE9DxhG,QAAQC,KAAM,gGAEd,MAAMqiG,EAAS,IAAIsB,GACnBtB,EAAOc,eAAgBhpG,KAAKuoG,aAE5B,MAAMl0F,EAAU6zF,EAAOS,KAAMsE,EAAM/F,OAAQnnG,EAAWqnG,GAItD,OAFK53F,IAAU6E,EAAQ7E,QAAUA,GAE1B6E,GAIR9F,EAAWirH,sBAAwB,WAElC5zH,QAAQmE,MAAO,0FAIhBwE,EAAWkrH,0BAA4B,WAEtC7zH,QAAQmE,MAAO,8FI96DmB,oBAAvBy+E,oBAGXA,mBAAmB9nF,cAAe,IAAI+nF,YAAa,WAAY,CAAEC,OAAQ,CACxEgxC,S5UhKsB,U4UsKD,oBAAXzyC,SAENA,OAAO0yC,UAEX/zH,QAAQC,KAAM,2DAIdohF,OAAO0yC,U5U9Ke,O6UGjB,MAAMC,GACTC,kBAAkBC,GACd,OAAOA,GAAsB,iBAARA,EAGzBC,YAAYD,GACR,OAAO7oH,MAAMe,QAAQ8nH,GAAO,GAAK,GAGrCE,iBAAiB/7H,EAAOg8H,GAEpB,OADYA,IAA6C,IAA1BA,EAAgBzzH,OAC9BxG,KAAK65H,kBAAkB57H,GAAU+B,KAAKk6H,UAAUl6H,KAAK+5H,YAAY97H,GAAQA,EAAOg8H,GAAmBh8H,EAGxHk8H,kBAAkBv5H,EAAQyQ,EAAQ4oH,GAC9B,IAAIG,EAAcx5H,EAAOE,QACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIq5H,EAAYn5H,SAAUF,EAAG,CACzC,MAAMyG,EAAI4yH,EAAYr5H,QACQ,IAAnBq5H,EAAYr5H,GACnBq5H,EAAYr5H,GAAKf,KAAKg6H,iBAAiBxyH,EAAGyyH,GACrCj6H,KAAK65H,kBAAkBryH,GAC5B4yH,EAAYr5H,GAAKf,KAAKk6H,UAAUt5H,EAAOG,GAAIyG,EAAGyyH,IAClB,IAAvBr5H,EAAOT,QAAQqH,IACpB4yH,EAAYh6H,KAAKJ,KAAKg6H,iBAAiBxyH,EAAGyyH,IAElD,OAAOG,EAGXC,YAAYz5H,EAAQyQ,EAAQ4oH,GACxB,IAAIG,EAAc,GAClB,GAAIp6H,KAAK65H,kBAAkBj5H,GACvB,IAAK,MAAMxD,KAAOwD,EACdw5H,EAAYh9H,GAAO4C,KAAKg6H,iBAAiBp5H,EAAOxD,GAAM68H,GAC9D,IAAK,MAAM78H,KAAOiU,EACTrR,KAAK65H,kBAAkBxoH,EAAOjU,KAAUwD,EAAOxD,GAGhDg9H,EAAYh9H,GAAO4C,KAAKk6H,UAAUt5H,EAAOxD,GAAMiU,EAAOjU,GAAM68H,GAF5DG,EAAYh9H,GAAO4C,KAAKg6H,iBAAiB3oH,EAAOjU,GAAM68H,GAG9D,OAAOG,EAGXF,UAAUt5H,EAAQyQ,EAAQ4oH,GACtB,IAAIp5H,EAAQoQ,MAAMe,QAAQX,GAEtBipH,GADUL,GAAmB,CAAEK,WAAYt6H,KAAKm6H,oBAC3BG,YAAct6H,KAAKm6H,kBAC5C,OAAIt5H,EACOoQ,MAAMe,QAAQpR,GAAU05H,EAAW15H,EAAQyQ,EAAQ4oH,GAAmBj6H,KAAKg6H,iBAAiB3oH,EAAQ4oH,GAEpGj6H,KAAKq6H,YAAYz5H,EAAQyQ,EAAQ4oH,IC9C7C,MAAMM,GAGT5xB,KAAM52F,EAAKm1F,EAAQC,EAAYC,GAE3B,MAAM13E,EAAW,IAAI,GAAyB,CAC1CmH,MAAO,SACP1C,aAAa,EACbD,K9UAc,E8UCdmD,UAAW,KAErB,IAAIsP,EAAQ3mC,KACRkoG,EAAS,IAAI,GACXA,EAAOoE,gBAAiB,eAGxBpE,EAAOS,KAAM52F,GAAK,SAAWf,GAEzB,IAERk2F,EAAQvgE,EAAM1W,MAAOjf,EAAM0e,IAEnB,MAAQ8qG,GAEJ50H,QAAQpB,IAAI,uCAAyCuN,EAAM,eAAiByoH,GACnFpzB,GAAUA,EAASozB,MAGvBrzB,EAAYC,GAGbqzB,oBAAsBC,GAElB,OAAO16H,KAAK26H,WAAYD,EAAMz7F,OAAQy7F,EAAME,WAAYF,EAAMG,YAGlEC,uBAAwBC,GAEpB,IAAIC,EAAeD,EAAIE,SAAS,gBAChC,GAAoB,MAAhBD,EACA,MAAM,IAAI10H,MAAM,2BACpB,IAAI40H,EAAK,IAAIt9F,aAAao9F,EAAa,YACnCG,EAAK,IAAIv9F,aAAao9F,EAAa,YACnCI,EAAK,IAAIx9F,aAAao9F,EAAa,YACnCK,EAAK,IAAIz9F,aAAao9F,EAA2B,cACjDM,EAAM,IAAI19F,aAAao9F,EAAiB,IACxCxtH,EAAI,GACR,IAAK,IAAIzM,EAAE,EAAGA,EAAIu6H,EAAIr6H,SAAUF,EAE5ByM,EAAE8tH,EAAIv6H,IACN,CACI81B,MAAO,IAAI,GAAYqkG,EAAGn6H,GAAGo6H,EAAGp6H,GAAGq6H,EAAGr6H,IACtCszB,QAAS,EAAMgnG,EAAGt6H,IAG1B,OAAOyM,EAGX+tH,YAAaR,GAET,IAAIS,EAAcT,EAAIE,SAAS,eAC3BQ,EAAQ,IAAIj+F,WAAWg+F,EAAkB,MACzCN,EAAK,IAAIt9F,aAAa49F,EAAY,eAClCL,EAAK,IAAIv9F,aAAa49F,EAAY,eAClCJ,EAAK,IAAIx9F,aAAa49F,EAAY,eAClChuH,EAAI,IAAIyD,MAAMwqH,EAAMx6H,QACxB,IAAK,IAAIF,EAAE,EAAGA,EAAI06H,EAAMx6H,SAAUF,EAClC,CACI,IAAImP,EAAOurH,EAAM16H,IAAM,EAAIg6H,EAAIW,QAAQD,EAAM16H,IAAM,GACnDyM,EAAEzM,GAAK,CAAEmP,KAAMA,EAAM3N,EAAG24H,EAAGn6H,GAAI8B,EAAGs4H,EAAGp6H,GAAIuR,EAAG8oH,EAAGr6H,IAEnD,OAAOyM,EAGXmuH,SAAUZ,GAEN,IAAKA,EAAItzH,SACL,MAAO,GACX,IAAIm0H,EAAWb,EAAIE,SAAS,YAC5B,IAAKW,EACD,MAAO,GACX,IAAIN,EAAM,IAAI99F,WAAWo+F,EAAkB,SAC3C,IAAKN,EACD,MAAO,GACX,IAAI9tH,EAAI,IAAIyD,MAAMqqH,EAAIr6H,QACtB,IAAK,IAAIF,EAAE,EAAGA,EAAIu6H,EAAIr6H,SAAUF,EAChC,CACI,IAAIwsB,EAAK+tG,EAAIv6H,GACTwsB,EAAK,IACL/f,EAAEzM,GAAKg6H,EAAItzH,SAAS8lB,IAE5B,OAAO/f,EAIXmtH,WAAY5kB,EAAa6kB,EAAYC,GAEjCj1H,QAAQpB,IAAI,iBAKZ,IAAIwM,EAAO,IAAIwsB,WAAYu4E,EAAa6kB,EAAYC,EAAa,GAG7DzuB,EAAS,CACTyvB,MAAY7qH,EAAK,GACjB8qH,UAAY9qH,EAAK,GACjB+qH,QAAY/qH,EAAK,GACjBgrH,UAAYhrH,EAAK,IAQrB,GALApL,QAAQpB,IAAI,gBACZoB,QAAQpB,IAAIqqB,KAAKC,UAAUs9E,IAIP,OAAhBA,EAAOyvB,MAAiB,MAAM,IAAIv1H,MAAM,8CAC5C,GAAe,GAAX0K,EAAK,GAAS,MAAM,IAAI1K,MAAM,iCAClC,GAAe,GAAX0K,EAAK,GAAS,MAAM,IAAI1K,MAAM,iCAClC,GAAe,GAAX0K,EAAK,GAAS,MAAM,IAAI1K,MAAM,6BAClC,GAAe,GAAX0K,EAAK,GAAS,MAAM,IAAI1K,MAAM,6BAClC,GAAI8lG,EAAO0vB,WAAa,IAAM1vB,EAAO0vB,UAAYjB,EAAY,MAAM,IAAIv0H,MAAM,oCAC7E,GAAI8lG,EAAO2vB,QAAU3vB,EAAO0vB,WAAa1vB,EAAO2vB,QAAUlB,EAAY,MAAM,IAAIv0H,MAAM,iCACtF,GAAI8lG,EAAO4vB,UAAY,GAAK5vB,EAAO4vB,UAAY5vB,EAAO2vB,QAAS,MAAM,IAAIz1H,MAAM,+BAG/E,IAAIipC,EAAU,GACV0sF,EAAM,EACV,IAAK,IAAIl7H,EAAE,EAAGA,EAAIqrG,EAAO4vB,YAAaj7H,EAAG,CACrC,IAAIm7H,EAAQlrH,EAAKirH,EAAI,GACjB7qG,EAAMpgB,EAAKirH,EAAI,GAGnB,GAAmB,GAAfjrH,EAAKirH,EAAI,GAAS,MAAM,IAAI31H,MAAM,0BAAwC,GAAX21H,EAAM,IACzE,GAAmB,GAAfjrH,EAAKirH,EAAI,GAAS,MAAM,IAAI31H,MAAM,0BAAwC,GAAX21H,EAAM,IACzE,GAAIC,EAAQ9vB,EAAO0vB,WAAaI,EAAQ9vB,EAAO2vB,QAAS,MAAM,IAAIz1H,MAAM,gCACxE,GAAI8qB,EAAM8qG,GAAS9qG,EAAMg7E,EAAO2vB,QAAU,MAAM,IAAIz1H,MAAM,8BAE1D21H,GAAO,EACP,IAAIh9F,EAAS,IAAI7B,WAAW24E,EAAammB,EAAQtB,EAAYxpG,EAAM8qG,GACnE3sF,EAAQnvC,KAAK6+B,GAGjB,GAAIsQ,EAAQtuC,OAAS,EACjB,MAAM,IAAIqF,MAAM,qDAGpB,IAAI61H,EAAc,IAAIC,YAAY,SAASC,OAAO9sF,EAAQ,IAGtDksF,EAAQU,EAAYr7H,MAAM,GAAG,GAAGwxD,MAAM,MAK1C,GAJ0B,GAAtB6pE,EAAYl7H,SACZw6H,EAAQ,IAGRA,EAAMx6H,QAAUsuC,EAAQtuC,OAAS,EACjC,MAAM,IAAIqF,MAAM,qEAOpB,MAAO,CACH8lG,OAAQA,EACRqvB,MAAOA,EACPlsF,QAASA,EAAQzuC,MAAM,IAI/Bw7H,qBAAsBC,GAElB,IAAI/uH,EAAI,GACR,IAAK,IAAIzM,EAAE,EAAGA,EAAIw7H,EAAMhtF,QAAQtuC,SAAUF,EAC1C,CACI,IAIIy7H,EAJApvH,EAAMmvH,EAAMd,MAAM16H,GAAGuxD,MAAM,KAC3BmqE,EAAarvH,EAAI,GACjBsvH,EAAatvH,EAAI,GACjB6xB,EAASs9F,EAAMhtF,QAAQxuC,GAE3B,GAAkB,WAAd07H,EAEAD,EAAa,IAAI5+F,aAAaqB,EAAOA,OAAQA,EAAO27F,WAAY37F,EAAO47F,WAAa,GACpFrtH,EAAEkvH,GAAcF,OAEf,GAAkB,UAAdC,GAAwC,SAAdA,EAE/BD,EAAa,IAAIh/F,WAAWyB,EAAOA,OAAQA,EAAO27F,WAAY37F,EAAO47F,WAAa,GAClFrtH,EAAEkvH,GAAcF,MAEf,IAAkB,cAAdC,EAOL,MAAM,IAAIn2H,MAAM,4BAA8Bm2H,GAL9CD,EAAa,IAAIh/F,WAAWyB,EAAOA,OAAQA,EAAO27F,WAAY37F,EAAO47F,WAAa,GAClFrtH,EAAc,WAAIyxB,GAO1B,OAAOzxB,EAGXmvH,sBAAuBJ,GAEnB,IAAI/uH,EAAI,GACR,IAAK,IAAIzM,EAAE,EAAGA,EAAIw7H,EAAMhtF,QAAQtuC,SAAUF,EAC1C,CACI,IAAI67H,EAAYL,EAAMd,MAAM16H,GAC5B67H,EAAYA,EAAUniB,UAAUmiB,EAAUz8H,QAAQ,KAAO,GACzDqN,EAAEovH,GAAa58H,KAAKs8H,qBAAqBt8H,KAAKy6H,oBAAoB8B,EAAMhtF,QAAQxuC,KAEpF,OAAOyM,EAIXqvH,aAAeN,GAIX,GAFA32H,QAAQpB,IAAI,gBAER+3H,EAAMhtF,QAAQtuC,OAAS,EACvB,MAAM,IAAIqF,MAAM,4CAEpB,IAAIw2H,EAAS,GACb,IAAK,IAAI/7H,EAAE,EAAGA,EAAIw7H,EAAMhtF,QAAQtuC,SAAUF,EACtC+7H,EAAOP,EAAMd,MAAM16H,IAAMw7H,EAAMhtF,QAAQxuC,GAG3C,MAAO,CACHqrG,OAAQ,IAAIgwB,YAAY,SAASC,OAAOS,EAAe,QACvDC,OAAQ/8H,KAAKy6H,oBAAoBqC,EAAe,QAChDE,IAAKh9H,KAAKi9H,aAAaj9H,KAAKy6H,oBAAoBqC,EAAiB,WACjE7B,SAAUj7H,KAAK28H,sBAAsB38H,KAAKy6H,oBAAoBqC,EAAiB,WAC/EpB,QAAS,IAAIU,YAAY,SAASC,OAAOS,EAAgB,SAAGxqE,MAAM,OAK1E2qE,aAAeV,GAIX,GAFA32H,QAAQpB,IAAI,oBAER+3H,EAAMhtF,QAAQtuC,OAAS,EACvB,MAAM,IAAIqF,MAAM,2CAGpB,IAAI42H,EAAaX,EAAMhtF,QAAQ,GAC/B,GAAsB,QAAlBgtF,EAAMd,MAAM,GACZ,MAAM,IAAIn1H,MAAM,yDAA2Di2H,EAAMd,MAAM,IAG3F,IAAIn8F,EAAa,GACb69F,EAAeZ,EAAMhtF,QAAQtuC,OAAS,EAC1C,IAAK,IAAIF,EAAE,EAAGA,EAAIo8H,IAAgBp8H,EAAG,CACjC,IAAIq8H,EAAOb,EAAMd,MAAM16H,EAAE,GAAGuxD,MAAM,KAClC,GAA6B,OAAzB8qE,EAAK,GAAGj8B,eAAyC,GAAfi8B,EAAKn8H,OACvC,MAAM,IAAIqF,MAAM,qGAAuG82H,GAC3H,IAAI5zH,EAAY,CACZ0G,KAAoBktH,EACpBC,YAAoBD,EAAK,GACzBE,SAAoBF,EAAK,GACzBG,mBAAoBH,EAAK,GACzBI,SAAoBJ,EAAK,GACzBK,UAAoBL,EAAK,GACzBM,QAASnB,EAAMhtF,QAAQxuC,EAAI,GAC3BiQ,UAAMjR,GAEVyJ,EAAUwH,KAAOhR,KAAK29H,sBAAsBn0H,GAC5C5D,QAAQpB,IAAI,aAAezD,EAAI,MAAQq8H,GACvC99F,EAAWl/B,KAAKoJ,GAGpB,MAAO,CACH81B,WAAYA,EACZ/tB,KAAO,IAAI6qH,YAAY,SAASC,OAAOa,IAK/CU,cAAeC,EAAKC,EAAOR,EAAU98H,EAAOg9H,EAAUO,GAClD,IAAIvwH,EAAI,GACR,IAAK,IAAIzM,EAAE,EAAGA,EAAI88H,EAAIv+F,WAAWr+B,SAAUF,EAC3C,CACI,IAAIi9H,EAAOH,EAAIv+F,WAAWv+B,GACrBi9H,EAAKX,aAAeS,GAAkB,MAATA,GAC1BE,EAAKV,UAAYA,GAAwB,MAAZA,GAC7BU,EAAKT,oBAAsB/8H,GAAkB,MAATA,GACpCw9H,EAAKP,WAAaM,GAAkB,MAATA,GAC3BC,EAAKR,UAAYA,GAAwB,MAAZA,GAEjChwH,EAAEpN,KAAK49H,GAGf,OAAOxwH,EAAEvM,OAAS,EAAIuM,EAAE,GAAK,KAIjCmwH,sBAAwBK,GACpB,IAAKA,EACD,OAAO,KAGX,IAAIhtH,EAAOgtH,EAAKN,QAEhB,OAAQM,EAAKR,UAET,IAAK,UAAW,OAAO,IAAI7/F,aAAa3sB,EAAKiuB,OAAQjuB,EAAK4pH,WAAY5pH,EAAK6pH,WAAa,GACxF,IAAK,UAAW,MAAM,IAAIj9F,aAAa5sB,EAAKiuB,OAAQjuB,EAAK4pH,WAAY5pH,EAAK6pH,WAAa,GACvF,IAAK,OAAQ,OAAO7pH,EACpB,IAAK,QAAS,OAAO,IAAIssB,WAAWtsB,EAAKiuB,OAAQjuB,EAAK4pH,WAAY5pH,EAAK6pH,WAAa,GACpF,IAAK,QAAS,OAAO,IAAIr9F,WAAWxsB,EAAKiuB,OAAQjuB,EAAK4pH,WAAY5pH,EAAK6pH,WAAa,GAEpF,QAAS,MAAM,IAAIv0H,MAAM,oCAAsC03H,EAAKR,WAK5ES,uBAA0BlgH,EAAU7N,EAAM8tH,GAClCA,GACAjgH,EAASkiB,aAAc/vB,EAAM,IAAI,GAAuB8tH,EAAKhtH,KAAMgtH,EAAKP,YAGhFS,qBAAuBC,EAAoBC,EAAmBhqG,GAE1D,IAAK+pG,EAAoB,MAAM,IAAI73H,MAAM,2DACzC,IAAK83H,EAAmB,MAAM,IAAI93H,MAAM,0DAGxC,IAAIyX,EAAW,IAAI,GAGnBA,EAASkiB,aAAc,WAAY,IAAI,GAAuBk+F,EAAoB,IAGlFpgH,EAASkiB,aAAc,QAAS,IAAI,GAAsB7L,EAAc,IAGxE,IAAIiqG,EAAc,IAAI,GAA4BD,EAAmB,GAErE,OADArgH,EAASgiB,SAAUs+F,GACZtgH,EAGXugH,YAAatB,G,gBAET,IAAKA,EAAK,MAAM,IAAI12H,MAAM,wBAG1B,MAAM66B,EAA4E,QAAnE,EAAGnhC,KAAK49H,cAAeZ,EAAK,KAAM,WAAY,IAAK,UAAW,YAAK,eAAEhsH,KAC9EkwB,EAAmE,QAA5D,EAAGlhC,KAAK49H,cAAcZ,EAAK,KAAM,QAAS,IAAK,QAAS,YAAI,eAAEhsH,KACrEutH,EAAmF,QAAtE,EAAGv+H,KAAK49H,cAAcZ,EAAK,OAAQ,gBAAiB,IAAK,QAAS,YAAI,eAAEhsH,KACrFwtH,EAAyF,QAAvE,EAAGx+H,KAAK49H,cAAcZ,EAAK,UAAW,cAAe,IAAK,QAAS,YAAI,eAAEhsH,KAC3FytH,EAAmF,QAApE,EAAGz+H,KAAK49H,cAAcZ,EAAK,UAAW,WAAY,IAAK,QAAS,YAAI,eAAEhsH,KACrF0tH,EAAkF,QAApE,EAAG1+H,KAAK49H,cAAcZ,EAAK,WAAY,QAAS,IAAK,UAAW,YAAI,eAAEhsH,KAE1F,IAAKmwB,EAAW,MAAM,IAAI76B,MAAM,8BAChC,IAAK46B,EAAS,MAAM,IAAI56B,MAAM,2BAC9B,IAAKi4H,EAAe,MAAM,IAAIj4H,MAAM,kCACpC,IAAKk4H,EAAoB,MAAM,IAAIl4H,MAAM,2CACzC,IAAKm4H,EAAiB,MAAM,IAAIn4H,MAAM,sCACtC,IAAKo4H,EAAgB,MAAM,IAAIp4H,MAAM,oCAMrC,GAAI46B,EAAQjgC,OAAS,GAAK,EAAG,MAAM,IAAIqF,MAAM,+CAE7C,IAAK,IAAIvF,EAAI,EAAGA,EAAImgC,EAAQjgC,OAAQF,IAChC,GAAImgC,EAAQngC,GAAK,GAAKmgC,EAAQngC,IAAMogC,EAAUlgC,OAC1C,MAAM,IAAIqF,MAAM,6BAExB,GAAI66B,EAAUlgC,OATQ,GASkB,EACpC,MAAM,IAAIqF,MAAM,mDAEpB,IAAK,IAAIvF,EAAI,EAAGA,EAAIw9H,EAAct9H,OAAQF,IACtC,GAAIw9H,EAAcx9H,GAAK,GAAKw9H,EAAcx9H,IAAMy9H,EAAmBv9H,OAC/D,MAAM,IAAIqF,MAAM,qCAExB,IAAK,IAAIvF,EAAI,EAAGA,EAAIw9H,EAAct9H,OAAS,EAAGF,IAC1C,GAAIw9H,EAAcx9H,IAAMw9H,EAAcx9H,EAAI,GACtC,MAAM,IAAIuF,MAAM,gCAExB,GAAIk4H,EAAmBv9H,QAAUw9H,EAAgBx9H,OAC7C,MAAM,IAAIqF,MAAM,8BAEpB,IAAK,IAAIvF,EAAI,EAAGA,EAAIy9H,EAAmBv9H,OAAQF,IAC3C,GAAIy9H,EAAmBz9H,GAAK,GAAKy9H,EAAmBz9H,IAAMmgC,EAAQjgC,OAC9D,MAAM,IAAIqF,MAAM,mCAExB,IAAK,IAAIvF,EAAI,EAAGA,EAAIy9H,EAAmBv9H,OAAQF,IAC3C,GAAIy9H,EAAmBz9H,GAAK,GAAK,EAC7B,MAAM,IAAIuF,MAAM,sDAExB,IAAK,IAAIvF,EAAI,EAAGA,EAAIy9H,EAAmBv9H,OAAS,EAAGF,IAC/C,GAAIy9H,EAAmBz9H,IAAMy9H,EAAmBz9H,EAAI,GAChD,MAAM,IAAIuF,MAAM,uCAExB,IAAK,IAAIvF,EAAI,EAAGA,EAAI09H,EAAgBx9H,OAAQF,IACxC,GAAI09H,EAAgB19H,IAAM29H,EAAez9H,OACrC,MAAM,IAAIqF,MAAM,gCAExB,GAAIo4H,EAAez9H,OAxCA,GAwCuB,EACtC,MAAM,IAAIqF,MAAM,yDAIpB,MAAMq4H,EAAYJ,EAAct9H,OAC1B29H,EAAeJ,EAAmBv9H,OAClC49H,EAAa39F,EAAQjgC,OAErB69H,EAAe,GACrB,IAAK,IAAIpyF,EAAO,EAAGA,EAAOiyF,EAAWjyF,IACrC,CACI,MAAMqyF,EAAc,GACdC,EAAsB,GACtBC,EAAmB,GAEnBC,EAAYX,EAAc7xF,GAC1ByyF,EAAUzyF,EAAOiyF,EAAY,EAC7BJ,EAAc7xF,EAAO,GACrBkyF,EAEN,IAAK,IAAIQ,EAAUF,EAAWE,EAAUD,EAASC,IACjD,CACI,IAAI5xH,EAAGb,EAAG7H,EAAGD,EACb,MAAM6qB,EAAW+uG,EAAgBW,GAejC,GAdI1vG,EAAW,GACXliB,EAAI,GACJb,EAAI,GACJ7H,EAAI,GACJD,EAAI,IAIJ2I,EAAIkxH,EAzEG,EAyEYhvG,GACnB/iB,EAAI+xH,EA1EG,EA0EYhvG,EAAwB,GAC3C5qB,EAAI45H,EA3EG,EA2EYhvG,EAAwB,GAC3C7qB,EAAI65H,EA5EG,EA4EYhvG,EAAwB,IAG3C7qB,EAAI,GACJ,SAEJ,IAAIw6H,EAAeb,EAAmBY,GAClCE,EAAaF,EAAUR,EAAe,EACpCJ,EAAmBY,EAAU,GAC7BP,EAEN,IAAK,IAAIr+H,EAAQ6+H,EAAc7+H,EAAQ8+H,EAAY9+H,IACnD,CACIu+H,EAAY3+H,KAAK2+H,EAAY99H,QAE7B,MAAMm6F,EAASl6D,EAAQ1gC,GACjB+B,EAAI4+B,EA3FA,EA2FUi6D,GACdv4F,EAAIs+B,EA5FA,EA4FUi6D,EAAyB,GACvC9oF,EAAI6uB,EA7FA,EA6FUi6D,EAAyB,GAE7C4jC,EAAoB5+H,KAAKmC,GACzBy8H,EAAoB5+H,KAAKyC,GACzBm8H,EAAoB5+H,KAAKkS,GAEzB2sH,EAAiB7+H,KAAKoN,GACtByxH,EAAiB7+H,KAAKuM,GACtBsyH,EAAiB7+H,KAAK0E,IAI9B,IAAIy6H,EAAav/H,KAAKk+H,qBAClB,IAAIvgG,aAAaqhG,GACjB,IAAIxhG,WAAWuhG,GACf,IAAIphG,aAAashG,IAErBM,EAAWthH,qBACX6gH,EAAa1+H,KAAKm/H,GAGtB,OAAOT,EAGXU,eAAgBn9H,GAEZ,IAAImL,EAAI,IAAI,GAEZ,OADAA,EAAE/F,SAAWpF,EACNmL,EA8CXyiB,MAAQjf,EAAM0e,G,QAEV9pB,QAAQgpC,KAAK,cAEbhpC,QAAQpB,IAAI,gCACZoB,QAAQpB,IAAI,aAAewM,EAAK6pH,YAGhCj1H,QAAQpB,IAAI,2BACZ,IAAI+3H,EAAQv8H,KAAK26H,WAAY3pH,EAAM,EAAGA,EAAK6pH,YAE3Cj1H,QAAQpB,IAAI,UAAY+3H,EAAMhtF,QAAQtuC,OAAS,YAC/C,IAAK,IAAIF,EAAE,EAAGA,EAAIw7H,EAAMd,MAAMx6H,SAAUF,EACpC6E,QAAQpB,IAAI+3H,EAAMd,MAAM16H,IAE5B6E,QAAQpB,IAAI,oBACZ,IAAI+qC,EAAUvvC,KAAK68H,aAAaN,GAEhC32H,QAAQpB,IAAI,mBACZ,IAAIuZ,EAAW/d,KAAKs+H,YAAY/uF,EAAQytF,KACxCp3H,QAAQpB,IAAI,kBAAoBuZ,EAAS9c,QAEzC,MACMw+H,EAAuF,QAAzE,EAAGz/H,KAAK49H,cAAcruF,EAAQytF,IAAK,WAAY,OAAQ,IAAK,QAAS,YAAI,eAAEhsH,KACzF0uH,EAAmG,QAAjF,EAAG1/H,KAAK49H,cAAcruF,EAAQytF,IAAK,WAAY,YAAa,IAAK,UAAW,aAAK,eAAEhsH,KAG3G,IAAKyuH,EAAgB,MAAM,IAAIn5H,MAAM,oCACrC,IAAKo5H,EAAoB,MAAM,IAAIp5H,MAAM,wCACzC,GAAIm5H,EAAex+H,QAAUy+H,EAAmBz+H,OAP5B,GAOkD,MAAM,IAAIqF,MAAM,+BACtF,GAAIo5H,EAAmBz+H,OARH,IAQ2B,EAAG,MAAM,IAAIqF,MAAM,2DAElE,IAAK,IAAIvF,EAAI,EAAGA,EAAI0+H,EAAex+H,OAAQF,IACvC,GAAI0+H,EAAe1+H,IAAMgd,EAAS9c,OAC9B,MAAM,IAAIqF,MAAM,+BAGxBV,QAAQpB,IAAI,+BACZ,MAAMm7H,EAAY3/H,KAAK4/H,eAAe7hH,EAAU0hH,EAAgB/vG,GAEhE9pB,QAAQpB,IAAI,qBACZ,IAAI,OAACq7H,EAAM,QAAEC,GAAW9/H,KAAK+/H,cAAcJ,EAAWF,EAAgBC,GAEtE95H,QAAQpB,IAAI,qBACZ,IAAIka,GAAS,IAAI,IAAe/B,cAAcmjH,GAI9CD,EAASA,EAAO5pE,QAAO5zD,QAAWtC,IAANsC,IAE5BuD,QAAQpB,IAAI,4BACZ,IAAIiD,EAAWzH,KAAKu7H,YAAYhsF,GAEhC3pC,QAAQpB,IAAI,yBACZ,IAAIw7H,EAAQhgI,KAAK27H,SAASpsF,GAI1B,OAFA3pC,QAAQq6H,QAAQ,cAET,CACH7zB,OAAS78D,EAAQ68D,OACjB6uB,SAAU1rF,EAAQ0rF,SAClBS,QAASnsF,EAAQmsF,QACjBsB,IAAKztF,EAAQytF,IACbD,OAASxtF,EAAQwtF,OAEjB8C,OAAAA,EACAp4H,SAAAA,EACAu4H,MAAAA,EACAthH,OAAAA,GAQRkhH,eAAgBtxG,EAAYmxG,EAAgB/vG,GAExC,MAAMivG,EAAYrwG,EAAWrtB,OAC7B2E,QAAQpB,IAAI,uBACZ,IAAI07H,EAAsB,IAAI1iG,WAAWmhG,GACzC,IAAK,IAAI59H,EAAI,EAAGA,EAAI0+H,EAAex+H,SAAUF,EAAG,CAC5C,IAAI2rC,EAAO+yF,EAAe1+H,GACtB2rC,EAAO,GACXwzF,EAAoBxzF,KAGxB9mC,QAAQpB,IAAI,yBACZ,IAAIq7H,EAAS,GACb,IAAK,IAAI9+H,EAAI,EAAGA,EAAI49H,IAAa59H,EAAG,CAChC,MAAM2b,EAAQwjH,EAAoBn/H,GAClC,GAAa,GAAT2b,EACAmjH,EAAOz/H,UAAKL,OAEX,CACD,MACM2sC,EAAO,IAAI,GADPpe,EAAWvtB,GACmB2uB,EAAUhT,GAClDmjH,EAAOz/H,KAAKssC,IAGpB,OAAOmzF,EAOXE,cAAeF,EAAQJ,EAAgBC,GAEnC,MACMS,EAAmB,IAAI3iG,WAAWqiG,EAAO5+H,QACzC6+H,EAAU,GAChB,IAAK,IAAI/+H,EAAI,EAAGA,EAAI0+H,EAAex+H,SAAUF,EAAG,CAC5C,MAAMq/H,EAAYX,EAAe1+H,GACjC,GAAIq/H,EAAY,EACZ,SAEJ,MAAM1zF,EAAOmzF,EAAOO,GACpB,IAAK1zF,EACD,SAEJ,MAAM2zF,EAAgBX,EAAmB7uF,SAZzB,GAYkC9vC,EAZlC,IAYoDA,EAAI,IAClEsN,EAASrO,KAAKw/H,eAAea,GAE7B3jH,EAAQyjH,EAAiBC,KAC/B1zF,EAAKihD,YAAYjxE,EAAOrO,GAEnBq+B,EAAK7gB,SAASy0G,kBACf5zF,EAAK7gB,SAASy0G,gBAAkB,IACpC5zF,EAAK7gB,SAASy0G,gBAAgBlgI,KAAKW,GAEnC,MAAM6I,EAAS8iC,EAAK3uB,SAASC,YAAYR,UAAU,IAAI,GACvD5T,EAAO6I,aAAapE,GACpByxH,EAAQ1/H,KAAKwJ,GAEjB,MAAO,CACHi2H,OAAQA,EACRC,QAASA,IChqBd,MAAMS,GACA,CACLC,SAAS,EACTC,WAAW,EACXzmH,OAAQ,CACJ8O,KAAM,GACNC,IAAK,KACLwgB,IAAK,GACLE,KAAM,EACNv7B,OAAQ,EACR2Z,SAAU,CAAEtlB,EAAG,EAAGM,EAAG,EAAGyP,GAAI,GAC5B1R,OAAQ,CAAE2B,EAAG,EAAGM,GAAI,EAAGyP,EAAG,GAC1BouH,SAAU,CACNC,MAAO,GACPC,cAAe,EACfC,gBAAiB,EACjBC,UAAW,GACXC,YAAa,IACbC,SAAU,KAGlB/jF,WAAY,CACRpmB,MAAO,CAAErpB,EAAG,IAAMb,EAAG,IAAM7H,EAAG,KAElC+Z,MAAO,CACHoiH,MAAM,EACNvxG,SAAU,CACNmH,MAAO,CAAErpB,EAAG,IAAMb,EAAG,IAAM7H,EAAG,KAC9BsyB,SAAU,CAAE5pB,EAAG,GAAMb,EAAG,GAAM7H,EAAG,KAErC+iB,SAAU,CACNtlB,EAAG,EAAGM,EAAG,EAAGyP,EAAG,IAGvB4uH,SAAU,CACN9kF,SAAU,CAAE5uC,EAAG,GAAMb,EAAG,GAAM7H,EAAG,IACjCu3C,YAAa,CAAE7uC,EAAG,GAAMb,EAAG,GAAM7H,EAAG,IACpC46D,UAAW,GAEfyhE,OAAQ,CAEJt5G,SAAU,CAAEtlB,EAAG,EAAGM,EAAG,EAAGyP,EAAG,GAC3BukB,MAAO,CAAErpB,EAAG,IAAMb,EAAG,IAAM7H,EAAG,KAC9B46D,UAAW,MAEf0hE,OAAQ,CACJv5G,SAAU,CAAEtlB,EAAG,GAAKM,EAAG,EAAGyP,GAAI,GAC9BukB,MAAO,CAAErpB,EAAG,IAAMb,EAAG,IAAM7H,EAAG,GAC9B46D,UAAW,GAEftiD,OAAQ,CACJnP,MAAO,IACP4Z,SAAU,CAAEtlB,EAAG,EAAGM,EAAG,EAAGyP,EAAG,GAC3BxE,SAAU,CAAEvL,EAAG,EAAGM,EAAG,EAAGyP,EAAG,GAC3Bod,SAAU,CACNmH,MAAO,CAAErpB,EAAG,EAAMb,EAAG,GAAM7H,EAAG,KAC9BoyB,SAAU,CAAE1pB,EAAG,EAAMb,EAAG,EAAM7H,EAAG,GACjCsyB,SAAU,CAAE5pB,EAAG,GAAMb,EAAG,GAAM7H,EAAG,IACjCqvB,aAAa,EACbkD,UAAW,GACXmC,WAAW,KC1DdlY,GAAY,CACrB+/G,QAAS,IAAI,EAAc,EAAG,GAAI,GAClCC,KAAM,IAAI,EAAc,EAAG,EAAG,GAC9B54G,KAAM,IAAI,GAAe,EAAG,EAAG,GAC/BC,MAAO,IAAI,EAAc,EAAG,EAAG,GAC/B1C,GAAI,IAAI,EAAc,EAAG,EAAG,GAC5Bs7G,KAAM,IAAI,EAAc,GAAI,EAAG,IAG5B,MAAMC,GAOT17H,YAAYkU,EAAQioF,GAChBjiG,KAAKga,OAASA,EACdha,KAAKyhI,cAAcx/B,GAGnBjiG,KAAK0hI,gBAAkB,IAAI,EAC3B1hI,KAAK2hI,gBAAkB,IAAI,EAC3B3hI,KAAK0hI,gBAAgBj7H,KAAKzG,KAAKga,OAAO6N,UACtC7nB,KAAK2hI,gBAAgBl7H,KAAKzG,KAAKga,OAAOvD,YAG1CgL,OAAOoG,GAAY7nB,KAAKga,OAAOyH,OAAOoG,GAEtC45G,cAAcG,GAEV5hI,KAAKga,OAAOuvB,IAAMq4F,EAAY5nH,OAAOuvB,IACrCvpC,KAAKga,OAAOyvB,KAAOm4F,EAAY5nH,OAAOyvB,KACtCzpC,KAAKga,OAAO8O,KAAO84G,EAAY5nH,OAAO8O,KACtC9oB,KAAKga,OAAO+O,IAAM64G,EAAY5nH,OAAO+O,IACrC/oB,KAAKga,OAAO6N,SAASphB,KAAKo7H,GAAOD,EAAY5nH,OAAO6N,WACpD7nB,KAAK8hI,aAAeD,GAAOD,EAAY5nH,OAAOpZ,QAC9CZ,KAAKga,OAAOyH,OAAOzhB,KAAK8hI,cACxB9hI,KAAKiiG,SAAW2/B,EAGpBG,aAAa7rH,EAAMoL,GAAU+/G,QAASV,EAAQ,EAAGqB,GAAY,GACzD,IAAIpkH,EAAS,IAAI,EACjBA,EAAOnX,KAAKyP,GACRyqH,GACA/iH,EAAOxW,eAAeu5H,GAC1B/iH,EAAOzE,gBAAgBnZ,KAAKga,OAAOvD,YACnC,MAAM5T,EAAI7C,KAAKga,OAAO6N,SAAShlB,EAC/B7C,KAAKga,OAAO6N,SAASlhB,IAAIiX,GACrBokH,IACAhiI,KAAKga,OAAO6N,SAAShlB,EAAIA,GAGjCo/H,YAAYzrC,GACR,MAAMmqC,EAAQ3gI,KAAKiiG,SAASjoF,OAAO0mH,SAASM,SAC5ChhI,KAAK+hI,aAAa,IAAI,GAAevrC,EAAGj0F,EAAGi0F,EAAG3zF,EAAG,GAAI89H,GAGzDuB,eAAe1rC,GACX,IAAI7/E,EAAQ,IAAI,GAAY,EAAG,EAAG,EAAG,OACrCA,EAAMyS,kBAAkBppB,KAAKga,OAAOvD,YACpCE,EAAM9T,IAAM2zF,EAAGj0F,EAAIvC,KAAKiiG,SAASjoF,OAAO0mH,SAASK,YACjDpqH,EAAMpU,IAAMi0F,EAAG3zF,EAAI7C,KAAKiiG,SAASjoF,OAAO0mH,SAASK,YACjDpqH,EAAMrE,EAAI,EACV,MAAM6vH,EAAO7gI,KAAKC,GAAK,EACjB6gI,GAAiB,EAAI9gI,KAAKC,GAC1B8gI,EAAgB,EAAI/gI,KAAKC,GAC/BoV,EAAMpU,EAAIjB,KAAKY,IAAIigI,EAAOE,EAAe/gI,KAAKW,IAAIkgI,EAAOC,EAAezrH,EAAMpU,IAC9EvC,KAAKga,OAAOvD,WAAWC,aAAaC,GAGxC2rH,cACItiI,KAAKga,OAAO6N,SAASphB,KAAKzG,KAAK0hI,iBAC/B1hI,KAAKga,OAAOvD,WAAWhQ,KAAKzG,KAAK2hI,kBAMzC,SAASE,GAAOnkI,GACZ,OAAO,IAAI,EAAcA,EAAI6E,EAAG7E,EAAImF,EAAGnF,EAAI4U,GClExC,IAAIiwH,GAAQ,IACZ,MAAMC,GAAb,cAWI,KAAA3C,OAAS,GAaTl2F,KAAK31B,GAEDhU,KAAKiiG,UAAW,IAAK23B,IAAaM,UAAUqG,GAAwBvsH,OAASjU,GAG7E,CAEI,IAAI8O,EAASC,SAAS2zH,eAAeziI,KAAKiiG,SAASygC,UAG9C7zH,IACDA,EAASC,SAAS6zH,cAAc,UAChC7zH,SAAS8zH,KAAKC,YAAYh0H,IAE9B7O,KAAK6O,OAASA,EAIlB7O,KAAK2rC,SAAW,IAAI,GAAoB,CAAE6uC,WAAW,EAAM3rE,OAAQ7O,KAAK6O,SACxE7O,KAAK2rC,SAASq3C,cAAciE,OAAO67C,kBAGnC9iI,KAAKga,OAAS,IAAI,GAClBha,KAAK+iI,iBAAmB,IAAIvB,GACxBxhI,KAAKga,OACLha,KAAKiiG,UAETjiG,KAAKgjI,cAAa,GAGlBhjI,KAAK4rC,MAAQ,IAAI,GAgBjB5rC,KAAK6e,MAAQ,IAAI,GACb,IAAI,GAA0B,IAAM,KACpC,IAAI,IAER7e,KAAK6e,MAAM/Q,SAASvL,GAAKjB,KAAKC,GAAK,EACnCvB,KAAK4rC,MAAMjlC,IAAI3G,KAAK6e,OAGpB7e,KAAKkhI,SAAW,IAAI,GACpBlhI,KAAKmhI,OAAS,IAAI,GAClBnhI,KAAKohI,OAAS,IAAI,GAElBphI,KAAK4rC,MAAMjlC,IAAI3G,KAAKkhI,UACpBlhI,KAAK4rC,MAAMjlC,IAAI3G,KAAKmhI,QACpBnhI,KAAK4rC,MAAMjlC,IAAI3G,KAAKohI,QAGpBphI,KAAK0vB,SAAW,IAAI,GAGpB1vB,KAAKijI,cAaL,MAAMC,EAAOp0H,SAAS6zH,cAAc,OACpCO,EAAKv0H,IAAM,WACXu0H,EAAKtoG,MAAM/S,SAAW,QACtBq7G,EAAKtoG,MAAMhS,IAAM,OACjBs6G,EAAKtoG,MAAMlS,KAAO,OAClBw6G,EAAKl9H,OAAS,GACdk9H,EAAKn9H,MAAQ,IACb+I,SAAS8zH,KAAKO,QAAQD,GAGtB,MAAME,EAAUt0H,SAAS6zH,cAAc,OACvCS,EAAQnjG,aAAa,OAAQ,eAC7BnxB,SAASu0H,KAAKR,YAAYO,GAI1BpjI,KAAKsjI,SACDtjI,KAAKiiG,SAASlwF,KACdgpH,GAAO/6H,KAAKujI,YAAYxI,KAI5B/6H,KAAK+0H,UAGTwO,YAAYxI,GAER,IAAK,IAAIh6H,EAAI,EAAGA,EAAIg6H,EAAI8E,OAAO5+H,SAAUF,EAErCf,KAAK6/H,OAAOz/H,KAAK26H,EAAI8E,OAAO9+H,IAC5Bf,KAAK4rC,MAAMjlC,IAAIo0H,EAAI8E,OAAO9+H,IAG9Bf,KAAK0gI,SAAW,IAAI8C,GAAYxjI,KAAK6O,OAAQ7O,KAAKiiG,SAAUjiG,KAAK+iI,kBACjE/iI,KAAK0gI,SAAS+C,WACdzjI,KAAK0gI,SAASgD,OAAS1jI,KACvBA,KAAK+6H,IAAMA,EAEXA,EAAIr8G,OAAOjM,aAAazS,KAAK2jI,iBAC7B3jI,KAAK4jI,aAAa7I,EAAIr8G,QAAQ,GAGlC4kH,SAASO,EAAUC,GAUfl+H,QAAQpB,IAAI,iBAAmBq/H,GAC/B,MAAME,EATN,SAAgBF,GACZ,MAAMG,EAAqBH,EAAStjB,YAAY,KAC5CyjB,GAAsB,IACtBH,EAAWA,EAASppB,UAAU,EAAGupB,IACrC,MAAMC,EAASJ,EAAStjB,YAAY,KACpC,OAAOsjB,EAAS/iI,MAAMmjI,EAAS,GAAG9iC,cAI1B+iC,CAAOL,GACR,OAAPE,GAKJn+H,QAAQgpC,KAAK,eACA,IAAI2rF,IACV5xB,KACHk7B,GACC9I,IACGn1H,QAAQpB,IAAI,+BAAiCu2H,EAAI8E,OAAO5+H,OAAS,YACjE2E,QAAQq6H,QAAQ,cAChB6D,EAAU/I,UAEdh7H,OACAA,IAdA6F,QAAQmE,MAAM,yBAmBtBgrH,UACIjmF,uBAAsB,IAAM9uC,KAAK+0H,YACjC/0H,KAAKgjI,eACLhjI,KAAKmkI,gBAELnkI,KAAK2rC,SAASO,OAAOlsC,KAAK4rC,MAAO5rC,KAAKga,QAClCha,KAAKsiH,OACLtiH,KAAKsiH,MAAM1rG,SAGnButH,gBACI,IAAK,IAAIpjI,EAAI,EAAGA,EAAIf,KAAK6/H,OAAO5+H,OAAQF,IACpCf,KAAKokI,gBAAgBpkI,KAAK6/H,OAAO9+H,IAIzCqjI,gBAAgB13F,GAOZ,MAAMr+B,EAASrO,KAAK2jI,gBACpBj3F,EAAKp8B,kBAAmB,EACxBo8B,EAAKr+B,OAAO5H,KAAK4H,GAGrBs1H,gBACI,MAAM1H,EAAMj8H,KAAKiiG,SAAS7kF,OAAOyK,SAC3Bw8G,EAgWd,SAAsBA,GAClB,MAAMz/H,EAAI,IAAI,EAEd,OADAA,EAAE8R,aANN,SAAiB2tH,GACb,OAAO,IAAI,GAAYA,EAAI9hI,EAAIjB,KAAKC,GAAK,IAAK8iI,EAAIxhI,EAAIvB,KAAKC,GAAK,IAAK8iI,EAAI/xH,EAAIhR,KAAKC,GAAK,KAKxE+iI,CAAQD,IAChBz/H,EAnWS2/H,CAAavkI,KAAKiiG,SAAS7kF,OAAOtP,UACxC02H,EAwVH,IAAI,EADMjiI,EAvVW,GAwVAA,EAAGA,GADnC,IAAqBA,EArVb,OADe,IAAI,IAAgBsjB,QAAQo2G,EAAKoI,EAAKG,GAKzDC,UAAU1mH,GACN,MAAMyb,EAAY,IAAI,GAAwBzb,GACxC2R,EAAW,IAAI,GAAwB,CACzCoF,WAAY,EACZT,QAAU,GACVwC,MAAQ,IAAI,GAAY,KACxBvC,aAAc,IAEZxD,EAAO,IAAI,GAAmB0I,EAAW9J,GAK/C,OAHA1vB,KAAK4rC,MAAMjlC,IAAImqB,GAGR,KACH9wB,KAAK4rC,MAAMze,OAAO2D,GAClB0I,EAAUtnB,UACVwd,EAASxd,WAIjBwyH,oBAAoBh4F,EAAMlsC,GACtB,IAAIud,EAAW2uB,EAAK3uB,SAASvX,QAEzB6H,EAAS,IAAI,GAKjB,OAJAq+B,EAAK6gD,YAAY/sF,EAAO6N,GACxBA,EAASrO,KAAK2jI,gBAAgBx8H,SAASkH,GACvC0P,EAAStL,aAAapE,GAEf0P,EAGX6lH,aAAallH,EAAQtY,GAAgB,GAC9BA,GACCpG,KAAKga,OAAO6N,SAASzhB,KAAKsY,EAAO9U,OAAO/G,GAE5C,MAAMuU,EAAOpX,KAAKga,OAAO6N,SAASrhB,QAAQQ,IAAI0X,EAAO9U,QAAQtB,YACvDq8H,EAAY3kI,KAAKga,OAAOuvB,IAAMjoC,KAAKC,GAAK,IACxCqjI,EAAO,KAAOlmH,EAAOlD,QAAU,EAAI,EAAIla,KAAKipC,IAAIo6F,IAChD1I,EAAM7kH,EAAK5Q,QAAQY,eAAew9H,GAAMj+H,IAAI+X,EAAO9U,QAEzD5J,KAAKga,OAAOyH,OAAO/C,EAAO9U,QAC1B5J,KAAKga,OAAO6N,SAASphB,KAAKw1H,GAG9B4I,UAAUvnH,EAAKlX,GAAiB,GAC5BpG,KAAK4jI,aAAatmH,EAAIuC,kBAAkB,IAAI,IAAiBzZ,GAGjE0+H,aAAap4F,EAAMq4F,GACf,OAAOr4F,EAAK7gB,SAASy0G,gBAAgByE,GAGzCr7F,MAAMgD,EAAMlsC,GACR,MAAMud,EAAW/d,KAAK0kI,oBAAoBh4F,EAAMlsC,GAC1CwkI,EAAWhlI,KAAKykI,UAAU1mH,GAEhCA,EAAS2iB,wBACT,MAAMhiB,EAASX,EAAS2hB,eAAel5B,QAGvC,OAFAxG,KAAK4jI,aAAallH,GAEX,KACHsmH,IACAjnH,EAAS7L,WAoCjB8wH,aAAa70G,GAAiB,GAC1B,IAAKnuB,KAAKiiG,SAASgjC,aAAe92G,EAC9B,OAEJ,MAAMtf,EAAS7O,KAAK2rC,SAASg0C,WAEvB/4E,GADSiI,EAAOq2H,cACZj+C,OAAOk+C,WAAYl+C,OAAO67C,kBAC9Bl2H,EAAIq6E,OAAOm+C,YAAcn+C,OAAO67C,iBACtC9iI,KAAK2rC,SAASl3B,QAAQ7N,EAAGgG,GAAG,GAG5B5M,KAAKga,OAAOwvB,OAAS36B,EAAO9I,MAAQ8I,EAAO7I,OAC3ChG,KAAKga,OAAO8vB,yBAIhBm5F,cAEIjjI,KAAK4rC,MAAMqR,WAAaooF,GAAQrlI,KAAKiiG,SAAShlD,WAAWpmB,OACzD72B,KAAK6e,MAAM0M,QAAUvrB,KAAKiiG,SAASpjF,MAAMoiH,KACzCjhI,KAAKslI,eAAetlI,KAAK6e,MAAM6Q,SAAU1vB,KAAKiiG,SAASpjF,MAAM6Q,UAC7D1vB,KAAK6e,MAAMgJ,SAASphB,KAAK8+H,GAAMvlI,KAAKiiG,SAASpjF,MAAMgJ,WACnD7nB,KAAKmhI,OAAOt5G,SAASphB,KAAK8+H,GAAMvlI,KAAKiiG,SAASk/B,OAAOt5G,WACrD7nB,KAAKmhI,OAAOtqG,MAAQwuG,GAAQrlI,KAAKiiG,SAASk/B,OAAOtqG,OACjD72B,KAAKmhI,OAAOzhE,UAAY1/D,KAAKiiG,SAASk/B,OAAOzhE,UAC7C1/D,KAAKohI,OAAOv5G,SAASphB,KAAK8+H,GAAMvlI,KAAKiiG,SAASm/B,OAAOv5G,WACrD7nB,KAAKohI,OAAOvqG,MAAQwuG,GAAQrlI,KAAKiiG,SAASm/B,OAAOvqG,OACjD72B,KAAKohI,OAAO1hE,UAAY1/D,KAAKiiG,SAASm/B,OAAO1hE,UAE7C1/D,KAAKkhI,SAAS7kF,YAAcgpF,GAAQrlI,KAAKiiG,SAASi/B,SAAS7kF,aAC3Dr8C,KAAKkhI,SAASxhE,UAAY1/D,KAAKiiG,SAASi/B,SAASxhE,UACjD1/D,KAAK+iI,iBAAiBtB,cAAczhI,KAAKiiG,UAG7CqjC,eAAeE,EAAgBvjC,GACvB,UAAWA,IAAUujC,EAAe3uG,MAAQwuG,GAAQpjC,EAASprE,QAC7D,gBAAiBorE,IAAUujC,EAAerxG,YAAc8tE,EAAS9tE,aACjE,aAAc8tE,IAAUujC,EAAetuG,SAAWmuG,GAAQpjC,EAAS/qE,WACnE,aAAc+qE,IAAUujC,EAAepuG,SAAWiuG,GAAQpjC,EAAS7qE,WACnE,cAAe6qE,IAAUujC,EAAehsG,UAAYyoE,EAASzoE,WAC7D,cAAeyoE,IAAUujC,EAAenuG,UAAY4qE,EAAS5qE,WAIrEouG,4BAA4BC,GAExB,IAAIC,EAAe3lI,KAAK+6H,IAAIE,SAAS,YAAY,eAAeyK,GAC5DE,EAAc5lI,KAAK+6H,IAAIE,SAAS,eAAqB,KAAE0K,GAE3D,OADW3lI,KAAK+6H,IAAIW,QAAQkK,IAsBpC,MAAMpC,GAYF19H,YAAY+I,EAA2BozF,EAAe8gC,GA2BtD,KAAA8C,UAAallI,IACT,IAAIggI,EAAQ3gI,KAAKiiG,SAASjoF,OAAO0mH,SAASC,MAK1C,OAJIhgI,EAAMmlI,WACNnF,GAAS3gI,KAAKiiG,SAASjoF,OAAO0mH,SAASG,iBACvClgI,EAAMolI,SACNpF,GAAS3gI,KAAKiiG,SAASjoF,OAAO0mH,SAASE,eACnCjgI,EAAMqlI,SACV,KA9DL,GA+DShmI,KAAK+iI,iBAAiBhB,aAAazgH,GAAUoH,KAAMi4G,GACnD,MACJ,KA3DG,GA4DC3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAUoH,KAAMi4G,GAAO,GAC1D,MACJ,KAnEL,GAoES3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAUqH,MAAOg4G,GACpD,MACJ,KA/DI,GAgEA3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAUqH,MAAOg4G,GAAO,GAC3D,MACJ,KArEL,GAsES3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAU+/G,QAASV,GACtD,MACJ,KAtEC,GAuEG3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAU+/G,QAASV,GAAO,GAC7D,MACJ,KA5EL,GA6ES3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAUggH,KAAMX,GACnD,MACJ,KA1EG,GA2EC3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAUggH,KAAMX,GAAO,GAC1D,MACJ,KAnFL,GAoFK,KA3EA,GA4EI3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAU2E,GAAI06G,GACjD,MACJ,KAxFL,GAyFK,KA9EE,GA+EE3gI,KAAK+iI,iBAAiBhB,aAAazgH,GAAUigH,KAAMZ,GACnD,MACJ,KApFF,GAqFM3gI,KAAK+iI,iBAAiBT,cACtB,MACJ,QACI,OAER3hI,EAAM2hF,kBAGV,KAAA2jD,YAAetlI,IACX,IAAKX,KAAKkmI,YACN,OAEJvlI,EAAM2hF,iBAGN,MAAM6jD,EAASxlI,EAAMylI,WAAazlI,EAAM0lI,cAAgB1lI,EAAM2lI,iBAAmB,EAC3EC,EAAS5lI,EAAM6lI,WAAa7lI,EAAM8lI,cAAgB9lI,EAAM+lI,iBAAmB,EAC3E31G,EAAQ,IAAI,EAAco1G,EAAQI,GAEpB,EAAhB5lI,EAAMgmI,QACN3mI,KAAK+iI,iBAAiBd,YAAYlxG,GAGlC/wB,KAAK+iI,iBAAiBb,eAAenxG,IAG7C,KAAA61G,aAAgBjmI,IACZA,EAAM2hF,iBACN3hF,EAAMkmI,kBACN,MAAMlG,EAAQ3gI,KAAKiiG,SAASjoF,OAAO0mH,SAASI,UACtC5qH,EAAMvV,EAAM4lI,OAAS,EAAIjlH,GAAUggH,KAAOhgH,GAAU+/G,QAC1DrhI,KAAK+iI,iBAAiBhB,aAAa7rH,EAAKyqH,IAI5C,KAAAmG,YAAenmI,I,MACXA,EAAM2hF,iBACNtiF,KAAKkmI,aAAc,EAEnB,MAAMa,EAAO/mI,KAAKgnI,aAAarmI,EAAM4B,EAAG5B,EAAMkC,GAC9C,GAAIkkI,EAAK9lI,OAAS,EAAG,CACjB,MAAMyrC,EAAOq6F,EAAK,GAAG3pH,OACf5c,EAAQumI,EAAK,GAAGt5C,WAEhBi4C,EAAY1lI,KAAK0jI,OAAOoB,aAAap4F,EAAMlsC,GAC3C0P,EAAOlQ,KAAK0jI,OAAO+B,4BAA4BC,GAEnC,QAAlB,EAAA1lI,KAAKinI,qBAAa,SAAEnpI,KAAKkC,MACzBA,KAAKinI,cAAgBjnI,KAAK0jI,OAAOh6F,MAAMgD,EAAMlsC,GAE7CoF,QAAQpB,IAAI,gBACZoB,QAAQpB,IAAI,YAAcuiI,EAAK,GAAGrpH,MAAMnb,EAAI,IAAMwkI,EAAK,GAAGrpH,MAAM7a,EAAI,IAAMkkI,EAAK,GAAGrpH,MAAMpL,GACxF1M,QAAQpB,IAAI,YAAc0L,GAK9BlQ,KAAK6O,OAAO66B,MAAQ1pC,KAAK6O,OAAO66B,QAAUu9C,OAAOv9C,SAarD,KAAAw9F,UAAaC,IACTnnI,KAAKkmI,aAAc,GAzInBlmI,KAAK6O,OAASA,EACd7O,KAAKiiG,SAAWA,EAChBjiG,KAAK+iI,iBAAmBA,EACxB/iI,KAAKonI,WAAa,aAClBpnI,KAAKkmI,aAAc,EAGvBzC,WACIzjI,KAAK6O,OAAOjP,iBAAiB,YAAaI,KAAK8mI,aAC/C9mI,KAAK6O,OAAOjP,iBAAiB,QAASI,KAAK4mI,cAC3C5mI,KAAK6O,OAAOjP,iBAAiB,YAAaI,KAAKimI,aAC/CjmI,KAAK6O,OAAOjP,iBAAiB,UAAWI,KAAKknI,WAC7Cp4H,SAASlP,iBAAiB,UAAWI,KAAK6lI,WAE1C7lI,KAAKonI,WAAa,WACdpnI,KAAK6O,OAAOvO,oBAAoB,YAAaN,KAAK8mI,aAClD9mI,KAAK6O,OAAOvO,oBAAoB,QAASN,KAAK4mI,cAC9C5mI,KAAK6O,OAAOvO,oBAAoB,YAAaN,KAAKimI,aAClDjmI,KAAK6O,OAAOvO,oBAAoB,UAAWN,KAAKknI,WAChDp4H,SAASxO,oBAAoB,UAAWN,KAAK6lI,WAE7C7lI,KAAKkmI,aAAc,EACnBlmI,KAAKonI,WAAa,cAwG1BJ,aAAaK,EAAQC,GACjB,IAAI/kI,EAAK8kI,EAASpgD,OAAOk+C,WAAc,EAAI,EACvCtiI,GAAOykI,EAASrgD,OAAOm+C,YAAe,EAAI,EAC1CmC,EAAQ,IAAI,EAAchlI,EAAGM,GACjC,MAAMyiC,EAAY,IAAI,GAGtB,OAFAA,EAAUyoF,cAAcwZ,EAAOvnI,KAAK+iI,iBAAiB/oH,QAE9CsrB,EAAU2oF,iBAAiBjuH,KAAK0jI,OAAO7D,SAatD,SAASwF,GAAQtgI,GACb,KAJwB,iBADXrH,EAKAqH,IAJuB,MAAOrH,GAAO,MAAOA,GAAO,MAAOA,GAKnE,MAAM,IAAI4I,MAAM,eANxB,IAAiB5I,EAOb,OAAO,IAAI,GAAYqH,EAAEyI,EAAI,IAAKzI,EAAE4H,EAAI,IAAK5H,EAAED,EAAI,KAGvD,SAASygI,GAAM7nI,GACX,OAAO,IAAI,EAAcA,EAAI6E,EAAG7E,EAAImF,EAAGnF,EAAI4U,G","sources":["webpack://vim/webpack/bootstrap","webpack://vim/webpack/runtime/define property getters","webpack://vim/webpack/runtime/hasOwnProperty shorthand","webpack://vim/webpack/runtime/make namespace object","webpack://vim/./node_modules/three/src/constants.js","webpack://vim/./node_modules/three/src/core/EventDispatcher.js","webpack://vim/./node_modules/three/src/math/MathUtils.js","webpack://vim/./node_modules/three/src/math/Vector2.js","webpack://vim/./node_modules/three/src/math/Matrix3.js","webpack://vim/./node_modules/three/src/extras/ImageUtils.js","webpack://vim/./node_modules/three/src/textures/Texture.js","webpack://vim/./node_modules/three/src/math/Vector4.js","webpack://vim/./node_modules/three/src/renderers/WebGLRenderTarget.js","webpack://vim/./node_modules/three/src/math/Quaternion.js","webpack://vim/./node_modules/three/src/math/Vector3.js","webpack://vim/./node_modules/three/src/math/Box3.js","webpack://vim/./node_modules/three/src/math/Sphere.js","webpack://vim/./node_modules/three/src/math/Ray.js","webpack://vim/./node_modules/three/src/math/Matrix4.js","webpack://vim/./node_modules/three/src/math/Euler.js","webpack://vim/./node_modules/three/src/core/Layers.js","webpack://vim/./node_modules/three/src/core/Object3D.js","webpack://vim/./node_modules/three/src/math/Plane.js","webpack://vim/./node_modules/three/src/math/Triangle.js","webpack://vim/./node_modules/three/src/materials/Material.js","webpack://vim/./node_modules/three/src/math/Color.js","webpack://vim/./node_modules/three/src/materials/MeshBasicMaterial.js","webpack://vim/./node_modules/three/src/core/BufferAttribute.js","webpack://vim/./node_modules/three/src/utils.js","webpack://vim/./node_modules/three/src/core/BufferGeometry.js","webpack://vim/./node_modules/three/src/objects/Mesh.js","webpack://vim/./node_modules/three/src/geometries/BoxGeometry.js","webpack://vim/./node_modules/three/src/renderers/shaders/UniformsUtils.js","webpack://vim/./node_modules/three/src/materials/ShaderMaterial.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/default_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/default_fragment.glsl.js","webpack://vim/./node_modules/three/src/cameras/Camera.js","webpack://vim/./node_modules/three/src/cameras/PerspectiveCamera.js","webpack://vim/./node_modules/three/src/cameras/CubeCamera.js","webpack://vim/./node_modules/three/src/textures/CubeTexture.js","webpack://vim/./node_modules/three/src/renderers/WebGLCubeRenderTarget.js","webpack://vim/./node_modules/three/src/textures/DataTexture.js","webpack://vim/./node_modules/three/src/math/Frustum.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLAnimation.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLAttributes.js","webpack://vim/./node_modules/three/src/geometries/PlaneGeometry.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/begin_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/bsdfs.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/color_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/color_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/common.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_common_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_physical_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/gradientmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_pars_begin.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_begin.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_maps.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_end.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/map_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_begin.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_maps.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_begin.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_maps.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/packing.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/project_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/transmissionmap_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/transmissionmap_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/uv_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/background_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/background_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/cube_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/cube_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/depth_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/depth_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/equirect_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/equirect_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/normal_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/normal_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/points_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/points_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/shadow_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/shadow_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/sprite_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/sprite_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/UniformsLib.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLBackground.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLBindingStates.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLCapabilities.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLClipping.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLCubeMaps.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLExtensions.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLGeometries.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLInfo.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLMorphtargets.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLObjects.js","webpack://vim/./node_modules/three/src/textures/DataTexture2DArray.js","webpack://vim/./node_modules/three/src/textures/DataTexture3D.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLUniforms.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLShader.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLProgram.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLPrograms.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLProperties.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLRenderLists.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLLights.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLRenderStates.js","webpack://vim/./node_modules/three/src/materials/MeshDepthMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshDistanceMaterial.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLShadowMap.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/vsm_vert.glsl.js","webpack://vim/./node_modules/three/src/renderers/shaders/ShaderLib/vsm_frag.glsl.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLState.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLTextures.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLUtils.js","webpack://vim/./node_modules/three/src/cameras/ArrayCamera.js","webpack://vim/./node_modules/three/src/objects/Group.js","webpack://vim/./node_modules/three/src/renderers/webxr/WebXRController.js","webpack://vim/./node_modules/three/src/renderers/webxr/WebXRManager.js","webpack://vim/./node_modules/three/src/renderers/webgl/WebGLMaterials.js","webpack://vim/./node_modules/three/src/renderers/WebGLRenderer.js","webpack://vim/./node_modules/three/src/renderers/WebGL1Renderer.js","webpack://vim/./node_modules/three/src/scenes/Scene.js","webpack://vim/./node_modules/three/src/core/InterleavedBuffer.js","webpack://vim/./node_modules/three/src/core/InterleavedBufferAttribute.js","webpack://vim/./node_modules/three/src/materials/SpriteMaterial.js","webpack://vim/./node_modules/three/src/objects/Sprite.js","webpack://vim/./node_modules/three/src/objects/LOD.js","webpack://vim/./node_modules/three/src/objects/SkinnedMesh.js","webpack://vim/./node_modules/three/src/objects/Bone.js","webpack://vim/./node_modules/three/src/objects/Skeleton.js","webpack://vim/./node_modules/three/src/objects/InstancedMesh.js","webpack://vim/./node_modules/three/src/materials/LineBasicMaterial.js","webpack://vim/./node_modules/three/src/objects/Line.js","webpack://vim/./node_modules/three/src/objects/LineSegments.js","webpack://vim/./node_modules/three/src/objects/LineLoop.js","webpack://vim/./node_modules/three/src/materials/PointsMaterial.js","webpack://vim/./node_modules/three/src/objects/Points.js","webpack://vim/./node_modules/three/src/textures/VideoTexture.js","webpack://vim/./node_modules/three/src/textures/CompressedTexture.js","webpack://vim/./node_modules/three/src/textures/CanvasTexture.js","webpack://vim/./node_modules/three/src/textures/DepthTexture.js","webpack://vim/./node_modules/three/src/geometries/EdgesGeometry.js","webpack://vim/./node_modules/three/src/extras/Earcut.js","webpack://vim/./node_modules/three/src/extras/ShapeUtils.js","webpack://vim/./node_modules/three/src/geometries/ExtrudeGeometry.js","webpack://vim/./node_modules/three/src/geometries/ParametricGeometry.js","webpack://vim/./node_modules/three/src/geometries/ShapeGeometry.js","webpack://vim/./node_modules/three/src/geometries/WireframeGeometry.js","webpack://vim/./node_modules/three/src/materials/ShadowMaterial.js","webpack://vim/./node_modules/three/src/materials/RawShaderMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshStandardMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshPhysicalMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshPhongMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshToonMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshNormalMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshLambertMaterial.js","webpack://vim/./node_modules/three/src/materials/MeshMatcapMaterial.js","webpack://vim/./node_modules/three/src/materials/LineDashedMaterial.js","webpack://vim/./node_modules/three/src/animation/AnimationUtils.js","webpack://vim/./node_modules/three/src/math/Interpolant.js","webpack://vim/./node_modules/three/src/math/interpolants/CubicInterpolant.js","webpack://vim/./node_modules/three/src/math/interpolants/LinearInterpolant.js","webpack://vim/./node_modules/three/src/math/interpolants/DiscreteInterpolant.js","webpack://vim/./node_modules/three/src/animation/KeyframeTrack.js","webpack://vim/./node_modules/three/src/animation/tracks/BooleanKeyframeTrack.js","webpack://vim/./node_modules/three/src/animation/tracks/ColorKeyframeTrack.js","webpack://vim/./node_modules/three/src/animation/tracks/NumberKeyframeTrack.js","webpack://vim/./node_modules/three/src/math/interpolants/QuaternionLinearInterpolant.js","webpack://vim/./node_modules/three/src/animation/tracks/QuaternionKeyframeTrack.js","webpack://vim/./node_modules/three/src/animation/tracks/StringKeyframeTrack.js","webpack://vim/./node_modules/three/src/animation/tracks/VectorKeyframeTrack.js","webpack://vim/./node_modules/three/src/animation/AnimationClip.js","webpack://vim/./node_modules/three/src/loaders/Cache.js","webpack://vim/./node_modules/three/src/loaders/LoadingManager.js","webpack://vim/./node_modules/three/src/loaders/Loader.js","webpack://vim/./node_modules/three/src/loaders/FileLoader.js","webpack://vim/./node_modules/three/src/loaders/AnimationLoader.js","webpack://vim/./node_modules/three/src/loaders/CompressedTextureLoader.js","webpack://vim/./node_modules/three/src/loaders/ImageLoader.js","webpack://vim/./node_modules/three/src/loaders/CubeTextureLoader.js","webpack://vim/./node_modules/three/src/loaders/DataTextureLoader.js","webpack://vim/./node_modules/three/src/loaders/TextureLoader.js","webpack://vim/./node_modules/three/src/extras/core/Curve.js","webpack://vim/./node_modules/three/src/extras/curves/EllipseCurve.js","webpack://vim/./node_modules/three/src/extras/curves/ArcCurve.js","webpack://vim/./node_modules/three/src/extras/curves/CatmullRomCurve3.js","webpack://vim/./node_modules/three/src/extras/core/Interpolations.js","webpack://vim/./node_modules/three/src/extras/curves/CubicBezierCurve.js","webpack://vim/./node_modules/three/src/extras/curves/CubicBezierCurve3.js","webpack://vim/./node_modules/three/src/extras/curves/LineCurve.js","webpack://vim/./node_modules/three/src/extras/curves/LineCurve3.js","webpack://vim/./node_modules/three/src/extras/curves/QuadraticBezierCurve.js","webpack://vim/./node_modules/three/src/extras/curves/QuadraticBezierCurve3.js","webpack://vim/./node_modules/three/src/extras/curves/SplineCurve.js","webpack://vim/./node_modules/three/src/extras/core/CurvePath.js","webpack://vim/./node_modules/three/src/extras/core/Path.js","webpack://vim/./node_modules/three/src/extras/core/Shape.js","webpack://vim/./node_modules/three/src/lights/Light.js","webpack://vim/./node_modules/three/src/lights/HemisphereLight.js","webpack://vim/./node_modules/three/src/lights/LightShadow.js","webpack://vim/./node_modules/three/src/lights/SpotLightShadow.js","webpack://vim/./node_modules/three/src/lights/SpotLight.js","webpack://vim/./node_modules/three/src/lights/PointLightShadow.js","webpack://vim/./node_modules/three/src/lights/PointLight.js","webpack://vim/./node_modules/three/src/cameras/OrthographicCamera.js","webpack://vim/./node_modules/three/src/lights/DirectionalLightShadow.js","webpack://vim/./node_modules/three/src/lights/DirectionalLight.js","webpack://vim/./node_modules/three/src/lights/AmbientLight.js","webpack://vim/./node_modules/three/src/lights/RectAreaLight.js","webpack://vim/./node_modules/three/src/math/SphericalHarmonics3.js","webpack://vim/./node_modules/three/src/lights/LightProbe.js","webpack://vim/./node_modules/three/src/loaders/MaterialLoader.js","webpack://vim/./node_modules/three/src/core/InstancedBufferGeometry.js","webpack://vim/./node_modules/three/src/core/InstancedBufferAttribute.js","webpack://vim/./node_modules/three/src/loaders/BufferGeometryLoader.js","webpack://vim/./node_modules/three/src/loaders/ImageBitmapLoader.js","webpack://vim/./node_modules/three/src/extras/core/ShapePath.js","webpack://vim/./node_modules/three/src/extras/core/Font.js","webpack://vim/./node_modules/three/src/loaders/FontLoader.js","webpack://vim/./node_modules/three/src/audio/AudioContext.js","webpack://vim/./node_modules/three/src/loaders/AudioLoader.js","webpack://vim/./node_modules/three/src/lights/HemisphereLightProbe.js","webpack://vim/./node_modules/three/src/lights/AmbientLightProbe.js","webpack://vim/./node_modules/three/src/cameras/StereoCamera.js","webpack://vim/./node_modules/three/src/animation/PropertyMixer.js","webpack://vim/./node_modules/three/src/animation/PropertyBinding.js","webpack://vim/./node_modules/three/src/animation/AnimationObjectGroup.js","webpack://vim/./node_modules/three/src/animation/AnimationAction.js","webpack://vim/./node_modules/three/src/animation/AnimationMixer.js","webpack://vim/./node_modules/three/src/core/InstancedInterleavedBuffer.js","webpack://vim/./node_modules/three/src/core/GLBufferAttribute.js","webpack://vim/./node_modules/three/src/core/Raycaster.js","webpack://vim/./node_modules/three/src/math/Box2.js","webpack://vim/./node_modules/three/src/extras/objects/ImmediateRenderObject.js","webpack://vim/./node_modules/three/src/helpers/SkeletonHelper.js","webpack://vim/./node_modules/three/src/extras/DataUtils.js","webpack://vim/./node_modules/three/src/extras/PMREMGenerator.js","webpack://vim/./node_modules/three/src/core/Uniform.js","webpack://vim/./node_modules/three/src/Three.Legacy.js","webpack://vim/./node_modules/three/src/helpers/GridHelper.js","webpack://vim/./node_modules/three/src/loaders/LoaderUtils.js","webpack://vim/./node_modules/three/src/audio/Audio.js","webpack://vim/./node_modules/three/src/Three.js","webpack://vim/./deep_merge.ts","webpack://vim/./VIMLoader.ts","webpack://vim/./viewer_settings.ts","webpack://vim/./viewer_camera.ts","webpack://vim/./viewer.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const REVISION = '125';\nexport const MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport const TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const BasicShadowMap = 0;\nexport const PCFShadowMap = 1;\nexport const PCFSoftShadowMap = 2;\nexport const VSMShadowMap = 3;\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\nexport const FlatShading = 1;\nexport const SmoothShading = 2;\nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\nexport const MultiplyOperation = 0;\nexport const MixOperation = 1;\nexport const AddOperation = 2;\nexport const NoToneMapping = 0;\nexport const LinearToneMapping = 1;\nexport const ReinhardToneMapping = 2;\nexport const CineonToneMapping = 3;\nexport const ACESFilmicToneMapping = 4;\nexport const CustomToneMapping = 5;\n\nexport const UVMapping = 300;\nexport const CubeReflectionMapping = 301;\nexport const CubeRefractionMapping = 302;\nexport const EquirectangularReflectionMapping = 303;\nexport const EquirectangularRefractionMapping = 304;\nexport const CubeUVReflectionMapping = 306;\nexport const CubeUVRefractionMapping = 307;\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipmapNearestFilter = 1004;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipmapLinearFilter = 1005;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipmapNearestFilter = 1007;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipmapLinearFilter = 1008;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedShort565Type = 1019;\nexport const UnsignedInt248Type = 1020;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const RGBEFormat = RGBAFormat;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const RedFormat = 1028;\nexport const RedIntegerFormat = 1029;\nexport const RGFormat = 1030;\nexport const RGIntegerFormat = 1031;\nexport const RGBIntegerFormat = 1032;\nexport const RGBAIntegerFormat = 1033;\n\nexport const RGB_S3TC_DXT1_Format = 33776;\nexport const RGBA_S3TC_DXT1_Format = 33777;\nexport const RGBA_S3TC_DXT3_Format = 33778;\nexport const RGBA_S3TC_DXT5_Format = 33779;\nexport const RGB_PVRTC_4BPPV1_Format = 35840;\nexport const RGB_PVRTC_2BPPV1_Format = 35841;\nexport const RGBA_PVRTC_4BPPV1_Format = 35842;\nexport const RGBA_PVRTC_2BPPV1_Format = 35843;\nexport const RGB_ETC1_Format = 36196;\nexport const RGB_ETC2_Format = 37492;\nexport const RGBA_ETC2_EAC_Format = 37496;\nexport const RGBA_ASTC_4x4_Format = 37808;\nexport const RGBA_ASTC_5x4_Format = 37809;\nexport const RGBA_ASTC_5x5_Format = 37810;\nexport const RGBA_ASTC_6x5_Format = 37811;\nexport const RGBA_ASTC_6x6_Format = 37812;\nexport const RGBA_ASTC_8x5_Format = 37813;\nexport const RGBA_ASTC_8x6_Format = 37814;\nexport const RGBA_ASTC_8x8_Format = 37815;\nexport const RGBA_ASTC_10x5_Format = 37816;\nexport const RGBA_ASTC_10x6_Format = 37817;\nexport const RGBA_ASTC_10x8_Format = 37818;\nexport const RGBA_ASTC_10x10_Format = 37819;\nexport const RGBA_ASTC_12x10_Format = 37820;\nexport const RGBA_ASTC_12x12_Format = 37821;\nexport const RGBA_BPTC_Format = 36492;\nexport const SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nexport const SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nexport const SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nexport const SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nexport const SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nexport const SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nexport const SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nexport const SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nexport const SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nexport const SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nexport const SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nexport const SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nexport const SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nexport const SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nexport const LoopOnce = 2200;\nexport const LoopRepeat = 2201;\nexport const LoopPingPong = 2202;\nexport const InterpolateDiscrete = 2300;\nexport const InterpolateLinear = 2301;\nexport const InterpolateSmooth = 2302;\nexport const ZeroCurvatureEnding = 2400;\nexport const ZeroSlopeEnding = 2401;\nexport const WrapAroundEnding = 2402;\nexport const NormalAnimationBlendMode = 2500;\nexport const AdditiveAnimationBlendMode = 2501;\nexport const TrianglesDrawMode = 0;\nexport const TriangleStripDrawMode = 1;\nexport const TriangleFanDrawMode = 2;\nexport const LinearEncoding = 3000;\nexport const sRGBEncoding = 3001;\nexport const GammaEncoding = 3007;\nexport const RGBEEncoding = 3002;\nexport const LogLuvEncoding = 3003;\nexport const RGBM7Encoding = 3004;\nexport const RGBM16Encoding = 3005;\nexport const RGBDEncoding = 3006;\nexport const BasicDepthPacking = 3200;\nexport const RGBADepthPacking = 3201;\nexport const TangentSpaceNormalMap = 0;\nexport const ObjectSpaceNormalMap = 1;\n\nexport const ZeroStencilOp = 0;\nexport const KeepStencilOp = 7680;\nexport const ReplaceStencilOp = 7681;\nexport const IncrementStencilOp = 7682;\nexport const DecrementStencilOp = 7683;\nexport const IncrementWrapStencilOp = 34055;\nexport const DecrementWrapStencilOp = 34056;\nexport const InvertStencilOp = 5386;\n\nexport const NeverStencilFunc = 512;\nexport const LessStencilFunc = 513;\nexport const EqualStencilFunc = 514;\nexport const LessEqualStencilFunc = 515;\nexport const GreaterStencilFunc = 516;\nexport const NotEqualStencilFunc = 517;\nexport const GreaterEqualStencilFunc = 518;\nexport const AlwaysStencilFunc = 519;\n\nexport const StaticDrawUsage = 35044;\nexport const DynamicDrawUsage = 35048;\nexport const StreamDrawUsage = 35040;\nexport const StaticReadUsage = 35045;\nexport const DynamicReadUsage = 35049;\nexport const StreamReadUsage = 35041;\nexport const StaticCopyUsage = 35046;\nexport const DynamicCopyUsage = 35050;\nexport const StreamCopyUsage = 35042;\n\nexport const GLSL1 = '100';\nexport const GLSL3 = '300 es';\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","const _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\nconst MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\n\n\tdamp: function ( x, y, lambda, dt ) {\n\n\t\treturn MathUtils.lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n\t},\n\n\t// https://www.desmos.com/calculator/vcsjnyz7x4\n\n\tpingpong: function ( x, length = 1 ) {\n\n\t\treturn length - Math.abs( MathUtils.euclideanModulo( x, length * 2 ) - length );\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\n\n\tseededRandom: function ( s ) {\n\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t\t// Park-Miller algorithm\n\n\t\t_seed = _seed * 16807 % 2147483647;\n\n\t\treturn ( _seed - 1 ) / 2147483646;\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c2 = cos( b / 2 );\n\t\tconst s2 = sin( b / 2 );\n\n\t\tconst c13 = cos( ( a + c ) / 2 );\n\t\tconst s13 = sin( ( a + c ) / 2 );\n\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYX':\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZY':\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXZ':\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZX':\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXY':\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYZ':\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t}\n\n};\n\n\nexport { MathUtils };\n","class Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tObject.defineProperty( this, 'isVector2', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\n\nexport { Vector2 };\n","class Matrix3 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isMatrix3', { value: true } );\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).copy( this ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nexport { Matrix3 };\n","let _canvas;\n\nconst ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nexport { ImageUtils };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport {\n\tMirroredRepeatWrapping,\n\tClampToEdgeWrapping,\n\tRepeatWrapping,\n\tLinearEncoding,\n\tUnsignedByteType,\n\tRGBAFormat,\n\tLinearMipmapLinearFilter,\n\tLinearFilter,\n\tUVMapping\n} from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { ImageUtils } from '../extras/ImageUtils.js';\n\nlet textureId = 0;\n\nfunction Texture( image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = 1, encoding = LinearEncoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping;\n\n\tthis.wrapS = wrapS;\n\tthis.wrapT = wrapT;\n\n\tthis.magFilter = magFilter;\n\tthis.minFilter = minFilter;\n\n\tthis.anisotropy = anisotropy;\n\n\tthis.format = format;\n\tthis.internalFormat = null;\n\tthis.type = type;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tconst image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tlet url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t// check cube texture with data textures\n\n\t\t\t\t\t\tif ( image[ i ].isDataTexture ) {\n\n\t\t\t\t\t\t\turl.push( serializeImage( image[ i ].image ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\turl.push( serializeImage( image[ i ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = serializeImage( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.prototype.slice.call( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nexport { Texture };\n","class Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tObject.defineProperty( this, 'isVector4', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { Vector4 };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { Texture } from '../textures/Texture.js';\nimport { LinearFilter } from '../constants.js';\nimport { Vector4 } from '../math/Vector4.js';\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass WebGLRenderTarget extends EventDispatcher {\n\n\tconstructor( width, height, options ) {\n\n\t\tsuper();\n\n\t\tObject.defineProperty( this, 'isWebGLRenderTarget', { value: true } );\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\toptions = options || {};\n\n\t\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\tthis.texture.image = {};\n\t\tthis.texture.image.width = width;\n\t\tthis.texture.image.height = height;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\t\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\n\nexport { WebGLRenderTarget };\n","import { MathUtils } from './MathUtils.js';\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tObject.defineProperty( this, 'isQuaternion', { value: true } );\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tconst EPS = 0.000001;\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nexport { Quaternion };\n","import { MathUtils } from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tObject.defineProperty( this, 'isVector3', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\n\nexport { Vector3 };\n","import { Vector3 } from './Vector3.js';\n\nclass Box3 {\n\n\tconstructor( min, max ) {\n\n\t\tObject.defineProperty( this, 'isBox3', { value: true } );\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector = /*@__PURE__*/ new Vector3();\n\nconst _box = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\n\nexport { Box3 };\n","import { Box3 } from './Box3.js';\nimport { Vector3 } from './Vector3.js';\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass Sphere {\n\n\tconstructor( center, radius ) {\n\n\t\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\t\tthis.radius = ( radius !== undefined ) ? radius : - 1;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n}\n\n\nexport { Sphere };\n","import { Vector3 } from './Vector3.js';\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin, direction ) {\n\n\t\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\t\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector.dot( this.direction );\n\t\tconst d2 = _vector.dot( _vector ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n}\n\n\nexport { Ray };\n","import { Vector3 } from './Vector3.js';\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isMatrix4', { value: true } );\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nexport { Matrix4 };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { MathUtils } from './MathUtils.js';\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tObject.defineProperty( this, 'isEuler', { value: true } );\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order, update ) {\n\n\t\tconst clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t}\n\n\tsetFromVector3( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\ttoVector3( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\n\nexport { Euler };\n","class Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n}\n\n\nexport { Layers };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nlet _object3DId = 0;\n\nconst _v1 = new Vector3();\nconst _q1 = new Quaternion();\nconst _m1 = new Matrix4();\nconst _target = new Vector3();\n\nconst _position = new Vector3();\nconst _scale = new Vector3();\nconst _quaternion = new Quaternion();\n\nconst _xAxis = new Vector3( 1, 0, 0 );\nconst _yAxis = new Vector3( 0, 1, 0 );\nconst _zAxis = new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tconst position = new Vector3();\n\tconst rotation = new Euler();\n\tconst quaternion = new Quaternion();\n\tconst scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.animations = [];\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1.copy( this.matrixWorld ).invert() );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclear: function () {\n\n\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\tconst object = this.children[ i ];\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\tthis.children.length = 0;\n\n\t\treturn this;\n\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal, constant ) {\n\n\t\tObject.defineProperty( this, 'isPlane', { value: true } );\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\t\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n}\n\n\nexport { Plane };\n","import { Vector3 } from './Vector3.js';\nimport { Plane } from './Plane.js';\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a, b, c ) {\n\n\t\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\t\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\t\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0.subVectors( a, b );\n\t\ttarget.cross( _v0 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0.subVectors( c, a );\n\t\t_v1.subVectors( b, a );\n\t\t_v2.subVectors( point, a );\n\n\t\tconst dot00 = _v0.dot( _v0 );\n\t\tconst dot01 = _v0.dot( _v1 );\n\t\tconst dot02 = _v0.dot( _v2 );\n\t\tconst dot11 = _v1.dot( _v1 );\n\t\tconst dot12 = _v1.dot( _v2 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0.subVectors( c, b );\n\t\t_v1.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0.cross( _v1 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0.subVectors( this.c, this.b );\n\t\t_v1.subVectors( this.a, this.b );\n\n\t\treturn _v0.cross( _v1 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\n\nexport { Triangle };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { FrontSide, FlatShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor, AlwaysStencilFunc, KeepStencilOp } from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nlet materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\n\n\tcustomProgramCacheKey: function () {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Material: \\'' + key + '\\' parameter is undefined.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': \\'' + key + '\\' is not a property of this material.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nexport { Material };\n","import { MathUtils } from './MathUtils.js';\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tObject.defineProperty( this, 'isColor', { value: true } );\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopyGammaToLinear( color, gammaFactor = 2.0 ) {\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToGamma( color, gammaFactor = 2.0 ) {\n\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t}\n\n\tconvertGammaToLinear( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToGamma( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex() {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t}\n\n\tgetHexString() {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle() {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\nColor.prototype.r = 1;\nColor.prototype.g = 1;\nColor.prototype.b = 1;\n\n\nexport { Color };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { MeshBasicMaterial };\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { StaticDrawUsage } from '../constants.js';\n\nconst _vector = new Vector3();\nconst _vector2 = new Vector2();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2.fromBufferAttribute( this, i );\n\t\t\t\t_vector2.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2.x, _vector2.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( this, i );\n\t\t\t\t_vector.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\nfunction Float16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nFloat16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat16BufferAttribute.prototype.constructor = Float16BufferAttribute;\nFloat16BufferAttribute.prototype.isFloat16BufferAttribute = true;\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tFloat16BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","function arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tlet min = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tlet max = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\t// Workaround for IE11 pre KB2929437. See #11440\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction getTypedArray( type, buffer ) {\n\n\treturn new TYPED_ARRAYS[ type ]( buffer );\n\n}\n\nexport { arrayMin, arrayMax, getTypedArray };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Box3 } from '../math/Box3.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Object3D } from './Object3D.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { arrayMax } from '../utils.js';\n\nlet _id = 0;\n\nconst _m1 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\nconst _box = new Box3();\nconst _boxMorphTargets = new Box3();\nconst _vector = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _id ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\thasAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.min, _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.max, _box.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( _box.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( _box.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( attributes.tangent === undefined ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = attributes.tangent.array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tconst attribute1 = attributes[ key ];\n\t\t\tconst attributeArray1 = attribute1.array;\n\n\t\t\tconst attribute2 = geometry.attributes[ key ];\n\t\t\tconst attributeArray2 = attribute2.array;\n\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector.fromBufferAttribute( normals, i );\n\n\t\t\t_vector.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { DoubleSide, BackSide } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _tempA = new Vector3();\nconst _tempB = new Vector3();\nconst _tempC = new Vector3();\n\nconst _morphA = new Vector3();\nconst _morphB = new Vector3();\nconst _morphC = new Vector3();\n\nconst _uvA = new Vector2();\nconst _uvB = new Vector2();\nconst _uvC = new Vector2();\n\nconst _intersectionPoint = new Vector3();\nconst _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tconst uv = geometry.attributes.uv;\n\t\t\tconst uv2 = geometry.attributes.uv2;\n\t\t\tconst groups = geometry.groups;\n\t\t\tconst drawRange = geometry.drawRange;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = i;\n\t\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh ) {\n\n\t\tobject.boneTransform( a, _vA );\n\t\tobject.boneTransform( b, _vB );\n\t\tobject.boneTransform( c, _vC );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: a,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nexport { Mesh };\n","import { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\nexport { BoxGeometry, BoxGeometry as BoxBufferGeometry };\n","/**\n * Uniform Utilities\n */\n\nexport function cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nexport function mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nexport { UniformsUtils };\n","import { Material } from './Material.js';\nimport { cloneUniforms } from '../renderers/shaders/UniformsUtils.js';\n\nimport default_vertex from '../renderers/shaders/ShaderChunk/default_vertex.glsl.js';\nimport default_fragment from '../renderers/shaders/ShaderChunk/default_fragment.glsl.js';\n\n/**\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tthis.glslVersion = null;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = Object.assign( {}, source.extensions );\n\n\tthis.glslVersion = source.glslVersion;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tconst data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.glslVersion = this.glslVersion;\n\tdata.uniforms = {};\n\n\tfor ( const name in this.uniforms ) {\n\n\t\tconst uniform = this.uniforms[ name ];\n\t\tconst value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tconst extensions = {};\n\n\tfor ( const key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","export default /* glsl */`\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n`;\n","export default /* glsl */`\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n`;\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nfunction PerspectiveCamera( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov;\n\tthis.zoom = 1;\n\n\tthis.near = near;\n\tthis.far = far;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","import { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nconst fov = 90, aspect = 1;\n\nfunction CubeCamera( near, far, renderTarget ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\n\n\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\n\t\treturn;\n\n\t}\n\n\tthis.renderTarget = renderTarget;\n\n\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.layers = this.layers;\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.layers = this.layers;\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.layers = this.layers;\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.layers = this.layers;\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.layers = this.layers;\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.layers = this.layers;\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tthis.update = function ( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t};\n\n}\n\nCubeCamera.prototype = Object.create( Object3D.prototype );\nCubeCamera.prototype.constructor = CubeCamera;\n\n\nexport { CubeCamera };\n","import { Texture } from './Texture.js';\nimport { CubeReflectionMapping, RGBFormat } from '../constants.js';\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\tformat = format !== undefined ? format : RGBFormat;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n\t// Why CubeTexture._needsFlipEnvMap is necessary:\n\t//\n\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t// and the flag _needsFlipEnvMap controls this conversion. The flip is not required (and thus _needsFlipEnvMap is set to false)\n\t// when using WebGLCubeRenderTarget.texture as a cube texture.\n\n\tthis._needsFlipEnvMap = true;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n\nexport { CubeTexture };\n","import { BackSide, LinearFilter, LinearMipmapLinearFilter, NoBlending, RGBAFormat } from '../constants.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { BoxGeometry } from '../geometries/BoxGeometry.js';\nimport { ShaderMaterial } from '../materials/ShaderMaterial.js';\nimport { cloneUniforms } from './shaders/UniformsUtils.js';\nimport { WebGLRenderTarget } from './WebGLRenderTarget.js';\nimport { CubeCamera } from '../cameras/CubeCamera.js';\nimport { CubeTexture } from '../textures/CubeTexture.js';\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size, options, dummy ) {\n\n\t\tif ( Number.isInteger( options ) ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\n\n\t\t\toptions = dummy;\n\n\t\t}\n\n\t\tsuper( size, size, options );\n\n\t\tObject.defineProperty( this, 'isWebGLCubeRenderTarget', { value: true } );\n\n\t\toptions = options || {};\n\n\t\tthis.texture = new CubeTexture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\tthis.texture._needsFlipEnvMap = false;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.format = RGBAFormat; // see #18859\n\t\tthis.texture.encoding = texture.encoding;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\n\nexport { WebGLCubeRenderTarget };\n","import { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\nconst _sphere = /*@__PURE__*/ new Sphere();\nconst _vector = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tthis.planes = [\n\n\t\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t\t];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n}\n\n\nexport { Frustum };\n","function WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nexport { WebGLAnimation };\n","function WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = gl.HALF_FLOAT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","import { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\nexport { PlaneGeometry, PlaneGeometry as PlaneBufferGeometry };\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n`;\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl.js';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl.js';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl.js';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl.js';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl.js';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl.js';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl.js';\nimport bsdfs from './ShaderChunk/bsdfs.glsl.js';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl.js';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl.js';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl.js';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl.js';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl.js';\nimport color_fragment from './ShaderChunk/color_fragment.glsl.js';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl.js';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl.js';\nimport color_vertex from './ShaderChunk/color_vertex.glsl.js';\nimport common from './ShaderChunk/common.glsl.js';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl.js';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl.js';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl.js';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl.js';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl.js';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl.js';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl.js';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl.js';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl.js';\nimport envmap_common_pars_fragment from './ShaderChunk/envmap_common_pars_fragment.glsl.js';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl.js';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl.js';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl.js';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl.js';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl.js';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl.js';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl.js';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl.js';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl.js';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl.js';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl.js';\nimport lights_pars_begin from './ShaderChunk/lights_pars_begin.glsl.js';\nimport envmap_physical_pars_fragment from './ShaderChunk/envmap_physical_pars_fragment.glsl.js';\nimport lights_toon_fragment from './ShaderChunk/lights_toon_fragment.glsl.js';\nimport lights_toon_pars_fragment from './ShaderChunk/lights_toon_pars_fragment.glsl.js';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl.js';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl.js';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl.js';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl.js';\nimport lights_fragment_begin from './ShaderChunk/lights_fragment_begin.glsl.js';\nimport lights_fragment_maps from './ShaderChunk/lights_fragment_maps.glsl.js';\nimport lights_fragment_end from './ShaderChunk/lights_fragment_end.glsl.js';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl.js';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl.js';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl.js';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl.js';\nimport map_fragment from './ShaderChunk/map_fragment.glsl.js';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl.js';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl.js';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl.js';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl.js';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl.js';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl.js';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl.js';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl.js';\nimport normal_fragment_begin from './ShaderChunk/normal_fragment_begin.glsl.js';\nimport normal_fragment_maps from './ShaderChunk/normal_fragment_maps.glsl.js';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl.js';\nimport clearcoat_normal_fragment_begin from './ShaderChunk/clearcoat_normal_fragment_begin.glsl.js';\nimport clearcoat_normal_fragment_maps from './ShaderChunk/clearcoat_normal_fragment_maps.glsl.js';\nimport clearcoat_pars_fragment from './ShaderChunk/clearcoat_pars_fragment.glsl.js';\nimport packing from './ShaderChunk/packing.glsl.js';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl.js';\nimport project_vertex from './ShaderChunk/project_vertex.glsl.js';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl.js';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl.js';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl.js';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl.js';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl.js';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl.js';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl.js';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl.js';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl.js';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl.js';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl.js';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl.js';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl.js';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl.js';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl.js';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl.js';\nimport transmissionmap_fragment from './ShaderChunk/transmissionmap_fragment.glsl.js';\nimport transmissionmap_pars_fragment from './ShaderChunk/transmissionmap_pars_fragment.glsl.js';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl.js';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl.js';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl.js';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl.js';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl.js';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl.js';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl.js';\n\nimport background_frag from './ShaderLib/background_frag.glsl.js';\nimport background_vert from './ShaderLib/background_vert.glsl.js';\nimport cube_frag from './ShaderLib/cube_frag.glsl.js';\nimport cube_vert from './ShaderLib/cube_vert.glsl.js';\nimport depth_frag from './ShaderLib/depth_frag.glsl.js';\nimport depth_vert from './ShaderLib/depth_vert.glsl.js';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl.js';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl.js';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl.js';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl.js';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl.js';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl.js';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl.js';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl.js';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl.js';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl.js';\nimport meshmatcap_frag from './ShaderLib/meshmatcap_frag.glsl.js';\nimport meshmatcap_vert from './ShaderLib/meshmatcap_vert.glsl.js';\nimport meshtoon_frag from './ShaderLib/meshtoon_frag.glsl.js';\nimport meshtoon_vert from './ShaderLib/meshtoon_vert.glsl.js';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl.js';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl.js';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl.js';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl.js';\nimport normal_frag from './ShaderLib/normal_frag.glsl.js';\nimport normal_vert from './ShaderLib/normal_vert.glsl.js';\nimport points_frag from './ShaderLib/points_frag.glsl.js';\nimport points_vert from './ShaderLib/points_vert.glsl.js';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl.js';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl.js';\nimport sprite_frag from './ShaderLib/sprite_frag.glsl.js';\nimport sprite_vert from './ShaderLib/sprite_vert.glsl.js';\n\nexport const ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmissionmap_fragment: transmissionmap_fragment,\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformed = vec3( position );\n`;\n","export default /* glsl */`\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n`;\n","export default /* glsl */`\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disneys reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)G(v) / 4(nl)(nv)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disneys reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvColor = vec3( 1.0 );\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvColor.xyz *= color.xyz;\n\n#endif\n\n#ifdef USE_INSTANCING_COLOR\n\n\tvColor.xyz *= instanceColor.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n\treturn m[ 2 ][ 3 ] == - 1.0;\n\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\n\t// dir is assumed to be unit length\n\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\treturn vec2( u, v );\n\n}\n`;\n","export default /* glsl */`\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized ).\n\n\tfloat getFace( vec3 direction ) {\n\n\t\tvec3 absDirection = abs( direction );\n\n\t\tfloat face = - 1.0;\n\n\t\tif ( absDirection.x > absDirection.z ) {\n\n\t\t\tif ( absDirection.x > absDirection.y )\n\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t} else {\n\n\t\t\tif ( absDirection.z > absDirection.y )\n\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n\t// RH coordinate system; PMREM face-indexing convention\n\tvec2 getUV( vec3 direction, float face ) {\n\n\t\tvec2 uv;\n\n\t\tif ( face == 0.0 ) {\n\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\n\t\t} else if ( face == 1.0 ) {\n\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\n\t\t} else if ( face == 2.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\n\t\t} else if ( face == 3.0 ) {\n\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\n\t\t} else if ( face == 4.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\n\t\t} else {\n\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\n\t\t}\n\n\t\treturn 0.5 * ( uv + 1.0 );\n\n\t}\n\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\n\t\tfloat face = getFace( direction );\n\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\n\t\tfloat faceSize = exp2( mipInt );\n\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\n\t\tvec2 f = fract( uv );\n\n\t\tuv += 0.5 - f;\n\n\t\tif ( face > 2.0 ) {\n\n\t\t\tuv.y += faceSize;\n\n\t\t\tface -= 3.0;\n\n\t\t}\n\n\t\tuv.x += face * faceSize;\n\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\n\t\t}\n\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\n\t\tuv *= texelSize;\n\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x += texelSize;\n\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.y += texelSize;\n\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x -= texelSize;\n\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tvec3 tm = mix( tl, tr, f.x );\n\n\t\tvec3 bm = mix( bl, br, f.x );\n\n\t\treturn mix( tm, bm, f.y );\n\n\t}\n\n\t// These defines must match with PMREMGenerator\n\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\n\tfloat roughnessToMip( float roughness ) {\n\n\t\tfloat mip = 0.0;\n\n\t\tif ( roughness >= r1 ) {\n\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\n\t\t} else if ( roughness >= r4 ) {\n\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\n\t\t} else if ( roughness >= r5 ) {\n\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\n\t\t} else if ( roughness >= r6 ) {\n\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\n\t\t} else {\n\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t}\n\n\t\treturn mip;\n\n\t}\n\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\n\t\tfloat mipF = fract( mip );\n\n\t\tfloat mipInt = floor( mip );\n\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\n\t\tif ( mipF == 0.0 ) {\n\n\t\t\treturn vec4( color0, 1.0 );\n\n\t\t} else {\n\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\n\t\t}\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n`;\n","export default /* glsl */`\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n`;\n","export default /* glsl */`\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n\t// return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tfogDepth = - mvPosition.z;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n\n#ifdef DOUBLE_SIDED\n\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n`;\n","export default /* glsl */`\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3 diffuseColor;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n`;\n","export default /* glsl */`\nstruct PhysicalMaterial {\n\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n`;\n","export default /* glsl */`\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\t\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\t\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n`;\n","export default /* glsl */`\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n`;\n","export default /* glsl */`\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n`;\n","export default /* glsl */`\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\t// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\n\t#endif\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs\nvec3 RRTAndODTFit( vec3 v ) {\n\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n\n}\n\n// this implementation of ACES is modified to accommodate a brighter viewing environment.\n// the scale factor of 1/0.6 is subjective. see discussion in #19621.\n\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\t// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ), // transposed from source\n\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\n\t// ODT_SAT => XYZ => D60_2_D65 => sRGB\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ), // transposed from source\n\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\n\tcolor *= toneMappingExposure / 0.6;\n\n\tcolor = ACESInputMat * color;\n\n\t// Apply RRT and ODT\n\tcolor = RRTAndODTFit( color );\n\n\tcolor = ACESOutputMat * color;\n\n\t// Clamp to [0, 1]\n\treturn saturate( color );\n\n}\n\nvec3 CustomToneMapping( vec3 color ) { return color; }\n`;\n","export default /* glsl */`\n#ifdef USE_TRANSMISSIONMAP\n\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_TRANSMISSIONMAP\n\n\tuniform sampler2D transmissionMap;\n\n#endif\n`;\n","export default /* glsl */`\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n`;\n","export default /* glsl */`\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n`;\n","export default /* glsl */`\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n`;\n","export default /* glsl */`\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV = equirectUv( direction );\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n`;\n","export default /* glsl */`\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transmission model\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","import { Color } from '../../math/Color.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","import { ShaderChunk } from './ShaderChunk.js';\nimport { mergeUniforms } from './UniformsUtils.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from './UniformsLib.js';\nimport { Color } from '../../math/Color.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","import { BackSide, FrontSide, CubeUVReflectionMapping } from '../../constants.js';\nimport { BoxGeometry } from '../../geometries/BoxGeometry.js';\nimport { PlaneGeometry } from '../../geometries/PlaneGeometry.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { Color } from '../../math/Color.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { cloneUniforms } from '../shaders/UniformsUtils.js';\n\nfunction WebGLBackground( renderer, cubemaps, state, objects, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = 0;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tbackground = cubemaps.get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tif ( background.isWebGLCubeRenderTarget ) {\n\n\t\t\t\t// TODO Deprecate\n\n\t\t\t\tbackground = background.texture;\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n\nexport { WebGLBackground };\n","function WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( geometry, index );\n\n\t\t\tif ( updateBuffers ) saveCache( geometry, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh === true ) {\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( geometry, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tfor ( const key in geometryAttributes ) {\n\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\n\n\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\tattributesNum ++;\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( geometry, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst data = {};\n\t\t\tdata.attribute = attribute;\n\n\t\t\tif ( attribute.data ) {\n\n\t\t\t\tdata.data = attribute.data;\n\n\t\t\t}\n\n\t\t\tcache[ key ] = data;\n\n\t\t\tattributesNum ++;\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === gl.INT || type === gl.UNSIGNED_INT ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( name === 'instanceColor' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceColor );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute, 1 );\n\n\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute, 3, type, false, 12, 0 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatilibity\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\n\nexport { WebGLBindingStates };\n","function WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","function WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tconst maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tconst maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tconst maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tconst maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tconst maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tconst maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tconst maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( gl.MAX_SAMPLES ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","import { Matrix3 } from '../../math/Matrix3.js';\nimport { Plane } from '../../math/Plane.js';\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","import { CubeReflectionMapping, CubeRefractionMapping, EquirectangularReflectionMapping, EquirectangularRefractionMapping } from '../../constants.js';\nimport { WebGLCubeRenderTarget } from '../WebGLCubeRenderTarget.js';\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst currentRenderList = renderer.getRenderList();\n\t\t\t\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\t\t\t\t\t\trenderer.setRenderList( currentRenderList );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nexport { WebGLCubeMaps };\n","function WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","import { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { arrayMax } from '../../utils.js';\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","function WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","function WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n\nexport { WebGLInfo };\n","function numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tlet influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tworkInfluences.sort( numericalSort );\n\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\tlet morphInfluencesSum = 0;\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst influence = workInfluences[ i ];\n\t\t\tconst index = influence[ 0 ];\n\t\t\tconst value = influence[ 1 ];\n\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t} else {\n\n\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLMorphtargets };\n","function WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","import { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture2DArray( data = null, width = 1, height = 1, depth = 1 ) {\n\n\tTexture.call( this, null );\n\n\tthis.image = { data, width, height, depth };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nexport { DataTexture2DArray };\n","import { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture3D( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t// We're going to add .setXXX() methods for setting properties later.\n\t// Users can still set in DataTexture3D directly.\n\t//\n\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t// \ttexture.anisotropy = 16;\n\t//\n\t// See #14839\n\n\tTexture.call( this, null );\n\n\tthis.image = { data, width, height, depth };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n\n}\n\nDataTexture3D.prototype = Object.create( Texture.prototype );\nDataTexture3D.prototype.constructor = DataTexture3D;\nDataTexture3D.prototype.isDataTexture3D = true;\n\nexport { DataTexture3D };\n","/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\nimport { DataTexture2DArray } from '../../textures/DataTexture2DArray.js';\nimport { DataTexture3D } from '../../textures/DataTexture3D.js';\n\nconst emptyTexture = new Texture();\nconst emptyTexture2dArray = new DataTexture2DArray();\nconst emptyTexture3d = new DataTexture3D();\nconst emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tconst cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tconst seq = this.seq;\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tconst n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tconst u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tconst v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tconst r = [];\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","function WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nexport { WebGLShader };\n","import { WebGLUniforms } from './WebGLUniforms.js';\nimport { WebGLShader } from './WebGLShader.js';\nimport { ShaderChunk } from '../shaders/ShaderChunk.js';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, CubeRefractionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, VSMShadowMap, ACESFilmicToneMapping, CineonToneMapping, CustomToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, LogLuvEncoding, GLSL3 } from '../../constants.js';\n\nlet programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tconst lines = string.split( '\\n' );\n\n\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\tconst log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tconst source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","import { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, LinearEncoding, ObjectSpaceNormalMap, TangentSpaceNormalMap, NoToneMapping } from '../../constants.js';\nimport { WebGLProgram } from './WebGLProgram.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { UniformsUtils } from '../shaders/UniformsUtils.js';\n\nfunction WebGLPrograms( renderer, cubemaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\n\tconst vertexTextures = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tconst parameterNames = [\n\t\t'precision', 'isWebGL2', 'supportsVertexTextures', 'outputEncoding', 'instancing', 'instancingColor',\n\t\t'map', 'mapEncoding', 'matcap', 'matcapEncoding', 'envMap', 'envMapMode', 'envMapEncoding', 'envMapCubeUV',\n\t\t'lightMap', 'lightMapEncoding', 'aoMap', 'emissiveMap', 'emissiveMapEncoding', 'bumpMap', 'normalMap', 'objectSpaceNormalMap', 'tangentSpaceNormalMap', 'clearcoatMap', 'clearcoatRoughnessMap', 'clearcoatNormalMap', 'displacementMap', 'specularMap',\n\t\t'roughnessMap', 'metalnessMap', 'gradientMap',\n\t\t'alphaMap', 'combine', 'vertexColors', 'vertexTangents', 'vertexUvs', 'uvsVertexOnly', 'fog', 'useFog', 'fogExp2',\n\t\t'flatShading', 'sizeAttenuation', 'logarithmicDepthBuffer', 'skinning',\n\t\t'maxBones', 'useVertexTexture', 'morphTargets', 'morphNormals',\n\t\t'maxMorphTargets', 'maxMorphNormals', 'premultipliedAlpha',\n\t\t'numDirLights', 'numPointLights', 'numSpotLights', 'numHemiLights', 'numRectAreaLights',\n\t\t'numDirLightShadows', 'numPointLightShadows', 'numSpotLightShadows',\n\t\t'shadowMapEnabled', 'shadowMapType', 'toneMapping', 'physicallyCorrectLights',\n\t\t'alphaTest', 'doubleSided', 'flipSided', 'numClippingPlanes', 'numClipIntersection', 'depthPacking', 'dithering',\n\t\t'sheen', 'transmissionMap'\n\t];\n\n\tfunction getMaxBones( object ) {\n\n\t\tconst skeleton = object.skeleton;\n\t\tconst bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tlet encoding;\n\n\t\tif ( map && map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map && map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLPrograms.getTextureEncodingFromMap: don\\'t use render targets as textures. Use their .texture property instead.' );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t} else {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tconst maxBones = object.isSkinnedMesh ? getMaxBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet vertexShader, fragmentShader;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs\n\t};\n\n}\n\n\nexport { WebGLPrograms };\n","function WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","function painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList( properties ) {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transparent = [];\n\n\tconst defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists( properties ) {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, camera ) {\n\n\t\tconst cameras = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList( properties );\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList( properties );\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists, WebGLRenderList };\n","import { Color } from '../../math/Color.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from '../shaders/UniformsLib.js';\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\n\nexport { WebGLLights };\n","import { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights() {\n\n\t\tlights.setup( lightsArray );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [] );\n\t\t\trenderStates.get( scene ).push( renderState );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStates.get( scene ).length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStates.get( scene ).push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene )[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n","import { Material } from './Material.js';\nimport { BasicDepthPacking } from '../constants.js';\n\n/**\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n\nexport { MeshDepthMaterial };\n","import { Material } from './Material.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\n\nexport { MeshDistanceMaterial };\n","import { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, LinearFilter, PCFShadowMap, VSMShadowMap, RGBADepthPacking, NoBlending } from '../../constants.js';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget.js';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial.js';\nimport { MeshDistanceMaterial } from '../../materials/MeshDistanceMaterial.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Frustum } from '../../math/Frustum.js';\n\nimport vsm_frag from '../shaders/ShaderLib/vsm_frag.glsl.js';\nimport vsm_vert from '../shaders/ShaderLib/vsm_vert.glsl.js';\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\n\t\tlet customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tlet useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t}\n\n\t\t\tlet useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","export default /* glsl */`\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n`;\n","export default /* glsl */`\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n\t\t#ifdef HORIZONTAL_PASS\n\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n\t\t#else\n\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\n\t\t#endif\n\n\t}\n\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n`;\n","import { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, DoubleSide, BackSide, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, AddEquation, SubtractEquation, ReverseSubtractEquation, MinEquation, MaxEquation, ZeroFactor, OneFactor, SrcColorFactor, SrcAlphaFactor, SrcAlphaSaturateFactor, DstColorFactor, DstAlphaFactor, OneMinusSrcColorFactor, OneMinusSrcAlphaFactor, OneMinusDstColorFactor, OneMinusDstAlphaFactor } from '../../constants.js';\nimport { Vector4 } from '../../math/Vector4.js';\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = null;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst currentScissor = new Vector4();\n\tconst currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: gl.FUNC_ADD,\n\t\t[ SubtractEquation ]: gl.FUNC_SUBTRACT,\n\t\t[ ReverseSubtractEquation ]: gl.FUNC_REVERSE_SUBTRACT\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = gl.MIN;\n\t\tequationToGL[ MaxEquation ] = gl.MAX;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: gl.ZERO,\n\t\t[ OneFactor ]: gl.ONE,\n\t\t[ SrcColorFactor ]: gl.SRC_COLOR,\n\t\t[ SrcAlphaFactor ]: gl.SRC_ALPHA,\n\t\t[ SrcAlphaSaturateFactor ]: gl.SRC_ALPHA_SATURATE,\n\t\t[ DstColorFactor ]: gl.DST_COLOR,\n\t\t[ DstAlphaFactor ]: gl.DST_ALPHA,\n\t\t[ OneMinusSrcColorFactor ]: gl.ONE_MINUS_SRC_COLOR,\n\t\t[ OneMinusSrcAlphaFactor ]: gl.ONE_MINUS_SRC_ALPHA,\n\t\t[ OneMinusDstColorFactor ]: gl.ONE_MINUS_DST_COLOR,\n\t\t[ OneMinusDstAlphaFactor ]: gl.ONE_MINUS_DST_ALPHA\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( gl.BLEND );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( gl.BLEND );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ONE, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = null;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nexport { WebGLState };\n","import { LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\nimport { MathUtils } from '../../math/MathUtils.js';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === _gl.RED ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.R32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.R16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGB ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGB32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGB16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGB8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGBA ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGBA32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGBA16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGBA8;\n\n\t\t}\n\n\t\tif ( internalFormat === _gl.R16F || internalFormat === _gl.R32F ||\n\t\t\tinternalFormat === _gl.RGBA16F || internalFormat === _gl.RGBA32F ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D_ARRAY, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_3D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: _gl.REPEAT,\n\t\t[ ClampToEdgeWrapping ]: _gl.CLAMP_TO_EDGE,\n\t\t[ MirroredRepeatWrapping ]: _gl.MIRRORED_REPEAT\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: _gl.NEAREST,\n\t\t[ NearestMipmapNearestFilter ]: _gl.NEAREST_MIPMAP_NEAREST,\n\t\t[ NearestMipmapLinearFilter ]: _gl.NEAREST_MIPMAP_LINEAR,\n\n\t\t[ LinearFilter ]: _gl.LINEAR,\n\t\t[ LinearMipmapNearestFilter ]: _gl.LINEAR_MIPMAP_NEAREST,\n\t\t[ LinearMipmapLinearFilter ]: _gl.LINEAR_MIPMAP_LINEAR\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, _gl.CLAMP_TO_EDGE );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = _gl.TEXTURE_2D;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = _gl.TEXTURE_2D_ARRAY;\n\t\tif ( texture.isDataTexture3D ) textureType = _gl.TEXTURE_3D;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format );\n\n\t\tlet glType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tlet mipmap;\n\t\tconst mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH24_STENCIL8;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT16; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// validation checks for WebGL 1\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tglInternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_3D, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\n\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\tconst cubeImage = [];\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t} else {\n\n\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst image = cubeImage[ 0 ],\n\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\tlet mipmaps;\n\n\t\tif ( isCompressed ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else {\n\n\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t// We assume images for cube map have the same size.\n\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\n\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\n\n\t\t\trenderTarget.texture.format = RGBAFormat;\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\n\n\t\t}\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.READ_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tconst width = renderTarget.width;\n\t\t\t\tconst height = renderTarget.height;\n\t\t\t\tlet mask = _gl.COLOR_BUFFER_BIT;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= _gl.DEPTH_BUFFER_BIT;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, _gl.NEAREST );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tlet warnedTexture2D = false;\n\tlet warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLTextures.safeSetTexture2D: don\\'t use render targets as textures. Use their .texture property instead.' );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLTextures.safeSetTextureCube: don\\'t use cube render targets as textures. Use their .texture property instead.' );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\n\t\tsetTextureCube( texture, slot );\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nexport { WebGLTextures };\n","import { RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_10x10_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RedFormat, RGBAFormat, RGBFormat, AlphaFormat, RedIntegerFormat, RGFormat, RGIntegerFormat, RGBIntegerFormat, RGBAIntegerFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType, SRGB8_ALPHA8_ASTC_4x4_Format, SRGB8_ALPHA8_ASTC_5x4_Format, SRGB8_ALPHA8_ASTC_5x5_Format, SRGB8_ALPHA8_ASTC_6x5_Format, SRGB8_ALPHA8_ASTC_6x6_Format, SRGB8_ALPHA8_ASTC_8x5_Format, SRGB8_ALPHA8_ASTC_8x6_Format, SRGB8_ALPHA8_ASTC_8x8_Format, SRGB8_ALPHA8_ASTC_10x5_Format, SRGB8_ALPHA8_ASTC_10x6_Format, SRGB8_ALPHA8_ASTC_10x8_Format, SRGB8_ALPHA8_ASTC_10x10_Format, SRGB8_ALPHA8_ASTC_12x10_Format, SRGB8_ALPHA8_ASTC_12x12_Format, RGBA_BPTC_Format } from '../../constants.js';\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return gl.HALF_FLOAT;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\t\tif ( p === RedFormat ) return gl.RED;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return gl.RED_INTEGER;\n\t\tif ( p === RGFormat ) return gl.RG;\n\t\tif ( p === RGIntegerFormat ) return gl.RG_INTEGER;\n\t\tif ( p === RGBIntegerFormat ) return gl.RGB_INTEGER;\n\t\tif ( p === RGBAIntegerFormat ) return gl.RGBA_INTEGER;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return gl.UNSIGNED_INT_24_8;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n\nexport { WebGLUtils };\n","import { PerspectiveCamera } from './PerspectiveCamera.js';\n\nfunction ArrayCamera( array = [] ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array;\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n\nexport { ArrayCamera };\n","import { Object3D } from '../core/Object3D.js';\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","import { Group } from '../../objects/Group.js';\n\nfunction WebXRController() {\n\n\tthis._targetRay = null;\n\tthis._grip = null;\n\tthis._hand = null;\n\n}\n\nObject.assign( WebXRController.prototype, {\n\n\tconstructor: WebXRController,\n\n\tgetHandSpace: function () {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t},\n\n\tgetTargetRaySpace: function () {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t},\n\n\tgetGripSpace: function () {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function ( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function ( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\t\tconst joint = new Group();\n\t\t\t\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\t\t\t\tjoint.visible = false;\n\t\t\t\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\t\t\t\t\t\t// ??\n\t\t\t\t\t\thand.add( joint );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst joint = hand.joints[ inputjoint.jointName ];\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { WebXRController };\n","import { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { EventDispatcher } from '../../core/EventDispatcher.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { WebGLAnimation } from '../webgl/WebGLAnimation.js';\nimport { WebXRController } from './WebXRController.js';\n\nfunction WebXRManager( renderer, gl ) {\n\n\tconst scope = this;\n\n\tlet session = null;\n\n\tlet framebufferScaleFactor = 1.0;\n\n\tlet referenceSpace = null;\n\tlet referenceSpaceType = 'local-floor';\n\n\tlet pose = null;\n\n\tconst controllers = [];\n\tconst inputSourcesMap = new Map();\n\n\t//\n\n\tconst cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tconst cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tconst cameras = [ cameraL, cameraR ];\n\n\tconst cameraVR = new ArrayCamera();\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\tlet _currentDepthNear = null;\n\tlet _currentDepthFar = null;\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getTargetRaySpace();\n\n\t};\n\n\tthis.getControllerGrip = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getGripSpace();\n\n\t};\n\n\tthis.getHand = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getHandSpace();\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tcontroller.disconnect( inputSource );\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t_currentDepthNear = null;\n\t\t_currentDepthFar = null;\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.isPresenting = false;\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = async function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tconst attributes = gl.getContextAttributes();\n\n\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t}\n\n\t\t\tconst layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil,\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\tanimation.setContext( session );\n\t\t\tanimation.start();\n\n\t\t\tscope.isPresenting = true;\n\n\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t}\n\n\t};\n\n\tfunction onInputSourcesChange( event ) {\n\n\t\tconst inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tconst inputSource = event.removed[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tconst inputSource = event.added[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst cameraLPos = new Vector3();\n\tconst cameraRPos = new Vector3();\n\n\t/**\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tconst left = near * leftFov;\n\t\tconst right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tconst near2 = near + zOffset;\n\t\tconst far2 = far + zOffset;\n\t\tconst left2 = left - xOffset;\n\t\tconst right2 = right + ( ipd - xOffset );\n\t\tconst top2 = topFov * far / far2 * near2;\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\tsession.updateRenderState( {\n\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\tdepthFar: cameraVR.far\n\t\t\t} );\n\n\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t}\n\n\t\tconst parent = camera.parent;\n\t\tconst cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\t\tcamera.matrix.copy( cameraVR.matrix );\n\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\n\t\tconst children = camera.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// update projection matrix for proper view frustum culling\n\n\t\tif ( cameras.length === 2 ) {\n\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t} else {\n\n\t\t\t// assume single camera setup (AR)\n\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tconst views = pose.views;\n\t\t\tconst baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tconst view = views[ i ];\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\n\n\t\t\t\tconst camera = cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst inputSources = session.inputSources;\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tconst controller = controllers[ i ];\n\t\t\tconst inputSource = inputSources[ i ];\n\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nexport { WebXRManager };\n","import { BackSide } from '../../constants.js';\n\nfunction WebGLMaterials( properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsLambert( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material );\n\n\t\t\t} else {\n\n\t\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDepth( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsNormal( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tconst maxMipLevel = properties.get( envMap ).__maxMipLevel;\n\n\t\t\tif ( maxMipLevel !== undefined ) {\n\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transmission.value = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nexport { WebGLMaterials };\n","import {\n\tRGBAFormat,\n\tHalfFloatType,\n\tFloatType,\n\tUnsignedByteType,\n\tLinearEncoding,\n\tNoToneMapping\n} from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Frustum } from '../math/Frustum.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Color } from '../math/Color.js';\nimport { WebGLAnimation } from './webgl/WebGLAnimation.js';\nimport { WebGLAttributes } from './webgl/WebGLAttributes.js';\nimport { WebGLBackground } from './webgl/WebGLBackground.js';\nimport { WebGLBindingStates } from './webgl/WebGLBindingStates.js';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer.js';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities.js';\nimport { WebGLClipping } from './webgl/WebGLClipping.js';\nimport { WebGLCubeMaps } from './webgl/WebGLCubeMaps.js';\nimport { WebGLExtensions } from './webgl/WebGLExtensions.js';\nimport { WebGLGeometries } from './webgl/WebGLGeometries.js';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer.js';\nimport { WebGLInfo } from './webgl/WebGLInfo.js';\nimport { WebGLMorphtargets } from './webgl/WebGLMorphtargets.js';\nimport { WebGLObjects } from './webgl/WebGLObjects.js';\nimport { WebGLPrograms } from './webgl/WebGLPrograms.js';\nimport { WebGLProperties } from './webgl/WebGLProperties.js';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists.js';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates.js';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap.js';\nimport { WebGLState } from './webgl/WebGLState.js';\nimport { WebGLTextures } from './webgl/WebGLTextures.js';\nimport { WebGLUniforms } from './webgl/WebGLUniforms.js';\nimport { WebGLUtils } from './webgl/WebGLUtils.js';\nimport { WebXRManager } from './webxr/WebXRManager.js';\nimport { WebGLMaterials } from './webgl/WebGLMaterials.js';\n\nfunction createCanvasElement() {\n\n\tconst canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : createCanvasElement(),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// render() can be called from within a callback triggered by another render.\n\t// We track this so that the nested render call gets its state isolated from the parent render call.\n\n\tconst renderStateStack = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _framebuffer = null;\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentFramebuffer = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\textensions.init( capabilities );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( properties );\n\t\trenderLists = new WebGLRenderLists( properties );\n\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\tbackground = new WebGLBackground( _this, cubemaps, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getClearColor() now requires a Color as an argument' );\n\n\t\t\ttarget = new Color();\n\n\t\t}\n\n\t\treturn target.copy( background.getClearColor() );\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tconst programInfo = properties.get( material ).program;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tbindingStates.initAttributes();\n\n\t\tconst buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tbindingStates.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights();\n\n\t\tconst compiled = new WeakMap();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\n\t\t\t\t\t\t\tcompiled.set( material2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\n\n\t\t\t\t\tinitMaterial( material, scene, object );\n\t\t\t\t\tcompiled.set( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tlet renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// reset caching for this frame\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights();\n\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\trenderStateStack.pop();\n\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderState = null;\n\n\t\t}\n\n\t\tcurrentRenderList = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLightsView( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tbindingStates.reset();\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet program = materialProperties.program;\n\t\tlet programChange = true;\n\n\t\t// always update environment and fog - changing these trigger an initMaterial call, but it's possible that the program doesn't change\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = cubemaps.get( material.envMap || materialProperties.environment );\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = materialProperties.program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tconst bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === null ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( _gl.FRAMEBUFFER, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderList = function () {\n\n\t\treturn currentRenderList;\n\n\t};\n\n\tthis.setRenderList = function ( renderList ) {\n\n\t\tcurrentRenderList = renderList;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tlet framebuffer = _framebuffer;\n\t\tlet isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tlet restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\t\tconst glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( _gl.TEXTURE_2D, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, dstTexture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.resetState = function () {\n\n\t\tstate.reset();\n\t\tbindingStates.reset();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nexport { WebGLRenderer };\n","import { WebGLRenderer } from './WebGLRenderer.js';\n\nfunction WebGL1Renderer( parameters ) {\n\n\tWebGLRenderer.call( this, parameters );\n\n}\n\nWebGL1Renderer.prototype = Object.assign( Object.create( WebGLRenderer.prototype ), {\n\n\tconstructor: WebGL1Renderer,\n\n\tisWebGL1Renderer: true\n\n} );\n\nexport { WebGL1Renderer };\n","import { Object3D } from '../core/Object3D.js';\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tObject.defineProperty( this, 'isScene', { value: true } );\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tthis.autoUpdate = true; // checked by the renderer\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\n\nexport { Scene };\n","import { MathUtils } from '../math/MathUtils.js';\nimport { StaticDrawUsage } from '../constants.js';\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n} );\n\nexport { InterleavedBuffer };\n","import { Vector3 } from '../math/Vector3.js';\nimport { BufferAttribute } from './BufferAttribute.js';\n\nconst _vector = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.name = '';\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t},\n\n\tneedsUpdate: {\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.data.needsUpdate = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interlaved attribtue\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { InterleavedBufferAttribute };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *  rotation: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.rotation = 0;\n\n\tthis.sizeAttenuation = true;\n\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.rotation = source.rotation;\n\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n\nexport { SpriteMaterial };\n","import { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { InterleavedBuffer } from '../core/InterleavedBuffer.js';\nimport { InterleavedBufferAttribute } from '../core/InterleavedBufferAttribute.js';\nimport { SpriteMaterial } from '../materials/SpriteMaterial.js';\n\nlet _geometry;\n\nconst _intersectPoint = new Vector3();\nconst _worldScale = new Vector3();\nconst _mvPosition = new Vector3();\n\nconst _alignedPosition = new Vector2();\nconst _rotatedPosition = new Vector2();\nconst _viewWorldMatrix = new Matrix4();\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _uvA = new Vector2();\nconst _uvB = new Vector2();\nconst _uvC = new Vector2();\n\nfunction Sprite( material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tif ( _geometry === undefined ) {\n\n\t\t_geometry = new BufferGeometry();\n\n\t\tconst float32Array = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t] );\n\n\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t}\n\n\tthis.geometry = _geometry;\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\tthis.center = new Vector2( 0.5, 0.5 );\n\n}\n\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Sprite,\n\n\tisSprite: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nexport { Sprite };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Object3D } from '../core/Object3D.js';\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis._currentLevel = 0;\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance = 0 ) {\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetCurrentLevel: function () {\n\n\t\treturn this._currentLevel;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1.distanceTo( _v2 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { LOD };\n","import { Mesh } from './Mesh.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\n\nconst _basePosition = new Vector3();\n\nconst _skinIndex = new Vector4();\nconst _skinWeight = new Vector4();\n\nconst _vector = new Vector3();\nconst _matrix = new Matrix4();\n\nfunction SkinnedMesh( geometry, material ) {\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t}\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = 'attached';\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n}\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t},\n\n\tbind: function ( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.copy( bindMatrix ).invert();\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.x = skinWeight.getX( i );\n\t\t\tvector.y = skinWeight.getY( i );\n\t\t\tvector.z = skinWeight.getZ( i );\n\t\t\tvector.w = skinWeight.getW( i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.matrixWorld ).invert();\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.bindMatrix ).invert();\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tboneTransform: function ( index, target ) {\n\n\t\tconst skeleton = this.skeleton;\n\t\tconst geometry = this.geometry;\n\n\t\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t_basePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\n\n\t\ttarget.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\n\t\t\t\t_matrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\ttarget.addScaledVector( _vector.copy( _basePosition ).applyMatrix4( _matrix ), weight );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t}\n\n} );\n\n\nexport { SkinnedMesh };\n","import { Object3D } from '../core/Object3D.js';\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\n\nexport { Bone };\n","import { Bone } from './Bone.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nconst _offsetMatrix = new Matrix4();\nconst _identityMatrix = new Matrix4();\n\nfunction Skeleton( bones = [], boneInverses = [] ) {\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.bones = bones.slice( 0 );\n\tthis.boneInverses = boneInverses;\n\tthis.boneMatrices = null;\n\n\tthis.boneTexture = null;\n\tthis.boneTextureSize = 0;\n\n\tthis.frame = - 1;\n\n\tthis.init();\n\n}\n\nObject.assign( Skeleton.prototype, {\n\n\tinit: function () {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tthis.boneMatrices = new Float32Array( bones.length * 16 );\n\n\t\t// calculate inverse bone matrices if necessary\n\n\t\tif ( boneInverses.length === 0 ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\t// handle special case\n\n\t\t\tif ( bones.length !== boneInverses.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses.length = 0;\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.copy( this.bones[ i ].matrixWorld ).invert();\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.copy( this.boneInverses[ i ] ).invert();\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: function () {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== null ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t},\n\n\tgetBoneByName: function ( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tdispose: function ( ) {\n\n\t\tif ( this.boneTexture !== null ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = null;\n\n\t\t}\n\n\t},\n\n\tfromJSON: function ( json, bones ) {\n\n\t\tthis.uuid = json.uuid;\n\n\t\tfor ( let i = 0, l = json.bones.length; i < l; i ++ ) {\n\n\t\t\tconst uuid = json.bones[ i ];\n\t\t\tlet bone = bones[ uuid ];\n\n\t\t\tif ( bone === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: No bone found with UUID:', uuid );\n\t\t\t\tbone = new Bone();\n\n\t\t\t}\n\n\t\t\tthis.bones.push( bone );\n\t\t\tthis.boneInverses.push( new Matrix4().fromArray( json.boneInverses[ i ] ) );\n\n\t\t}\n\n\t\tthis.init();\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Skeleton',\n\t\t\t\tgenerator: 'Skeleton.toJSON'\n\t\t\t},\n\t\t\tbones: [],\n\t\t\tboneInverses: []\n\t\t};\n\n\t\tdata.uuid = this.uuid;\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tfor ( let i = 0, l = bones.length; i < l; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tdata.bones.push( bone.uuid );\n\n\t\t\tconst boneInverse = boneInverses[ i ];\n\t\t\tdata.boneInverses.push( boneInverse.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Skeleton };\n","import { BufferAttribute } from '../core/BufferAttribute.js';\nimport { Mesh } from './Mesh.js';\nimport { Matrix4 } from '../math/Matrix4.js';\n\nconst _instanceLocalMatrix = new Matrix4();\nconst _instanceWorldMatrix = new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _mesh = new Mesh();\n\nfunction InstancedMesh( geometry, material, count ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\n\tthis.instanceColor = null;\n\n\tthis.count = count;\n\n\tthis.frustumCulled = false;\n\n}\n\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: InstancedMesh,\n\n\tisInstancedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\n\t\tif ( source.instanceColor !== null ) this.instanceColor = source.instanceColor.clone();\n\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t},\n\n\tgetColorAt: function ( index, color ) {\n\n\t\tcolor.fromArray( this.instanceColor.array, index * 3 );\n\n\t},\n\n\tgetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t},\n\n\tsetColorAt: function ( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new BufferAttribute( new Float32Array( this.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t},\n\n\tsetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nexport { InstancedMesh };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { LineBasicMaterial };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\nconst _start = new Vector3();\nconst _end = new Vector3();\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\n\nfunction Line( geometry = new BufferGeometry(), material = new LineBasicMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positionAttribute = attributes.position;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\t\t\t\t\tconst b = indices[ i + 1 ];\n\n\t\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\t\tconst distSq = _ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count - 1; i < l; i += step ) {\n\n\t\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tconst distSq = _ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { Line };\n","import { Line } from './Line.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\nconst _start = new Vector3();\nconst _end = new Vector3();\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [];\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { LineSegments };\n","import { Line } from './Line.js';\n\nfunction LineLoop( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineLoop';\n\n}\n\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineLoop,\n\n\tisLineLoop: true,\n\n} );\n\n\nexport { LineLoop };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { PointsMaterial };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { PointsMaterial } from '../materials/PointsMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\nconst _position = new Vector3();\n\nfunction Points( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positionAttribute = attributes.position;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\n\t\t\t\t\t_position.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\t\ttestPoint( _position, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_position.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\ttestPoint( _position, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nexport { Points };\n","import { RGBFormat, LinearFilter } from '../constants.js';\nimport { Texture } from './Texture.js';\n\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.format = format !== undefined ? format : RGBFormat;\n\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\tthis.generateMipmaps = false;\n\n\tconst scope = this;\n\n\tfunction updateVideo() {\n\n\t\tscope.needsUpdate = true;\n\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t}\n\n\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t}\n\n}\n\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\n\n\tconstructor: VideoTexture,\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.image ).copy( this );\n\n\t},\n\n\tisVideoTexture: true,\n\n\tupdate: function () {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { VideoTexture };\n","import { Texture } from './Texture.js';\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\n\nexport { CompressedTexture };\n","import { Texture } from './Texture.js';\n\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n}\n\nCanvasTexture.prototype = Object.create( Texture.prototype );\nCanvasTexture.prototype.constructor = CanvasTexture;\nCanvasTexture.prototype.isCanvasTexture = true;\n\nexport { CanvasTexture };\n","import { Texture } from './Texture.js';\nimport { NearestFilter, UnsignedShortType, UnsignedInt248Type, DepthFormat, DepthStencilFormat } from '../constants.js';\n\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\tformat = format !== undefined ? format : DepthFormat;\n\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t}\n\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.flipY = false;\n\tthis.generateMipmaps = false;\n\n}\n\nDepthTexture.prototype = Object.create( Texture.prototype );\nDepthTexture.prototype.constructor = DepthTexture;\nDepthTexture.prototype.isDepthTexture = true;\n\nexport { DepthTexture };\n","import { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nconst _v0 = new Vector3();\nconst _v1 = new Vector3();\nconst _normal = new Vector3();\nconst _triangle = new Triangle();\n\nclass EdgesGeometry extends BufferGeometry {\n\n\tconstructor( geometry, thresholdAngle ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\t\tif ( geometry.isGeometry === true ) {\n\n\t\t\tconsole.error( 'THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst precisionPoints = 4;\n\t\tconst precision = Math.pow( 10, precisionPoints );\n\t\tconst thresholdDot = Math.cos( MathUtils.DEG2RAD * thresholdAngle );\n\n\t\tconst indexAttr = geometry.getIndex();\n\t\tconst positionAttr = geometry.getAttribute( 'position' );\n\t\tconst indexCount = indexAttr ? indexAttr.count : positionAttr.count;\n\n\t\tconst indexArr = [ 0, 0, 0 ];\n\t\tconst vertKeys = [ 'a', 'b', 'c' ];\n\t\tconst hashes = new Array( 3 );\n\n\t\tconst edgeData = {};\n\t\tconst vertices = [];\n\t\tfor ( let i = 0; i < indexCount; i += 3 ) {\n\n\t\t\tif ( indexAttr ) {\n\n\t\t\t\tindexArr[ 0 ] = indexAttr.getX( i );\n\t\t\t\tindexArr[ 1 ] = indexAttr.getX( i + 1 );\n\t\t\t\tindexArr[ 2 ] = indexAttr.getX( i + 2 );\n\n\t\t\t} else {\n\n\t\t\t\tindexArr[ 0 ] = i;\n\t\t\t\tindexArr[ 1 ] = i + 1;\n\t\t\t\tindexArr[ 2 ] = i + 2;\n\n\t\t\t}\n\n\t\t\tconst { a, b, c } = _triangle;\n\t\t\ta.fromBufferAttribute( positionAttr, indexArr[ 0 ] );\n\t\t\tb.fromBufferAttribute( positionAttr, indexArr[ 1 ] );\n\t\t\tc.fromBufferAttribute( positionAttr, indexArr[ 2 ] );\n\t\t\t_triangle.getNormal( _normal );\n\n\t\t\t// create hashes for the edge from the vertices\n\t\t\thashes[ 0 ] = `${ Math.round( a.x * precision ) },${ Math.round( a.y * precision ) },${ Math.round( a.z * precision ) }`;\n\t\t\thashes[ 1 ] = `${ Math.round( b.x * precision ) },${ Math.round( b.y * precision ) },${ Math.round( b.z * precision ) }`;\n\t\t\thashes[ 2 ] = `${ Math.round( c.x * precision ) },${ Math.round( c.y * precision ) },${ Math.round( c.z * precision ) }`;\n\n\t\t\t// skip degenerate triangles\n\t\t\tif ( hashes[ 0 ] === hashes[ 1 ] || hashes[ 1 ] === hashes[ 2 ] || hashes[ 2 ] === hashes[ 0 ] ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// iterate over every edge\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t// get the first and next vertex making up the edge\n\t\t\t\tconst jNext = ( j + 1 ) % 3;\n\t\t\t\tconst vecHash0 = hashes[ j ];\n\t\t\t\tconst vecHash1 = hashes[ jNext ];\n\t\t\t\tconst v0 = _triangle[ vertKeys[ j ] ];\n\t\t\t\tconst v1 = _triangle[ vertKeys[ jNext ] ];\n\n\t\t\t\tconst hash = `${ vecHash0 }_${ vecHash1 }`;\n\t\t\t\tconst reverseHash = `${ vecHash1 }_${ vecHash0 }`;\n\n\t\t\t\tif ( reverseHash in edgeData && edgeData[ reverseHash ] ) {\n\n\t\t\t\t\t// if we found a sibling edge add it into the vertex array if\n\t\t\t\t\t// it meets the angle threshold and delete the edge from the map.\n\t\t\t\t\tif ( _normal.dot( edgeData[ reverseHash ].normal ) <= thresholdDot ) {\n\n\t\t\t\t\t\tvertices.push( v0.x, v0.y, v0.z );\n\t\t\t\t\t\tvertices.push( v1.x, v1.y, v1.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tedgeData[ reverseHash ] = null;\n\n\t\t\t\t} else if ( ! ( hash in edgeData ) ) {\n\n\t\t\t\t\t// if we've already got an edge here then skip adding a new one\n\t\t\t\t\tedgeData[ hash ] = {\n\n\t\t\t\t\t\tindex0: indexArr[ j ],\n\t\t\t\t\t\tindex1: indexArr[ jNext ],\n\t\t\t\t\t\tnormal: _normal.clone(),\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// iterate over all remaining, unmatched edges and add them to the vertex array\n\t\tfor ( const key in edgeData ) {\n\n\t\t\tif ( edgeData[ key ] ) {\n\n\t\t\t\tconst { index0, index1 } = edgeData[ key ];\n\t\t\t\t_v0.fromBufferAttribute( positionAttr, index0 );\n\t\t\t\t_v1.fromBufferAttribute( positionAttr, index1 );\n\n\t\t\t\tvertices.push( _v0.x, _v0.y, _v0.z );\n\t\t\t\tvertices.push( _v1.x, _v1.y, _v1.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t}\n\n}\n\nexport { EdgesGeometry };\n","/**\n * Port from https://github.com/mapbox/earcut (v2.2.2)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tlet p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tconst b = splitPolygon( outerNode, hole );\n\n\t\t// filter collinear points around the cuts\n\t\tfilterPoints( outerNode, outerNode.next );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode;\n\tconst hx = hole.x;\n\tconst hy = hole.y;\n\tlet qx = - Infinity, m;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nexport { Earcut };\n","import { Earcut } from './Earcut.js';\n\nconst ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\nexport { ShapeUtils };\n","/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\nclass ExtrudeGeometry extends BufferGeometry {\n\n\tconstructor( shapes, options ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tlet depth = options.depth !== undefined ? options.depth : 100;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t// deprecated options\n\n\t\t\tif ( options.amount !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\n\t\t\t\tdepth = options.amount;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( 'THREE.ExtrudeGeometry: vec does not exist' );\n\n\t\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON( shapes, options, data );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n\n};\n\nfunction toJSON( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\n\nexport { ExtrudeGeometry, ExtrudeGeometry as ExtrudeBufferGeometry };\n","/**\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\n */\n\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\tconst EPS = 0.00001;\n\n\tconst normal = new Vector3();\n\n\tconst p0 = new Vector3(), p1 = new Vector3();\n\tconst pu = new Vector3(), pv = new Vector3();\n\n\tif ( func.length < 3 ) {\n\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\n\n\t}\n\n\t// generate vertices, normals and uvs\n\n\tconst sliceCount = slices + 1;\n\n\tfor ( let i = 0; i <= stacks; i ++ ) {\n\n\t\tconst v = i / stacks;\n\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\n\n\t\t\tconst u = j / slices;\n\n\t\t\t// vertex\n\n\t\t\tfunc( u, v, p0 );\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t// normal\n\n\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\tfunc( u - EPS, v, p1 );\n\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u + EPS, v, p1 );\n\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\tfunc( u, v - EPS, p1 );\n\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u, v + EPS, p1 );\n\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( let i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( let j = 0; j < slices; j ++ ) {\n\n\t\t\tconst a = i * sliceCount + j;\n\t\t\tconst b = i * sliceCount + j + 1;\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nParametricGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\n\nexport { ParametricGeometry, ParametricGeometry as ParametricBufferGeometry };\n","import { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\nclass ShapeGeometry extends BufferGeometry {\n\n\tconstructor( shapes, curveSegments = 12 ) {\n\n\t\tsuper();\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// incides\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON( shapes, data );\n\n\t}\n\n}\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nexport { ShapeGeometry, ShapeGeometry as ShapeBufferGeometry };\n","import { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nclass WireframeGeometry extends BufferGeometry {\n\n\tconstructor( geometry ) {\n\n\t\tsuper();\n\t\tthis.type = 'WireframeGeometry';\n\n\t\tif ( geometry.isGeometry === true ) {\n\n\t\t\tconsole.error( 'THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\n\t\t// helper variables\n\n\t\tconst edge = [ 0, 0 ], edges = {};\n\n\t\tconst vertex = new Vector3();\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\t// indexed BufferGeometry\n\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst indices = geometry.index;\n\t\t\tlet groups = geometry.groups;\n\n\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t}\n\n\t\t\t// create a data structure that contains all eges without duplicates\n\n\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\tconst start = group.start;\n\t\t\t\tconst count = group.count;\n\n\t\t\t\tfor ( let i = start, l = ( start + count ); i < l; i += 3 ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tconst edge1 = indices.getX( i + j );\n\t\t\t\t\t\tconst edge2 = indices.getX( i + ( j + 1 ) % 3 );\n\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// generate vertices\n\n\t\t\tfor ( const key in edges ) {\n\n\t\t\t\tconst e = edges[ key ];\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// non-indexed BufferGeometry\n\n\t\t\tconst position = geometry.attributes.position;\n\n\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t}\n\n}\n\n\nexport { WireframeGeometry };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\n\nexport { ShadowMaterial };\n","import { ShaderMaterial } from './ShaderMaterial.js';\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n\nexport { RawShaderMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 1.0;\n\tthis.metalness = 0.0;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.vertexTangents = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.vertexTangents = source.vertexTangents;\n\n\treturn this;\n\n};\n\n\nexport { MeshStandardMaterial };\n","import { Vector2 } from '../math/Vector2.js';\nimport { MeshStandardMaterial } from './MeshStandardMaterial.js';\nimport { Color } from '../math/Color.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\n/**\n * parameters = {\n *  clearcoat: <float>,\n *  clearcoatMap: new THREE.Texture( <Image> ),\n *  clearcoatRoughness: <float>,\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n *\n *  reflectivity: <float>,\n *  ior: <float>,\n *\n *  sheen: <Color>,\n *\n *  transmission: <float>,\n *  transmissionMap: new THREE.Texture( <Image> )\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.clearcoat = 0.0;\n\tthis.clearcoatMap = null;\n\tthis.clearcoatRoughness = 0.0;\n\tthis.clearcoatRoughnessMap = null;\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\tthis.clearcoatNormalMap = null;\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tObject.defineProperty( this, 'ior', {\n\t\tget: function () {\n\n\t\t\treturn ( 1 + 0.4 * this.reflectivity ) / ( 1 - 0.4 * this.reflectivity );\n\n\t\t},\n\t\tset: function ( ior ) {\n\n\t\t\tthis.reflectivity = MathUtils.clamp( 2.5 * ( ior - 1 ) / ( ior + 1 ), 0, 1 );\n\n\t\t}\n\t} );\n\n\tthis.sheen = null; // null will disable sheen bsdf\n\n\tthis.transmission = 0.0;\n\tthis.transmissionMap = null;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.clearcoat = source.clearcoat;\n\tthis.clearcoatMap = source.clearcoatMap;\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\tthis.reflectivity = source.reflectivity;\n\n\tif ( source.sheen ) {\n\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\n\n\t} else {\n\n\t\tthis.sheen = null;\n\n\t}\n\n\tthis.transmission = source.transmission;\n\tthis.transmissionMap = source.transmissionMap;\n\n\treturn this;\n\n};\n\nexport { MeshPhysicalMaterial };\n","import { MultiplyOperation, TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhongMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *\n *  map: new THREE.Texture( <Image> ),\n *  gradientMap: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\tthis.gradientMap = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( Material.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\tthis.gradientMap = source.gradientMap;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshToonMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshNormalMaterial };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshLambertMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshMatcapMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.type = 'MeshMatcapMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.matcap = null;\n\n\tthis.map = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.color.copy( source.color );\n\n\tthis.matcap = source.matcap;\n\n\tthis.map = source.map;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshMatcapMaterial };\n","import { LineBasicMaterial } from './LineBasicMaterial.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\n\nexport { LineDashedMaterial };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { AdditiveAnimationBlendMode } from '../constants.js';\n\nconst AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tconst n = times.length;\n\t\tconst result = new Array( n );\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tconst nValues = values.length;\n\t\tconst result = new values.constructor( nValues );\n\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tconst srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tlet i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tlet value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps = 30 ) {\n\n\t\tconst clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tconst track = clip.tracks[ i ];\n\t\t\tconst valueSize = track.getValueSize();\n\n\t\t\tconst times = [];\n\t\t\tconst values = [];\n\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tlet minStartTime = Infinity;\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t},\n\n\tmakeClipAdditive: function ( targetClip, referenceFrame = 0, referenceClip = targetClip, fps = 30 ) {\n\n\t\tif ( fps <= 0 ) fps = 30;\n\n\t\tconst numTracks = referenceClip.tracks.length;\n\t\tconst referenceTime = referenceFrame / fps;\n\n\t\t// Make each track's values relative to the values at the reference frame\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t\t// Skip this track if it's non-numeric\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t\t} );\n\n\t\t\tif ( targetTrack === undefined ) continue;\n\n\t\t\tlet referenceOffset = 0;\n\t\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t\t}\n\n\t\t\tlet targetOffset = 0;\n\t\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t\t}\n\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\t\tlet referenceValue;\n\n\t\t\t// Find the value to subtract out of the track\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else {\n\n\t\t\t\t// Interpolate to the reference value\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( interpolant.resultBuffer, startIndex, endIndex );\n\n\t\t\t}\n\n\t\t\t// Conjugate the quaternion\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t\t}\n\n\t\t\t// Subtract the reference value from all of the track values\n\n\t\t\tconst numTimes = targetTrack.times.length;\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart,\n\t\t\t\t\t\treferenceValue,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\t\treturn targetClip;\n\n\t}\n\n};\n\nexport { AnimationUtils };\n","/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n\nexport { Interpolant };\n","import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { CubicInterpolant };\n","import { Interpolant } from '../Interpolant.js';\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { LinearInterpolant };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\n\nexport { DiscreteInterpolant };\n","import {\n\tInterpolateLinear,\n\tInterpolateSmooth,\n\tInterpolateDiscrete\n} from '../constants.js';\nimport { CubicInterpolant } from '../math/interpolants/CubicInterpolant.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { DiscreteInterpolant } from '../math/interpolants/DiscreteInterpolant.js';\nimport { AnimationUtils } from './AnimationUtils.js';\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n}\n\n// Static methods\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\ttoJSON: function ( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = 'unsupported interpolation for ' +\n\t\t\t\tthis.ValueTypeName + ' keyframe track named ' + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== times[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n} );\n\nexport { KeyframeTrack };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n * A Track of Boolean keyframe values.\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\nexport { BooleanKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n * A Track of keyframe values that represent color.\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\nexport { ColorKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n * A Track of numeric keyframe values.\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { NumberKeyframeTrack };\n","import { Interpolant } from '../Interpolant.js';\nimport { Quaternion } from '../Quaternion.js';\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { QuaternionLinearInterpolant };\n","import { InterpolateLinear } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\nimport { QuaternionLinearInterpolant } from '../../math/interpolants/QuaternionLinearInterpolant.js';\n\n/**\n * A Track of quaternion keyframe values.\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\nexport { QuaternionKeyframeTrack };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n * A Track that interpolates Strings\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\nexport { StringKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n * A Track of vectored keyframe values.\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { VectorKeyframeTrack };\n","import { AnimationUtils } from './AnimationUtils.js';\nimport { KeyframeTrack } from './KeyframeTrack.js';\nimport { BooleanKeyframeTrack } from './tracks/BooleanKeyframeTrack.js';\nimport { ColorKeyframeTrack } from './tracks/ColorKeyframeTrack.js';\nimport { NumberKeyframeTrack } from './tracks/NumberKeyframeTrack.js';\nimport { QuaternionKeyframeTrack } from './tracks/QuaternionKeyframeTrack.js';\nimport { StringKeyframeTrack } from './tracks/StringKeyframeTrack.js';\nimport { VectorKeyframeTrack } from './tracks/VectorKeyframeTrack.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { NormalAnimationBlendMode } from '../constants.js';\n\nfunction AnimationClip( name, duration = - 1, tracks, blendMode = NormalAnimationBlendMode ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = duration;\n\tthis.blendMode = blendMode;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nObject.assign( AnimationClip, {\n\n\tparse: function ( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\tconst clip = new AnimationClip( json.name, json.duration, tracks, json.blendMode );\n\t\tclip.uuid = json.uuid;\n\n\t\treturn clip;\n\n\t},\n\n\ttoJSON: function ( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t},\n\n\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function ( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new AnimationClip( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\nObject.assign( AnimationClip.prototype, {\n\n\tresetDuration: function () {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t},\n\n\ttrim: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\toptimize: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new AnimationClip( this.name, this.duration, tracks, this.blendMode );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn AnimationClip.toJSON( this );\n\n\t}\n\n} );\n\n\nexport { AnimationClip };\n","const Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n\nexport { Cache };\n","function LoadingManager( onLoad, onProgress, onError ) {\n\n\tconst scope = this;\n\n\tlet isLoading = false;\n\tlet itemsLoaded = 0;\n\tlet itemsTotal = 0;\n\tlet urlModifier = undefined;\n\tconst handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tconst index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tconst regex = handlers[ i ];\n\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nconst DefaultLoadingManager = new LoadingManager();\n\n\nexport { DefaultLoadingManager, LoadingManager };\n","import { DefaultLoadingManager } from './LoadingManager.js';\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.withCredentials = false;\n\tthis.path = '';\n\tthis.resourcePath = '';\n\tthis.requestHeader = {};\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tloadAsync: function ( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { Loader };\n","import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nconst loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\n\t\tlet request;\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\n\n\t\t\tlet data = dataUriRegexResult[ 3 ];\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tlet response;\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\trequest = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tconst response = this.response;\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( const header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FileLoader };\n","import { AnimationClip } from '../animation/AnimationClip.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\n\nfunction AnimationLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AnimationLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n} );\n\n\nexport { AnimationLoader };\n","import { LinearFilter } from '../constants.js';\nimport { FileLoader } from './FileLoader.js';\nimport { CompressedTexture } from '../textures/CompressedTexture.js';\nimport { Loader } from './Loader.js';\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction CompressedTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) texture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.image = images;\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.image = images;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { CompressedTextureLoader };\n","import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\n\nexport { ImageLoader };\n","import { ImageLoader } from './ImageLoader.js';\nimport { CubeTexture } from '../textures/CubeTexture.js';\nimport { Loader } from './Loader.js';\n\nfunction CubeTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCubeTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CubeTextureLoader,\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { CubeTextureLoader };\n","import { LinearFilter, LinearMipmapLinearFilter, ClampToEdgeWrapping } from '../constants.js';\nimport { FileLoader } from './FileLoader.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Loader } from './Loader.js';\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DataTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.encoding !== undefined ) {\n\n\t\t\t\ttexture.encoding = texData.encoding;\n\n\t\t\t}\n\n\t\t\tif ( texData.flipY !== undefined ) {\n\n\t\t\t\ttexture.flipY = texData.flipY;\n\n\t\t\t}\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { DataTextureLoader };\n","import { RGBAFormat, RGBFormat } from '../constants.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { Texture } from '../textures/Texture.js';\nimport { Loader } from './Loader.js';\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { TextureLoader };\n","import { MathUtils } from '../../math/MathUtils.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t},\n\n\tgetTangentAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Curve };\n","import { Curve } from '../core/Curve.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst twoPi = Math.PI * 2;\n\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tconst angle = this.aStartAngle + t * deltaAngle;\n\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tconst cos = Math.cos( this.aRotation );\n\t\tconst sin = Math.sin( this.aRotation );\n\n\t\tconst tx = x - this.aX;\n\t\tconst ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\n\nexport { EllipseCurve };\n","import { EllipseCurve } from './EllipseCurve.js';\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n\nexport { ArcCurve };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = new Vector3();\nconst px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points = [], closed = false, curveType = 'centripetal', tension = 0.5 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points;\n\tthis.closed = closed;\n\tthis.curveType = curveType;\n\tthis.tension = tension;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget = new Vector3() ) {\n\n\tconst point = optionalTarget;\n\n\tconst points = this.points;\n\tconst l = points.length;\n\n\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tlet intPoint = Math.floor( p );\n\tlet weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tconst p1 = points[ intPoint % l ];\n\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n\nexport { CatmullRomCurve3 };\n","/**\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bzier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nexport { CatmullRom, QuadraticBezier, CubicBezier };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\nfunction CubicBezierCurve( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2(), v3 = new Vector2() ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\tthis.v3 = v3;\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget = new Vector2() ) {\n\n\tconst point = optionalTarget;\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\nfunction CubicBezierCurve3( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3(), v3 = new Vector3() ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\tthis.v3 = v3;\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget = new Vector3() ) {\n\n\tconst point = optionalTarget;\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve3 };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { Curve } from '../core/Curve.js';\n\nfunction LineCurve( v1 = new Vector2(), v2 = new Vector2() ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget = new Vector2() ) {\n\n\tconst point = optionalTarget;\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( t, optionalTarget ) {\n\n\tconst tangent = optionalTarget || new Vector2();\n\n\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\n\n\treturn tangent;\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\nfunction LineCurve3( v1 = new Vector3(), v2 = new Vector3() ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget = new Vector3() ) {\n\n\tconst point = optionalTarget;\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\nfunction QuadraticBezierCurve( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2() ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget = new Vector2() ) {\n\n\tconst point = optionalTarget;\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\nfunction QuadraticBezierCurve3( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3() ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget = new Vector3() ) {\n\n\tconst point = optionalTarget;\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { CatmullRom } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\nfunction SplineCurve( points = [] ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points;\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget = new Vector2() ) {\n\n\tconst point = optionalTarget;\n\n\tconst points = this.points;\n\tconst p = ( points.length - 1 ) * t;\n\n\tconst intPoint = Math.floor( p );\n\tconst weight = p - intPoint;\n\n\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tconst p1 = points[ intPoint ];\n\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\n\nexport { SplineCurve };\n","import { Curve } from './Curve.js';\nimport * as Curves from '../curves/Curves.js';\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new Curves[ 'LineCurve' ]( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions = 40 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions = 12 ) {\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CurvePath };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { CurvePath } from './CurvePath.js';\nimport { EllipseCurve } from '../curves/EllipseCurve.js';\nimport { SplineCurve } from '../curves/SplineCurve.js';\nimport { CubicBezierCurve } from '../curves/CubicBezierCurve.js';\nimport { QuadraticBezierCurve } from '../curves/QuadraticBezierCurve.js';\nimport { LineCurve } from '../curves/LineCurve.js';\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Path };\n","import { Path } from './Path.js';\nimport { MathUtils } from '../../math/MathUtils.js';\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Shape };\n","import { Object3D } from '../core/Object3D.js';\nimport { Color } from '../math/Color.js';\n\nfunction Light( color, intensity = 1 ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Light };\n","import { Light } from './Light.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { HemisphereLight };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Frustum } from '../math/Frustum.js';\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.normalBias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.mapPass = null;\n\tthis.matrix = new Matrix4();\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis._frustum = new Frustum();\n\tthis._frameExtents = new Vector2( 1, 1 );\n\n\tthis._viewportCount = 1;\n\n\tthis._viewports = [\n\n\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t];\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\t_projScreenMatrix: new Matrix4(),\n\n\t_lightPositionWorld: new Vector3(),\n\n\t_lookTarget: new Vector3(),\n\n\tgetViewportCount: function () {\n\n\t\treturn this._viewportCount;\n\n\t},\n\n\tgetFrustum: function () {\n\n\t\treturn this._frustum;\n\n\t},\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst shadowCamera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tlightPositionWorld = this._lightPositionWorld;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t},\n\n\tgetViewport: function ( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t},\n\n\tgetFrameExtents: function () {\n\n\t\treturn this._frameExtents;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n\nexport { LightShadow };\n","import { LightShadow } from './LightShadow.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\tthis.focus = 1;\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n\nexport { SpotLightShadow };\n","import { Light } from './Light.js';\nimport { SpotLightShadow } from './SpotLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { SpotLight };\n","import { LightShadow } from './LightShadow.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\n\nfunction PointLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\tthis._frameExtents = new Vector2( 4, 2 );\n\n\tthis._viewportCount = 6;\n\n\tthis._viewports = [\n\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t// following orientation:\n\t\t//\n\t\t//  xzXZ\n\t\t//   y Y\n\t\t//\n\t\t// X - Positive x direction\n\t\t// x - Negative x direction\n\t\t// Y - Positive y direction\n\t\t// y - Negative y direction\n\t\t// Z - Positive z direction\n\t\t// z - Negative z direction\n\n\t\t// positive X\n\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t// negative X\n\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t// positive Z\n\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t// negative Z\n\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t// positive Y\n\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t// negative Y\n\t\tnew Vector4( 1, 0, 1, 1 )\n\t];\n\n\tthis._cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tthis._cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n}\n\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: PointLightShadow,\n\n\tisPointLightShadow: true,\n\n\tupdateMatrices: function ( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tlightPositionWorld = this._lightPositionWorld,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.copy( camera.position );\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\n\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t}\n\n} );\n\n\nexport { PointLightShadow };\n","import { Light } from './Light.js';\nimport { PointLightShadow } from './PointLightShadow.js';\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new PointLightShadow();\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { PointLight };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\n\nfunction OrthographicCamera( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = near;\n\tthis.far = far;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { OrthographicCamera };\n","import { LightShadow } from './LightShadow.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\n\nfunction DirectionalLightShadow() {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow,\n\n\tisDirectionalLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n\nexport { DirectionalLightShadow };\n","import { Light } from './Light.js';\nimport { DirectionalLightShadow } from './DirectionalLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectionalLight };\n","import { Light } from './Light.js';\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n\nexport { AmbientLight };\n","import { Light } from './Light.js';\n\nfunction RectAreaLight( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n}\n\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { RectAreaLight };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isSphericalHarmonics3', { value: true } );\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); //  * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 *  / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // (  / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // (  / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // (  / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\n\nexport { SphericalHarmonics3 };\n","import { SphericalHarmonics3 } from '../math/SphericalHarmonics3.js';\nimport { Light } from './Light.js';\n\nfunction LightProbe( sh, intensity ) {\n\n\tLight.call( this, undefined, intensity );\n\n\tthis.type = 'LightProbe';\n\n\tthis.sh = ( sh !== undefined ) ? sh : new SphericalHarmonics3();\n\n}\n\nLightProbe.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: LightProbe,\n\n\tisLightProbe: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { LightProbe };\n","import { Color } from '../math/Color.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\nimport * as Materials from '../materials/Materials.js';\n\nfunction MaterialLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.textures = {};\n\n}\n\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined && material.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\n\t\tif ( json.emissive !== undefined && material.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined && material.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\n\t\treturn material;\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { MaterialLoader };\n","import { BufferGeometry } from './BufferGeometry.js';\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.instanceCount = Infinity;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { InstancedBufferGeometry };\n","import { BufferAttribute } from './BufferAttribute.js';\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\n\nexport { InstancedBufferAttribute };\n","import { Sphere } from '../math/Sphere.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\nimport { InstancedBufferGeometry } from '../core/InstancedBufferGeometry.js';\nimport { InstancedBufferAttribute } from '../core/InstancedBufferAttribute.js';\nimport { InterleavedBufferAttribute } from '../core/InterleavedBufferAttribute.js';\nimport { InterleavedBuffer } from '../core/InterleavedBuffer.js';\nimport { getTypedArray } from '../utils.js';\n\nfunction BufferGeometryLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = getTypedArray( interleavedBuffer.type, buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = getTypedArray( index.type, index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\nexport { BufferGeometryLoader };\n","import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nfunction ImageBitmapLoader( manager ) {\n\n\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t}\n\n\tif ( typeof fetch === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t}\n\n\tLoader.call( this, manager );\n\n\tthis.options = { premultiplyAlpha: 'none' };\n\n}\n\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageBitmapLoader,\n\n\tisImageBitmapLoader: true,\n\n\tsetOptions: function setOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, scope.options );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n} );\n\nexport { ImageBitmapLoader };\n","import { Color } from '../../math/Color.js';\nimport { Path } from './Path.js';\nimport { Shape } from './Shape.js';\nimport { ShapeUtils } from '../ShapeUtils.js';\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tconst toChange = [];\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n\nexport { ShapePath };\n","import { ShapePath } from './ShapePath.js';\n\nclass Font {\n\n\tconstructor( data ) {\n\n\t\tObject.defineProperty( this, 'isFont', { value: true } );\n\n\t\tthis.type = 'Font';\n\n\t\tthis.data = data;\n\n\t}\n\n\tgenerateShapes( text, size = 100 ) {\n\n\t\tconst shapes = [];\n\t\tconst paths = createPaths( text, size, this.data );\n\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n}\n\nfunction createPaths( text, size, data ) {\n\n\tconst chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\n\tconst scale = size / data.resolution;\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tconst paths = [];\n\n\tlet offsetX = 0, offsetY = 0;\n\n\tfor ( let i = 0; i < chars.length; i ++ ) {\n\n\t\tconst char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tconst path = new ShapePath();\n\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\n\n\t\t\tconst action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nexport { Font };\n","import { Font } from '../extras/core/Font.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\n\nfunction FontLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FontLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tconst font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n} );\n\n\nexport { FontLoader };\n","let _context;\n\nconst AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\nexport { AudioContext };\n","import { AudioContext } from '../audio/AudioContext.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\n\nfunction AudioLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAudioLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AudioLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n} );\n\n\nexport { AudioLoader };\n","import { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { LightProbe } from './LightProbe.js';\n\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( skyColor );\n\tconst color2 = new Color().set( groundColor );\n\n\tconst sky = new Vector3( color1.r, color1.g, color1.b );\n\tconst ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\tconst c0 = Math.sqrt( Math.PI );\n\tconst c1 = c0 * Math.sqrt( 0.75 );\n\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n}\n\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: HemisphereLightProbe,\n\n\tisHemisphereLightProbe: true,\n\n\tcopy: function ( source ) { // modifying colors not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { HemisphereLightProbe };\n","import { Color } from '../math/Color.js';\nimport { LightProbe } from './LightProbe.js';\n\nfunction AmbientLightProbe( color, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( color );\n\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n}\n\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: AmbientLightProbe,\n\n\tisAmbientLightProbe: true,\n\n\tcopy: function ( source ) { // modifying color not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { AmbientLightProbe };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nconst _eyeRight = new Matrix4();\nconst _eyeLeft = new Matrix4();\n\nfunction StereoCamera() {\n\n\tthis.type = 'StereoCamera';\n\n\tthis.aspect = 1;\n\n\tthis.eyeSep = 0.064;\n\n\tthis.cameraL = new PerspectiveCamera();\n\tthis.cameraL.layers.enable( 1 );\n\tthis.cameraL.matrixAutoUpdate = false;\n\n\tthis.cameraR = new PerspectiveCamera();\n\tthis.cameraR.layers.enable( 2 );\n\tthis.cameraR.matrixAutoUpdate = false;\n\n\tthis._cache = {\n\t\tfocus: null,\n\t\tfov: null,\n\t\taspect: null,\n\t\tnear: null,\n\t\tfar: null,\n\t\tzoom: null,\n\t\teyeSep: null\n\t};\n\n}\n\nObject.assign( StereoCamera.prototype, {\n\n\tupdate: function ( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n} );\n\n\nexport { StereoCamera };\n","import { Quaternion } from '../math/Quaternion.js';\n\nfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tlet mixFunction,\n\t\tmixFunctionAdditive,\n\t\tsetIdentity;\n\n\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\t//\n\t// 'add' is used for additive cumulative results\n\t//\n\t// 'work' is optional and is only present for quaternion types. It is used\n\t// to store intermediate quaternion multiplication results\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\n\t\t\tmixFunction = this._slerp;\n\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\tthis._workIndex = 5;\n\t\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\t\t\tmixFunction = this._select;\n\n\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t// additive is not relevant for non-numeric types\n\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmixFunction = this._lerp;\n\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t}\n\n\tthis._mixBufferRegion = mixFunction;\n\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\tthis._setIdentity = setIdentity;\n\tthis._origIndex = 3;\n\tthis._addIndex = 4;\n\n\tthis.cumulativeWeight = 0;\n\tthis.cumulativeWeightAdditive = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n}\n\nObject.assign( PropertyMixer.prototype, {\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function ( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive: function ( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function ( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function () {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function () {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\t_setAdditiveIdentityNumeric: function () {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t},\n\n\t_setAdditiveIdentityQuaternion: function () {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t},\n\n\t_setAdditiveIdentityOther: function () {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_slerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t},\n\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t},\n\n\t_lerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { PropertyMixer };\n","// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === '' || nodeName === '.' || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tconst source = this.resolvedProperty;\n\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === 'morphTargetInfluences' ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\nexport { PropertyBinding };\n","import { PropertyBinding } from './PropertyBinding.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nfunction AnimationObjectGroup() {\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// cached objects followed by the active ones\n\tthis._objects = Array.prototype.slice.call( arguments );\n\n\tthis.nCachedObjects_ = 0; // threshold\n\t// note: read by PropertyBinding.Composite\n\n\tconst indices = {};\n\tthis._indicesByUUID = indices; // for bookkeeping\n\n\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t}\n\n\tthis._paths = []; // inside: string\n\tthis._parsedPaths = []; // inside: { we don't care, here }\n\tthis._bindings = []; // inside: Array< PropertyBinding >\n\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\tconst scope = this;\n\n\tthis.stats = {\n\n\t\tobjects: {\n\t\t\tget total() {\n\n\t\t\t\treturn scope._objects.length;\n\n\t\t\t},\n\t\t\tget inUse() {\n\n\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t}\n\t\t},\n\t\tget bindingsPerObject() {\n\n\t\t\treturn scope._bindings.length;\n\n\t\t}\n\n\t};\n\n}\n\nObject.assign( AnimationObjectGroup.prototype, {\n\n\tisAnimationObjectGroup: true,\n\n\tadd: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\tremove: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// remove & forget\n\tuncache: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tif ( lastIndex > 0 ) {\n\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_: function ( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t},\n\n\tunsubscribe_: function ( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { AnimationObjectGroup };\n","import { WrapAroundEnding, ZeroCurvatureEnding, ZeroSlopeEnding, LoopPingPong, LoopOnce, LoopRepeat, NormalAnimationBlendMode, AdditiveAnimationBlendMode } from '../constants.js';\n\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot = null, blendMode = clip.blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot;\n\t\tthis.blendMode = blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\n\nexport { AnimationAction };\n","import { AnimationAction } from './AnimationAction.js';\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { PropertyBinding } from './PropertyBinding.js';\nimport { PropertyMixer } from './PropertyMixer.js';\nimport { AnimationClip } from './AnimationClip.js';\nimport { NormalAnimationBlendMode } from '../constants.js';\n\nfunction AnimationMixer( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n}\n\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: AnimationMixer,\n\n\t_bindAction: function ( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function ( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function ( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function () {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction: function ( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function ( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function ( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function ( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function () {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function ( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function ( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function () {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function ( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime: function ( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function () {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function ( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function ( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { AnimationMixer };\n","import { InterleavedBuffer } from './InterleavedBuffer.js';\n\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\n\n\tInterleavedBuffer.call( this, array, stride );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\n\n\tconstructor: InstancedInterleavedBuffer,\n\n\tisInstancedInterleavedBuffer: true,\n\n\tcopy: function ( source ) {\n\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n} );\n\nexport { InstancedInterleavedBuffer };\n","function GLBufferAttribute( buffer, type, itemSize, elementSize, count ) {\n\n\tthis.buffer = buffer;\n\tthis.type = type;\n\tthis.itemSize = itemSize;\n\tthis.elementSize = elementSize;\n\tthis.count = count;\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( GLBufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( GLBufferAttribute.prototype, {\n\n\tisGLBufferAttribute: true,\n\n\tsetBuffer: function ( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t},\n\n\tsetType: function ( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetItemSize: function ( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetCount: function ( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t},\n\n} );\n\n\nexport { GLBufferAttribute };\n","import { Ray } from '../math/Ray.js';\nimport { Layers } from './Layers.js';\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\tthis.camera = null;\n\tthis.layers = new Layers();\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: { threshold: 1 },\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( camera && camera.isPerspectiveCamera ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( camera && camera.isOrthographicCamera ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type: ' + camera.type );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n\nexport { Raycaster };\n","import { Vector2 } from './Vector2.js';\n\nconst _vector = /*@__PURE__*/ new Vector2();\n\nclass Box2 {\n\n\tconstructor( min, max ) {\n\n\t\tObject.defineProperty( this, 'isBox2', { value: true } );\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\n\nexport { Box2 };\n","import { Object3D } from '../../core/Object3D.js';\n\nfunction ImmediateRenderObject( material ) {\n\n\tObject3D.call( this );\n\n\tthis.material = material;\n\tthis.render = function ( /* renderCallback */ ) {};\n\n\tthis.hasPositions = false;\n\tthis.hasNormals = false;\n\tthis.hasColors = false;\n\tthis.hasUvs = false;\n\n\tthis.positionArray = null;\n\tthis.normalArray = null;\n\tthis.colorArray = null;\n\tthis.uvArray = null;\n\n\tthis.count = 0;\n\n}\n\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\n\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\n\nexport { ImmediateRenderObject };\n","import { LineSegments } from '../objects/LineSegments.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'SkeletonHelper';\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector.x, _vector.y, _vector.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector.x, _vector.y, _vector.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object && object.isBone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\n\nexport { SkeletonHelper };\n","const _floatView = new Float32Array( 1 );\nconst _int32View = new Int32Array( _floatView.buffer );\n\nconst DataUtils = {\n\n\t// Converts float32 to float16 (stored as uint16 value).\n\n\ttoHalfFloat: function ( val ) {\n\n\t\t// Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n\t\t/* This method is faster than the OpenEXR implementation (very often\n\t\t* used, eg. in Ogre), with the additional benefit of rounding, inspired\n\t\t* by James Tursa?s half-precision code. */\n\n\t\t_floatView[ 0 ] = val;\n\t\tconst x = _int32View[ 0 ];\n\n\t\tlet bits = ( x >> 16 ) & 0x8000; /* Get the sign */\n\t\tlet m = ( x >> 12 ) & 0x07ff; /* Keep one extra bit for rounding */\n\t\tconst e = ( x >> 23 ) & 0xff; /* Using int is faster here */\n\n\t\t/* If zero, or denormal, or exponent underflows too much for a denormal\n\t\t\t* half, return signed zero. */\n\t\tif ( e < 103 ) return bits;\n\n\t\t/* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\t\tif ( e > 142 ) {\n\n\t\t\tbits |= 0x7c00;\n\t\t\t/* If exponent was 0xff and one mantissa bit was set, it means NaN,\n\t\t\t\t\t\t* not Inf, so make sure we set one mantissa bit too. */\n\t\t\tbits |= ( ( e == 255 ) ? 0 : 1 ) && ( x & 0x007fffff );\n\t\t\treturn bits;\n\n\t\t}\n\n\t\t/* If exponent underflows but not too much, return a denormal */\n\t\tif ( e < 113 ) {\n\n\t\t\tm |= 0x0800;\n\t\t\t/* Extra rounding may overflow and set mantissa to 0 and exponent\n\t\t\t\t* to 1, which is OK. */\n\t\t\tbits |= ( m >> ( 114 - e ) ) + ( ( m >> ( 113 - e ) ) & 1 );\n\t\t\treturn bits;\n\n\t\t}\n\n\t\tbits |= ( ( e - 112 ) << 10 ) | ( m >> 1 );\n\t\t/* Extra rounding. An overflow will set mantissa to 0 and increment\n\t\t\t* the exponent, which is OK. */\n\t\tbits += m & 1;\n\t\treturn bits;\n\n\t}\n\n};\n\nexport { DataUtils };\n","import {\n\tCubeUVReflectionMapping,\n\tGammaEncoding,\n\tLinearEncoding,\n\tNoToneMapping,\n\tNearestFilter,\n\tNoBlending,\n\tRGBDEncoding,\n\tRGBEEncoding,\n\tRGBEFormat,\n\tRGBM16Encoding,\n\tRGBM7Encoding,\n\tUnsignedByteType,\n\tsRGBEncoding\n} from '../constants.js';\n\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\nimport { RawShaderMaterial } from '../materials/RawShaderMaterial.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Color } from '../math/Color.js';\nimport { WebGLRenderTarget } from '../renderers/WebGLRenderTarget.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BoxBufferGeometry } from '../geometries/BoxGeometry.js';\nimport { BackSide } from '../constants.js';\n\nconst LOD_MIN = 4;\nconst LOD_MAX = 8;\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst ENCODINGS = {\n\t[ LinearEncoding ]: 0,\n\t[ sRGBEncoding ]: 1,\n\t[ RGBEEncoding ]: 2,\n\t[ RGBM7Encoding ]: 3,\n\t[ RGBM16Encoding ]: 4,\n\t[ RGBDEncoding ]: 5,\n\t[ GammaEncoding ]: 6\n};\n\nconst backgroundMaterial = new MeshBasicMaterial( {\n\tside: BackSide,\n\tdepthWrite: false,\n\tdepthTest: false,\n} );\nconst backgroundBox = new Mesh( new BoxBufferGeometry(), backgroundMaterial );\n\nconst _flatCamera = /*@__PURE__*/ new OrthographicCamera();\nconst { _lodPlanes, _sizeLods, _sigmas } = /*@__PURE__*/ _createPlanes();\nconst _clearColor = /*@__PURE__*/ new Color();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n */\n\nfunction convertLinearToRGBE( color ) {\n\n\tconst maxComponent = Math.max( color.r, color.g, color.b );\n\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\n\tcolor.multiplyScalar( Math.pow( 2.0, - fExp ) );\n\n\tconst alpha = ( fExp + 128.0 ) / 255.0;\n\treturn alpha;\n\n}\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\n\t\tthis._equirectShader = null;\n\t\tthis._cubemapShader = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular ) {\n\n\t\treturn this._fromTexture( equirectangular );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap ) {\n\n\t\treturn this._fromTexture( cubemap );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapShader === null ) {\n\n\t\t\tthis._cubemapShader = _getCubemapShader();\n\t\t\tthis._compileMaterial( this._cubemapShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectShader === null ) {\n\n\t\t\tthis._equirectShader = _getEquirectShader();\n\t\t\tthis._compileMaterial( this._equirectShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._blurMaterial.dispose();\n\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\n\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\n\n\t\t\t_lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t// private interface\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._pingPongRenderTarget.dispose();\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets( texture ) { // warning: null texture is valid\n\n\t\tconst params = {\n\t\t\tmagFilter: NearestFilter,\n\t\t\tminFilter: NearestFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: UnsignedByteType,\n\t\t\tformat: RGBEFormat,\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst originalAutoClear = renderer.autoClear;\n\t\tconst outputEncoding = renderer.outputEncoding;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\trenderer.getClearColor( _clearColor );\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.outputEncoding = LinearEncoding;\n\t\trenderer.autoClear = false;\n\n\t\tlet useSolidColor = false;\n\t\tconst background = scene.background;\n\t\tif ( background ) {\n\n\t\t\tif ( background.isColor ) {\n\n\t\t\t\tbackgroundMaterial.color.copy( background ).convertSRGBToLinear();\n\t\t\t\tscene.background = null;\n\n\t\t\t\tconst alpha = convertLinearToRGBE( backgroundMaterial.color );\n\t\t\t\tbackgroundMaterial.opacity = alpha;\n\t\t\t\tuseSolidColor = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tbackgroundMaterial.color.copy( _clearColor ).convertSRGBToLinear();\n\n\t\t\tconst alpha = convertLinearToRGBE( backgroundMaterial.color );\n\t\t\tbackgroundMaterial.opacity = alpha;\n\t\t\tuseSolidColor = true;\n\n\t\t}\n\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\t\t\tif ( col == 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col == 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\t_setViewport( cubeUVRenderTarget,\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\n\t\t\tif ( useSolidColor ) {\n\n\t\t\t\trenderer.render( backgroundBox, cubeCamera );\n\n\t\t\t}\n\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.outputEncoding = outputEncoding;\n\t\trenderer.autoClear = originalAutoClear;\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\tif ( this._cubemapShader == null ) {\n\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( this._equirectShader == null ) {\n\n\t\t\t\tthis._equirectShader = _getEquirectShader();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tif ( ! texture.isCubeTexture ) {\n\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\n\n\t\t}\n\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i == 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\n\t\tconst outputSize = _sizeLods[ lodOut ];\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\nfunction _isLDR( texture ) {\n\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\n\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\n\n}\n\nfunction _createPlanes() {\n\n\tconst _lodPlanes = [];\n\tconst _sizeLods = [];\n\tconst _sigmas = [];\n\n\tlet lod = LOD_MAX;\n\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\t_sizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\n\n\t\t} else if ( i == 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\t_sigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\n\t\tconst min = - texelSize / 2;\n\t\tconst max = 1 + texelSize / 2;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\t_lodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { _lodPlanes, _sizeLods, _sigmas };\n\n}\n\nfunction _createRenderTarget( params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( maxSamples ) {\n\n\tconst weights = new Float32Array( maxSamples );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: { 'n': maxSamples },\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectShader() {\n\n\tconst texelSize = new Vector2( 1, 1 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'texelSize': { value: texelSize },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCubemapShader() {\n\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction _getEncodings() {\n\n\treturn /* glsl */`\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t`;\n\n}\n\nexport { PMREMGenerator };\n","class Uniform {\n\n\tconstructor( value ) {\n\n\t\tif ( typeof value === 'string' ) {\n\n\t\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\t\tvalue = arguments[ 1 ];\n\n\t\t}\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nexport { Uniform };\n","import { Audio } from './audio/Audio.js';\nimport { AudioAnalyser } from './audio/AudioAnalyser.js';\nimport { PerspectiveCamera } from './cameras/PerspectiveCamera.js';\nimport {\n\tFlatShading,\n\tsRGBEncoding,\n\tLinearEncoding,\n\tStaticDrawUsage,\n\tDynamicDrawUsage,\n\tTrianglesDrawMode\n} from './constants.js';\nimport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n} from './core/BufferAttribute.js';\nimport { BufferGeometry } from './core/BufferGeometry.js';\nimport { InstancedBufferGeometry } from './core/InstancedBufferGeometry.js';\nimport { InterleavedBuffer } from './core/InterleavedBuffer.js';\nimport { Object3D } from './core/Object3D.js';\nimport { Uniform } from './core/Uniform.js';\nimport { Raycaster } from './core/Raycaster.js';\nimport { Curve } from './extras/core/Curve.js';\nimport { Path } from './extras/core/Path.js';\nimport { CatmullRomCurve3 } from './extras/curves/CatmullRomCurve3.js';\nimport { AxesHelper } from './helpers/AxesHelper.js';\nimport { BoxHelper } from './helpers/BoxHelper.js';\nimport { GridHelper } from './helpers/GridHelper.js';\nimport { SkeletonHelper } from './helpers/SkeletonHelper.js';\nimport { EdgesGeometry } from './geometries/EdgesGeometry.js';\nimport { ExtrudeGeometry } from './geometries/ExtrudeGeometry.js';\nimport { ShapeGeometry } from './geometries/ShapeGeometry.js';\nimport { WireframeGeometry } from './geometries/WireframeGeometry.js';\nimport { Light } from './lights/Light.js';\nimport { Loader } from './loaders/Loader.js';\nimport { LoaderUtils } from './loaders/LoaderUtils.js';\nimport { FileLoader } from './loaders/FileLoader.js';\nimport { AudioLoader } from './loaders/AudioLoader.js';\nimport { CubeTextureLoader } from './loaders/CubeTextureLoader.js';\nimport { DataTextureLoader } from './loaders/DataTextureLoader.js';\nimport { TextureLoader } from './loaders/TextureLoader.js';\nimport { Material } from './materials/Material.js';\nimport { LineBasicMaterial } from './materials/LineBasicMaterial.js';\nimport { MeshPhongMaterial } from './materials/MeshPhongMaterial.js';\nimport { MeshPhysicalMaterial } from './materials/MeshPhysicalMaterial.js';\nimport { PointsMaterial } from './materials/PointsMaterial.js';\nimport { ShaderMaterial } from './materials/ShaderMaterial.js';\nimport { Box2 } from './math/Box2.js';\nimport { Box3 } from './math/Box3.js';\nimport { Sphere } from './math/Sphere.js';\nimport { Color } from './math/Color.js';\nimport { Frustum } from './math/Frustum.js';\nimport { Line3 } from './math/Line3.js';\nimport { MathUtils } from './math/MathUtils.js';\nimport { Matrix3 } from './math/Matrix3.js';\nimport { Matrix4 } from './math/Matrix4.js';\nimport { Plane } from './math/Plane.js';\nimport { Quaternion } from './math/Quaternion.js';\nimport { Ray } from './math/Ray.js';\nimport { Triangle } from './math/Triangle.js';\nimport { Vector2 } from './math/Vector2.js';\nimport { Vector3 } from './math/Vector3.js';\nimport { Vector4 } from './math/Vector4.js';\nimport { Mesh } from './objects/Mesh.js';\nimport { LineSegments } from './objects/LineSegments.js';\nimport { LOD } from './objects/LOD.js';\nimport { Points } from './objects/Points.js';\nimport { Sprite } from './objects/Sprite.js';\nimport { Skeleton } from './objects/Skeleton.js';\nimport { SkinnedMesh } from './objects/SkinnedMesh.js';\nimport { WebGLRenderer } from './renderers/WebGLRenderer.js';\nimport { WebGLRenderTarget } from './renderers/WebGLRenderTarget.js';\nimport { WebGLCubeRenderTarget } from './renderers/WebGLCubeRenderTarget.js';\nimport { WebGLShadowMap } from './renderers/webgl/WebGLShadowMap.js';\nimport { ImageUtils } from './extras/ImageUtils.js';\nimport { Shape } from './extras/core/Shape.js';\nimport { CubeCamera } from './cameras/CubeCamera.js';\nimport { Scene } from './scenes/Scene.js';\n\nexport { MathUtils as Math };\n\nexport const LineStrip = 0;\nexport const LinePieces = 1;\nexport const NoColors = 0;\nexport const FaceColors = 1;\nexport const VertexColors = 2;\n\nexport function MeshFaceMaterial( materials ) {\n\n\tconsole.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\n\treturn materials;\n\n}\n\nexport function MultiMaterial( materials = [] ) {\n\n\tconsole.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\n\tmaterials.isMultiMaterial = true;\n\tmaterials.materials = materials;\n\tmaterials.clone = function () {\n\n\t\treturn materials.slice();\n\n\t};\n\n\treturn materials;\n\n}\n\nexport function PointCloud( geometry, material ) {\n\n\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\n\treturn new Points( geometry, material );\n\n}\n\nexport function Particle( material ) {\n\n\tconsole.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\n\treturn new Sprite( material );\n\n}\n\nexport function ParticleSystem( geometry, material ) {\n\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\n\treturn new Points( geometry, material );\n\n}\n\nexport function PointCloudMaterial( parameters ) {\n\n\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\n\treturn new PointsMaterial( parameters );\n\n}\n\nexport function ParticleBasicMaterial( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\n\treturn new PointsMaterial( parameters );\n\n}\n\nexport function ParticleSystemMaterial( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\n\treturn new PointsMaterial( parameters );\n\n}\n\nexport function Vertex( x, y, z ) {\n\n\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\n\treturn new Vector3( x, y, z );\n\n}\n\n//\n\nexport function DynamicBufferAttribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.' );\n\treturn new BufferAttribute( array, itemSize ).setUsage( DynamicDrawUsage );\n\n}\n\nexport function Int8Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\n\treturn new Int8BufferAttribute( array, itemSize );\n\n}\n\nexport function Uint8Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\n\treturn new Uint8BufferAttribute( array, itemSize );\n\n}\n\nexport function Uint8ClampedAttribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\n\treturn new Uint8ClampedBufferAttribute( array, itemSize );\n\n}\n\nexport function Int16Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\n\treturn new Int16BufferAttribute( array, itemSize );\n\n}\n\nexport function Uint16Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\n\treturn new Uint16BufferAttribute( array, itemSize );\n\n}\n\nexport function Int32Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\n\treturn new Int32BufferAttribute( array, itemSize );\n\n}\n\nexport function Uint32Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\n\treturn new Uint32BufferAttribute( array, itemSize );\n\n}\n\nexport function Float32Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\n\treturn new Float32BufferAttribute( array, itemSize );\n\n}\n\nexport function Float64Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\n\treturn new Float64BufferAttribute( array, itemSize );\n\n}\n\n//\n\nCurve.create = function ( construct, getPoint ) {\n\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\tconstruct.prototype = Object.create( Curve.prototype );\n\tconstruct.prototype.constructor = construct;\n\tconstruct.prototype.getPoint = getPoint;\n\n\treturn construct;\n\n};\n\n//\n\nObject.assign( Path.prototype, {\n\n\tfromPoints: function ( points ) {\n\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n} );\n\n//\n\nexport function ClosedSplineCurve3( points ) {\n\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\tthis.closed = true;\n\n}\n\nClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n//\n\nexport function SplineCurve3( points ) {\n\n\tconsole.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n//\n\nexport function Spline( points ) {\n\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\n\nObject.assign( Spline.prototype, {\n\n\tinitFromArray: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\n\n\t},\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\n\n\t},\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nexport function AxisHelper( size ) {\n\n\tconsole.warn( 'THREE.AxisHelper has been renamed to THREE.AxesHelper.' );\n\treturn new AxesHelper( size );\n\n}\n\nexport function BoundingBoxHelper( object, color ) {\n\n\tconsole.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\n\treturn new BoxHelper( object, color );\n\n}\n\nexport function EdgesHelper( object, hex ) {\n\n\tconsole.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\n\treturn new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\n\n}\n\nGridHelper.prototype.setColors = function () {\n\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\n\n};\n\nSkeletonHelper.prototype.update = function () {\n\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\n\n};\n\nexport function WireframeHelper( object, hex ) {\n\n\tconsole.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\n\treturn new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\n\n}\n\n//\n\nObject.assign( Loader.prototype, {\n\n\textractUrlBase: function ( url ) {\n\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\n\t\treturn LoaderUtils.extractUrlBase( url );\n\n\t}\n\n} );\n\nLoader.Handlers = {\n\n\tadd: function ( /* regex, loader */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\n\n\t},\n\n\tget: function ( /* file */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\n\n\t}\n\n};\n\nexport function XHRLoader( manager ) {\n\n\tconsole.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\n\treturn new FileLoader( manager );\n\n}\n\nexport function BinaryTextureLoader( manager ) {\n\n\tconsole.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\n\treturn new DataTextureLoader( manager );\n\n}\n\n//\n\nObject.assign( Box2.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Box3.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Sphere.prototype, {\n\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\n} );\n\nFrustum.prototype.setFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\n\treturn this.setFromProjectionMatrix( m );\n\n};\n\nLine3.prototype.center = function ( optionalTarget ) {\n\n\tconsole.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\n\treturn this.getCenter( optionalTarget );\n\n};\n\nObject.assign( MathUtils, {\n\n\trandom16: function () {\n\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\n\t\treturn Math.random();\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\n\t\treturn MathUtils.floorPowerOfTwo( value );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\n\t\treturn MathUtils.ceilPowerOfTwo( value );\n\n\t}\n\n} );\n\nObject.assign( Matrix3.prototype, {\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.' );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\n\t\treturn attribute.applyMatrix3( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n\t},\n\tgetInverse: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.' );\n\t\treturn this.copy( matrix ).invert();\n\n\t}\n\n} );\n\nObject.assign( Matrix4.prototype, {\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.' );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tgetPosition: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\n\n\t},\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\tmultiplyToArray: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\n\n\t},\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\tv.transformDirection( this );\n\n\t},\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\ttranslate: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\trotateX: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\trotateY: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\trotateZ: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\trotateByAxis: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\n\t\treturn attribute.applyMatrix4( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n\t},\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n\t},\n\tgetInverse: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.' );\n\t\treturn this.copy( matrix ).invert();\n\n\t}\n\n} );\n\nPlane.prototype.isIntersectionLine = function ( line ) {\n\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\treturn this.intersectsLine( line );\n\n};\n\nObject.assign( Quaternion.prototype, {\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\t\treturn vector.applyQuaternion( this );\n\n\t},\n\tinverse: function ( ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: .inverse() has been renamed to invert().' );\n\t\treturn this.invert();\n\n\t}\n\n} );\n\nObject.assign( Ray.prototype, {\n\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionPlane: function ( plane ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\t\treturn this.intersectsPlane( plane );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tarea: function () {\n\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\n\t\treturn this.getArea();\n\n\t},\n\tbarycoordFromPoint: function ( point, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn this.getBarycoord( point, target );\n\n\t},\n\tmidpoint: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\n\t\treturn this.getMidpoint( target );\n\n\t},\n\tnormal: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn this.getNormal( target );\n\n\t},\n\tplane: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\n\t\treturn this.getPlane( target );\n\n\t}\n\n} );\n\nObject.assign( Triangle, {\n\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\n\n\t},\n\tnormal: function ( a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn Triangle.getNormal( a, b, c, target );\n\n\t}\n\n} );\n\nObject.assign( Shape.prototype, {\n\n\textractAllPoints: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\n\t\treturn this.extractPoints( divisions );\n\n\t},\n\textrude: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\n\t\treturn new ExtrudeGeometry( this, options );\n\n\t},\n\tmakeGeometry: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\n\t\treturn new ShapeGeometry( this, options );\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector3.prototype, {\n\n\tsetEulerFromRotationMatrix: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\tsetEulerFromQuaternion: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\treturn this.setFromMatrixScale( m );\n\n\t},\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\treturn this.setFromMatrixColumn( matrix, index );\n\n\t},\n\tapplyProjection: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\t\treturn this.applyMatrix4( m );\n\n\t},\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\n//\n\nObject.assign( Object3D.prototype, {\n\n\tgetChildByName: function ( name ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name );\n\n\t},\n\trenderDepth: function () {\n\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n\t},\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\tgetWorldRotation: function () {\n\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( Object3D.prototype, {\n\n\teulerOrder: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( Mesh.prototype, {\n\n\tsetDrawMode: function () {\n\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t},\n\n} );\n\nObject.defineProperties( Mesh.prototype, {\n\n\tdrawMode: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\n\t\t\treturn TrianglesDrawMode;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( LOD.prototype, {\n\n\tobjects: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t},\n\tset: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t}\n\n} );\n\nSkinnedMesh.prototype.initBones = function () {\n\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\n\n};\n\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\treturn this.arcLengthDivisions;\n\n\t},\n\tset: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\tthis.arcLengthDivisions = value;\n\n\t}\n\n} );\n\n//\n\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( 'THREE.PerspectiveCamera.setLens is deprecated. ' +\n\t\t\t'Use .setFocalLength and .filmGauge for a photographic setup.' );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( Light.prototype, {\n\tonlyShadow: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( BufferAttribute.prototype, {\n\n\tlength: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\treturn this.array.length;\n\n\t\t}\n\t},\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( DynamicDrawUsage );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tcopyIndicesArray: function ( /* indices */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\nObject.assign( BufferGeometry.prototype, {\n\n\taddIndex: function ( index ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\tthis.setIndex( index );\n\n\t},\n\taddAttribute: function ( name, attribute ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\treturn this.setAttribute( name, attribute );\n\n\t},\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tif ( indexOffset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\tthis.addGroup( start, count );\n\n\t},\n\tclearDrawCalls: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\tthis.clearGroups();\n\n\t},\n\tcomputeOffsets: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n\t},\n\tremoveAttribute: function ( name ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\n\n\t\treturn this.deleteAttribute( name );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( BufferGeometry.prototype, {\n\n\tdrawcalls: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InstancedBufferGeometry.prototype, {\n\n\tmaxInstancedCount: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\treturn this.instanceCount;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\tthis.instanceCount = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( Raycaster.prototype, {\n\n\tlinePrecision: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\treturn this.params.Line.threshold;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\tthis.params.Line.threshold = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InterleavedBuffer.prototype, {\n\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( value );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\n//\n\nObject.assign( ExtrudeGeometry.prototype, {\n\n\tgetArrays: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeGeometry: .getArrays() has been removed.' );\n\n\t},\n\n\taddShapeList: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeGeometry: .addShapeList() has been removed.' );\n\n\t},\n\n\taddShape: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeGeometry: .addShape() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.assign( Scene.prototype, {\n\n\tdispose: function () {\n\n\t\tconsole.error( 'THREE.Scene: .dispose() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Uniform.prototype, {\n\n\tdynamic: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t}\n\t},\n\tonUpdate: {\n\t\tvalue: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\treturn this;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Material.prototype, {\n\n\twrapAround: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t}\n\t},\n\n\toverdraw: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t}\n\t},\n\n\twrapRGB: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\n\t\t\treturn new Color();\n\n\t\t}\n\t},\n\n\tshading: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\tthis.flatShading = ( value === FlatShading );\n\n\t\t}\n\t},\n\n\tstencilMask: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\treturn this.stencilFuncMask;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\tthis.stencilFuncMask = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\tmetal: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhysicalMaterial.prototype, {\n\n\ttransparency: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\treturn this.transmission;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\tthis.transmission = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( ShaderMaterial.prototype, {\n\n\tderivatives: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.assign( WebGLRenderer.prototype, {\n\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t},\n\tanimate: function ( callback ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\n\t\tthis.setAnimationLoop( callback );\n\n\t},\n\tgetCurrentRenderTarget: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\n\t\treturn this.getRenderTarget();\n\n\t},\n\tgetMaxAnisotropy: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\n\t\treturn this.capabilities.getMaxAnisotropy();\n\n\t},\n\tgetPrecision: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\n\t\treturn this.capabilities.precision;\n\n\t},\n\tresetGLState: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\n\t\treturn this.state.reset();\n\n\t},\n\tsupportsFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_float' );\n\n\t},\n\tsupportsHalfFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\n\t},\n\tsupportsStandardDerivatives: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n\t},\n\tsupportsCompressedTextureS3TC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t},\n\tsupportsCompressedTexturePVRTC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t},\n\tsupportsBlendMinMax: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n\t},\n\tsupportsVertexTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\t\treturn this.capabilities.vertexTextures;\n\n\t},\n\tsupportsInstancedArrays: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n\t},\n\tenableScissorTest: function ( boolean ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\tthis.setScissorTest( boolean );\n\n\t},\n\tinitMaterial: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t},\n\taddPrePlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t},\n\taddPostPlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t},\n\tupdateShadowMap: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t},\n\tsetFaceCulling: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\n\n\t},\n\tallocTextureUnit: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\n\n\t},\n\tsetTexture: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\n\n\t},\n\tsetTexture2D: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\n\n\t},\n\tsetTextureCube: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\n\n\t},\n\tgetActiveMipMapLevel: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\n\t\treturn this.getActiveMipmapLevel();\n\n\t}\n\n} );\n\nObject.defineProperties( WebGLRenderer.prototype, {\n\n\tshadowMapEnabled: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.enabled;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\tcontext: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\n\t\t\treturn this.getContext();\n\n\t\t}\n\t},\n\tvr: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\n\t\t\treturn this.xr;\n\n\t\t}\n\t},\n\tgammaInput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\n\t\t}\n\t},\n\tgammaOutput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\n\n\t\t}\n\t},\n\ttoneMappingWhitePoint: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\t\t\treturn 1.0;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\n\t\t}\n\t},\n\n} );\n\nObject.defineProperties( WebGLShadowMap.prototype, {\n\n\tcullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* cullFace */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderReverseSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderSingleSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t}\n\n} );\n\nexport function WebGLRenderTargetCube( width, height, options ) {\n\n\tconsole.warn( 'THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).' );\n\treturn new WebGLCubeRenderTarget( width, options );\n\n}\n\n//\n\nObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\twrapS: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Audio.prototype, {\n\n\tload: {\n\t\tvalue: function ( file ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\t\t\tconst scope = this;\n\t\t\tconst audioLoader = new AudioLoader();\n\t\t\taudioLoader.load( file, function ( buffer ) {\n\n\t\t\t\tscope.setBuffer( buffer );\n\n\t\t\t} );\n\t\t\treturn this;\n\n\t\t}\n\t},\n\tstartTime: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\n\n\t\t}\n\t}\n\n} );\n\nAudioAnalyser.prototype.getData = function () {\n\n\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\n\treturn this.getFrequencyData();\n\n};\n\n//\n\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\n\treturn this.update( renderer, scene );\n\n};\n\nCubeCamera.prototype.clear = function ( renderer, color, depth, stencil ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .clear() is now .renderTarget.clear().' );\n\treturn this.renderTarget.clear( renderer, color, depth, stencil );\n\n};\n\n//\n\nexport const GeometryUtils = {\n\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\t\tlet matrix;\n\n\t\tif ( geometry2.isMesh ) {\n\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\tmatrix = geometry2.matrix;\n\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t}\n\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t},\n\n\tcenter: function ( geometry ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\treturn geometry.center();\n\n\t}\n\n};\n\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\tconst loader = new TextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( url, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\tconst loader = new CubeTextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadCompressedTexture = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\n//\n\nexport function CanvasRenderer() {\n\n\tconsole.error( 'THREE.CanvasRenderer has been removed' );\n\n}\n\n//\n\nexport function JSONLoader() {\n\n\tconsole.error( 'THREE.JSONLoader has been removed.' );\n\n}\n\n//\n\nexport const SceneUtils = {\n\n\tcreateMultiMaterialObject: function ( /* geometry, materials */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t},\n\n\tdetach: function ( /* child, parent, scene */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t},\n\n\tattach: function ( /* child, scene, parent */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t}\n\n};\n\n//\n\nexport function LensFlare() {\n\n\tconsole.error( 'THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js' );\n\n}\n","import { LineSegments } from '../objects/LineSegments.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Color } from '../math/Color.js';\n\nclass GridHelper extends LineSegments {\n\n\tconstructor( size = 10, divisions = 10, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst center = divisions / 2;\n\t\tconst step = size / divisions;\n\t\tconst halfSize = size / 2;\n\n\t\tconst vertices = [], colors = [];\n\n\t\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\t\tconst color = i === center ? color1 : color2;\n\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'GridHelper';\n\n\t}\n\n}\n\n\nexport { GridHelper };\n","const LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nexport { LoaderUtils };\n","import { Object3D } from '../core/Object3D.js';\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay = 0 ) {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value.slice();\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value.slice();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { Audio };\n","import { REVISION } from './constants.js';\n\nexport { WebGLMultisampleRenderTarget } from './renderers/WebGLMultisampleRenderTarget.js';\nexport { WebGLCubeRenderTarget } from './renderers/WebGLCubeRenderTarget.js';\nexport { WebGLRenderTarget } from './renderers/WebGLRenderTarget.js';\nexport { WebGLRenderer } from './renderers/WebGLRenderer.js';\nexport { WebGL1Renderer } from './renderers/WebGL1Renderer.js';\nexport { ShaderLib } from './renderers/shaders/ShaderLib.js';\nexport { UniformsLib } from './renderers/shaders/UniformsLib.js';\nexport { UniformsUtils } from './renderers/shaders/UniformsUtils.js';\nexport { ShaderChunk } from './renderers/shaders/ShaderChunk.js';\nexport { FogExp2 } from './scenes/FogExp2.js';\nexport { Fog } from './scenes/Fog.js';\nexport { Scene } from './scenes/Scene.js';\nexport { Sprite } from './objects/Sprite.js';\nexport { LOD } from './objects/LOD.js';\nexport { SkinnedMesh } from './objects/SkinnedMesh.js';\nexport { Skeleton } from './objects/Skeleton.js';\nexport { Bone } from './objects/Bone.js';\nexport { Mesh } from './objects/Mesh.js';\nexport { InstancedMesh } from './objects/InstancedMesh.js';\nexport { LineSegments } from './objects/LineSegments.js';\nexport { LineLoop } from './objects/LineLoop.js';\nexport { Line } from './objects/Line.js';\nexport { Points } from './objects/Points.js';\nexport { Group } from './objects/Group.js';\nexport { VideoTexture } from './textures/VideoTexture.js';\nexport { DataTexture } from './textures/DataTexture.js';\nexport { DataTexture2DArray } from './textures/DataTexture2DArray.js';\nexport { DataTexture3D } from './textures/DataTexture3D.js';\nexport { CompressedTexture } from './textures/CompressedTexture.js';\nexport { CubeTexture } from './textures/CubeTexture.js';\nexport { CanvasTexture } from './textures/CanvasTexture.js';\nexport { DepthTexture } from './textures/DepthTexture.js';\nexport { Texture } from './textures/Texture.js';\nexport * from './geometries/Geometries.js';\nexport * from './materials/Materials.js';\nexport { AnimationLoader } from './loaders/AnimationLoader.js';\nexport { CompressedTextureLoader } from './loaders/CompressedTextureLoader.js';\nexport { CubeTextureLoader } from './loaders/CubeTextureLoader.js';\nexport { DataTextureLoader } from './loaders/DataTextureLoader.js';\nexport { TextureLoader } from './loaders/TextureLoader.js';\nexport { ObjectLoader } from './loaders/ObjectLoader.js';\nexport { MaterialLoader } from './loaders/MaterialLoader.js';\nexport { BufferGeometryLoader } from './loaders/BufferGeometryLoader.js';\nexport { DefaultLoadingManager, LoadingManager } from './loaders/LoadingManager.js';\nexport { ImageLoader } from './loaders/ImageLoader.js';\nexport { ImageBitmapLoader } from './loaders/ImageBitmapLoader.js';\nexport { FontLoader } from './loaders/FontLoader.js';\nexport { FileLoader } from './loaders/FileLoader.js';\nexport { Loader } from './loaders/Loader.js';\nexport { LoaderUtils } from './loaders/LoaderUtils.js';\nexport { Cache } from './loaders/Cache.js';\nexport { AudioLoader } from './loaders/AudioLoader.js';\nexport { SpotLight } from './lights/SpotLight.js';\nexport { PointLight } from './lights/PointLight.js';\nexport { RectAreaLight } from './lights/RectAreaLight.js';\nexport { HemisphereLight } from './lights/HemisphereLight.js';\nexport { HemisphereLightProbe } from './lights/HemisphereLightProbe.js';\nexport { DirectionalLight } from './lights/DirectionalLight.js';\nexport { AmbientLight } from './lights/AmbientLight.js';\nexport { AmbientLightProbe } from './lights/AmbientLightProbe.js';\nexport { Light } from './lights/Light.js';\nexport { LightProbe } from './lights/LightProbe.js';\nexport { StereoCamera } from './cameras/StereoCamera.js';\nexport { PerspectiveCamera } from './cameras/PerspectiveCamera.js';\nexport { OrthographicCamera } from './cameras/OrthographicCamera.js';\nexport { CubeCamera } from './cameras/CubeCamera.js';\nexport { ArrayCamera } from './cameras/ArrayCamera.js';\nexport { Camera } from './cameras/Camera.js';\nexport { AudioListener } from './audio/AudioListener.js';\nexport { PositionalAudio } from './audio/PositionalAudio.js';\nexport { AudioContext } from './audio/AudioContext.js';\nexport { AudioAnalyser } from './audio/AudioAnalyser.js';\nexport { Audio } from './audio/Audio.js';\nexport { VectorKeyframeTrack } from './animation/tracks/VectorKeyframeTrack.js';\nexport { StringKeyframeTrack } from './animation/tracks/StringKeyframeTrack.js';\nexport { QuaternionKeyframeTrack } from './animation/tracks/QuaternionKeyframeTrack.js';\nexport { NumberKeyframeTrack } from './animation/tracks/NumberKeyframeTrack.js';\nexport { ColorKeyframeTrack } from './animation/tracks/ColorKeyframeTrack.js';\nexport { BooleanKeyframeTrack } from './animation/tracks/BooleanKeyframeTrack.js';\nexport { PropertyMixer } from './animation/PropertyMixer.js';\nexport { PropertyBinding } from './animation/PropertyBinding.js';\nexport { KeyframeTrack } from './animation/KeyframeTrack.js';\nexport { AnimationUtils } from './animation/AnimationUtils.js';\nexport { AnimationObjectGroup } from './animation/AnimationObjectGroup.js';\nexport { AnimationMixer } from './animation/AnimationMixer.js';\nexport { AnimationClip } from './animation/AnimationClip.js';\nexport { Uniform } from './core/Uniform.js';\nexport { InstancedBufferGeometry } from './core/InstancedBufferGeometry.js';\nexport { BufferGeometry } from './core/BufferGeometry.js';\nexport { InterleavedBufferAttribute } from './core/InterleavedBufferAttribute.js';\nexport { InstancedInterleavedBuffer } from './core/InstancedInterleavedBuffer.js';\nexport { InterleavedBuffer } from './core/InterleavedBuffer.js';\nexport { InstancedBufferAttribute } from './core/InstancedBufferAttribute.js';\nexport { GLBufferAttribute } from './core/GLBufferAttribute.js';\nexport * from './core/BufferAttribute.js';\nexport { Object3D } from './core/Object3D.js';\nexport { Raycaster } from './core/Raycaster.js';\nexport { Layers } from './core/Layers.js';\nexport { EventDispatcher } from './core/EventDispatcher.js';\nexport { Clock } from './core/Clock.js';\nexport { QuaternionLinearInterpolant } from './math/interpolants/QuaternionLinearInterpolant.js';\nexport { LinearInterpolant } from './math/interpolants/LinearInterpolant.js';\nexport { DiscreteInterpolant } from './math/interpolants/DiscreteInterpolant.js';\nexport { CubicInterpolant } from './math/interpolants/CubicInterpolant.js';\nexport { Interpolant } from './math/Interpolant.js';\nexport { Triangle } from './math/Triangle.js';\nexport { MathUtils } from './math/MathUtils.js';\nexport { Spherical } from './math/Spherical.js';\nexport { Cylindrical } from './math/Cylindrical.js';\nexport { Plane } from './math/Plane.js';\nexport { Frustum } from './math/Frustum.js';\nexport { Sphere } from './math/Sphere.js';\nexport { Ray } from './math/Ray.js';\nexport { Matrix4 } from './math/Matrix4.js';\nexport { Matrix3 } from './math/Matrix3.js';\nexport { Box3 } from './math/Box3.js';\nexport { Box2 } from './math/Box2.js';\nexport { Line3 } from './math/Line3.js';\nexport { Euler } from './math/Euler.js';\nexport { Vector4 } from './math/Vector4.js';\nexport { Vector3 } from './math/Vector3.js';\nexport { Vector2 } from './math/Vector2.js';\nexport { Quaternion } from './math/Quaternion.js';\nexport { Color } from './math/Color.js';\nexport { SphericalHarmonics3 } from './math/SphericalHarmonics3.js';\nexport { ImmediateRenderObject } from './extras/objects/ImmediateRenderObject.js';\nexport { SpotLightHelper } from './helpers/SpotLightHelper.js';\nexport { SkeletonHelper } from './helpers/SkeletonHelper.js';\nexport { PointLightHelper } from './helpers/PointLightHelper.js';\nexport { HemisphereLightHelper } from './helpers/HemisphereLightHelper.js';\nexport { GridHelper } from './helpers/GridHelper.js';\nexport { PolarGridHelper } from './helpers/PolarGridHelper.js';\nexport { DirectionalLightHelper } from './helpers/DirectionalLightHelper.js';\nexport { CameraHelper } from './helpers/CameraHelper.js';\nexport { BoxHelper } from './helpers/BoxHelper.js';\nexport { Box3Helper } from './helpers/Box3Helper.js';\nexport { PlaneHelper } from './helpers/PlaneHelper.js';\nexport { ArrowHelper } from './helpers/ArrowHelper.js';\nexport { AxesHelper } from './helpers/AxesHelper.js';\nexport * from './extras/curves/Curves.js';\nexport { Shape } from './extras/core/Shape.js';\nexport { Path } from './extras/core/Path.js';\nexport { ShapePath } from './extras/core/ShapePath.js';\nexport { Font } from './extras/core/Font.js';\nexport { CurvePath } from './extras/core/CurvePath.js';\nexport { Curve } from './extras/core/Curve.js';\nexport { DataUtils } from './extras/DataUtils.js';\nexport { ImageUtils } from './extras/ImageUtils.js';\nexport { ShapeUtils } from './extras/ShapeUtils.js';\nexport { PMREMGenerator } from './extras/PMREMGenerator.js';\nexport { WebGLUtils } from './renderers/webgl/WebGLUtils.js';\nexport * from './constants.js';\nexport * from './Three.Legacy.js';\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t/* eslint-disable no-undef */\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\t/* eslint-enable no-undef */\n\n}\n\nif ( typeof window !== 'undefined' ) {\n\n\tif ( window.__THREE__ ) {\n\n\t\tconsole.warn( 'WARNING: Multiple instances of Three.js being imported.' );\n\n\t} else {\n\n\t\twindow.__THREE__ = REVISION;\n\n\t}\n\n}\n","// The MIT License (MIT)\r\n// Copyright (c) 2012 Nicholas Fisher\r\n// https://github.com/KyleAMathews/deepmerge/blob/master/license.txt\r\nexport class DeepMerge {\r\n    isMergeableObject(val) {\r\n        return val && typeof val === 'object';\r\n    }\r\n\r\n    emptyTarget(val) {\r\n        return Array.isArray(val) ? [] : {};\r\n    }\r\n\r\n    cloneIfNecessary(value, optionsArgument) {\r\n        let clone = optionsArgument && optionsArgument.clone === true;\r\n        return (clone && this.isMergeableObject(value)) ? this.deepMerge(this.emptyTarget(value), value, optionsArgument) : value;\r\n    }\r\n\r\n    defaultArrayMerge(target, source, optionsArgument) {\r\n        let destination = target.slice();\r\n        for (let i = 0; i < destination.length; ++i) {\r\n            const e = destination[i];\r\n            if (typeof destination[i] === 'undefined')\r\n                destination[i] = this.cloneIfNecessary(e, optionsArgument);\r\n            else if (this.isMergeableObject(e))\r\n                destination[i] = this.deepMerge(target[i], e, optionsArgument);\r\n            else if (target.indexOf(e) === -1)\r\n                destination.push(this.cloneIfNecessary(e, optionsArgument));\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    mergeObject(target, source, optionsArgument) {\r\n        var destination = {};\r\n        if (this.isMergeableObject(target))\r\n            for (const key in target)\r\n                destination[key] = this.cloneIfNecessary(target[key], optionsArgument);\r\n        for (const key in source)\r\n            if (!this.isMergeableObject(source[key]) || !target[key])\r\n                destination[key] = this.cloneIfNecessary(source[key], optionsArgument);\r\n            else\r\n                destination[key] = this.deepMerge(target[key], source[key], optionsArgument);\r\n        return destination;\r\n    }\r\n\r\n    deepMerge(target, source, optionsArgument) {\r\n        var array = Array.isArray(source);\r\n        var options = optionsArgument || { arrayMerge: this.defaultArrayMerge }\r\n        var arrayMerge = options.arrayMerge || this.defaultArrayMerge\r\n        if (array)\r\n            return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : this.cloneIfNecessary(source, optionsArgument);\r\n        else\r\n            return this.mergeObject(target, source, optionsArgument);\r\n    }\r\n}\r\n","/**\r\n @author VIM / https://vimaec.com\r\n*/\r\nimport * as THREE from \"./node_modules/three/src/Three\";\r\n\r\nexport class VIMLoader \r\n{    \r\n    // Loads the VIM from a URL \r\n    load( url, onLoad, onProgress, onError ) \r\n    {        \r\n        const material = new THREE.MeshPhongMaterial( { \r\n            color: 0x999999, \r\n            flatShading: true, \r\n            side: THREE.DoubleSide,  \r\n            shininess: 70   \r\n        });            \r\n\t\tlet scope = this;\r\n\t\tlet loader = new THREE.FileLoader();\r\n        loader.setResponseType( 'arraybuffer' );\r\n        //loader.setRequestHeader(\"Content-Encoding\", \"gzip\");\r\n        //loader.setRequestHeader(\"Accept-Encoding\", \"gzip, deflate\");\r\n        loader.load( url, function ( data ) \r\n        {\r\n            try \r\n            {\r\n\t\t\t\tonLoad( scope.parse( data, material ) );\r\n            } \r\n            catch ( exception ) \r\n            {\r\n                console.log(\"Error occured when loading VIM from \" + url + \", message = \" + exception);\r\n\t\t\t\tif ( onError ) onError( exception );\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\t}\r\n\r\n    parseBFastFromArray ( bytes )\r\n    {\r\n        return this.parseBFast( bytes.buffer, bytes.byteOffset, bytes.byteLength );\r\n    }\r\n\r\n    getMaterialColorLookup( vim )\r\n    {\r\n        let materialData = vim.entities[\"Rvt.Material\"];\r\n        if (materialData == null)\r\n            throw new Error(\"Material data undefined\");\r\n        let xs = new Float64Array(materialData[\"Color.X\"], );\r\n        let ys = new Float64Array(materialData[\"Color.Y\"]);\r\n        let zs = new Float64Array(materialData[\"Color.Z\"]);\r\n        let ws = new Float64Array(materialData[\"Transparency\"]);\r\n        let ids = new Float64Array(materialData[\"Id\"]);\r\n        let r = {};\r\n        for (let i=0; i < ids.length; ++i)\r\n        {\r\n            r[ids[i]] = \r\n            {\r\n                color: new THREE.Color(xs[i],ys[i],zs[i]),\r\n                opacity: 1.0 - ws[i],\r\n            };     \r\n        }\r\n        return r;\r\n    }\r\n\r\n    getElements( vim )\r\n    {\r\n        let elementData = vim.entities[\"Rvt.Element\"];\r\n        let names = new Int32Array(elementData[\"Name\"]);\r\n        let xs = new Float64Array(elementData[\"Location.X\"]);\r\n        let ys = new Float64Array(elementData[\"Location.Y\"]);\r\n        let zs = new Float64Array(elementData[\"Location.Z\"]);\r\n        let r = new Array(names.length);\r\n        for (let i=0; i < names.length; ++i)\r\n        {\r\n            let name = names[i] >= 0 ? vim.strings[names[i]] : \"\";\r\n            r[i] = { name: name, x: xs[i], y: ys[i], z: zs[i] };\r\n        }\r\n        return r;\r\n    }\r\n    \r\n    getRooms( vim )\r\n    {\r\n        if (!vim.elements)\r\n            return [];\r\n        let roomData = vim.entities[\"Rvt.Room\"];\r\n        if (!roomData) \r\n            return [];\r\n        let ids = new Int32Array(roomData[\"Element\"]);\r\n        if (!ids)\r\n            return [];\r\n        let r = new Array(ids.length);\r\n        for (let i=0; i < ids.length; ++i)\r\n        {\r\n            let id = ids[i];\r\n            if (id > 0)\r\n                r[i] = vim.elements[id];\r\n        }\r\n        return r;\r\n    }\r\n    \r\n    // BFAST is the container format for an array of binary arrays \r\n    parseBFast( arrayBuffer, byteOffset, byteLength )\r\n    {\r\n        console.log(\"Parsing BFAST\");\r\n\r\n        // Cast the input data to 32-bit integers \r\n        // Note that according to the spec they are 64 bit numbers. In JavaScript you can't have 64 bit integers, \r\n        // and it would bust the amount of memory we can work with in most browsers and low-power devices  \r\n        let data = new Int32Array( arrayBuffer, byteOffset, byteLength / 4 );\r\n\r\n        // Parse the header\r\n        let header = {\r\n            Magic:      data[0], // Either Constants.SameEndian or Constants.SwappedEndian depending on endianess of writer compared to reader. \r\n            DataStart:  data[2], // <= file size and >= ArrparayRangesEnd and >= FileHeader.ByteCount\r\n            DataEnd:    data[4], // >= DataStart and <= file size\r\n            NumArrays:  data[6], // number of arrays \r\n        }\r\n\r\n        console.log(\"BFAST header\");\r\n        console.log(JSON.stringify(header));\r\n\r\n        // Check validity of data \r\n        // TODO: check endianness\r\n        if (header.Magic != 0xBFA5) throw new Error(\"Not a BFAST file, or endianness is swapped\");\r\n        if (data[1] != 0) throw new Error(\"Expected 0 in byte position 0\");\r\n        if (data[3] != 0) throw new Error(\"Expected 0 in byte position 8\");\r\n        if (data[5] != 0) throw new Error(\"Expected 0 in position 16\");\r\n        if (data[7] != 0) throw new Error(\"Expected 0 in position 24\");\r\n        if (header.DataStart <= 32 || header.DataStart > byteLength) throw new Error(\"Data start is out of valid range\");\r\n        if (header.DataEnd < header.DataStart || header.DataEnd > byteLength) throw new Error(\"Data end is out of vaid range\");\r\n        if (header.NumArrays < 0 || header.NumArrays > header.DataEnd) throw new Error(\"Number of arrays is invalid\");\r\n                \r\n        // Compute each buffer\r\n        let buffers = [];\r\n        let pos = 8; \r\n        for (let i=0; i < header.NumArrays; ++i) {\r\n            let begin = data[pos+0];\r\n            let end = data[pos+2];            \r\n\r\n            // Check validity of data \r\n            if (data[pos+1] != 0) throw new Error(\"Expected 0 in position \" + (pos + 1) * 4);\r\n            if (data[pos+3] != 0) throw new Error(\"Expected 0 in position \" + (pos + 3) * 4);\r\n            if (begin < header.DataStart || begin > header.DataEnd) throw new Error(\"Buffer start is out of range\");\r\n            if (end < begin || end > header.DataEnd ) throw new Error(\"Buffer end is out of range\");            \r\n\r\n            pos += 4;      \r\n            let buffer = new Uint8Array(arrayBuffer, begin + byteOffset, end - begin);\r\n            buffers.push(buffer);\r\n        }        \r\n\r\n        if (buffers.length < 0)\r\n            throw new Error(\"Expected at least one buffer containing the names\");\r\n\r\n        // break the first one up into names          \r\n        let joinedNames = new TextDecoder(\"utf-8\").decode(buffers[0]);\r\n\r\n        // Removing the trailing '\\0' before spliting the names \r\n        let names = joinedNames.slice(0,-1).split('\\0');\r\n        if (joinedNames.length == 0)\r\n            names = [];\r\n\r\n        // Validate the number of names \r\n        if (names.length != buffers.length - 1)\r\n            throw new Error(\"Expected number of names to be equal to the number of buffers - 1\"); \r\n\r\n        // For debug purposes output the name of each buffer \r\n        //for (let i=0; i < names.length; ++i)\r\n        //    console.log(\"Buffer \" + i + \" (\" + names[i] + \") has size \" + buffers[i+1].byteLength);        \r\n\r\n        // Return the bfast structure \r\n        return {\r\n            header: header, \r\n            names: names,\r\n            buffers: buffers.slice(1),\r\n        }\r\n    }\r\n\r\n    constructEntityTable (bfast) \r\n    {\r\n        let r = {};\r\n        for (let i=0; i < bfast.buffers.length; ++i)\r\n        {\r\n            let tmp = bfast.names[i].split(':');\r\n            let columnType = tmp[0];\r\n            let columnName = tmp[1];\r\n            let buffer = bfast.buffers[i];\r\n            let columnData;\r\n            if (columnType == \"numeric\")\r\n            {\r\n                columnData = new Float64Array(buffer.buffer, buffer.byteOffset, buffer.byteLength / 8);\r\n                r[columnName] = columnData;\r\n            }\r\n            else if (columnType == \"string\" || columnType == \"index\")\r\n            {\r\n                columnData = new Int32Array(buffer.buffer, buffer.byteOffset, buffer.byteLength / 4);\r\n                r[columnName] = columnData;\r\n            }\r\n            else if (columnType == \"properties\")\r\n            {\r\n                columnData = new Int32Array(buffer.buffer, buffer.byteOffset, buffer.byteLength / 4);\r\n                r[\"properties\"] = buffer;\r\n            }\r\n            else \r\n            {\r\n                throw new Error(\"Unrecognized column type \" + columnType);\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n\r\n    constructEntityTables (bfast) \r\n    {\r\n        let r = {};\r\n        for (let i=0; i < bfast.buffers.length; ++i)\r\n        {\r\n            let tableName = bfast.names[i];\r\n            tableName = tableName.substring(tableName.indexOf(\":\") + 1);\r\n            r[tableName] = this.constructEntityTable(this.parseBFastFromArray(bfast.buffers[i]));\r\n        }\r\n        return r;\r\n    }\r\n\r\n    // Given a BFAST container (header/names/buffers) constructs a VIM data structure\r\n    constructVIM ( bfast )\r\n    {\r\n        console.log(\"Creating VIM\");\r\n\r\n        if (bfast.buffers.length < 5)\r\n            throw new Error(\"VIM requires at least five BFast buffers\");\r\n\r\n        let lookup = {};\r\n        for (let i=0; i < bfast.buffers.length; ++i)\r\n            lookup[bfast.names[i]] = bfast.buffers[i];\r\n\r\n        // Parse BFAST\r\n        return {\r\n            header: new TextDecoder(\"utf-8\").decode(lookup[\"header\"]),\r\n            assets: this.parseBFastFromArray(lookup[\"assets\"]),\r\n            g3d: this.constructG3D(this.parseBFastFromArray(lookup[\"geometry\"])),\r\n            entities: this.constructEntityTables(this.parseBFastFromArray(lookup[\"entities\"])),\r\n            strings: new TextDecoder(\"utf-8\").decode(lookup[\"strings\"]).split('\\0'),\r\n        }\r\n    }\r\n\r\n    // Given a BFAST container (header/names/buffers) constructs a G3D data structure\r\n    constructG3D ( bfast )\r\n    {\r\n        console.log(\"Constructing G3D\");\r\n\r\n        if (bfast.buffers.length < 2)\r\n            throw new Error(\"G3D requires at least two BFast buffers\");\r\n\r\n        // This will just contain some JSON\r\n        let metaBuffer = bfast.buffers[0];\r\n        if (bfast.names[0] != 'meta')\r\n            throw new Error(\"First G3D buffer must be named 'meta', but was named: \" + bfast.names[0]);\r\n        \r\n        // Extract each descriptor \r\n        let attributes = [];\r\n        let nDescriptors = bfast.buffers.length - 1;\r\n        for (let i=0; i < nDescriptors; ++i) {\r\n            let desc = bfast.names[i+1].split(':');\r\n            if (desc[0].toLowerCase() != 'g3d' || desc.length != 6)\r\n                throw new Error(\"Not a valid attribute descriptor, must have 6 components delimited by ':' and starting with 'g3d' \" + desc);\r\n            let attribute = {\r\n                name:               desc,\r\n                association:        desc[1], // Indicates the part of the geometry that this attribute is associated with \r\n                semantic:           desc[2], // the role of the attribute \r\n                attributeTypeIndex: desc[3], // each attribute type should have it's own index ( you can have uv0, uv1, etc. )\r\n                dataType:           desc[4], // the type of individual values (e.g. int32, float64)\r\n                dataArity:          desc[5], // how many values associated with each element (e.g. UVs might be 2, geometry might be 3, quaternions 4, matrices 9 or 16)\r\n                rawData: bfast.buffers[i + 1], // the raw data (a UInt8Array)    \r\n                data: undefined\r\n            }\r\n            attribute.data = this.attributeToTypedArray(attribute);\r\n            console.log(\"Attribute \" + i + \" = \" + desc);\r\n            attributes.push(attribute);\r\n        }     \r\n        \r\n        return {\r\n            attributes: attributes,\r\n            meta:  new TextDecoder(\"utf-8\").decode(metaBuffer)            \r\n        }\r\n    }\r\n\r\n    // Finds the first attribute that has the matching fields passing null matches a field to all\r\n    findAttribute( VIM, assoc, semantic, index, dataType, arity ) {\r\n        let r = [];\r\n        for (let i=0; i < VIM.attributes.length; ++i)\r\n        {\r\n            let attr = VIM.attributes[i];\r\n            if ((attr.association == assoc || assoc == null)\r\n                && (attr.semantic == semantic || semantic == null)\r\n                && (attr.attributeTypeIndex == index || index == null)\r\n                && (attr.dataArity == arity || arity == null)\r\n                && (attr.dataType == dataType || dataType == null))\r\n            {\r\n                r.push(attr)\r\n            }\r\n        }\r\n        return r.length > 0 ? r[0] : null;\r\n    }\r\n\r\n    // Converts a VIM attribute into a typed array from its raw data      \r\n    attributeToTypedArray ( attr ) {\r\n        if (!attr) \r\n            return null;\r\n        \r\n        // This is a UInt8 array\r\n        let data = attr.rawData;\r\n\r\n        switch (attr.dataType)\r\n        {\r\n            case \"float32\": return new Float32Array(data.buffer, data.byteOffset, data.byteLength / 4);\r\n            case \"float64\": throw new Float64Array(data.buffer, data.byteOffset, data.byteLength / 8);\r\n            case \"int8\": return data;\r\n            case \"int16\": return new Int16Array(data.buffer, data.byteOffset, data.byteLength / 2);\r\n            case \"int32\": return new Int32Array(data.buffer, data.byteOffset, data.byteLength / 4);\r\n            //case \"int64\": return new Int64Array(data.buffer, data.byteOffset, data.byteLength / 8);\r\n            default: throw new Error(\"Unrecognized attribute data type \" + attr.dataType);\r\n        }\r\n    }\r\n\r\n    // Adds an attribute to a BufferGeometry, if not null\r\n    addAttributeToGeometry  ( geometry, name, attr ) {\r\n        if (attr)\r\n            geometry.setAttribute( name, new THREE.BufferAttribute( attr.data, attr.dataArity ) );\r\n    }\r\n\r\n    createBufferGeometry  (positionTypedArray, indicesTypedArray, vertexColors)\r\n    {\r\n        if (!positionTypedArray) throw new Error(\"Cannot create geometry without a valid vertex attribute\");\r\n        if (!indicesTypedArray) throw new Error(\"Cannot create geometry without a valid index attribute\");\r\n\r\n        // Construtor the buffer geometry that is returned from the function \r\n        let geometry = new THREE.BufferGeometry();\r\n\r\n        // A vertex position data buffer \r\n        geometry.setAttribute( 'position', new THREE.BufferAttribute( positionTypedArray, 3 ) );\r\n\r\n        // The Three JS shader model only supports 3 RGB colors \r\n        geometry.setAttribute( 'color', new THREE.BufferAttribute(vertexColors, 3));\r\n\r\n        // Add the index buffer (which has to be cast to a Uint32BufferAttribute)        \r\n        let indexBuffer = new THREE.Uint32BufferAttribute(indicesTypedArray, 1 );\r\n        geometry.setIndex( indexBuffer ); \r\n        return geometry;   \r\n    }\r\n\r\n    buildMeshes (g3d)\r\n    {\r\n        if (!g3d) throw new Error(\"Missing g3d argument\");\r\n\r\n        // Unpack\r\n        const positions = this.findAttribute( g3d, null, \"position\", \"0\", \"float32\", \"3\" )?.data;\r\n        const indices = this.findAttribute(g3d, null, \"index\", \"0\", \"int32\", \"1\")?.data;\r\n        const meshSubmeshes = this.findAttribute(g3d, \"mesh\", \"submeshoffset\", \"0\", \"int32\", \"1\")?.data;\r\n        const submeshIndexOffset = this.findAttribute(g3d, \"submesh\", \"indexoffset\", \"0\", \"int32\", \"1\")?.data;\r\n        const submeshMaterial = this.findAttribute(g3d, \"submesh\", \"material\", \"0\", \"int32\", \"1\")?.data;\r\n        const materialColors = this.findAttribute(g3d, \"material\", \"color\", \"0\", \"float32\", \"4\")?.data;\r\n\r\n        if (!positions) throw new Error(\"Missing position attribute\");\r\n        if (!indices) throw new Error(\"Missing index attribute\");\r\n        if (!meshSubmeshes) throw new Error(\"Missing mesh submesh attribute\");\r\n        if (!submeshIndexOffset) throw new Error(\"Missing submesh index offset  attribute\");\r\n        if (!submeshMaterial) throw new Error(\"Missing submesh material attribute\");\r\n        if (!materialColors) throw new Error(\"Missing material color attribute\");\r\n\r\n        const colorArity = 4;\r\n        const positionArity = 3;\r\n\r\n        // Validate\r\n        if (indices.length % 3 != 0) throw new Error(\"Invalid Index Count, must be divisible by 3\");\r\n\r\n        for (let i = 0; i < indices.length; i++)\r\n            if (indices[i] < 0 || indices[i] >= positions.length)\r\n                throw new Error(\"Vertex index out of bound\");\r\n\r\n        if (positions.length % positionArity != 0)\r\n            throw new Error(\"Invalid position buffer, must be divisible by \" + positionArity);\r\n\r\n        for (let i = 0; i < meshSubmeshes.length; i++)\r\n            if (meshSubmeshes[i] < 0 || meshSubmeshes[i] >= submeshIndexOffset.length)\r\n                throw new Error(\"MeshSubmeshOffset out of bound at\");\r\n\r\n        for (let i = 0; i < meshSubmeshes.length - 1; i++)\r\n            if (meshSubmeshes[i] >= meshSubmeshes[i + 1])\r\n                throw new Error(\"MeshSubmesh out of sequence.\");\r\n\r\n        if (submeshIndexOffset.length != submeshMaterial.length)\r\n            throw new Error(\"Mismatched submesh buffers\");\r\n\r\n        for (let i = 0; i < submeshIndexOffset.length; i++)\r\n            if (submeshIndexOffset[i] < 0 || submeshIndexOffset[i] >= indices.length)\r\n                throw new Error(\"SubmeshIndexOffset out of bound\");\r\n\r\n        for (let i = 0; i < submeshIndexOffset.length; i++)\r\n            if (submeshIndexOffset[i] % 3 != 0)\r\n                throw new Error(\"Invalid SubmeshIndexOffset, must be divisible by 3\");\r\n\r\n        for (let i = 0; i < submeshIndexOffset.length - 1; i++)\r\n            if (submeshIndexOffset[i] >= submeshIndexOffset[i + 1])\r\n                throw new Error(\"SubmeshIndexOffset out of sequence.\");\r\n\r\n        for (let i = 0; i < submeshMaterial.length; i++)\r\n            if (submeshMaterial[i] >= materialColors.length)\r\n                throw new Error(\"submeshMaterial out of bound\");\r\n\r\n        if (materialColors.length % colorArity != 0)\r\n            throw new Error(\"Invalid material color buffer, must be divisible by \" + colorArity);\r\n\r\n\r\n        // Do the work\r\n        const meshCount = meshSubmeshes.length;\r\n        const submeshCount = submeshIndexOffset.length;\r\n        const indexCount = indices.length;\r\n\r\n        const resultMeshes = [];\r\n        for (let mesh = 0; mesh < meshCount; mesh++)\r\n        {\r\n            const meshIndices = []\r\n            const meshVertexPositions = [];\r\n            const meshVertexColors = [];\r\n\r\n            const meshStart = meshSubmeshes[mesh];\r\n            const meshEnd = mesh < meshCount - 1\r\n                ? meshSubmeshes[mesh + 1]\r\n                : submeshCount;\r\n\r\n            for (let submesh = meshStart; submesh < meshEnd; submesh++)\r\n            {\r\n                let r, g, b, a;\r\n                const material = submeshMaterial[submesh];\r\n                if (material < 0) {\r\n                    r = 0.5;\r\n                    g = 0.5;\r\n                    b = 0.5;\r\n                    a = 1;\r\n                }\r\n                else\r\n                {\r\n                    r = materialColors[material * colorArity];\r\n                    g = materialColors[material * colorArity + 1];\r\n                    b = materialColors[material * colorArity + 2];\r\n                    a = materialColors[material * colorArity + 3];\r\n                }\r\n\r\n                if (a < 0.9)\r\n                    continue;\r\n\r\n                let submeshStart = submeshIndexOffset[submesh];\r\n                let submeshEnd = submesh < submeshCount - 1\r\n                    ? submeshIndexOffset[submesh + 1]\r\n                    : indexCount;\r\n                \r\n                for (let index = submeshStart; index < submeshEnd; index++)\r\n                {\r\n                    meshIndices.push(meshIndices.length);\r\n\r\n                    const vertex = indices[index];\r\n                    const x = positions[vertex * positionArity];\r\n                    const y = positions[vertex * positionArity + 1];\r\n                    const z = positions[vertex * positionArity + 2];\r\n\r\n                    meshVertexPositions.push(x); \r\n                    meshVertexPositions.push(y);\r\n                    meshVertexPositions.push(z);\r\n\r\n                    meshVertexColors.push(r);\r\n                    meshVertexColors.push(g);\r\n                    meshVertexColors.push(b);\r\n                }\r\n            }\r\n\r\n            let resultMesh = this.createBufferGeometry(\r\n                new Float32Array(meshVertexPositions),\r\n                new Int32Array(meshIndices),\r\n                new Float32Array(meshVertexColors),\r\n            );\r\n            resultMesh.computeBoundingBox();\r\n            resultMeshes.push(resultMesh);\r\n        }\r\n\r\n        return resultMeshes;\r\n    }\r\n\r\n    floatsToMatrix (m)\r\n    {\r\n        let r = new THREE.Matrix4();\r\n        r.elements = m;\r\n        return r;\r\n    }\r\n\r\n    /*\r\n    // Merges all meshes with only a single instance \r\n    mergeSingleInstances ( instancedMeshList, material )\r\n    {        \r\n        let r = [];\r\n\r\n        let singleInstancedMeshes = [];\r\n        for (let i=0; i < instancedMeshList.length; ++i)\r\n        {\r\n            let mesh = instancedMeshList[i];\r\n            if (!mesh)\r\n                continue;\r\n            if (mesh.count == 1)\r\n            {\r\n                singleInstancedMeshes.push(mesh);\r\n            }\r\n            else\r\n            {\r\n                r.push(mesh);\r\n            }\r\n        }\r\n\r\n        let matrix = new THREE.Matrix4();\r\n        let meshesToMerge : THREE.BufferGeometry[] = [];\r\n        for (let i=0; i < singleInstancedMeshes.length; ++i)\r\n        {            \r\n            let g = singleInstancedMeshes[i].geometry;\r\n            // Remove the normal attribute? Maybe something else? \r\n            singleInstancedMeshes[i].getMatrixAt(0, matrix);\r\n            g.applyMatrix4(matrix);\r\n            meshesToMerge.push(g);\r\n        }\r\n        let mergedGeometry = THREE.BufferGeometryUtils.mergeBufferGeometries( meshesToMerge, false );\r\n        let mergedMesh = new THREE.InstancedMesh( mergedGeometry, material, 1 );\r\n        mergedMesh.setMatrixAt(0, new THREE.Matrix4());\r\n        r.push(mergedMesh);\r\n\r\n        return r;\r\n    }\r\n    */\r\n\r\n    // Constructs a BufferGeometry from an ArrayBuffer arranged as a VIM\r\n    // Main\r\n    parse ( data, material ) \r\n    {\t   \r\n        console.time(\"parsingVim\");\r\n\r\n        console.log(\"Parsing data buffer into VIM\");\r\n        console.log(\"data size \" + data.byteLength);\r\n\r\n        // A VIM follows the BFAST data arrangement, which is a collection of named byte arrays  \r\n        console.log(\"Parsing BFAST structure\");\r\n        let bfast = this.parseBFast( data, 0, data.byteLength );\r\n\r\n        console.log(\"found: \" + bfast.buffers.length + \" buffers\");\r\n        for (let i=0; i < bfast.names.length; ++i)\r\n            console.log(bfast.names[i]);\r\n        \r\n        console.log(\"Constructing VIM\");\r\n        let buffers = this.constructVIM(bfast);\r\n        \r\n        console.log(\"Building meshes\");\r\n        let geometry = this.buildMeshes(buffers.g3d);\r\n        console.log(\"Found # meshes \" + geometry.length);\r\n\r\n        const matrixArity = 16;\r\n        const instanceMeshes = this.findAttribute(buffers.g3d, \"instance\", \"mesh\", \"0\", \"int32\", \"1\")?.data;\r\n        const instanceTransforms = this.findAttribute(buffers.g3d, \"instance\", \"transform\", \"0\", \"float32\", \"16\")?.data;\r\n        \r\n        // Validate\r\n        if (!instanceMeshes) throw new Error(\"Missing Instance Mesh Attribute.\");\r\n        if (!instanceTransforms) throw new Error(\"Missing Instance Tranform Attribute.\");\r\n        if (instanceMeshes.length != instanceTransforms.length / matrixArity) throw new Error(\"Instance buffers mismatched\");\r\n        if (instanceTransforms.length % matrixArity != 0) throw new Error(\"Invalid InstanceTransform buffer, must respect arity \" + matrixArity); \r\n\r\n        for (let i = 0; i < instanceMeshes.length; i++)\r\n            if (instanceMeshes[i] >= geometry.length)\r\n                throw new Error(\"Instance Mesh Out of range.\");\r\n\r\n\r\n        console.log(\"Allocating Instanced Meshes\");\r\n        const rawMeshes = this.allocateMeshes(geometry, instanceMeshes, material);\r\n\r\n        console.log(\"Applying Matrices\");\r\n        let {meshes, centers} = this.applyMatrices(rawMeshes, instanceMeshes, instanceTransforms);\r\n\r\n        console.log(\"Computing center.\");\r\n        let sphere = new THREE.Sphere().setFromPoints(centers);\r\n\r\n        //console.log(\"Merging lone meshes.\");\r\n        //vim.meshes = this.mergeSingleInstances(meshes, material);  \r\n        meshes = meshes.filter(m => m !== undefined);\r\n\r\n        console.log(\"Extracting BIM Elements.\");\r\n        let elements = this.getElements(buffers);\r\n\r\n        console.log(\"Extracting BIM Rooms.\");\r\n        let rooms = this.getRooms(buffers);\r\n        \r\n        console.timeEnd(\"parsingVim\");\r\n\r\n        return {\r\n            header : buffers.header,\r\n            entities: buffers.entities,\r\n            strings: buffers.strings,\r\n            g3d: buffers.g3d,\r\n            assets : buffers.assets,\r\n\r\n            meshes,\r\n            elements,\r\n            rooms,\r\n            sphere\r\n        };\r\n    }\r\n\r\n    // geometries: array of THREE.GeometryBuffer\r\n    // instanceMeshes: array of mesh indices\r\n    // material: THREE.MeshPhongMaterial to use\r\n    // returns array of THREE.InstancedMesh\r\n    allocateMeshes (geometries, instanceMeshes, material)\r\n    {\r\n        const meshCount = geometries.length;\r\n        console.log(\"Counting references\");\r\n        let meshReferenceCounts = new Int32Array(meshCount);\r\n        for (let i = 0; i < instanceMeshes.length; ++i) {\r\n            let mesh = instanceMeshes[i];\r\n            if (mesh < 0) continue;\r\n            meshReferenceCounts[mesh]++;\r\n        }\r\n\r\n        console.log(\"Allocating instances.\");\r\n        let meshes = [];\r\n        for (let i = 0; i < meshCount; ++i) {\r\n            const count = meshReferenceCounts[i];\r\n            if (count == 0) {\r\n                meshes.push(undefined);\r\n            }\r\n            else {\r\n                const g = geometries[i];\r\n                const mesh = new THREE.InstancedMesh(g, material, count);\r\n                meshes.push(mesh);\r\n            }\r\n        }\r\n        return meshes;\r\n    }\r\n\r\n    // meshes: array of THREE.InstancedMesh\r\n    // instanceMeshes: array of mesh indices\r\n    // instanceTransform: flat array of matrix4x4 \r\n    // Returns array of InstancedMesh and array of instance centers with matrices applied to both.\r\n    applyMatrices (meshes, instanceMeshes, instanceTransforms)\r\n    {\r\n        const matrixArity = 16;\r\n        const instanceCounters = new Int32Array(meshes.length);\r\n        const centers = [];\r\n        for (let i = 0; i < instanceMeshes.length; ++i) {\r\n            const meshIndex = instanceMeshes[i];\r\n            if (meshIndex < 0)\r\n                continue;\r\n\r\n            const mesh = meshes[meshIndex];\r\n            if (!mesh)\r\n                continue;\r\n\r\n            const matrixAsArray = instanceTransforms.subarray(i * matrixArity, (i + 1) * matrixArity);\r\n            const matrix = this.floatsToMatrix(matrixAsArray);\r\n\r\n            const count = instanceCounters[meshIndex]++;\r\n            mesh.setMatrixAt(count, matrix);\r\n\r\n            if (!mesh.userData.instanceIndices)\r\n                mesh.userData.instanceIndices = [];\r\n            mesh.userData.instanceIndices.push(i);\r\n\r\n            const center = mesh.geometry.boundingBox.getCenter(new THREE.Vector3());\r\n            center.applyMatrix4(matrix);\r\n            centers.push(center);\r\n        }\r\n        return {\r\n            meshes: meshes,\r\n            centers: centers\r\n        };\r\n    }\r\n\r\n};\r\n","export const ViewerSettings = {\r\n    default: {\r\n        showGui: true,\r\n        showStats: true,\r\n        camera: {\r\n            near: 0.1,\r\n            far: 15000,\r\n            fov: 50,\r\n            zoom: 1,\r\n            rotate: 1.0,\r\n            position: { x: 0, y: 5, z: -5 },\r\n            target: { x: 0, y: -1, z: 0, },\r\n            controls: {\r\n                speed: 0.1,\r\n                altMultiplier: 3.0,\r\n                shiftMultiplier: 5.0,\r\n                zoomSpeed: 0.2,\r\n                rotateSpeed: 0.01,\r\n                panSpeed: 0.1,\r\n            }\r\n        },\r\n        background: {\r\n            color: { r: 0x72, g: 0x64, b: 0x5b, }\r\n        },\r\n        plane: {\r\n            show: true,\r\n            material: {\r\n                color: { r: 0x99, g: 0x99, b: 0x99, },\r\n                specular: { r: 0x10, g: 0x10, b: 0x10, }\r\n            },\r\n            position: {\r\n                x: 0, y: 0, z: 0\r\n            }\r\n        },\r\n        sunlight: {\r\n            skyColor: { r: 0x44, g: 0x33, b: 0x33 },\r\n            groundColor: { r: 0x11, g: 0x11, b: 0x22 },\r\n            intensity: 1,\r\n        },\r\n        light1: {\r\n            // TODO: the positions of the lights are all wrong. \r\n            position: { x: 1, y: 1, z: 1 },\r\n            color: { r: 0xFF, g: 0xFF, b: 0xFF },\r\n            intensity: 1.35,\r\n        },\r\n        light2: {\r\n            position: { x: 0.5, y: 1, z: -1 },\r\n            color: { r: 0xFF, g: 0xAA, b: 0x00 },\r\n            intensity: 1,\r\n        },\r\n        object: {\r\n            scale: 0.01,\r\n            position: { x: 0, y: 0, z: 0 },\r\n            rotation: { x: 0, y: 0, z: 0 },\r\n            material: {\r\n                color: { r: 0x00, g: 0x55, b: 0xFF },\r\n                emissive: { r: 0x00, g: 0x00, b: 0x00 },\r\n                specular: { r: 0x11, g: 0x11, b: 0x11 },\r\n                flatShading: true,\r\n                shininess: 30,\r\n                wireframe: false,\r\n            }\r\n        }\r\n    }\r\n}\r\n","import * as THREE from \"./node_modules/three/src/Three\";\r\n\r\nexport const direction = {\r\n    forward: new THREE.Vector3(0, 0, -1),\r\n    back: new THREE.Vector3(0, 0, 1),\r\n    left: new THREE.Vector3(-1, 0, 0),\r\n    right: new THREE.Vector3(1, 0, 0),\r\n    up: new THREE.Vector3(0, 1, 0),\r\n    down: new THREE.Vector3(0, -1, 0),\r\n}\r\n\r\nexport class ViewerCamera {\r\n    camera: any; //THREE.PerspectiveCamera()\r\n    settings: any;\r\n    initialPosition: any; //THREE.Vector3;\r\n    initialRotation: any; //THREE.Quaternion;\r\n    cameraTarget: any; //THREE.Vector3;\r\n\r\n    constructor(camera, settings) {\r\n        this.camera = camera;\r\n        this.applySettings(settings);\r\n\r\n        // Save initial position\r\n        this.initialPosition = new THREE.Vector3();\r\n        this.initialRotation = new THREE.Quaternion();\r\n        this.initialPosition.copy(this.camera.position);\r\n        this.initialRotation.copy(this.camera.quaternion);\r\n    }\r\n\r\n    lookAt(position) { this.camera.lookAt(position); }\r\n\r\n    applySettings(newSettings) {\r\n        // TODO: camera updates aren't working\r\n        this.camera.fov = newSettings.camera.fov;\r\n        this.camera.zoom = newSettings.camera.zoom;\r\n        this.camera.near = newSettings.camera.near;\r\n        this.camera.far = newSettings.camera.far;\r\n        this.camera.position.copy(toVec3(newSettings.camera.position));\r\n        this.cameraTarget = toVec3(newSettings.camera.target);\r\n        this.camera.lookAt(this.cameraTarget);\r\n        this.settings = newSettings;\r\n    }\r\n\r\n    moveCameraBy(dir = direction.forward, speed = 1, onlyHoriz = false) {\r\n        let vector = new THREE.Vector3();\r\n        vector.copy(dir);\r\n        if (speed)\r\n            vector.multiplyScalar(speed);\r\n        vector.applyQuaternion(this.camera.quaternion);\r\n        const y = this.camera.position.y;\r\n        this.camera.position.add(vector);\r\n        if (onlyHoriz)\r\n            this.camera.position.y = y;\r\n    }\r\n\r\n    panCameraBy(pt) {\r\n        const speed = this.settings.camera.controls.panSpeed;\r\n        this.moveCameraBy(new THREE.Vector3(-pt.x, pt.y, 0), speed);\r\n    }\r\n\r\n    rotateCameraBy(pt) {\r\n        let euler = new THREE.Euler(0, 0, 0, 'YXZ');\r\n        euler.setFromQuaternion(this.camera.quaternion);\r\n        euler.y += -pt.x * this.settings.camera.controls.rotateSpeed;\r\n        euler.x += -pt.y * this.settings.camera.controls.rotateSpeed;\r\n        euler.z = 0;\r\n        const PI_2 = Math.PI / 2;\r\n        const minPolarAngle = -2 * Math.PI;\r\n        const maxPolarAngle = 2 * Math.PI;\r\n        euler.x = Math.max(PI_2 - maxPolarAngle, Math.min(PI_2 - minPolarAngle, euler.x));\r\n        this.camera.quaternion.setFromEuler(euler);\r\n    }\r\n\r\n    resetCamera() {\r\n        this.camera.position.copy(this.initialPosition);\r\n        this.camera.quaternion.copy(this.initialRotation);\r\n    }\r\n}\r\n\r\n//Helpers\r\n//TODO Remove this\r\nfunction toVec3(obj) {\r\n    return new THREE.Vector3(obj.x, obj.y, obj.z)\r\n}","import * as THREE from \"./node_modules/three/src/Three\";\r\nimport { DeepMerge } from \"./deep_merge\";\r\nimport { VIMLoader } from \"./VIMLoader\";\r\nimport { ViewerSettings } from \"./viewer_settings\";\r\nimport { ViewerCamera, direction } from \"./viewer_camera\";\r\n//import { ViewerGui } from \"./viewer_gui.js\";\r\n\r\n//import { Mesh } from \"./node_modules/three/src/Three\";\r\n\r\n/*\r\nVim Viewer \r\nCopyright VIMaec LLC, 2020\r\nLicensed under the terms of the MIT License\r\n*/\r\n\r\n//declare const Stats: any;\r\nexport let _2_48 = 223;    \r\nexport class Viewer\r\n{\r\n    canvas: HTMLCanvasElement;\r\n    logo: HTMLElement;\r\n    favicon: HTMLElement;\r\n\r\n    stats: any;\r\n    settings: any;\r\n    camera: THREE.PerspectiveCamera; //PerspectiveCamera;\r\n    renderer: THREE.WebGLRenderer; // THREE.WebGLRenderer\r\n    scene: THREE.Scene; // THREE.Scene\r\n    meshes = [];\r\n\r\n    plane: THREE.Mesh; // THREE.Mesh\r\n    sunlight: THREE.HemisphereLight ; // THREE.HemisphereLight\r\n    light1: THREE.DirectionalLight; // THREE.DirectionalLight\r\n    light2: THREE.DirectionalLight; // THREE.DirectionalLight\r\n    material: THREE.MeshPhongMaterial; // THREE.MeshPhongMaterial\r\n    removeListeners: Function;\r\n\r\n    cameraController: ViewerCamera;\r\n    controls: ViewerInput;\r\n    vim: any;\r\n\r\n    view(options)\r\n    {\r\n        this.settings = (new DeepMerge()).deepMerge(ViewerSettings.default, options, undefined);\r\n\r\n        //Init Canvas\r\n        {\r\n            // If a canvas is given, we will draw in it.\r\n            let canvas = document.getElementById(this.settings.canvasId);\r\n\r\n            // If no canvas is given, we create a new one\r\n            if (!canvas) {\r\n                canvas = document.createElement('canvas');\r\n                document.body.appendChild(canvas);\r\n            }\r\n            this.canvas = canvas as HTMLCanvasElement;\r\n        }\r\n\r\n        //Renderer\r\n        this.renderer = new THREE.WebGLRenderer({ antialias: true, canvas: this.canvas });\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n\r\n        // Create the camera and size everything appropriately \r\n        this.camera = new THREE.PerspectiveCamera();\r\n        this.cameraController = new ViewerCamera(\r\n            this.camera,\r\n            this.settings\r\n        );\r\n        this.resizeCanvas(true);\r\n\r\n        // Create scene object\r\n        this.scene = new THREE.Scene();\r\n\r\n        /*\r\n        if (this.settings.showGui) {\r\n            // Create a new DAT.gui controller \r\n            ViewerGui.bind(\r\n                this.settings,\r\n                settings => {\r\n                    this.settings = settings;\r\n                    this.updateScene();\r\n                }\r\n            );\r\n        }\r\n        */\r\n        \r\n        // Ground\r\n        this.plane = new THREE.Mesh(\r\n            new THREE.PlaneBufferGeometry(1000, 1000),\r\n            new THREE.MeshPhongMaterial()\r\n        );\r\n        this.plane.rotation.x = -Math.PI / 2;\r\n        this.scene.add(this.plane);\r\n\r\n        // Lights\r\n        this.sunlight = new THREE.HemisphereLight();\r\n        this.light1 = new THREE.DirectionalLight();\r\n        this.light2 = new THREE.DirectionalLight();\r\n\r\n        this.scene.add(this.sunlight);\r\n        this.scene.add(this.light1);\r\n        this.scene.add(this.light2);\r\n\r\n        // Material \r\n        this.material = new THREE.MeshPhongMaterial();\r\n\r\n        // Initial scene update: happens if controls change \r\n        this.updateScene();\r\n\r\n        /*\r\n        // Add Stats display \r\n        if (this.settings.showStats) {\r\n            this.stats = new Stats();\r\n            this.stats.dom.style.top = \"84px\";\r\n            this.stats.dom.style.left = \"16px\";\r\n            document.body.appendChild(this.stats.dom);\r\n        }\r\n        */\r\n\r\n        // Add Vim logo\r\n        const logo = document.createElement(\"img\");\r\n        logo.src = \"logo.png\";\r\n        logo.style.position = \"fixed\";\r\n        logo.style.top = \"16px\";\r\n        logo.style.left = \"16px\";\r\n        logo.height = 48;\r\n        logo.width = 128;\r\n        document.body.prepend(logo);\r\n\r\n        // Set Favicon\r\n        const favicon = document.createElement('img');\r\n        favicon.setAttribute('href', \"favicon.ico\");\r\n        document.head.appendChild(favicon);\r\n\r\n        // Add all of the appropriate mouse, touch-pad, and keyboard listeners\r\n        //Load Vim\r\n        this.loadFile(\r\n            this.settings.url,\r\n            vim => this.onVimLoaded(vim)\r\n        );\r\n\r\n        // Start Loop\r\n        this.animate();\r\n    }\r\n\r\n    onVimLoaded(vim) {\r\n\r\n        for (var i = 0; i < vim.meshes.length; ++i) {\r\n\r\n            this.meshes.push(vim.meshes[i]);\r\n            this.scene.add(vim.meshes[i]);\r\n        }\r\n\r\n        this.controls = new ViewerInput(this.canvas, this.settings, this.cameraController);\r\n        this.controls.register();\r\n        this.controls.viewer = this;\r\n        this.vim = vim;\r\n\r\n        vim.sphere.applyMatrix4(this.getViewMatrix());\r\n        this.lookAtSphere(vim.sphere, true);\r\n    }\r\n\r\n    loadFile(fileName, onSuccess : Function) {\r\n\r\n        function getExt(fileName) {\r\n            const indexOfQueryParams = fileName.lastIndexOf(\"?\");\r\n            if (indexOfQueryParams >= 0)\r\n                fileName = fileName.substring(0, indexOfQueryParams);\r\n            const extPos = fileName.lastIndexOf(\".\");\r\n            return fileName.slice(extPos + 1).toLowerCase();\r\n        }\r\n\r\n        console.log(\"Loading file: \" + fileName);\r\n        const ext = getExt(fileName);\r\n        if (ext != \"vim\") {\r\n            console.error(\"unhandled file format\");\r\n            return;\r\n        }\r\n\r\n        console.time(\"loadingVim\");\r\n        var loader = new VIMLoader();\r\n        loader.load(\r\n            fileName,\r\n            (vim) => {\r\n                console.log(\"Finished loading VIM: found \" + vim.meshes.length + \" objects\");\r\n                console.timeEnd(\"loadingVim\");\r\n                onSuccess(vim);\r\n            },\r\n            undefined,\r\n            undefined\r\n        );\r\n    }\r\n\r\n    // Calls render, and asks the framework to prepare the next frame \r\n    animate() {\r\n        requestAnimationFrame(() => this.animate());\r\n        this.resizeCanvas();\r\n        this.updateObjects();\r\n        //cameraControls.update();\r\n        this.renderer.render(this.scene, this.camera);\r\n        if (this.stats)\r\n            this.stats.update();\r\n    }\r\n\r\n    updateObjects() {\r\n        for (let i = 0; i < this.meshes.length; i++) {\r\n            this.applyViewMatrix(this.meshes[i])\r\n        }\r\n    }\r\n\r\n    applyViewMatrix(mesh) {\r\n        /*\r\n        const scale = scalarToVec(this.settings.object.scale);\r\n        mesh.scale.copy(scale);\r\n        mesh.position.copy(this.settings.object.position);\r\n        mesh.rotation.copy();\r\n        */\r\n        const matrix = this.getViewMatrix();\r\n        mesh.matrixAutoUpdate = false;\r\n        mesh.matrix.copy(matrix);\r\n    }\r\n\r\n    getViewMatrix() {\r\n        const pos = this.settings.object.position;\r\n        const rot = toQuaternion(this.settings.object.rotation);\r\n        const scl = scalarToVec(0.1);\r\n        const matrix = new THREE.Matrix4().compose(pos, rot, scl);\r\n        return matrix;\r\n    }\r\n\r\n    \r\n    highlight(geometry) : Function {\r\n        const wireframe = new THREE.WireframeGeometry(geometry);\r\n        const material = new THREE.LineBasicMaterial({\r\n            depthTest : false,\r\n            opacity : 0.5,\r\n            color : new THREE.Color(0x0000ff),\r\n            transparent : true,\r\n        });\r\n        const line = new THREE.LineSegments(wireframe, material);\r\n\r\n        this.scene.add(line);\r\n\r\n        //returns disposer\r\n        return () => {\r\n            this.scene.remove(line);\r\n            wireframe.dispose();\r\n            material.dispose();\r\n        }\r\n    }\r\n\r\n    createWorldGeometry(mesh, index) {\r\n        let geometry = mesh.geometry.clone();\r\n\r\n        let matrix = new THREE.Matrix4();\r\n        mesh.getMatrixAt(index, matrix);\r\n        matrix = this.getViewMatrix().multiply(matrix);\r\n        geometry.applyMatrix4(matrix);\r\n\r\n        return geometry;\r\n    }\r\n\r\n    lookAtSphere(sphere, setY: boolean = false) {\r\n        if(setY)\r\n            this.camera.position.setY(sphere.center.y); \r\n\r\n        const axis = this.camera.position.clone().sub(sphere.center).normalize();\r\n        const fovRadian = this.camera.fov * Math.PI / 180;\r\n        const dist = 1.33 * sphere.radius * (1 + 2 / Math.tan(fovRadian));\r\n        const pos = axis.clone().multiplyScalar(dist).add(sphere.center);\r\n\r\n        this.camera.lookAt(sphere.center);\r\n        this.camera.position.copy(pos);\r\n    }\r\n\r\n    lookAtBox(box, setY : boolean = false) {\r\n        this.lookAtSphere(box.getBoundingSphere(new THREE.Sphere()), setY);\r\n    }\r\n\r\n    getNodeIndex(mesh, instance) {\r\n        return mesh.userData.instanceIndices[instance];\r\n    }\r\n\r\n    focus(mesh, index) {\r\n        const geometry = this.createWorldGeometry(mesh, index);\r\n        const disposer = this.highlight(geometry);\r\n\r\n        geometry.computeBoundingSphere();\r\n        const sphere = geometry.boundingSphere.clone();\r\n        this.lookAtSphere(sphere);\r\n\r\n        return () => {\r\n            disposer();\r\n            geometry.dispose();\r\n        }\r\n    }\r\n\r\n    /*\r\n\r\n    addViews(views) {\r\n        const getSettingsMatrix = () => {\r\n            return toMatrix(\r\n                this.settings.object.position,\r\n                this.settings.object.rotation,\r\n                this.settings.object.scale\r\n            );\r\n        }\r\n\r\n        if (!views || !views.length)\r\n            return;\r\n        const folder = ViewerGui.gui.addFolder('views');\r\n        const obj = {};\r\n        const matrix = getSettingsMatrix();\r\n        for (let i = 0; i < views.length; ++i) {\r\n            const view = views[i];\r\n            const name = view.name;\r\n            if (view.x == 0 && view.y == 0 && view.z == 0)\r\n                continue;\r\n            obj[name] = function () {\r\n                console.log(\"Navigating to \" + name);\r\n                let pos = new THREE.Vector3(view.x, view.y, view.z + 5.5);\r\n                pos.applyMatrix4(matrix);\r\n                this.camera.position.copy(pos);\r\n            };\r\n            folder.add(obj, name);\r\n        }\r\n    }\r\n    */\r\n\r\n    resizeCanvas(force: boolean = false) {\r\n        if (!this.settings.autoResize && !force)\r\n            return;\r\n\r\n        const canvas = this.renderer.domElement;\r\n        const parent = canvas.parentElement as Element;\r\n        const w = window.innerWidth/ window.devicePixelRatio\r\n        const h = window.innerHeight / window.devicePixelRatio;\r\n        this.renderer.setSize(w, h, false);\r\n\r\n        // Set aspect ratio\r\n        this.camera.aspect = canvas.width / canvas.height;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n        // Called every frame in case settings are updated \r\n    updateScene() {\r\n\r\n        this.scene.background = toColor(this.settings.background.color);\r\n        this.plane.visible = this.settings.plane.show;\r\n        this.updateMaterial(this.plane.material, this.settings.plane.material);\r\n        this.plane.position.copy(toVec(this.settings.plane.position));\r\n        this.light1.position.copy(toVec(this.settings.light1.position));\r\n        this.light1.color = toColor(this.settings.light1.color);\r\n        this.light1.intensity = this.settings.light1.intensity;\r\n        this.light2.position.copy(toVec(this.settings.light2.position));\r\n        this.light2.color = toColor(this.settings.light2.color);\r\n        this.light2.intensity = this.settings.light2.intensity;\r\n        //this.sunlight.skyColor = toColor(this.settings.sunlight.skyColor);\r\n        this.sunlight.groundColor = toColor(this.settings.sunlight.groundColor);\r\n        this.sunlight.intensity = this.settings.sunlight.intensity;\r\n        this.cameraController.applySettings(this.settings);\r\n    }\r\n\r\n    updateMaterial(targetMaterial, settings) {\r\n        if ('color' in settings) targetMaterial.color = toColor(settings.color);\r\n        if ('flatShading' in settings) targetMaterial.flatShading = settings.flatShading;\r\n        if ('emissive' in settings) targetMaterial.emissive = toColor(settings.emissive);\r\n        if ('specular' in settings) targetMaterial.specular = toColor(settings.specular);\r\n        if ('wireframe' in settings) targetMaterial.wireframe = settings.wireframe;\r\n        if ('shininess' in settings) targetMaterial.shininess = settings.shininess;\r\n    }\r\n\r\n    //TODO: Add more granular ways to access the bim data.\r\n    getElementNameFromNodeIndex(nodeIndex: number) {\r\n\r\n        let elementIndex = this.vim.entities[\"Vim.Node\"][\"Rvt.Element\"][nodeIndex];\r\n        let stringIndex = this.vim.entities[\"Rvt.Element\"][\"Name\"][elementIndex];\r\n        let name = this.vim.strings[stringIndex];\r\n        return name;\r\n    }\r\n}\r\n\r\nconst KEYS = {\r\n    A: 65,\r\n    D: 68,\r\n    Q: 81,\r\n    E: 69,\r\n    S: 83,\r\n    W: 87,\r\n    LEFTARROW: 37,\r\n    UPARROW: 38,\r\n    RIGHTARROW: 39,\r\n    DOWNARROW: 40,\r\n    HOME: 36,\r\n    END: 37,\r\n    PAGEUP: 33,\r\n    PAGEDOWN: 34,\r\n};\r\n\r\nclass ViewerInput {\r\n\r\n    canvas: HTMLCanvasElement;\r\n    settings: any;\r\n    cameraController: ViewerCamera;\r\n    unregister: Function;\r\n    isMouseDown: Boolean;\r\n\r\n    // TODO figure out the right pattern for inputs\r\n    viewer: Viewer;\r\n    focusDisposer: Function;\r\n\r\n    constructor(canvas: HTMLCanvasElement, settings: any, cameraController: ViewerCamera) {\r\n        this.canvas = canvas;\r\n        this.settings = settings;\r\n        this.cameraController = cameraController;\r\n        this.unregister = function () { };\r\n        this.isMouseDown = false;\r\n    }\r\n\r\n    register() {\r\n        this.canvas.addEventListener('mousedown', this.onMouseDown);\r\n        this.canvas.addEventListener('wheel', this.onMouseWheel);\r\n        this.canvas.addEventListener('mousemove', this.onMouseMove);\r\n        this.canvas.addEventListener('mouseup', this.onMouseUp);\r\n        document.addEventListener('keydown', this.onKeyDown);\r\n\r\n        this.unregister = function () {\r\n            this.canvas.removeEventListener('mousedown', this.onMouseDown);\r\n            this.canvas.removeEventListener('wheel', this.onMouseWheel);\r\n            this.canvas.removeEventListener('mousemove', this.onMouseMove);\r\n            this.canvas.removeEventListener('mouseup', this.onMouseUp);\r\n            document.removeEventListener('keydown', this.onKeyDown);\r\n\r\n            this.isMouseDown = false;\r\n            this.unregister = function () { };\r\n        };\r\n    }\r\n\r\n    onKeyDown = (event) => {\r\n        let speed = this.settings.camera.controls.speed;\r\n        if (event.shiftKey)\r\n            speed *= this.settings.camera.controls.shiftMultiplier;\r\n        if (event.altKey)\r\n            speed *= this.settings.camera.controls.altMultiplier;\r\n        switch (event.keyCode) {\r\n            case KEYS.A:\r\n                this.cameraController.moveCameraBy(direction.left, speed);\r\n                break;\r\n            case KEYS.LEFTARROW:\r\n                this.cameraController.moveCameraBy(direction.left, speed, true);\r\n                break;\r\n            case KEYS.D:\r\n                this.cameraController.moveCameraBy(direction.right, speed);\r\n                break;\r\n            case KEYS.RIGHTARROW:\r\n                this.cameraController.moveCameraBy(direction.right, speed, true);\r\n                break;\r\n            case KEYS.W:\r\n                this.cameraController.moveCameraBy(direction.forward, speed);\r\n                break;\r\n            case KEYS.UPARROW:\r\n                this.cameraController.moveCameraBy(direction.forward, speed, true);\r\n                break;\r\n            case KEYS.S:\r\n                this.cameraController.moveCameraBy(direction.back, speed);\r\n                break;\r\n            case KEYS.DOWNARROW:\r\n                this.cameraController.moveCameraBy(direction.back, speed, true);\r\n                break;\r\n            case KEYS.E:\r\n            case KEYS.PAGEUP:\r\n                this.cameraController.moveCameraBy(direction.up, speed);\r\n                break;\r\n            case KEYS.Q:\r\n            case KEYS.PAGEDOWN:\r\n                this.cameraController.moveCameraBy(direction.down, speed);\r\n                break;\r\n            case KEYS.HOME:\r\n                this.cameraController.resetCamera();\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n        event.preventDefault();\r\n    };\r\n\r\n    onMouseMove = (event) => {\r\n        if (!this.isMouseDown)\r\n            return;\r\n\r\n        event.preventDefault();\r\n\r\n        // https://github.com/mrdoob/three.js/blob/master/examples/jsm/controls/PointerLockControls.js\r\n        const deltaX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n        const deltaY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n        const delta = new THREE.Vector2(deltaX, deltaY);\r\n\r\n        if (event.buttons & 2)\r\n            this.cameraController.panCameraBy(delta);\r\n\r\n        else\r\n            this.cameraController.rotateCameraBy(delta);\r\n    };\r\n\r\n    onMouseWheel = (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        const speed = this.settings.camera.controls.zoomSpeed;\r\n        const dir = event.deltaY > 0 ? direction.back : direction.forward;\r\n        this.cameraController.moveCameraBy(dir, speed);\r\n    };\r\n\r\n\r\n    onMouseDown = (event) => {\r\n        event.preventDefault();\r\n        this.isMouseDown = true;\r\n\r\n        const hits = this.mouseRaycast(event.x, event.y);\r\n        if (hits.length > 0) {\r\n            const mesh = hits[0].object;\r\n            const index = hits[0].instanceId;\r\n\r\n            const nodeIndex = this.viewer.getNodeIndex(mesh, index);\r\n            const name = this.viewer.getElementNameFromNodeIndex(nodeIndex);\r\n\r\n            this.focusDisposer?.call(this);\r\n            this.focusDisposer = this.viewer.focus(mesh, index);\r\n\r\n            console.log(\"Raycast hit.\")\r\n            console.log(\"Position:\" + hits[0].point.x + \",\" + hits[0].point.y + \",\" + hits[0].point.z);\r\n            console.log(\"Element: \" + name);\r\n        }\r\n\r\n        // Manually set the focus since calling preventDefault above\r\n        // prevents the browser from setting it automatically.    \r\n        this.canvas.focus ? this.canvas.focus() : window.focus();\r\n    };\r\n\r\n    mouseRaycast(mouseX, mouseY) {\r\n        let x = (mouseX / window.innerWidth) * 2 - 1;\r\n        let y = - (mouseY / window.innerHeight) * 2 + 1;\r\n        let mouse = new THREE.Vector2(x, y);\r\n        const raycaster = new THREE.Raycaster();\r\n        raycaster.setFromCamera(mouse, this.cameraController.camera);\r\n        //raycaster.firstHitOnly = true;\r\n        return raycaster.intersectObjects(this.viewer.meshes);\r\n    }\r\n\r\n    onMouseUp = (_) => {\r\n        this.isMouseDown = false;\r\n    };\r\n}\r\n\r\n// Helpers\r\nfunction isColor(obj) {\r\n    return typeof (obj) === 'object' && 'r' in obj && 'g' in obj && 'b' in obj;\r\n}\r\n\r\nfunction toColor(c) {\r\n    if (!isColor(c))\r\n        throw new Error(\"Not a color\");\r\n    return new THREE.Color(c.r / 255, c.g / 255, c.b / 255);\r\n}\r\n\r\nfunction toVec(obj) {\r\n    return new THREE.Vector3(obj.x, obj.y, obj.z)\r\n}\r\n\r\nfunction scalarToVec(x) {\r\n    return new THREE.Vector3(x, x, x);\r\n}\r\n\r\nfunction toEuler(rot) {\r\n    return new THREE.Euler(rot.x * Math.PI / 180, rot.y * Math.PI / 180, rot.z * Math.PI / 180)\r\n}\r\n\r\nfunction toQuaternion(rot) {\r\n    const q = new THREE.Quaternion();\r\n    q.setFromEuler(toEuler(rot));\r\n    return q;\r\n}\r\n\r\nfunction toMatrix(pos, rot, scl) {\r\n    const m = new THREE.Matrix4();\r\n    m.compose(toVec(pos), toQuaternion(rot), scalarToVec(scl));\r\n    return m;\r\n}\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","AddEquation","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","LinearFilter","LinearMipmapLinearFilter","UnsignedShortType","UnsignedIntType","FloatType","HalfFloatType","UnsignedInt248Type","RGBFormat","RGBAFormat","DepthFormat","DepthStencilFormat","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","KeepStencilOp","StaticDrawUsage","GLSL3","EventDispatcher","assign","addEventListener","type","listener","undefined","this","_listeners","listeners","indexOf","push","hasEventListener","removeEventListener","listenerArray","index","splice","dispatchEvent","event","target","array","slice","i","l","length","_lut","toString","_seed","DEG2RAD","Math","PI","RAD2DEG","generateUUID","d0","random","d1","d2","d3","toUpperCase","clamp","min","max","euclideanModulo","n","m","mapLinear","x","a1","a2","b1","b2","lerp","y","t","damp","lambda","dt","exp","pingpong","abs","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","seededRandom","s","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","set","console","warn","constructor","width","height","setScalar","scalar","setX","setY","setComponent","Error","getComponent","clone","copy","v","add","w","addVectors","addScalar","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","e","elements","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","dot","cross","lengthSq","sqrt","manhattanLength","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","Matrix3","arguments","error","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","identity","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","d","f","g","h","invert","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","r","setUvTransform","tx","ty","sx","sy","rotation","cx","cy","scale","rotate","theta","translate","matrix","_canvas","ImageUtils","getDataURL","image","test","src","HTMLCanvasElement","canvas","document","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","DEFAULT_IMAGE","mapping","DEFAULT_MAPPING","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","uuid","name","mipmaps","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","serializeImage","HTMLImageElement","ImageBitmap","data","Array","create","isTexture","updateMatrix","source","toJSON","meta","isRootObject","textures","output","metadata","generator","wrap","images","url","isArray","isDataTexture","dispose","transformUv","uv","Vector4","z","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","options","super","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","setSize","Quaternion","_x","_y","_z","_w","static","qa","qb","qm","slerp","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","Number","EPSILON","len","tDir","_onChangeCallback","quaternion","setFromEuler","euler","update","isEuler","_order","c1","c3","s1","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","setFromUnitVectors","vFrom","vTo","angleTo","rotateTowards","step","conjugate","p","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","_onChange","callback","multiplyVectors","applyEuler","applyQuaternion","_quaternion","applyAxisAngle","applyNormalMatrix","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","_vector","reflect","normal","dz","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","setFromMatrixColumn","sz","Box3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","count","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","setFromObject","object","expandByObject","box","isEmpty","getCenter","getSize","point","expandByVector","vector","expandByScalar","updateWorldMatrix","geometry","boundingBox","computeBoundingBox","_box","union","children","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","_center","_extents","_v0","_v1","_v2","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","distanceToPoint","getBoundingSphere","intersect","_points","v0","extents","j","_testAxis","p0","p1","p2","Sphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","getMaxScaleOnAxis","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","lookAt","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","QdN","Matrix4","n14","n24","n34","n41","n42","n43","n44","copyPosition","setFromMatrix3","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","_zero","_one","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","isVector3","t14","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeScale","makeShear","position","x2","y2","z2","wx","wy","wz","decompose","_m1","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","Euler","DefaultOrder","asin","setFromQuaternion","_matrix","setFromVector3","reorder","newOrder","toVector3","optionalResult","RotationOrders","Layers","mask","channel","enable","enableAll","toggle","disable","disableAll","layers","_object3DId","_q1","_target","_position","_scale","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","parent","DefaultUp","defineProperties","configurable","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","animations","userData","isObject3D","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","isLight","remove","clear","attach","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","updateMatrixWorld","force","updateParents","updateChildren","geometries","materials","shapes","skeletons","serialize","library","element","JSON","stringify","isInstancedMesh","instanceMatrix","isMesh","isLine","isPoints","parameters","shape","isSkinnedMesh","bindMode","bindMatrix","skeleton","material","uuids","animation","extractFromCache","cache","values","recursive","parse","child","_vector1","_vector2","_normalMatrix","Plane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","delta","start","intersectsLine","startSign","endSign","end","coplanarPoint","optionalNormalMatrix","referencePoint","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","targetLengthSq","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","getBarycoord","p3","uv1","uv2","uv3","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getNormal","getPlane","getUV","isFrontFacing","d4","vc","d5","d6","vb","va","materialId","Material","fog","blending","side","flatShading","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","isMaterial","onBeforeCompile","customProgramCacheKey","setValues","newValue","currentValue","isColor","isRoot","color","getHex","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","map","matcap","alphaMap","lightMap","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","envMap","reflectivity","refractionRatio","combine","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","morphNormals","skinning","srcPlanes","dstPlanes","_colorKeywords","_hslA","_hslB","hue2rgb","SRGBToLinear","LinearToSRGB","setRGB","setHex","setStyle","hex","setHSL","style","handleAlpha","string","parseFloat","exec","components","parseInt","charAt","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","lerpColors","lerpHSL","normalized","lightMapIntensity","NAMES","isMeshBasicMaterial","itemSize","TypeError","usage","updateRange","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float16BufferAttribute","Float32Array","Float64Array","arrayMax","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZ","setXYZW","onUpload","isFloat16BufferAttribute","TYPED_ARRAYS","buffer","_id","_obj","_offset","_boxMorphTargets","attributes","morphAttributes","morphTargetsRelative","groups","boundingSphere","drawRange","Infinity","isBufferGeometry","getIndex","setIndex","getAttribute","setAttribute","deleteAttribute","hasAttribute","addGroup","materialIndex","clearGroups","setDrawRange","needsUpdate","tangent","computeBoundingSphere","morphAttributesPosition","isGLBufferAttribute","morphAttribute","isNaN","jl","computeFaceNormals","computeTangents","indices","positions","normals","uvs","nVertices","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","isFinite","group","tmp2","n2","handleVertex","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","normalizeNormals","merge","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","array2","geometry2","newAttribute","morphArray","keys","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","updateMorphTargets","checkBufferGeometryIntersection","raycaster","morphPosition","morphInfluences","morphTargetInfluences","influence","boneTransform","intersection","checkIntersection","face","morphTargetDictionary","ml","String","intersects","groupMaterial","faceIndex","isGeometry","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","scope","vertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","property","isMatrix3","isMatrix4","isVector2","isVector4","mergeUniforms","uniforms","merged","UniformsUtils","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","Camera","fov","aspect","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","isShaderMaterial","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","skew","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderer","scene","currentXrEnabled","xr","currentRenderTarget","getRenderTarget","setRenderTarget","render","_needsFlipEnvMap","isCubeTexture","dummy","isInteger","fromEquirectangularTexture","shader","tEquirect","mesh","currentMinFilter","stencil","Frustum","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","isInterleavedBufferAttribute","deleteBuffer","delete","bufferType","cached","bytesPerElement","elementSize","createBuffer","bindBuffer","bufferData","FLOAT","HALF_FLOAT","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","PlaneGeometry","width_half","height_half","segment_width","segment_height","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","background","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","WebGLBackground","cubemaps","state","objects","clearColor","planeMesh","boxMesh","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","renderList","forceClear","isScene","session","getSession","environmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","toneMapping","unshift","WebGLBindingStates","maxVertexAttributes","MAX_VERTEX_ATTRIBS","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","bindVertexArrayObject","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","newAttributes","enabledAttributes","attributeDivisors","program","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","reset","resetDefaultState","setup","updateBuffers","programMap","stateMap","createVertexArray","createVertexArrayOES","getBindingState","cachedAttributes","geometryAttributes","attributesNum","cachedAttribute","geometryAttribute","saveCache","ELEMENT_ARRAY_BUFFER","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","ARRAY_BUFFER","isInstancedBufferAttribute","instanceColor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","MAX_SAMPLES","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","useCache","materialProperties","nGlobal","lGlobal","clippingState","WebGLCubeMaps","mapTextureMapping","onTextureDispose","cubemap","has","currentRenderList","getRenderList","setRenderList","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","programs","autoReset","instanceCount","TRIANGLES","LINES","LINE_STRIP","LINE_LOOP","POINTS","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","sort","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","onInstancedMeshDispose","instancedMesh","buffergeometry","DataTexture2DArray","wrapR","DataTexture3D","physical","transmission","transmissionMap","isDataTexture2DArray","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","updateCache","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getShaderErrors","status","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","trim","split","join","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","WebGLProgram","cacheKey","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","gammaFactorDefine","customExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","prefixVertex","prefixFragment","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","vertexUvs","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","vertexErrors","fragmentErrors","getError","VALIDATE_STATUS","diagnostics","prefix","cachedUniforms","deleteShader","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","isWebGLRenderTarget","getParameters","shadows","environment","isMeshStandardMaterial","bones","nVertexUniforms","nVertexMatrices","getMaxBones","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","finish","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","cameras","list","UniformsCache","light","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","ShadowUniformsCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","WebGLRenderState","lightsArray","shadowsArray","setupLights","setupLightsView","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderCallDepth","renderState","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","mapPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","result","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","isMeshDistanceMaterial","renderObject","shadowCamera","k","kl","depthMaterial","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","setOp","stencilOp","clearStencil","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","setFlipSided","setCullFace","CULL_FACE","equationToGL","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","MAX","MIN_EXT","MAX_EXT","factorToGL","ZERO","ONE","SRC_COLOR","SRC_ALPHA","SRC_ALPHA_SATURATE","DST_COLOR","DST_ALPHA","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_DST_ALPHA","BLEND","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","setPolygonOffset","factor","POLYGON_OFFSET_FILL","activeTexture","webglSlot","TEXTURE0","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","SCISSOR_TEST","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","RED","R32F","R16F","R8","RGB","RGB32F","RGB16F","RGB8","RGBA32F","RGBA16F","RGBA8","filterFallback","LINEAR","textureProperties","__webglInit","deleteTexture","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","uploadCubeTexture","wrappingToGL","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","filterToGL","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_3D","TEXTURE_2D_ARRAY","TEXTURE_WRAP_R","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","textureNeedsPowerOfTwo","isDepthTexture","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT24","DEPTH24_STENCIL8","DEPTH_COMPONENT16","DEPTH_STENCIL","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","RENDERBUFFER","samples","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","isWebGLMultisampleRenderTarget","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","isCube","createFramebuffer","createRenderbuffer","COLOR_ATTACHMENT0","webglDepthTexture","setupDepthTexture","setupDepthRenderbuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","blitFramebuffer","WebGLUtils","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RED_INTEGER","RG","RG_INTEGER","RGB_INTEGER","RGBA_INTEGER","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","WebXRController","_targetRay","_grip","_hand","WebXRManager","framebufferScaleFactor","referenceSpace","referenceSpaceType","pose","controllers","inputSourcesMap","Map","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controller","inputSource","onSessionEnd","forEach","disconnect","setFramebuffer","isPresenting","onInputSourcesChange","inputSources","removed","added","getController","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","async","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","antialias","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","cameraLPos","cameraRPos","updateCamera","getCamera","depthNear","depthFar","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","transform","WebGLMaterials","refreshUniformsCommon","uvScaleMap","uv2ScaleMap","refreshUniformsStandard","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","isMeshDepthMaterial","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","WebGLRenderer","display","createCanvasElement","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderState","renderStateStack","domElement","sortObjects","toneMappingExposure","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","shift","message","initGLContext","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","DYNAMIC_DRAW","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","isGroup","isLOD","isImmediateRenderObject","renderObjects","isArrayCamera","camera2","renderObjectImmediate","lightsStateVersion","programCacheKey","programChange","needsLights","materialNeedsLights","progUniforms","uniformsList","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isOrthographicCamera","boneTexture","boneMatrices","boneTextureSize","window","opaqueObjects","transparentObjects","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","halfFloatSupportedByExt","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","resetState","__THREE_DEVTOOLS__","CustomEvent","detail","WebGL1Renderer","joints","inputState","pinching","inputPose","gripPose","handPose","targetRay","grip","hand","visibilityState","inputjoint","jointPose","getJointPose","jointName","joint","jointRadius","indexTip","thumbTip","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","InterleavedBufferAttribute","interleavedBuffer","_geometry","interleavedBuffers","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","transformVertex","vertexPosition","mvPosition","_currentLevel","levels","addLevel","getCurrentLevel","getObjectForDistance","_basePosition","_skinIndex","_skinWeight","bindMatrixInverse","bind","calculateInverses","normalizeSkinWeights","skinWeight","skinIndex","weight","boneIndex","boneInverses","isBone","_offsetMatrix","_identityMatrix","inverse","bone","getBoneByName","fromJSON","json","boneInverse","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","linecap","linejoin","getColorAt","getMatrixAt","raycastTimes","instanceId","setColorAt","setMatrixAt","_start","_end","computeLineDistances","lineDistances","params","Line","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","VideoTexture","video","requestVideoFrameCallback","updateVideo","CompressedTexture","CanvasTexture","DepthTexture","Points","readyState","HAVE_CURRENT_DATA","isCanvasTexture","linkedList","dim","clockwise","last","sum","signedArea","insertNode","removeNode","filterPoints","again","steiner","prev","earcutLinked","ear","invSize","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","locallyInside","isValidDiagonal","splitPolygon","compareX","eliminateHole","hole","outerNode","hx","hy","mx","my","tanMin","sectorContainsSector","findHoleBridge","getLeftmost","leftmost","px","py","intersectsPolygon","inside","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","Node","an","bp","ShapeUtils","area","contour","isClockWise","pts","triangulateShape","holes","holeIndices","faces","removeDupEndPts","addContour","holeIndex","hasHoles","outerLen","queue","eliminateHoles","Earcut","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","splineTube","binormal","position2","extrudeByPath","getSpacedPoints","computeFrenetFrames","shapePoints","extractPoints","reverse","hl","ahole","concat","scalePt2","pt","vec","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","vert","binormals","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","layer","buildLidFaces","buildSideFaces","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","ParametricGeometry","func","slices","stacks","EPS","pu","pv","sliceCount","ShapeGeometry","indexOffset","shapeVertices","shapeHoles","shapeHole","vertex","edge","edges","ol","edge1","edge2","ior","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","interpolant","evaluate","resultBuffer","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","duration","NormalAnimationBlendMode","parseKeyframeTrack","trackType","typeName","toLowerCase","getTrackTypeForValueTypeName","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","startTime","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","slerpFlat","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","morphTarget","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","Cache","files","file","DefaultLoadingManager","onLoad","onProgress","onError","urlModifier","isLoading","itemsLoaded","itemsTotal","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","manager","crossOrigin","withCredentials","resourcePath","requestHeader","load","loadAsync","Promise","resolve","reject","setCrossOrigin","setWithCredentials","setPath","setResourcePath","setRequestHeader","loading","AnimationLoader","CompressedTextureLoader","CubeTextureLoader","TextureLoader","Curve","arcLengthDivisions","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","ArcCurve","aRadius","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","t2","calc","setTimeout","dataUriRegexResult","request","mimeType","isBase64","decodeURIComponent","atob","response","responseType","charCodeAt","Blob","parser","DOMParser","parseFromString","XMLHttpRequest","open","callbacks","overrideMimeType","header","send","setResponseType","setMimeType","text","loaded","loadTexture","texDatas","mipmapCount","isCubemap","onImageLoad","onImageError","substr","urls","texData","isJPEG","search","getPoint","getPointAt","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","getTangent","pt1","pt2","getTangentAt","segments","closed","mat","MAX_VALUE","tz","isEllipseCurve","twoPi","deltaAngle","samePoints","isArcCurve","pz","CatmullRomCurve3","curveType","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezierCurve","v3","CubicBezierCurve3","LineCurve","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","CurvePath","curves","autoClose","Path","currentPoint","Light","LightShadow","_frameExtents","_viewportCount","_viewports","SpotLightShadow","power","PointLightShadow","_cubeDirections","_cubeUps","DirectionalLightShadow","isCatmullRomCurve3","intPoint","isCubicBezierCurve","isCubicBezierCurve3","isLineCurve","isLineCurve3","isQuadraticBezierCurve","isQuadraticBezierCurve3","isSplineCurve","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","diff","segmentLength","lens","cacheLengths","sums","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","arc","absarc","absellipse","ellipse","firstPoint","lastPoint","getPointsHoles","holesPts","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","isSpotLightShadow","scaleW","scaleH","isDirectionalLightShadow","SphericalHarmonics3","zero","getAt","coeff","getIrradianceAt","addScaledSH","shBasis","getTexture","shading","setTextures","InstancedBufferGeometry","InstancedBufferAttribute","ImageBitmapLoader","createImageBitmap","fetch","ShapePath","subPaths","currentPath","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","arrayBuffer","getArrayBuffer","typedArray","bufferAttribute","drawcalls","offsets","isImageBitmapLoader","setOptions","fetchOptions","credentials","then","res","blob","imageBitmap","catch","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","tmpPoints","tmpHoles","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","Font","generateShapes","paths","chars","line_height","yMax","yMin","underlineThickness","char","ret","createPath","createPaths","glyph","glyphs","familyName","cpx","cpy","cpx1","cpy1","cpx2","cpy2","outline","_cachedOutline","ha","FontLoader","substring","font","AudioLoader","HemisphereLightProbe","sky","ground","AmbientLightProbe","bufferCopy","AudioContext","webkitAudioContext","decodeAudioData","audioBuffer","isHemisphereLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","accumulate","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetIndex","workOffset","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","rootNode","node","findNode","nodeName","firstValidIndex","nCachedObjects_","bindings","unbind","root","isAnimationObjectGroup","sanitizeNodeName","matches","results","objectName","objectIndex","propertyIndex","lastDot","lastIndexOf","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","total","inUse","bindingsPerObject","indicesByUUID","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","play","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setLoop","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","action","halt","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","InstancedInterleavedBuffer","GLBufferAttribute","Raycaster","Mesh","LOD","Sprite","PointCloud","ascSort","intersectObject","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","setBuffer","setType","setItemSize","setCount","setFromCamera","coords","intersectObjects","ImmediateRenderObject","_boneMatrix","_matrixWorldInv","getBoneList","boneList","_floatView","EXTRA_LOD_SIGMA","TOTAL_LODS","LOD_MAX","backgroundMaterial","_lodPlanes","_sizeLods","_sigmas","_createPlanes","lod","sizeLod","sigma","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","Uniform","Spline","construct","fromPoints","initFromArray","getControlPointsArray","reparametrizeByArcLength","setColors","isSkeletonHelper","extractUrlBase","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","getInverse","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","getChildByName","renderDepth","getWorldRotation","applyMatrix","eulerOrder","useQuaternion","setDrawMode","drawMode","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","computeOffsets","removeAttribute","maxInstancedCount","linePrecision","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","metal","transparency","clearTarget","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","gain","createGain","connect","getInput","autoplay","detune","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","delay","currentTime","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","pause","getFilters","setFilters","setTargetAtTime","getDetune","getFilter","setFilter","getPlaybackRate","getLoop","setLoopStart","setLoopEnd","getVolume","setVolume","updateCubeMap","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","revision","__THREE__","DeepMerge","isMergeableObject","val","emptyTarget","cloneIfNecessary","optionsArgument","deepMerge","defaultArrayMerge","destination","mergeObject","arrayMerge","VIMLoader","exception","parseBFastFromArray","bytes","parseBFast","byteOffset","byteLength","getMaterialColorLookup","vim","materialData","entities","xs","ys","zs","ws","ids","getElements","elementData","names","strings","getRooms","roomData","Magic","DataStart","DataEnd","NumArrays","pos","begin","joinedNames","TextDecoder","decode","constructEntityTable","bfast","columnData","columnType","columnName","constructEntityTables","tableName","constructVIM","lookup","assets","g3d","constructG3D","metaBuffer","nDescriptors","desc","association","semantic","attributeTypeIndex","dataType","dataArity","rawData","attributeToTypedArray","findAttribute","VIM","assoc","arity","attr","addAttributeToGeometry","createBufferGeometry","positionTypedArray","indicesTypedArray","indexBuffer","buildMeshes","meshSubmeshes","submeshIndexOffset","submeshMaterial","materialColors","meshCount","submeshCount","indexCount","resultMeshes","meshIndices","meshVertexPositions","meshVertexColors","meshStart","meshEnd","submesh","submeshStart","submeshEnd","resultMesh","floatsToMatrix","instanceMeshes","instanceTransforms","rawMeshes","allocateMeshes","meshes","centers","applyMatrices","rooms","timeEnd","meshReferenceCounts","instanceCounters","meshIndex","matrixAsArray","instanceIndices","ViewerSettings","showGui","showStats","controls","speed","altMultiplier","shiftMultiplier","zoomSpeed","rotateSpeed","panSpeed","show","sunlight","light1","light2","forward","back","down","ViewerCamera","applySettings","initialPosition","initialRotation","newSettings","toVec3","cameraTarget","moveCameraBy","onlyHoriz","panCameraBy","rotateCameraBy","PI_2","minPolarAngle","maxPolarAngle","resetCamera","_2_48","Viewer","getElementById","canvasId","createElement","body","appendChild","devicePixelRatio","cameraController","resizeCanvas","updateScene","logo","prepend","favicon","head","loadFile","onVimLoaded","ViewerInput","register","viewer","getViewMatrix","lookAtSphere","fileName","onSuccess","ext","indexOfQueryParams","extPos","getExt","updateObjects","applyViewMatrix","rot","toEuler","toQuaternion","scl","highlight","createWorldGeometry","fovRadian","dist","lookAtBox","getNodeIndex","instance","disposer","autoResize","parentElement","innerWidth","innerHeight","toColor","updateMaterial","toVec","targetMaterial","getElementNameFromNodeIndex","nodeIndex","elementIndex","stringIndex","onKeyDown","shiftKey","altKey","keyCode","onMouseMove","isMouseDown","deltaX","movementX","mozMovementX","webkitMovementX","deltaY","movementY","mozMovementY","webkitMovementY","buttons","onMouseWheel","stopPropagation","onMouseDown","hits","mouseRaycast","focusDisposer","onMouseUp","_","unregister","mouseX","mouseY","mouse"],"sourceRoot":""}